"use strict";var og=Object.create;var nl=Object.defineProperty;var ag=Object.getOwnPropertyDescriptor;var cg=Object.getOwnPropertyNames;var fg=Object.getPrototypeOf,ug=Object.prototype.hasOwnProperty;var lg=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of cg(e))!ug.call(t,i)&&i!==r&&nl(t,i,{get:()=>e[i],enumerable:!(n=ag(e,i))||n.enumerable});return t};var gn=(t,e,r)=>(r=t!=null?og(fg(t)):{},lg(e||!t||!t.__esModule?nl(r,"default",{value:t,enumerable:!0}):r,t));const ft=require("electron"),Wt=require("node:path"),$a=require("node:os"),on=require("node:fs"),Jr=require("path"),xs=require("util"),ai=require("fs"),Kn=require("crypto"),zo=require("assert"),Xo=require("events"),dg=require("os"),Hc=require("net"),jc=require("stream"),hg=require("child_process"),wh=require("buffer"),pg=require("http"),gg=require("https"),mg=require("tls"),_g=require("dns"),Eg=require("zlib");function yg(t){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:()=>t[r]})}}return e.default=t,Object.freeze(e)}const xn=yg(on);var js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ag(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var fc={exports:{}},bg=t=>{const e=typeof t;return t!==null&&(e==="object"||e==="function")};const Yn=bg,wg=new Set(["__proto__","prototype","constructor"]),Sg=t=>!t.some(e=>wg.has(e));function Qs(t){const e=t.split("."),r=[];for(let n=0;n<e.length;n++){let i=e[n];for(;i[i.length-1]==="\\"&&e[n+1]!==void 0;)i=i.slice(0,-1)+".",i+=e[++n];r.push(i)}return Sg(r)?r:[]}var Ig={get(t,e,r){if(!Yn(t)||typeof e!="string")return r===void 0?t:r;const n=Qs(e);if(n.length!==0){for(let i=0;i<n.length;i++)if(t=t[n[i]],t==null){if(i!==n.length-1)return r;break}return t===void 0?r:t}},set(t,e,r){if(!Yn(t)||typeof e!="string")return t;const n=t,i=Qs(e);for(let s=0;s<i.length;s++){const o=i[s];Yn(t[o])||(t[o]={}),s===i.length-1&&(t[o]=r),t=t[o]}return n},delete(t,e){if(!Yn(t)||typeof e!="string")return!1;const r=Qs(e);for(let n=0;n<r.length;n++){const i=r[n];if(n===r.length-1)return delete t[i],!0;if(t=t[i],!Yn(t))return!1}},has(t,e){if(!Yn(t)||typeof e!="string")return!1;const r=Qs(e);if(r.length===0)return!1;for(let n=0;n<r.length;n++)if(Yn(t)){if(!(r[n]in t))return!1;t=t[r[n]]}else return!1;return!0}},Qc={exports:{}},qc={exports:{}},Kc={exports:{}},Wc={exports:{}};const Sh=ai;Wc.exports=t=>new Promise(e=>{Sh.access(t,r=>{e(!r)})});Wc.exports.sync=t=>{try{return Sh.accessSync(t),!0}catch{return!1}};var vg=Wc.exports,Gc={exports:{}},Vc={exports:{}};const Ih=(t,...e)=>new Promise(r=>{r(t(...e))});Vc.exports=Ih;Vc.exports.default=Ih;var $g=Vc.exports;const Cg=$g,vh=t=>{if(!((Number.isInteger(t)||t===1/0)&&t>0))return Promise.reject(new TypeError("Expected `concurrency` to be a number from 1 and up"));const e=[];let r=0;const n=()=>{r--,e.length>0&&e.shift()()},i=(a,c,...f)=>{r++;const u=Cg(a,...f);c(u),u.then(n,n)},s=(a,c,...f)=>{r<t?i(a,c,...f):e.push(i.bind(null,a,c,...f))},o=(a,...c)=>new Promise(f=>s(a,f,...c));return Object.defineProperties(o,{activeCount:{get:()=>r},pendingCount:{get:()=>e.length},clearQueue:{value:()=>{e.length=0}}}),o};Gc.exports=vh;Gc.exports.default=vh;var xg=Gc.exports;const il=xg;class $h extends Error{constructor(e){super(),this.value=e}}const Rg=(t,e)=>Promise.resolve(t).then(e),Ng=t=>Promise.all(t).then(e=>e[1]===!0&&Promise.reject(new $h(e[0])));var kg=(t,e,r)=>{r=Object.assign({concurrency:1/0,preserveOrder:!0},r);const n=il(r.concurrency),i=[...t].map(o=>[o,n(Rg,o,e)]),s=il(r.preserveOrder?1:1/0);return Promise.all(i.map(o=>s(Ng,o))).then(()=>{}).catch(o=>o instanceof $h?o.value:Promise.reject(o))};const Ch=Jr,xh=vg,Pg=kg;Kc.exports=(t,e)=>(e=Object.assign({cwd:process.cwd()},e),Pg(t,r=>xh(Ch.resolve(e.cwd,r)),e));Kc.exports.sync=(t,e)=>{e=Object.assign({cwd:process.cwd()},e);for(const r of t)if(xh.sync(Ch.resolve(e.cwd,r)))return r};var Tg=Kc.exports;const Un=Jr,Rh=Tg;qc.exports=(t,e={})=>{const r=Un.resolve(e.cwd||""),{root:n}=Un.parse(r),i=[].concat(t);return new Promise(s=>{(function o(a){Rh(i,{cwd:a}).then(c=>{c?s(Un.join(a,c)):a===n?s(null):o(Un.dirname(a))})})(r)})};qc.exports.sync=(t,e={})=>{let r=Un.resolve(e.cwd||"");const{root:n}=Un.parse(r),i=[].concat(t);for(;;){const s=Rh.sync(i,{cwd:r});if(s)return Un.join(r,s);if(r===n)return null;r=Un.dirname(r)}};var Bg=qc.exports;const Nh=Bg;Qc.exports=async({cwd:t}={})=>Nh("package.json",{cwd:t});Qc.exports.sync=({cwd:t}={})=>Nh.sync("package.json",{cwd:t});var Og=Qc.exports,Yc={exports:{}};const Ft=Jr,kh=dg,Ln=kh.homedir(),zc=kh.tmpdir(),{env:vi}=process,Lg=t=>{const e=Ft.join(Ln,"Library");return{data:Ft.join(e,"Application Support",t),config:Ft.join(e,"Preferences",t),cache:Ft.join(e,"Caches",t),log:Ft.join(e,"Logs",t),temp:Ft.join(zc,t)}},Dg=t=>{const e=vi.APPDATA||Ft.join(Ln,"AppData","Roaming"),r=vi.LOCALAPPDATA||Ft.join(Ln,"AppData","Local");return{data:Ft.join(r,t,"Data"),config:Ft.join(e,t,"Config"),cache:Ft.join(r,t,"Cache"),log:Ft.join(r,t,"Log"),temp:Ft.join(zc,t)}},Ug=t=>{const e=Ft.basename(Ln);return{data:Ft.join(vi.XDG_DATA_HOME||Ft.join(Ln,".local","share"),t),config:Ft.join(vi.XDG_CONFIG_HOME||Ft.join(Ln,".config"),t),cache:Ft.join(vi.XDG_CACHE_HOME||Ft.join(Ln,".cache"),t),log:Ft.join(vi.XDG_STATE_HOME||Ft.join(Ln,".local","state"),t),temp:Ft.join(zc,e,t)}},Ph=(t,e)=>{if(typeof t!="string")throw new TypeError(`Expected string, got ${typeof t}`);return e=Object.assign({suffix:"nodejs"},e),e.suffix&&(t+=`-${e.suffix}`),process.platform==="darwin"?Lg(t):process.platform==="win32"?Dg(t):Ug(t)};Yc.exports=Ph;Yc.exports.default=Ph;var Mg=Yc.exports,cn={},$t={};Object.defineProperty($t,"__esModule",{value:!0});$t.NOOP=$t.LIMIT_FILES_DESCRIPTORS=$t.LIMIT_BASENAME_LENGTH=$t.IS_USER_ROOT=$t.IS_POSIX=$t.DEFAULT_TIMEOUT_SYNC=$t.DEFAULT_TIMEOUT_ASYNC=$t.DEFAULT_WRITE_OPTIONS=$t.DEFAULT_READ_OPTIONS=$t.DEFAULT_FOLDER_MODE=$t.DEFAULT_FILE_MODE=$t.DEFAULT_ENCODING=void 0;const Fg="utf8";$t.DEFAULT_ENCODING=Fg;const Hg=438;$t.DEFAULT_FILE_MODE=Hg;const jg=511;$t.DEFAULT_FOLDER_MODE=jg;const Qg={};$t.DEFAULT_READ_OPTIONS=Qg;const qg={};$t.DEFAULT_WRITE_OPTIONS=qg;const Kg=5e3;$t.DEFAULT_TIMEOUT_ASYNC=Kg;const Wg=100;$t.DEFAULT_TIMEOUT_SYNC=Wg;const Gg=!!process.getuid;$t.IS_POSIX=Gg;const Vg=process.getuid?!process.getuid():!1;$t.IS_USER_ROOT=Vg;const Yg=128;$t.LIMIT_BASENAME_LENGTH=Yg;const zg=1e4;$t.LIMIT_FILES_DESCRIPTORS=zg;const Xg=()=>{};$t.NOOP=Xg;var Jo={},Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.attemptifySync=Oi.attemptifyAsync=void 0;const Th=$t,Jg=(t,e=Th.NOOP)=>function(){return t.apply(void 0,arguments).catch(e)};Oi.attemptifyAsync=Jg;const Zg=(t,e=Th.NOOP)=>function(){try{return t.apply(void 0,arguments)}catch(r){return e(r)}};Oi.attemptifySync=Zg;var Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});const em=$t,Bh={isChangeErrorOk:t=>{const{code:e}=t;return e==="ENOSYS"||!em.IS_USER_ROOT&&(e==="EINVAL"||e==="EPERM")},isRetriableError:t=>{const{code:e}=t;return e==="EMFILE"||e==="ENFILE"||e==="EAGAIN"||e==="EBUSY"||e==="EACCESS"||e==="EACCS"||e==="EPERM"},onChangeError:t=>{if(!Bh.isChangeErrorOk(t))throw t}};Xc.default=Bh;var Li={},Jc={};Object.defineProperty(Jc,"__esModule",{value:!0});const tm=$t,Ot={interval:25,intervalId:void 0,limit:tm.LIMIT_FILES_DESCRIPTORS,queueActive:new Set,queueWaiting:new Set,init:()=>{Ot.intervalId||(Ot.intervalId=setInterval(Ot.tick,Ot.interval))},reset:()=>{Ot.intervalId&&(clearInterval(Ot.intervalId),delete Ot.intervalId)},add:t=>{Ot.queueWaiting.add(t),Ot.queueActive.size<Ot.limit/2?Ot.tick():Ot.init()},remove:t=>{Ot.queueWaiting.delete(t),Ot.queueActive.delete(t)},schedule:()=>new Promise(t=>{const e=()=>Ot.remove(r),r=()=>t(e);Ot.add(r)}),tick:()=>{if(!(Ot.queueActive.size>=Ot.limit)){if(!Ot.queueWaiting.size)return Ot.reset();for(const t of Ot.queueWaiting){if(Ot.queueActive.size>=Ot.limit)break;Ot.queueWaiting.delete(t),Ot.queueActive.add(t),t()}}}};Jc.default=Ot;Object.defineProperty(Li,"__esModule",{value:!0});Li.retryifySync=Li.retryifyAsync=void 0;const rm=Jc,nm=(t,e)=>function(r){return function n(){return rm.default.schedule().then(i=>t.apply(void 0,arguments).then(s=>(i(),s),s=>{if(i(),Date.now()>=r)throw s;if(e(s)){const o=Math.round(100+400*Math.random());return new Promise(c=>setTimeout(c,o)).then(()=>n.apply(void 0,arguments))}throw s}))}};Li.retryifyAsync=nm;const im=(t,e)=>function(r){return function n(){try{return t.apply(void 0,arguments)}catch(i){if(Date.now()>r)throw i;if(e(i))return n.apply(void 0,arguments);throw i}}};Li.retryifySync=im;Object.defineProperty(Jo,"__esModule",{value:!0});const Rt=ai,Er=xs,yr=Oi,tr=Xc,Ir=Li,sm={chmodAttempt:yr.attemptifyAsync(Er.promisify(Rt.chmod),tr.default.onChangeError),chownAttempt:yr.attemptifyAsync(Er.promisify(Rt.chown),tr.default.onChangeError),closeAttempt:yr.attemptifyAsync(Er.promisify(Rt.close)),fsyncAttempt:yr.attemptifyAsync(Er.promisify(Rt.fsync)),mkdirAttempt:yr.attemptifyAsync(Er.promisify(Rt.mkdir)),realpathAttempt:yr.attemptifyAsync(Er.promisify(Rt.realpath)),statAttempt:yr.attemptifyAsync(Er.promisify(Rt.stat)),unlinkAttempt:yr.attemptifyAsync(Er.promisify(Rt.unlink)),closeRetry:Ir.retryifyAsync(Er.promisify(Rt.close),tr.default.isRetriableError),fsyncRetry:Ir.retryifyAsync(Er.promisify(Rt.fsync),tr.default.isRetriableError),openRetry:Ir.retryifyAsync(Er.promisify(Rt.open),tr.default.isRetriableError),readFileRetry:Ir.retryifyAsync(Er.promisify(Rt.readFile),tr.default.isRetriableError),renameRetry:Ir.retryifyAsync(Er.promisify(Rt.rename),tr.default.isRetriableError),statRetry:Ir.retryifyAsync(Er.promisify(Rt.stat),tr.default.isRetriableError),writeRetry:Ir.retryifyAsync(Er.promisify(Rt.write),tr.default.isRetriableError),chmodSyncAttempt:yr.attemptifySync(Rt.chmodSync,tr.default.onChangeError),chownSyncAttempt:yr.attemptifySync(Rt.chownSync,tr.default.onChangeError),closeSyncAttempt:yr.attemptifySync(Rt.closeSync),mkdirSyncAttempt:yr.attemptifySync(Rt.mkdirSync),realpathSyncAttempt:yr.attemptifySync(Rt.realpathSync),statSyncAttempt:yr.attemptifySync(Rt.statSync),unlinkSyncAttempt:yr.attemptifySync(Rt.unlinkSync),closeSyncRetry:Ir.retryifySync(Rt.closeSync,tr.default.isRetriableError),fsyncSyncRetry:Ir.retryifySync(Rt.fsyncSync,tr.default.isRetriableError),openSyncRetry:Ir.retryifySync(Rt.openSync,tr.default.isRetriableError),readFileSyncRetry:Ir.retryifySync(Rt.readFileSync,tr.default.isRetriableError),renameSyncRetry:Ir.retryifySync(Rt.renameSync,tr.default.isRetriableError),statSyncRetry:Ir.retryifySync(Rt.statSync,tr.default.isRetriableError),writeSyncRetry:Ir.retryifySync(Rt.writeSync,tr.default.isRetriableError)};Jo.default=sm;var Zc={};Object.defineProperty(Zc,"__esModule",{value:!0});const om={isFunction:t=>typeof t=="function",isString:t=>typeof t=="string",isUndefined:t=>typeof t>"u"};Zc.default=om;var ef={};Object.defineProperty(ef,"__esModule",{value:!0});const qs={},uc={next:t=>{const e=qs[t];if(!e)return;e.shift();const r=e[0];r?r(()=>uc.next(t)):delete qs[t]},schedule:t=>new Promise(e=>{let r=qs[t];r||(r=qs[t]=[]),r.push(e),!(r.length>1)&&e(()=>uc.next(t))})};ef.default=uc;var tf={};Object.defineProperty(tf,"__esModule",{value:!0});const am=Jr,sl=$t,ol=Jo,Br={store:{},create:t=>{const e=`000000${Math.floor(Math.random()*16777215).toString(16)}`.slice(-6),r=Date.now().toString().slice(-10),n="tmp-",i=`.${n}${r}${e}`;return`${t}${i}`},get:(t,e,r=!0)=>{const n=Br.truncate(e(t));return n in Br.store?Br.get(t,e,r):(Br.store[n]=r,[n,()=>delete Br.store[n]])},purge:t=>{Br.store[t]&&(delete Br.store[t],ol.default.unlinkAttempt(t))},purgeSync:t=>{Br.store[t]&&(delete Br.store[t],ol.default.unlinkSyncAttempt(t))},purgeSyncAll:()=>{for(const t in Br.store)Br.purgeSync(t)},truncate:t=>{const e=am.basename(t);if(e.length<=sl.LIMIT_BASENAME_LENGTH)return t;const r=/^(\.?)(.*?)((?:\.[^.]+)?(?:\.tmp-\d{10}[a-f0-9]{6})?)$/.exec(e);if(!r)return t;const n=e.length-sl.LIMIT_BASENAME_LENGTH;return`${t.slice(0,-e.length)}${r[1]}${r[2].slice(0,-n)}${r[3]}`}};process.on("exit",Br.purgeSyncAll);tf.default=Br;Object.defineProperty(cn,"__esModule",{value:!0});cn.writeFileSync=cn.writeFile=cn.readFileSync=cn.readFile=void 0;const Oh=Jr,sr=$t,vt=Jo,Or=Zc,cm=ef,Mn=tf;function Lh(t,e=sr.DEFAULT_READ_OPTIONS){var r;if(Or.default.isString(e))return Lh(t,{encoding:e});const n=Date.now()+((r=e.timeout)!==null&&r!==void 0?r:sr.DEFAULT_TIMEOUT_ASYNC);return vt.default.readFileRetry(n)(t,e)}cn.readFile=Lh;function Dh(t,e=sr.DEFAULT_READ_OPTIONS){var r;if(Or.default.isString(e))return Dh(t,{encoding:e});const n=Date.now()+((r=e.timeout)!==null&&r!==void 0?r:sr.DEFAULT_TIMEOUT_SYNC);return vt.default.readFileSyncRetry(n)(t,e)}cn.readFileSync=Dh;const Uh=(t,e,r,n)=>{if(Or.default.isFunction(r))return Uh(t,e,sr.DEFAULT_WRITE_OPTIONS,r);const i=Mh(t,e,r);return n&&i.then(n,n),i};cn.writeFile=Uh;const Mh=async(t,e,r=sr.DEFAULT_WRITE_OPTIONS)=>{var n;if(Or.default.isString(r))return Mh(t,e,{encoding:r});const i=Date.now()+((n=r.timeout)!==null&&n!==void 0?n:sr.DEFAULT_TIMEOUT_ASYNC);let s=null,o=null,a=null,c=null,f=null;try{r.schedule&&(s=await r.schedule(t)),o=await cm.default.schedule(t),t=await vt.default.realpathAttempt(t)||t,[c,a]=Mn.default.get(t,r.tmpCreate||Mn.default.create,r.tmpPurge!==!1);const u=sr.IS_POSIX&&Or.default.isUndefined(r.chown),l=Or.default.isUndefined(r.mode);if(u||l){const d=await vt.default.statAttempt(t);d&&(r={...r},u&&(r.chown={uid:d.uid,gid:d.gid}),l&&(r.mode=d.mode))}const h=Oh.dirname(t);await vt.default.mkdirAttempt(h,{mode:sr.DEFAULT_FOLDER_MODE,recursive:!0}),f=await vt.default.openRetry(i)(c,"w",r.mode||sr.DEFAULT_FILE_MODE),r.tmpCreated&&r.tmpCreated(c),Or.default.isString(e)?await vt.default.writeRetry(i)(f,e,0,r.encoding||sr.DEFAULT_ENCODING):Or.default.isUndefined(e)||await vt.default.writeRetry(i)(f,e,0,e.length,0),r.fsync!==!1&&(r.fsyncWait!==!1?await vt.default.fsyncRetry(i)(f):vt.default.fsyncAttempt(f)),await vt.default.closeRetry(i)(f),f=null,r.chown&&await vt.default.chownAttempt(c,r.chown.uid,r.chown.gid),r.mode&&await vt.default.chmodAttempt(c,r.mode);try{await vt.default.renameRetry(i)(c,t)}catch(d){if(d.code!=="ENAMETOOLONG")throw d;await vt.default.renameRetry(i)(c,Mn.default.truncate(t))}a(),c=null}finally{f&&await vt.default.closeAttempt(f),c&&Mn.default.purge(c),s&&s(),o&&o()}},Fh=(t,e,r=sr.DEFAULT_WRITE_OPTIONS)=>{var n;if(Or.default.isString(r))return Fh(t,e,{encoding:r});const i=Date.now()+((n=r.timeout)!==null&&n!==void 0?n:sr.DEFAULT_TIMEOUT_SYNC);let s=null,o=null,a=null;try{t=vt.default.realpathSyncAttempt(t)||t,[o,s]=Mn.default.get(t,r.tmpCreate||Mn.default.create,r.tmpPurge!==!1);const c=sr.IS_POSIX&&Or.default.isUndefined(r.chown),f=Or.default.isUndefined(r.mode);if(c||f){const l=vt.default.statSyncAttempt(t);l&&(r={...r},c&&(r.chown={uid:l.uid,gid:l.gid}),f&&(r.mode=l.mode))}const u=Oh.dirname(t);vt.default.mkdirSyncAttempt(u,{mode:sr.DEFAULT_FOLDER_MODE,recursive:!0}),a=vt.default.openSyncRetry(i)(o,"w",r.mode||sr.DEFAULT_FILE_MODE),r.tmpCreated&&r.tmpCreated(o),Or.default.isString(e)?vt.default.writeSyncRetry(i)(a,e,0,r.encoding||sr.DEFAULT_ENCODING):Or.default.isUndefined(e)||vt.default.writeSyncRetry(i)(a,e,0,e.length,0),r.fsync!==!1&&(r.fsyncWait!==!1?vt.default.fsyncSyncRetry(i)(a):vt.default.fsyncAttempt(a)),vt.default.closeSyncRetry(i)(a),a=null,r.chown&&vt.default.chownSyncAttempt(o,r.chown.uid,r.chown.gid),r.mode&&vt.default.chmodSyncAttempt(o,r.mode);try{vt.default.renameSyncRetry(i)(o,t)}catch(l){if(l.code!=="ENAMETOOLONG")throw l;vt.default.renameSyncRetry(i)(o,Mn.default.truncate(t))}s(),o=null}finally{a&&vt.default.closeSyncAttempt(a),o&&Mn.default.purge(o)}};cn.writeFileSync=Fh;var lc={exports:{}},Hh={},mn={},zn={},Rs={},ht={},vs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(I){if(super(),!t.IDENTIFIER.test(I))throw new Error("CodeGen: name must be a valid identifier");this.str=I}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(I){super(),this._items=typeof I=="string"?[I]:I}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const I=this._items[0];return I===""||I==='""'}get str(){var I;return(I=this._str)!==null&&I!==void 0?I:this._str=this._items.reduce((R,P)=>`${R}${P}`,"")}get names(){var I;return(I=this._names)!==null&&I!==void 0?I:this._names=this._items.reduce((R,P)=>(P instanceof r&&(R[P.str]=(R[P.str]||0)+1),R),{})}}t._Code=n,t.nil=new n("");function i(E,...I){const R=[E[0]];let P=0;for(;P<I.length;)a(R,I[P]),R.push(E[++P]);return new n(R)}t._=i;const s=new n("+");function o(E,...I){const R=[d(E[0])];let P=0;for(;P<I.length;)R.push(s),a(R,I[P]),R.push(s,d(E[++P]));return c(R),new n(R)}t.str=o;function a(E,I){I instanceof n?E.push(...I._items):I instanceof r?E.push(I):E.push(l(I))}t.addCodeArg=a;function c(E){let I=1;for(;I<E.length-1;){if(E[I]===s){const R=f(E[I-1],E[I+1]);if(R!==void 0){E.splice(I-1,3,R);continue}E[I++]="+"}I++}}function f(E,I){if(I==='""')return E;if(E==='""')return I;if(typeof E=="string")return I instanceof r||E[E.length-1]!=='"'?void 0:typeof I!="string"?`${E.slice(0,-1)}${I}"`:I[0]==='"'?E.slice(0,-1)+I.slice(1):void 0;if(typeof I=="string"&&I[0]==='"'&&!(E instanceof r))return`"${E}${I.slice(1)}`}function u(E,I){return I.emptyStr()?E:E.emptyStr()?I:o`${E}${I}`}t.strConcat=u;function l(E){return typeof E=="number"||typeof E=="boolean"||E===null?E:d(Array.isArray(E)?E.join(","):E)}function h(E){return new n(d(E))}t.stringify=h;function d(E){return JSON.stringify(E).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=d;function m(E){return typeof E=="string"&&t.IDENTIFIER.test(E)?new n(`.${E}`):i`[${E}]`}t.getProperty=m;function _(E){if(typeof E=="string"&&t.IDENTIFIER.test(E))return new n(`${E}`);throw new Error(`CodeGen: invalid export name: ${E}, use explicit $id name mapping`)}t.getEsmExportName=_;function y(E){return new n(E.toString())}t.regexpCode=y})(vs);var dc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=vs;class r extends Error{constructor(f){super(`CodeGen: "code" for ${f} not defined`),this.value=f.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:f,parent:u}={}){this._names={},this._prefixes=f,this._parent=u}toName(f){return f instanceof e.Name?f:this.name(f)}name(f){return new e.Name(this._newName(f))}_newName(f){const u=this._names[f]||this._nameGroup(f);return`${f}${u.index++}`}_nameGroup(f){var u,l;if(!((l=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||l===void 0)&&l.has(f)||this._prefixes&&!this._prefixes.has(f))throw new Error(`CodeGen: prefix "${f}" is not allowed in this scope`);return this._names[f]={prefix:f,index:0}}}t.Scope=i;class s extends e.Name{constructor(f,u){super(u),this.prefix=f}setValue(f,{property:u,itemIndex:l}){this.value=f,this.scopePath=(0,e._)`.${new e.Name(u)}[${l}]`}}t.ValueScopeName=s;const o=(0,e._)`\n`;class a extends i{constructor(f){super(f),this._values={},this._scope=f.scope,this.opts={...f,_n:f.lines?o:e.nil}}get(){return this._scope}name(f){return new s(f,this._newName(f))}value(f,u){var l;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(f),{prefix:d}=h,m=(l=u.key)!==null&&l!==void 0?l:u.ref;let _=this._values[d];if(_){const I=_.get(m);if(I)return I}else _=this._values[d]=new Map;_.set(m,h);const y=this._scope[d]||(this._scope[d]=[]),E=y.length;return y[E]=u.ref,h.setValue(u,{property:d,itemIndex:E}),h}getValue(f,u){const l=this._values[f];if(l)return l.get(u)}scopeRefs(f,u=this._values){return this._reduceValues(u,l=>{if(l.scopePath===void 0)throw new Error(`CodeGen: name "${l}" has no value`);return(0,e._)`${f}${l.scopePath}`})}scopeCode(f=this._values,u,l){return this._reduceValues(f,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},u,l)}_reduceValues(f,u,l={},h){let d=e.nil;for(const m in f){const _=f[m];if(!_)continue;const y=l[m]=l[m]||new Map;_.forEach(E=>{if(y.has(E))return;y.set(E,n.Started);let I=u(E);if(I){const R=this.opts.es5?t.varKinds.var:t.varKinds.const;d=(0,e._)`${d}${R} ${E} = ${I};${this.opts._n}`}else if(I=h==null?void 0:h(E))d=(0,e._)`${d}${I}${this.opts._n}`;else throw new r(E);y.set(E,n.Completed)})}return d}}t.ValueScope=a})(dc);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=vs,r=dc;var n=vs;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var i=dc;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class s{optimizeNodes(){return this}optimizeNames(g,S){return this}}class o extends s{constructor(g,S,U){super(),this.varKind=g,this.name=S,this.rhs=U}render({es5:g,_n:S}){const U=g?r.varKinds.var:this.varKind,pe=this.rhs===void 0?"":` = ${this.rhs}`;return`${U} ${this.name}${pe};`+S}optimizeNames(g,S){if(g[this.name.str])return this.rhs&&(this.rhs=Y(this.rhs,g,S)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(g,S,U){super(),this.lhs=g,this.rhs=S,this.sideEffects=U}render({_n:g}){return`${this.lhs} = ${this.rhs};`+g}optimizeNames(g,S){if(!(this.lhs instanceof e.Name&&!g[this.lhs.str]&&!this.sideEffects))return this.rhs=Y(this.rhs,g,S),this}get names(){const g=this.lhs instanceof e.Name?{}:{...this.lhs.names};return ue(g,this.rhs)}}class c extends a{constructor(g,S,U,pe){super(g,U,pe),this.op=S}render({_n:g}){return`${this.lhs} ${this.op}= ${this.rhs};`+g}}class f extends s{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`${this.label}:`+g}}class u extends s{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`break${this.label?` ${this.label}`:""};`+g}}class l extends s{constructor(g){super(),this.error=g}render({_n:g}){return`throw ${this.error};`+g}get names(){return this.error.names}}class h extends s{constructor(g){super(),this.code=g}render({_n:g}){return`${this.code};`+g}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(g,S){return this.code=Y(this.code,g,S),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class d extends s{constructor(g=[]){super(),this.nodes=g}render(g){return this.nodes.reduce((S,U)=>S+U.render(g),"")}optimizeNodes(){const{nodes:g}=this;let S=g.length;for(;S--;){const U=g[S].optimizeNodes();Array.isArray(U)?g.splice(S,1,...U):U?g[S]=U:g.splice(S,1)}return g.length>0?this:void 0}optimizeNames(g,S){const{nodes:U}=this;let pe=U.length;for(;pe--;){const me=U[pe];me.optimizeNames(g,S)||(Z(g,me.names),U.splice(pe,1))}return U.length>0?this:void 0}get names(){return this.nodes.reduce((g,S)=>J(g,S.names),{})}}class m extends d{render(g){return"{"+g._n+super.render(g)+"}"+g._n}}class _ extends d{}class y extends m{}y.kind="else";class E extends m{constructor(g,S){super(S),this.condition=g}render(g){let S=`if(${this.condition})`+super.render(g);return this.else&&(S+="else "+this.else.render(g)),S}optimizeNodes(){super.optimizeNodes();const g=this.condition;if(g===!0)return this.nodes;let S=this.else;if(S){const U=S.optimizeNodes();S=this.else=Array.isArray(U)?new y(U):U}if(S)return g===!1?S instanceof E?S:S.nodes:this.nodes.length?this:new E(ie(g),S instanceof E?[S]:S.nodes);if(!(g===!1||!this.nodes.length))return this}optimizeNames(g,S){var U;if(this.else=(U=this.else)===null||U===void 0?void 0:U.optimizeNames(g,S),!!(super.optimizeNames(g,S)||this.else))return this.condition=Y(this.condition,g,S),this}get names(){const g=super.names;return ue(g,this.condition),this.else&&J(g,this.else.names),g}}E.kind="if";class I extends m{}I.kind="for";class R extends I{constructor(g){super(),this.iteration=g}render(g){return`for(${this.iteration})`+super.render(g)}optimizeNames(g,S){if(super.optimizeNames(g,S))return this.iteration=Y(this.iteration,g,S),this}get names(){return J(super.names,this.iteration.names)}}class P extends I{constructor(g,S,U,pe){super(),this.varKind=g,this.name=S,this.from=U,this.to=pe}render(g){const S=g.es5?r.varKinds.var:this.varKind,{name:U,from:pe,to:me}=this;return`for(${S} ${U}=${pe}; ${U}<${me}; ${U}++)`+super.render(g)}get names(){const g=ue(super.names,this.from);return ue(g,this.to)}}class Q extends I{constructor(g,S,U,pe){super(),this.loop=g,this.varKind=S,this.name=U,this.iterable=pe}render(g){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(g)}optimizeNames(g,S){if(super.optimizeNames(g,S))return this.iterable=Y(this.iterable,g,S),this}get names(){return J(super.names,this.iterable.names)}}class z extends m{constructor(g,S,U){super(),this.name=g,this.args=S,this.async=U}render(g){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(g)}}z.kind="func";class X extends d{render(g){return"return "+super.render(g)}}X.kind="return";class M extends m{render(g){let S="try"+super.render(g);return this.catch&&(S+=this.catch.render(g)),this.finally&&(S+=this.finally.render(g)),S}optimizeNodes(){var g,S;return super.optimizeNodes(),(g=this.catch)===null||g===void 0||g.optimizeNodes(),(S=this.finally)===null||S===void 0||S.optimizeNodes(),this}optimizeNames(g,S){var U,pe;return super.optimizeNames(g,S),(U=this.catch)===null||U===void 0||U.optimizeNames(g,S),(pe=this.finally)===null||pe===void 0||pe.optimizeNames(g,S),this}get names(){const g=super.names;return this.catch&&J(g,this.catch.names),this.finally&&J(g,this.finally.names),g}}class F extends m{constructor(g){super(),this.error=g}render(g){return`catch(${this.error})`+super.render(g)}}F.kind="catch";class K extends m{render(g){return"finally"+super.render(g)}}K.kind="finally";class se{constructor(g,S={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...S,_n:S.lines?`
`:""},this._extScope=g,this._scope=new r.Scope({parent:g}),this._nodes=[new _]}toString(){return this._root.render(this.opts)}name(g){return this._scope.name(g)}scopeName(g){return this._extScope.name(g)}scopeValue(g,S){const U=this._extScope.value(g,S);return(this._values[U.prefix]||(this._values[U.prefix]=new Set)).add(U),U}getScopeValue(g,S){return this._extScope.getValue(g,S)}scopeRefs(g){return this._extScope.scopeRefs(g,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(g,S,U,pe){const me=this._scope.toName(S);return U!==void 0&&pe&&(this._constants[me.str]=U),this._leafNode(new o(g,me,U)),me}const(g,S,U){return this._def(r.varKinds.const,g,S,U)}let(g,S,U){return this._def(r.varKinds.let,g,S,U)}var(g,S,U){return this._def(r.varKinds.var,g,S,U)}assign(g,S,U){return this._leafNode(new a(g,S,U))}add(g,S){return this._leafNode(new c(g,t.operators.ADD,S))}code(g){return typeof g=="function"?g():g!==e.nil&&this._leafNode(new h(g)),this}object(...g){const S=["{"];for(const[U,pe]of g)S.length>1&&S.push(","),S.push(U),(U!==pe||this.opts.es5)&&(S.push(":"),(0,e.addCodeArg)(S,pe));return S.push("}"),new e._Code(S)}if(g,S,U){if(this._blockNode(new E(g)),S&&U)this.code(S).else().code(U).endIf();else if(S)this.code(S).endIf();else if(U)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(g){return this._elseNode(new E(g))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(E,y)}_for(g,S){return this._blockNode(g),S&&this.code(S).endFor(),this}for(g,S){return this._for(new R(g),S)}forRange(g,S,U,pe,me=this.opts.es5?r.varKinds.var:r.varKinds.let){const Ie=this._scope.toName(g);return this._for(new P(me,Ie,S,U),()=>pe(Ie))}forOf(g,S,U,pe=r.varKinds.const){const me=this._scope.toName(g);if(this.opts.es5){const Ie=S instanceof e.Name?S:this.var("_arr",S);return this.forRange("_i",0,(0,e._)`${Ie}.length`,Se=>{this.var(me,(0,e._)`${Ie}[${Se}]`),U(me)})}return this._for(new Q("of",pe,me,S),()=>U(me))}forIn(g,S,U,pe=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(g,(0,e._)`Object.keys(${S})`,U);const me=this._scope.toName(g);return this._for(new Q("in",pe,me,S),()=>U(me))}endFor(){return this._endBlockNode(I)}label(g){return this._leafNode(new f(g))}break(g){return this._leafNode(new u(g))}return(g){const S=new X;if(this._blockNode(S),this.code(g),S.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(X)}try(g,S,U){if(!S&&!U)throw new Error('CodeGen: "try" without "catch" and "finally"');const pe=new M;if(this._blockNode(pe),this.code(g),S){const me=this.name("e");this._currNode=pe.catch=new F(me),S(me)}return U&&(this._currNode=pe.finally=new K,this.code(U)),this._endBlockNode(F,K)}throw(g){return this._leafNode(new l(g))}block(g,S){return this._blockStarts.push(this._nodes.length),g&&this.code(g).endBlock(S),this}endBlock(g){const S=this._blockStarts.pop();if(S===void 0)throw new Error("CodeGen: not in self-balancing block");const U=this._nodes.length-S;if(U<0||g!==void 0&&U!==g)throw new Error(`CodeGen: wrong number of nodes: ${U} vs ${g} expected`);return this._nodes.length=S,this}func(g,S=e.nil,U,pe){return this._blockNode(new z(g,S,U)),pe&&this.code(pe).endFunc(),this}endFunc(){return this._endBlockNode(z)}optimize(g=1){for(;g-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(g){return this._currNode.nodes.push(g),this}_blockNode(g){this._currNode.nodes.push(g),this._nodes.push(g)}_endBlockNode(g,S){const U=this._currNode;if(U instanceof g||S&&U instanceof S)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${S?`${g.kind}/${S.kind}`:g.kind}"`)}_elseNode(g){const S=this._currNode;if(!(S instanceof E))throw new Error('CodeGen: "else" without "if"');return this._currNode=S.else=g,this}get _root(){return this._nodes[0]}get _currNode(){const g=this._nodes;return g[g.length-1]}set _currNode(g){const S=this._nodes;S[S.length-1]=g}}t.CodeGen=se;function J(x,g){for(const S in g)x[S]=(x[S]||0)+(g[S]||0);return x}function ue(x,g){return g instanceof e._CodeOrName?J(x,g.names):x}function Y(x,g,S){if(x instanceof e.Name)return U(x);if(!pe(x))return x;return new e._Code(x._items.reduce((me,Ie)=>(Ie instanceof e.Name&&(Ie=U(Ie)),Ie instanceof e._Code?me.push(...Ie._items):me.push(Ie),me),[]));function U(me){const Ie=S[me.str];return Ie===void 0||g[me.str]!==1?me:(delete g[me.str],Ie)}function pe(me){return me instanceof e._Code&&me._items.some(Ie=>Ie instanceof e.Name&&g[Ie.str]===1&&S[Ie.str]!==void 0)}}function Z(x,g){for(const S in g)x[S]=(x[S]||0)-(g[S]||0)}function ie(x){return typeof x=="boolean"||typeof x=="number"||x===null?!x:(0,e._)`!${B(x)}`}t.not=ie;const oe=v(t.operators.AND);function O(...x){return x.reduce(oe)}t.and=O;const j=v(t.operators.OR);function C(...x){return x.reduce(j)}t.or=C;function v(x){return(g,S)=>g===e.nil?S:S===e.nil?g:(0,e._)`${B(g)} ${x} ${B(S)}`}function B(x){return x instanceof e.Name?x:(0,e._)`(${x})`}})(ht);var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.checkStrictMode=Re.getErrorPath=Re.Type=Re.useFunc=Re.setEvaluated=Re.evaluatedPropsToName=Re.mergeEvaluated=Re.eachItem=Re.unescapeJsonPointer=Re.escapeJsonPointer=Re.escapeFragment=Re.unescapeFragment=Re.schemaRefOrVal=Re.schemaHasRulesButRef=Re.schemaHasRules=Re.checkUnknownRules=Re.alwaysValidSchema=Re.toHash=void 0;const Pt=ht,fm=vs;function um(t){const e={};for(const r of t)e[r]=!0;return e}Re.toHash=um;function lm(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(jh(t,e),!Qh(e,t.self.RULES.all))}Re.alwaysValidSchema=lm;function jh(t,e=t.schema){const{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;const i=n.RULES.keywords;for(const s in e)i[s]||Wh(t,`unknown keyword: "${s}"`)}Re.checkUnknownRules=jh;function Qh(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(e[r])return!0;return!1}Re.schemaHasRules=Qh;function dm(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Re.schemaHasRulesButRef=dm;function hm({topSchemaRef:t,schemaPath:e},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Pt._)`${r}`}return(0,Pt._)`${t}${e}${(0,Pt.getProperty)(n)}`}Re.schemaRefOrVal=hm;function pm(t){return qh(decodeURIComponent(t))}Re.unescapeFragment=pm;function gm(t){return encodeURIComponent(rf(t))}Re.escapeFragment=gm;function rf(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Re.escapeJsonPointer=rf;function qh(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Re.unescapeJsonPointer=qh;function mm(t,e){if(Array.isArray(t))for(const r of t)e(r);else e(t)}Re.eachItem=mm;function al({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(i,s,o,a)=>{const c=o===void 0?s:o instanceof Pt.Name?(s instanceof Pt.Name?t(i,s,o):e(i,s,o),o):s instanceof Pt.Name?(e(i,o,s),s):r(s,o);return a===Pt.Name&&!(c instanceof Pt.Name)?n(i,c):c}}Re.mergeEvaluated={props:al({mergeNames:(t,e,r)=>t.if((0,Pt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Pt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Pt._)`${r} || {}`).code((0,Pt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Pt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Pt._)`${r} || {}`),nf(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:Kh}),items:al({mergeNames:(t,e,r)=>t.if((0,Pt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Pt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Pt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Pt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function Kh(t,e){if(e===!0)return t.var("props",!0);const r=t.var("props",(0,Pt._)`{}`);return e!==void 0&&nf(t,r,e),r}Re.evaluatedPropsToName=Kh;function nf(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Pt._)`${e}${(0,Pt.getProperty)(n)}`,!0))}Re.setEvaluated=nf;const cl={};function _m(t,e){return t.scopeValue("func",{ref:e,code:cl[e.code]||(cl[e.code]=new fm._Code(e.code))})}Re.useFunc=_m;var hc;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(hc||(Re.Type=hc={}));function Em(t,e,r){if(t instanceof Pt.Name){const n=e===hc.Num;return r?n?(0,Pt._)`"[" + ${t} + "]"`:(0,Pt._)`"['" + ${t} + "']"`:n?(0,Pt._)`"/" + ${t}`:(0,Pt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Pt.getProperty)(t).toString():"/"+rf(t)}Re.getErrorPath=Em;function Wh(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Re.checkStrictMode=Wh;var un={};Object.defineProperty(un,"__esModule",{value:!0});const dr=ht,ym={data:new dr.Name("data"),valCxt:new dr.Name("valCxt"),instancePath:new dr.Name("instancePath"),parentData:new dr.Name("parentData"),parentDataProperty:new dr.Name("parentDataProperty"),rootData:new dr.Name("rootData"),dynamicAnchors:new dr.Name("dynamicAnchors"),vErrors:new dr.Name("vErrors"),errors:new dr.Name("errors"),this:new dr.Name("this"),self:new dr.Name("self"),scope:new dr.Name("scope"),json:new dr.Name("json"),jsonPos:new dr.Name("jsonPos"),jsonLen:new dr.Name("jsonLen"),jsonPart:new dr.Name("jsonPart")};un.default=ym;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=ht,r=Re,n=un;t.keywordError={message:({keyword:y})=>(0,e.str)`must pass "${y}" keyword validation`},t.keyword$DataError={message:({keyword:y,schemaType:E})=>E?(0,e.str)`"${y}" keyword must be ${E} ($data)`:(0,e.str)`"${y}" keyword is invalid ($data)`};function i(y,E=t.keywordError,I,R){const{it:P}=y,{gen:Q,compositeRule:z,allErrors:X}=P,M=l(y,E,I);R??(z||X)?c(Q,M):f(P,(0,e._)`[${M}]`)}t.reportError=i;function s(y,E=t.keywordError,I){const{it:R}=y,{gen:P,compositeRule:Q,allErrors:z}=R,X=l(y,E,I);c(P,X),Q||z||f(R,n.default.vErrors)}t.reportExtraError=s;function o(y,E){y.assign(n.default.errors,E),y.if((0,e._)`${n.default.vErrors} !== null`,()=>y.if(E,()=>y.assign((0,e._)`${n.default.vErrors}.length`,E),()=>y.assign(n.default.vErrors,null)))}t.resetErrorsCount=o;function a({gen:y,keyword:E,schemaValue:I,data:R,errsCount:P,it:Q}){if(P===void 0)throw new Error("ajv implementation error");const z=y.name("err");y.forRange("i",P,n.default.errors,X=>{y.const(z,(0,e._)`${n.default.vErrors}[${X}]`),y.if((0,e._)`${z}.instancePath === undefined`,()=>y.assign((0,e._)`${z}.instancePath`,(0,e.strConcat)(n.default.instancePath,Q.errorPath))),y.assign((0,e._)`${z}.schemaPath`,(0,e.str)`${Q.errSchemaPath}/${E}`),Q.opts.verbose&&(y.assign((0,e._)`${z}.schema`,I),y.assign((0,e._)`${z}.data`,R))})}t.extendErrors=a;function c(y,E){const I=y.const("err",E);y.if((0,e._)`${n.default.vErrors} === null`,()=>y.assign(n.default.vErrors,(0,e._)`[${I}]`),(0,e._)`${n.default.vErrors}.push(${I})`),y.code((0,e._)`${n.default.errors}++`)}function f(y,E){const{gen:I,validateName:R,schemaEnv:P}=y;P.$async?I.throw((0,e._)`new ${y.ValidationError}(${E})`):(I.assign((0,e._)`${R}.errors`,E),I.return(!1))}const u={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function l(y,E,I){const{createErrors:R}=y.it;return R===!1?(0,e._)`{}`:h(y,E,I)}function h(y,E,I={}){const{gen:R,it:P}=y,Q=[d(P,I),m(y,I)];return _(y,E,Q),R.object(...Q)}function d({errorPath:y},{instancePath:E}){const I=E?(0,e.str)`${y}${(0,r.getErrorPath)(E,r.Type.Str)}`:y;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,I)]}function m({keyword:y,it:{errSchemaPath:E}},{schemaPath:I,parentSchema:R}){let P=R?E:(0,e.str)`${E}/${y}`;return I&&(P=(0,e.str)`${P}${(0,r.getErrorPath)(I,r.Type.Str)}`),[u.schemaPath,P]}function _(y,{params:E,message:I},R){const{keyword:P,data:Q,schemaValue:z,it:X}=y,{opts:M,propertyName:F,topSchemaRef:K,schemaPath:se}=X;R.push([u.keyword,P],[u.params,typeof E=="function"?E(y):E||(0,e._)`{}`]),M.messages&&R.push([u.message,typeof I=="function"?I(y):I]),M.verbose&&R.push([u.schema,z],[u.parentSchema,(0,e._)`${K}${se}`],[n.default.data,Q]),F&&R.push([u.propertyName,F])}})(Rs);var fl;function Am(){if(fl)return zn;fl=1,Object.defineProperty(zn,"__esModule",{value:!0}),zn.boolOrEmptySchema=zn.topBoolOrEmptySchema=void 0;const t=Rs,e=ht,r=un,n={message:"boolean schema is false"};function i(a){const{gen:c,schema:f,validateName:u}=a;f===!1?o(a,!1):typeof f=="object"&&f.$async===!0?c.return(r.default.data):(c.assign((0,e._)`${u}.errors`,null),c.return(!0))}zn.topBoolOrEmptySchema=i;function s(a,c){const{gen:f,schema:u}=a;u===!1?(f.var(c,!1),o(a)):f.var(c,!0)}zn.boolOrEmptySchema=s;function o(a,c){const{gen:f,data:u}=a,l={gen:f,keyword:"false schema",data:u,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,t.reportError)(l,n,void 0,c)}return zn}var Jt={},ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.getRules=ci.isJSONType=void 0;const bm=["string","number","integer","boolean","null","object","array"],wm=new Set(bm);function Sm(t){return typeof t=="string"&&wm.has(t)}ci.isJSONType=Sm;function Im(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}ci.getRules=Im;var In={};Object.defineProperty(In,"__esModule",{value:!0});In.shouldUseRule=In.shouldUseGroup=In.schemaHasRulesForType=void 0;function vm({schema:t,self:e},r){const n=e.RULES.types[r];return n&&n!==!0&&Gh(t,n)}In.schemaHasRulesForType=vm;function Gh(t,e){return e.rules.some(r=>Vh(t,r))}In.shouldUseGroup=Gh;function Vh(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}In.shouldUseRule=Vh;Object.defineProperty(Jt,"__esModule",{value:!0});Jt.reportTypeError=Jt.checkDataTypes=Jt.checkDataType=Jt.coerceAndCheckDataType=Jt.getJSONTypes=Jt.getSchemaTypes=Jt.DataType=void 0;const $m=ci,Cm=In,xm=Rs,ot=ht,Yh=Re;var xi;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(xi||(Jt.DataType=xi={}));function Rm(t){const e=zh(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Jt.getSchemaTypes=Rm;function zh(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every($m.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Jt.getJSONTypes=zh;function Nm(t,e){const{gen:r,data:n,opts:i}=t,s=km(e,i.coerceTypes),o=e.length>0&&!(s.length===0&&e.length===1&&(0,Cm.schemaHasRulesForType)(t,e[0]));if(o){const a=sf(e,n,i.strictNumbers,xi.Wrong);r.if(a,()=>{s.length?Pm(t,e,s):of(t)})}return o}Jt.coerceAndCheckDataType=Nm;const Xh=new Set(["string","number","integer","boolean","null"]);function km(t,e){return e?t.filter(r=>Xh.has(r)||e==="array"&&r==="array"):[]}function Pm(t,e,r){const{gen:n,data:i,opts:s}=t,o=n.let("dataType",(0,ot._)`typeof ${i}`),a=n.let("coerced",(0,ot._)`undefined`);s.coerceTypes==="array"&&n.if((0,ot._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,ot._)`${i}[0]`).assign(o,(0,ot._)`typeof ${i}`).if(sf(e,i,s.strictNumbers),()=>n.assign(a,i))),n.if((0,ot._)`${a} !== undefined`);for(const f of r)(Xh.has(f)||f==="array"&&s.coerceTypes==="array")&&c(f);n.else(),of(t),n.endIf(),n.if((0,ot._)`${a} !== undefined`,()=>{n.assign(i,a),Tm(t,a)});function c(f){switch(f){case"string":n.elseIf((0,ot._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,ot._)`"" + ${i}`).elseIf((0,ot._)`${i} === null`).assign(a,(0,ot._)`""`);return;case"number":n.elseIf((0,ot._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,ot._)`+${i}`);return;case"integer":n.elseIf((0,ot._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,ot._)`+${i}`);return;case"boolean":n.elseIf((0,ot._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,ot._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":n.elseIf((0,ot._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(a,null);return;case"array":n.elseIf((0,ot._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,ot._)`[${i}]`)}}}function Tm({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,ot._)`${e} !== undefined`,()=>t.assign((0,ot._)`${e}[${r}]`,n))}function pc(t,e,r,n=xi.Correct){const i=n===xi.Correct?ot.operators.EQ:ot.operators.NEQ;let s;switch(t){case"null":return(0,ot._)`${e} ${i} null`;case"array":s=(0,ot._)`Array.isArray(${e})`;break;case"object":s=(0,ot._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":s=o((0,ot._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":s=o();break;default:return(0,ot._)`typeof ${e} ${i} ${t}`}return n===xi.Correct?s:(0,ot.not)(s);function o(a=ot.nil){return(0,ot.and)((0,ot._)`typeof ${e} == "number"`,a,r?(0,ot._)`isFinite(${e})`:ot.nil)}}Jt.checkDataType=pc;function sf(t,e,r,n){if(t.length===1)return pc(t[0],e,r,n);let i;const s=(0,Yh.toHash)(t);if(s.array&&s.object){const o=(0,ot._)`typeof ${e} != "object"`;i=s.null?o:(0,ot._)`!${e} || ${o}`,delete s.null,delete s.array,delete s.object}else i=ot.nil;s.number&&delete s.integer;for(const o in s)i=(0,ot.and)(i,pc(o,e,r,n));return i}Jt.checkDataTypes=sf;const Bm={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,ot._)`{type: ${t}}`:(0,ot._)`{type: ${e}}`};function of(t){const e=Om(t);(0,xm.reportError)(e,Bm)}Jt.reportTypeError=of;function Om(t){const{gen:e,data:r,schema:n}=t,i=(0,Yh.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:t}}var Ji={},ul;function Lm(){if(ul)return Ji;ul=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.assignDefaults=void 0;const t=ht,e=Re;function r(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const c in o)n(i,c,o[c].default);else s==="array"&&Array.isArray(a)&&a.forEach((c,f)=>n(i,f,c.default))}Ji.assignDefaults=r;function n(i,s,o){const{gen:a,compositeRule:c,data:f,opts:u}=i;if(o===void 0)return;const l=(0,t._)`${f}${(0,t.getProperty)(s)}`;if(c){(0,e.checkStrictMode)(i,`default is ignored for: ${l}`);return}let h=(0,t._)`${l} === undefined`;u.useDefaults==="empty"&&(h=(0,t._)`${h} || ${l} === null || ${l} === ""`),a.if(h,(0,t._)`${l} = ${(0,t.stringify)(o)}`)}return Ji}var Hr={},dt={};Object.defineProperty(dt,"__esModule",{value:!0});dt.validateUnion=dt.validateArray=dt.usePattern=dt.callValidateCode=dt.schemaProperties=dt.allSchemaProperties=dt.noPropertyInData=dt.propertyInData=dt.isOwnProperty=dt.hasPropFunc=dt.reportMissingProp=dt.checkMissingProp=dt.checkReportMissingProp=void 0;const Dt=ht,af=Re,Rn=un,Dm=Re;function Um(t,e){const{gen:r,data:n,it:i}=t;r.if(ff(r,n,e,i.opts.ownProperties),()=>{t.setParams({missingProperty:(0,Dt._)`${e}`},!0),t.error()})}dt.checkReportMissingProp=Um;function Mm({gen:t,data:e,it:{opts:r}},n,i){return(0,Dt.or)(...n.map(s=>(0,Dt.and)(ff(t,e,s,r.ownProperties),(0,Dt._)`${i} = ${s}`)))}dt.checkMissingProp=Mm;function Fm(t,e){t.setParams({missingProperty:e},!0),t.error()}dt.reportMissingProp=Fm;function Jh(t){return t.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Dt._)`Object.prototype.hasOwnProperty`})}dt.hasPropFunc=Jh;function cf(t,e,r){return(0,Dt._)`${Jh(t)}.call(${e}, ${r})`}dt.isOwnProperty=cf;function Hm(t,e,r,n){const i=(0,Dt._)`${e}${(0,Dt.getProperty)(r)} !== undefined`;return n?(0,Dt._)`${i} && ${cf(t,e,r)}`:i}dt.propertyInData=Hm;function ff(t,e,r,n){const i=(0,Dt._)`${e}${(0,Dt.getProperty)(r)} === undefined`;return n?(0,Dt.or)(i,(0,Dt.not)(cf(t,e,r))):i}dt.noPropertyInData=ff;function Zh(t){return t?Object.keys(t).filter(e=>e!=="__proto__"):[]}dt.allSchemaProperties=Zh;function jm(t,e){return Zh(e).filter(r=>!(0,af.alwaysValidSchema)(t,e[r]))}dt.schemaProperties=jm;function Qm({schemaCode:t,data:e,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:s},it:o},a,c,f){const u=f?(0,Dt._)`${t}, ${e}, ${n}${i}`:e,l=[[Rn.default.instancePath,(0,Dt.strConcat)(Rn.default.instancePath,s)],[Rn.default.parentData,o.parentData],[Rn.default.parentDataProperty,o.parentDataProperty],[Rn.default.rootData,Rn.default.rootData]];o.opts.dynamicRef&&l.push([Rn.default.dynamicAnchors,Rn.default.dynamicAnchors]);const h=(0,Dt._)`${u}, ${r.object(...l)}`;return c!==Dt.nil?(0,Dt._)`${a}.call(${c}, ${h})`:(0,Dt._)`${a}(${h})`}dt.callValidateCode=Qm;const qm=(0,Dt._)`new RegExp`;function Km({gen:t,it:{opts:e}},r){const n=e.unicodeRegExp?"u":"",{regExp:i}=e.code,s=i(r,n);return t.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Dt._)`${i.code==="new RegExp"?qm:(0,Dm.useFunc)(t,i)}(${r}, ${n})`})}dt.usePattern=Km;function Wm(t){const{gen:e,data:r,keyword:n,it:i}=t,s=e.name("valid");if(i.allErrors){const a=e.let("valid",!0);return o(()=>e.assign(a,!1)),a}return e.var(s,!0),o(()=>e.break()),s;function o(a){const c=e.const("len",(0,Dt._)`${r}.length`);e.forRange("i",0,c,f=>{t.subschema({keyword:n,dataProp:f,dataPropType:af.Type.Num},s),e.if((0,Dt.not)(s),a)})}}dt.validateArray=Wm;function Gm(t){const{gen:e,schema:r,keyword:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(c=>(0,af.alwaysValidSchema)(i,c))&&!i.opts.unevaluated)return;const o=e.let("valid",!1),a=e.name("_valid");e.block(()=>r.forEach((c,f)=>{const u=t.subschema({keyword:n,schemaProp:f,compositeRule:!0},a);e.assign(o,(0,Dt._)`${o} || ${a}`),t.mergeValidEvaluated(u,a)||e.if((0,Dt.not)(o))})),t.result(o,()=>t.reset(),()=>t.error(!0))}dt.validateUnion=Gm;var ll;function Vm(){if(ll)return Hr;ll=1,Object.defineProperty(Hr,"__esModule",{value:!0}),Hr.validateKeywordUsage=Hr.validSchemaType=Hr.funcKeywordCode=Hr.macroKeywordCode=void 0;const t=ht,e=un,r=dt,n=Rs;function i(h,d){const{gen:m,keyword:_,schema:y,parentSchema:E,it:I}=h,R=d.macro.call(I.self,y,E,I),P=f(m,_,R);I.opts.validateSchema!==!1&&I.self.validateSchema(R,!0);const Q=m.name("valid");h.subschema({schema:R,schemaPath:t.nil,errSchemaPath:`${I.errSchemaPath}/${_}`,topSchemaRef:P,compositeRule:!0},Q),h.pass(Q,()=>h.error(!0))}Hr.macroKeywordCode=i;function s(h,d){var m;const{gen:_,keyword:y,schema:E,parentSchema:I,$data:R,it:P}=h;c(P,d);const Q=!R&&d.compile?d.compile.call(P.self,E,I,P):d.validate,z=f(_,y,Q),X=_.let("valid");h.block$data(X,M),h.ok((m=d.valid)!==null&&m!==void 0?m:X);function M(){if(d.errors===!1)se(),d.modifying&&o(h),J(()=>h.error());else{const ue=d.async?F():K();d.modifying&&o(h),J(()=>a(h,ue))}}function F(){const ue=_.let("ruleErrs",null);return _.try(()=>se((0,t._)`await `),Y=>_.assign(X,!1).if((0,t._)`${Y} instanceof ${P.ValidationError}`,()=>_.assign(ue,(0,t._)`${Y}.errors`),()=>_.throw(Y))),ue}function K(){const ue=(0,t._)`${z}.errors`;return _.assign(ue,null),se(t.nil),ue}function se(ue=d.async?(0,t._)`await `:t.nil){const Y=P.opts.passContext?e.default.this:e.default.self,Z=!("compile"in d&&!R||d.schema===!1);_.assign(X,(0,t._)`${ue}${(0,r.callValidateCode)(h,z,Y,Z)}`,d.modifying)}function J(ue){var Y;_.if((0,t.not)((Y=d.valid)!==null&&Y!==void 0?Y:X),ue)}}Hr.funcKeywordCode=s;function o(h){const{gen:d,data:m,it:_}=h;d.if(_.parentData,()=>d.assign(m,(0,t._)`${_.parentData}[${_.parentDataProperty}]`))}function a(h,d){const{gen:m}=h;m.if((0,t._)`Array.isArray(${d})`,()=>{m.assign(e.default.vErrors,(0,t._)`${e.default.vErrors} === null ? ${d} : ${e.default.vErrors}.concat(${d})`).assign(e.default.errors,(0,t._)`${e.default.vErrors}.length`),(0,n.extendErrors)(h)},()=>h.error())}function c({schemaEnv:h},d){if(d.async&&!h.$async)throw new Error("async keyword in sync schema")}function f(h,d,m){if(m===void 0)throw new Error(`keyword "${d}" failed to compile`);return h.scopeValue("keyword",typeof m=="function"?{ref:m}:{ref:m,code:(0,t.stringify)(m)})}function u(h,d,m=!1){return!d.length||d.some(_=>_==="array"?Array.isArray(h):_==="object"?h&&typeof h=="object"&&!Array.isArray(h):typeof h==_||m&&typeof h>"u")}Hr.validSchemaType=u;function l({schema:h,opts:d,self:m,errSchemaPath:_},y,E){if(Array.isArray(y.keyword)?!y.keyword.includes(E):y.keyword!==E)throw new Error("ajv implementation error");const I=y.dependencies;if(I!=null&&I.some(R=>!Object.prototype.hasOwnProperty.call(h,R)))throw new Error(`parent schema must have dependencies of ${E}: ${I.join(",")}`);if(y.validateSchema&&!y.validateSchema(h[E])){const P=`keyword "${E}" value is invalid at path "${_}": `+m.errorsText(y.validateSchema.errors);if(d.validateSchema==="log")m.logger.error(P);else throw new Error(P)}}return Hr.validateKeywordUsage=l,Hr}var _n={},dl;function Ym(){if(dl)return _n;dl=1,Object.defineProperty(_n,"__esModule",{value:!0}),_n.extendSubschemaMode=_n.extendSubschemaData=_n.getSubschema=void 0;const t=ht,e=Re;function r(s,{keyword:o,schemaProp:a,schema:c,schemaPath:f,errSchemaPath:u,topSchemaRef:l}){if(o!==void 0&&c!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const h=s.schema[o];return a===void 0?{schema:h,schemaPath:(0,t._)`${s.schemaPath}${(0,t.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:h[a],schemaPath:(0,t._)`${s.schemaPath}${(0,t.getProperty)(o)}${(0,t.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,e.escapeFragment)(a)}`}}if(c!==void 0){if(f===void 0||u===void 0||l===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:c,schemaPath:f,topSchemaRef:l,errSchemaPath:u}}throw new Error('either "keyword" or "schema" must be passed')}_n.getSubschema=r;function n(s,o,{dataProp:a,dataPropType:c,data:f,dataTypes:u,propertyName:l}){if(f!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:h}=o;if(a!==void 0){const{errorPath:m,dataPathArr:_,opts:y}=o,E=h.let("data",(0,t._)`${o.data}${(0,t.getProperty)(a)}`,!0);d(E),s.errorPath=(0,t.str)`${m}${(0,e.getErrorPath)(a,c,y.jsPropertySyntax)}`,s.parentDataProperty=(0,t._)`${a}`,s.dataPathArr=[..._,s.parentDataProperty]}if(f!==void 0){const m=f instanceof t.Name?f:h.let("data",f,!0);d(m),l!==void 0&&(s.propertyName=l)}u&&(s.dataTypes=u);function d(m){s.data=m,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,m]}}_n.extendSubschemaData=n;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:c,createErrors:f,allErrors:u}){c!==void 0&&(s.compositeRule=c),f!==void 0&&(s.createErrors=f),u!==void 0&&(s.allErrors=u),s.jtdDiscriminator=o,s.jtdMetadata=a}return _n.extendSubschemaMode=i,_n}var or={},Zo=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(e)){if(n=e.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!t(e[i],r[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!t(e[o],r[o]))return!1}return!0}return e!==e&&r!==r},ep={exports:{}},Fn=ep.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};_o(e,n,i,t,"",t)};Fn.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Fn.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Fn.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Fn.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function _o(t,e,r,n,i,s,o,a,c,f){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,s,o,a,c,f);for(var u in n){var l=n[u];if(Array.isArray(l)){if(u in Fn.arrayKeywords)for(var h=0;h<l.length;h++)_o(t,e,r,l[h],i+"/"+u+"/"+h,s,i,u,n,h)}else if(u in Fn.propsKeywords){if(l&&typeof l=="object")for(var d in l)_o(t,e,r,l[d],i+"/"+u+"/"+zm(d),s,i,u,n,d)}else(u in Fn.keywords||t.allKeys&&!(u in Fn.skipKeywords))&&_o(t,e,r,l,i+"/"+u,s,i,u,n)}r(n,i,s,o,a,c,f)}}function zm(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var Xm=ep.exports;Object.defineProperty(or,"__esModule",{value:!0});or.getSchemaRefs=or.resolveUrl=or.normalizeId=or._getFullPath=or.getFullPath=or.inlineRef=void 0;const Jm=Re,Zm=Zo,e_=Xm,t_=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function r_(t,e=!0){return typeof t=="boolean"?!0:e===!0?!gc(t):e?tp(t)<=e:!1}or.inlineRef=r_;const n_=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function gc(t){for(const e in t){if(n_.has(e))return!0;const r=t[e];if(Array.isArray(r)&&r.some(gc)||typeof r=="object"&&gc(r))return!0}return!1}function tp(t){let e=0;for(const r in t){if(r==="$ref")return 1/0;if(e++,!t_.has(r)&&(typeof t[r]=="object"&&(0,Jm.eachItem)(t[r],n=>e+=tp(n)),e===1/0))return 1/0}return e}function rp(t,e="",r){r!==!1&&(e=Ri(e));const n=t.parse(e);return np(t,n)}or.getFullPath=rp;function np(t,e){return t.serialize(e).split("#")[0]+"#"}or._getFullPath=np;const i_=/#\/?$/;function Ri(t){return t?t.replace(i_,""):""}or.normalizeId=Ri;function s_(t,e,r){return r=Ri(r),t.resolve(e,r)}or.resolveUrl=s_;const o_=/^[a-z_][-a-z0-9._]*$/i;function a_(t,e){if(typeof t=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,i=Ri(t[r]||e),s={"":i},o=rp(n,i,!1),a={},c=new Set;return e_(t,{allKeys:!0},(l,h,d,m)=>{if(m===void 0)return;const _=o+h;let y=s[m];typeof l[r]=="string"&&(y=E.call(this,l[r])),I.call(this,l.$anchor),I.call(this,l.$dynamicAnchor),s[h]=y;function E(R){const P=this.opts.uriResolver.resolve;if(R=Ri(y?P(y,R):R),c.has(R))throw u(R);c.add(R);let Q=this.refs[R];return typeof Q=="string"&&(Q=this.refs[Q]),typeof Q=="object"?f(l,Q.schema,R):R!==Ri(_)&&(R[0]==="#"?(f(l,a[R],R),a[R]=l):this.refs[R]=_),R}function I(R){if(typeof R=="string"){if(!o_.test(R))throw new Error(`invalid anchor "${R}"`);E.call(this,`#${R}`)}}}),a;function f(l,h,d){if(h!==void 0&&!Zm(l,h))throw u(d)}function u(l){return new Error(`reference "${l}" resolves to more than one schema`)}}or.getSchemaRefs=a_;var hl;function ea(){if(hl)return mn;hl=1,Object.defineProperty(mn,"__esModule",{value:!0}),mn.getData=mn.KeywordCxt=mn.validateFunctionCode=void 0;const t=Am(),e=Jt,r=In,n=Jt,i=Lm(),s=Vm(),o=Ym(),a=ht,c=un,f=or,u=Re,l=Rs;function h(w){if(Q(w)&&(X(w),P(w))){y(w);return}d(w,()=>(0,t.topBoolOrEmptySchema)(w))}mn.validateFunctionCode=h;function d({gen:w,validateName:b,schema:A,schemaEnv:T,opts:V},G){V.code.es5?w.func(b,(0,a._)`${c.default.data}, ${c.default.valCxt}`,T.$async,()=>{w.code((0,a._)`"use strict"; ${I(A,V)}`),_(w,V),w.code(G)}):w.func(b,(0,a._)`${c.default.data}, ${m(V)}`,T.$async,()=>w.code(I(A,V)).code(G))}function m(w){return(0,a._)`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${w.dynamicRef?(0,a._)`, ${c.default.dynamicAnchors}={}`:a.nil}}={}`}function _(w,b){w.if(c.default.valCxt,()=>{w.var(c.default.instancePath,(0,a._)`${c.default.valCxt}.${c.default.instancePath}`),w.var(c.default.parentData,(0,a._)`${c.default.valCxt}.${c.default.parentData}`),w.var(c.default.parentDataProperty,(0,a._)`${c.default.valCxt}.${c.default.parentDataProperty}`),w.var(c.default.rootData,(0,a._)`${c.default.valCxt}.${c.default.rootData}`),b.dynamicRef&&w.var(c.default.dynamicAnchors,(0,a._)`${c.default.valCxt}.${c.default.dynamicAnchors}`)},()=>{w.var(c.default.instancePath,(0,a._)`""`),w.var(c.default.parentData,(0,a._)`undefined`),w.var(c.default.parentDataProperty,(0,a._)`undefined`),w.var(c.default.rootData,c.default.data),b.dynamicRef&&w.var(c.default.dynamicAnchors,(0,a._)`{}`)})}function y(w){const{schema:b,opts:A,gen:T}=w;d(w,()=>{A.$comment&&b.$comment&&ue(w),K(w),T.let(c.default.vErrors,null),T.let(c.default.errors,0),A.unevaluated&&E(w),M(w),Y(w)})}function E(w){const{gen:b,validateName:A}=w;w.evaluated=b.const("evaluated",(0,a._)`${A}.evaluated`),b.if((0,a._)`${w.evaluated}.dynamicProps`,()=>b.assign((0,a._)`${w.evaluated}.props`,(0,a._)`undefined`)),b.if((0,a._)`${w.evaluated}.dynamicItems`,()=>b.assign((0,a._)`${w.evaluated}.items`,(0,a._)`undefined`))}function I(w,b){const A=typeof w=="object"&&w[b.schemaId];return A&&(b.code.source||b.code.process)?(0,a._)`/*# sourceURL=${A} */`:a.nil}function R(w,b){if(Q(w)&&(X(w),P(w))){z(w,b);return}(0,t.boolOrEmptySchema)(w,b)}function P({schema:w,self:b}){if(typeof w=="boolean")return!w;for(const A in w)if(b.RULES.all[A])return!0;return!1}function Q(w){return typeof w.schema!="boolean"}function z(w,b){const{schema:A,gen:T,opts:V}=w;V.$comment&&A.$comment&&ue(w),se(w),J(w);const G=T.const("_errs",c.default.errors);M(w,G),T.var(b,(0,a._)`${G} === ${c.default.errors}`)}function X(w){(0,u.checkUnknownRules)(w),F(w)}function M(w,b){if(w.opts.jtd)return ie(w,[],!1,b);const A=(0,e.getSchemaTypes)(w.schema),T=(0,e.coerceAndCheckDataType)(w,A);ie(w,A,!T,b)}function F(w){const{schema:b,errSchemaPath:A,opts:T,self:V}=w;b.$ref&&T.ignoreKeywordsWithRef&&(0,u.schemaHasRulesButRef)(b,V.RULES)&&V.logger.warn(`$ref: keywords ignored in schema at path "${A}"`)}function K(w){const{schema:b,opts:A}=w;b.default!==void 0&&A.useDefaults&&A.strictSchema&&(0,u.checkStrictMode)(w,"default is ignored in the schema root")}function se(w){const b=w.schema[w.opts.schemaId];b&&(w.baseId=(0,f.resolveUrl)(w.opts.uriResolver,w.baseId,b))}function J(w){if(w.schema.$async&&!w.schemaEnv.$async)throw new Error("async schema in sync schema")}function ue({gen:w,schemaEnv:b,schema:A,errSchemaPath:T,opts:V}){const G=A.$comment;if(V.$comment===!0)w.code((0,a._)`${c.default.self}.logger.log(${G})`);else if(typeof V.$comment=="function"){const H=(0,a.str)`${T}/$comment`,q=w.scopeValue("root",{ref:b.root});w.code((0,a._)`${c.default.self}.opts.$comment(${G}, ${H}, ${q}.schema)`)}}function Y(w){const{gen:b,schemaEnv:A,validateName:T,ValidationError:V,opts:G}=w;A.$async?b.if((0,a._)`${c.default.errors} === 0`,()=>b.return(c.default.data),()=>b.throw((0,a._)`new ${V}(${c.default.vErrors})`)):(b.assign((0,a._)`${T}.errors`,c.default.vErrors),G.unevaluated&&Z(w),b.return((0,a._)`${c.default.errors} === 0`))}function Z({gen:w,evaluated:b,props:A,items:T}){A instanceof a.Name&&w.assign((0,a._)`${b}.props`,A),T instanceof a.Name&&w.assign((0,a._)`${b}.items`,T)}function ie(w,b,A,T){const{gen:V,schema:G,data:H,allErrors:q,opts:D,self:ee}=w,{RULES:ce}=ee;if(G.$ref&&(D.ignoreKeywordsWithRef||!(0,u.schemaHasRulesButRef)(G,ce))){V.block(()=>pe(w,"$ref",ce.all.$ref.definition));return}D.jtd||O(w,b),V.block(()=>{for(const xe of ce.rules)le(xe);le(ce.post)});function le(xe){(0,r.shouldUseGroup)(G,xe)&&(xe.type?(V.if((0,n.checkDataType)(xe.type,H,D.strictNumbers)),oe(w,xe),b.length===1&&b[0]===xe.type&&A&&(V.else(),(0,n.reportTypeError)(w)),V.endIf()):oe(w,xe),q||V.if((0,a._)`${c.default.errors} === ${T||0}`))}}function oe(w,b){const{gen:A,schema:T,opts:{useDefaults:V}}=w;V&&(0,i.assignDefaults)(w,b.type),A.block(()=>{for(const G of b.rules)(0,r.shouldUseRule)(T,G)&&pe(w,G.keyword,G.definition,b.type)})}function O(w,b){w.schemaEnv.meta||!w.opts.strictTypes||(j(w,b),w.opts.allowUnionTypes||C(w,b),v(w,w.dataTypes))}function j(w,b){if(b.length){if(!w.dataTypes.length){w.dataTypes=b;return}b.forEach(A=>{x(w.dataTypes,A)||S(w,`type "${A}" not allowed by context "${w.dataTypes.join(",")}"`)}),g(w,b)}}function C(w,b){b.length>1&&!(b.length===2&&b.includes("null"))&&S(w,"use allowUnionTypes to allow union type keyword")}function v(w,b){const A=w.self.RULES.all;for(const T in A){const V=A[T];if(typeof V=="object"&&(0,r.shouldUseRule)(w.schema,V)){const{type:G}=V.definition;G.length&&!G.some(H=>B(b,H))&&S(w,`missing type "${G.join(",")}" for keyword "${T}"`)}}}function B(w,b){return w.includes(b)||b==="number"&&w.includes("integer")}function x(w,b){return w.includes(b)||b==="integer"&&w.includes("number")}function g(w,b){const A=[];for(const T of w.dataTypes)x(b,T)?A.push(T):b.includes("integer")&&T==="number"&&A.push("integer");w.dataTypes=A}function S(w,b){const A=w.schemaEnv.baseId+w.errSchemaPath;b+=` at "${A}" (strictTypes)`,(0,u.checkStrictMode)(w,b,w.opts.strictTypes)}class U{constructor(b,A,T){if((0,s.validateKeywordUsage)(b,A,T),this.gen=b.gen,this.allErrors=b.allErrors,this.keyword=T,this.data=b.data,this.schema=b.schema[T],this.$data=A.$data&&b.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,u.schemaRefOrVal)(b,this.schema,T,this.$data),this.schemaType=A.schemaType,this.parentSchema=b.schema,this.params={},this.it=b,this.def=A,this.$data)this.schemaCode=b.gen.const("vSchema",Se(this.$data,b));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,A.schemaType,A.allowUndefined))throw new Error(`${T} value must be ${JSON.stringify(A.schemaType)}`);("code"in A?A.trackErrors:A.errors!==!1)&&(this.errsCount=b.gen.const("_errs",c.default.errors))}result(b,A,T){this.failResult((0,a.not)(b),A,T)}failResult(b,A,T){this.gen.if(b),T?T():this.error(),A?(this.gen.else(),A(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(b,A){this.failResult((0,a.not)(b),void 0,A)}fail(b){if(b===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(b),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(b){if(!this.$data)return this.fail(b);const{schemaCode:A}=this;this.fail((0,a._)`${A} !== undefined && (${(0,a.or)(this.invalid$data(),b)})`)}error(b,A,T){if(A){this.setParams(A),this._error(b,T),this.setParams({});return}this._error(b,T)}_error(b,A){(b?l.reportExtraError:l.reportError)(this,this.def.error,A)}$dataError(){(0,l.reportError)(this,this.def.$dataError||l.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,l.resetErrorsCount)(this.gen,this.errsCount)}ok(b){this.allErrors||this.gen.if(b)}setParams(b,A){A?Object.assign(this.params,b):this.params=b}block$data(b,A,T=a.nil){this.gen.block(()=>{this.check$data(b,T),A()})}check$data(b=a.nil,A=a.nil){if(!this.$data)return;const{gen:T,schemaCode:V,schemaType:G,def:H}=this;T.if((0,a.or)((0,a._)`${V} === undefined`,A)),b!==a.nil&&T.assign(b,!0),(G.length||H.validateSchema)&&(T.elseIf(this.invalid$data()),this.$dataError(),b!==a.nil&&T.assign(b,!1)),T.else()}invalid$data(){const{gen:b,schemaCode:A,schemaType:T,def:V,it:G}=this;return(0,a.or)(H(),q());function H(){if(T.length){if(!(A instanceof a.Name))throw new Error("ajv implementation error");const D=Array.isArray(T)?T:[T];return(0,a._)`${(0,n.checkDataTypes)(D,A,G.opts.strictNumbers,n.DataType.Wrong)}`}return a.nil}function q(){if(V.validateSchema){const D=b.scopeValue("validate$data",{ref:V.validateSchema});return(0,a._)`!${D}(${A})`}return a.nil}}subschema(b,A){const T=(0,o.getSubschema)(this.it,b);(0,o.extendSubschemaData)(T,this.it,b),(0,o.extendSubschemaMode)(T,b);const V={...this.it,...T,items:void 0,props:void 0};return R(V,A),V}mergeEvaluated(b,A){const{it:T,gen:V}=this;T.opts.unevaluated&&(T.props!==!0&&b.props!==void 0&&(T.props=u.mergeEvaluated.props(V,b.props,T.props,A)),T.items!==!0&&b.items!==void 0&&(T.items=u.mergeEvaluated.items(V,b.items,T.items,A)))}mergeValidEvaluated(b,A){const{it:T,gen:V}=this;if(T.opts.unevaluated&&(T.props!==!0||T.items!==!0))return V.if(A,()=>this.mergeEvaluated(b,a.Name)),!0}}mn.KeywordCxt=U;function pe(w,b,A,T){const V=new U(w,A,b);"code"in A?A.code(V,T):V.$data&&A.validate?(0,s.funcKeywordCode)(V,A):"macro"in A?(0,s.macroKeywordCode)(V,A):(A.compile||A.validate)&&(0,s.funcKeywordCode)(V,A)}const me=/^\/(?:[^~]|~0|~1)*$/,Ie=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Se(w,{dataLevel:b,dataNames:A,dataPathArr:T}){let V,G;if(w==="")return c.default.rootData;if(w[0]==="/"){if(!me.test(w))throw new Error(`Invalid JSON-pointer: ${w}`);V=w,G=c.default.rootData}else{const ee=Ie.exec(w);if(!ee)throw new Error(`Invalid JSON-pointer: ${w}`);const ce=+ee[1];if(V=ee[2],V==="#"){if(ce>=b)throw new Error(D("property/index",ce));return T[b-ce]}if(ce>b)throw new Error(D("data",ce));if(G=A[b-ce],!V)return G}let H=G;const q=V.split("/");for(const ee of q)ee&&(G=(0,a._)`${G}${(0,a.getProperty)((0,u.unescapeJsonPointer)(ee))}`,H=(0,a._)`${H} && ${G}`);return H;function D(ee,ce){return`Cannot access ${ee} ${ce} levels up, current level is ${b}`}}return mn.getData=Se,mn}var Ks={},pl;function uf(){if(pl)return Ks;pl=1,Object.defineProperty(Ks,"__esModule",{value:!0});class t extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return Ks.default=t,Ks}var ji={};Object.defineProperty(ji,"__esModule",{value:!0});const Ca=or;let c_=class extends Error{constructor(e,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Ca.resolveUrl)(e,r,n),this.missingSchema=(0,Ca.normalizeId)((0,Ca.getFullPath)(e,this.missingRef))}};ji.default=c_;var Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.resolveSchema=Nr.getCompilingSchema=Nr.resolveRef=Nr.compileSchema=Nr.SchemaEnv=void 0;const jr=ht,f_=uf(),Xn=un,zr=or,gl=Re,u_=ea();let ta=class{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,zr.normalizeId)(n==null?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n==null?void 0:n.$async,this.refs={}}};Nr.SchemaEnv=ta;function lf(t){const e=ip.call(this,t);if(e)return e;const r=(0,zr.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new jr.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s});let a;t.$async&&(a=o.scopeValue("Error",{ref:f_.default,code:(0,jr._)`require("ajv/dist/runtime/validation_error").default`}));const c=o.scopeName("validate");t.validateName=c;const f={gen:o,allErrors:this.opts.allErrors,data:Xn.default.data,parentData:Xn.default.parentData,parentDataProperty:Xn.default.parentDataProperty,dataNames:[Xn.default.data],dataPathArr:[jr.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,jr.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:jr.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,jr._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(t),(0,u_.validateFunctionCode)(f),o.optimize(this.opts.code.optimize);const l=o.toString();u=`${o.scopeRefs(Xn.default.scope)}return ${l}`,this.opts.code.process&&(u=this.opts.code.process(u,t));const d=new Function(`${Xn.default.self}`,`${Xn.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:c,validateCode:l,scopeValues:o._values}),this.opts.unevaluated){const{props:m,items:_}=f;d.evaluated={props:m instanceof jr.Name?void 0:m,items:_ instanceof jr.Name?void 0:_,dynamicProps:m instanceof jr.Name,dynamicItems:_ instanceof jr.Name},d.source&&(d.source.evaluated=(0,jr.stringify)(d.evaluated))}return t.validate=d,t}catch(l){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),l}finally{this._compilations.delete(t)}}Nr.compileSchema=lf;function l_(t,e,r){var n;r=(0,zr.resolveUrl)(this.opts.uriResolver,e,r);const i=t.refs[r];if(i)return i;let s=p_.call(this,t,r);if(s===void 0){const o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(s=new ta({schema:o,schemaId:a,root:t,baseId:e}))}if(s!==void 0)return t.refs[r]=d_.call(this,s)}Nr.resolveRef=l_;function d_(t){return(0,zr.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:lf.call(this,t)}function ip(t){for(const e of this._compilations)if(h_(e,t))return e}Nr.getCompilingSchema=ip;function h_(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function p_(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||ra.call(this,t,e)}function ra(t,e){const r=this.opts.uriResolver.parse(e),n=(0,zr._getFullPath)(this.opts.uriResolver,r);let i=(0,zr.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===i)return xa.call(this,r,t);const s=(0,zr.normalizeId)(n),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=ra.call(this,t,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:xa.call(this,r,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||lf.call(this,o),s===(0,zr.normalizeId)(e)){const{schema:a}=o,{schemaId:c}=this.opts,f=a[c];return f&&(i=(0,zr.resolveUrl)(this.opts.uriResolver,i,f)),new ta({schema:a,schemaId:c,root:t,baseId:i})}return xa.call(this,r,o)}}Nr.resolveSchema=ra;const g_=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function xa(t,{baseId:e,schema:r,root:n}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,gl.unescapeFragment)(a)];if(c===void 0)return;r=c;const f=typeof r=="object"&&r[this.opts.schemaId];!g_.has(a)&&f&&(e=(0,zr.resolveUrl)(this.opts.uriResolver,e,f))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,gl.schemaHasRulesButRef)(r,this.RULES)){const a=(0,zr.resolveUrl)(this.opts.uriResolver,e,r.$ref);s=ra.call(this,n,a)}const{schemaId:o}=this.opts;if(s=s||new ta({schema:r,schemaId:o,root:n,baseId:e}),s.schema!==s.root.schema)return s}const m_="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",__="Meta-schema for $data reference (JSON AnySchema extension proposal)",E_="object",y_=["$data"],A_={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},b_=!1,w_={$id:m_,description:__,type:E_,required:y_,properties:A_,additionalProperties:b_};var df={},na={exports:{}};const S_=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),sp=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function op(t){let e="",r=0,n=0;for(n=0;n<t.length;n++)if(r=t[n].charCodeAt(0),r!==48){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";e+=t[n];break}for(n+=1;n<t.length;n++){if(r=t[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";e+=t[n]}return e}const I_=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function ml(t){return t.length=0,!0}function v_(t,e,r){if(t.length){const n=op(t);if(n!=="")e.push(n);else return r.error=!0,!1;t.length=0}return!0}function $_(t){let e=0;const r={error:!1,address:"",zone:""},n=[],i=[];let s=!1,o=!1,a=v_;for(let c=0;c<t.length;c++){const f=t[c];if(!(f==="["||f==="]"))if(f===":"){if(s===!0&&(o=!0),!a(i,n,r))break;if(++e>7){r.error=!0;break}c>0&&t[c-1]===":"&&(s=!0),n.push(":");continue}else if(f==="%"){if(!a(i,n,r))break;a=ml}else{i.push(f);continue}}return i.length&&(a===ml?r.zone=i.join(""):o?n.push(i.join("")):n.push(op(i))),r.address=n.join(""),r}function ap(t){if(C_(t,":")<2)return{host:t,isIPV6:!1};const e=$_(t);if(e.error)return{host:t,isIPV6:!1};{let r=e.address,n=e.address;return e.zone&&(r+="%"+e.zone,n+="%25"+e.zone),{host:r,isIPV6:!0,escapedHost:n}}}function C_(t,e){let r=0;for(let n=0;n<t.length;n++)t[n]===e&&r++;return r}function x_(t){let e=t;const r=[];let n=-1,i=0;for(;i=e.length;){if(i===1){if(e===".")break;if(e==="/"){r.push("/");break}else{r.push(e);break}}else if(i===2){if(e[0]==="."){if(e[1]===".")break;if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&(e[1]==="."||e[1]==="/")){r.push("/");break}}else if(i===3&&e==="/.."){r.length!==0&&r.pop(),r.push("/");break}if(e[0]==="."){if(e[1]==="."){if(e[2]==="/"){e=e.slice(3);continue}}else if(e[1]==="/"){e=e.slice(2);continue}}else if(e[0]==="/"&&e[1]==="."){if(e[2]==="/"){e=e.slice(2);continue}else if(e[2]==="."&&e[3]==="/"){e=e.slice(3),r.length!==0&&r.pop();continue}}if((n=e.indexOf("/",1))===-1){r.push(e);break}else r.push(e.slice(0,n)),e=e.slice(n)}return r.join("")}function R_(t,e){const r=e!==!0?escape:unescape;return t.scheme!==void 0&&(t.scheme=r(t.scheme)),t.userinfo!==void 0&&(t.userinfo=r(t.userinfo)),t.host!==void 0&&(t.host=r(t.host)),t.path!==void 0&&(t.path=r(t.path)),t.query!==void 0&&(t.query=r(t.query)),t.fragment!==void 0&&(t.fragment=r(t.fragment)),t}function N_(t){const e=[];if(t.userinfo!==void 0&&(e.push(t.userinfo),e.push("@")),t.host!==void 0){let r=unescape(t.host);if(!sp(r)){const n=ap(r);n.isIPV6===!0?r=`[${n.escapedHost}]`:r=t.host}e.push(r)}return(typeof t.port=="number"||typeof t.port=="string")&&(e.push(":"),e.push(String(t.port))),e.length?e.join(""):void 0}var cp={nonSimpleDomain:I_,recomposeAuthority:N_,normalizeComponentEncoding:R_,removeDotSegments:x_,isIPv4:sp,isUUID:S_,normalizeIPv6:ap};const{isUUID:k_}=cp,P_=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function fp(t){return t.secure===!0?!0:t.secure===!1?!1:t.scheme?t.scheme.length===3&&(t.scheme[0]==="w"||t.scheme[0]==="W")&&(t.scheme[1]==="s"||t.scheme[1]==="S")&&(t.scheme[2]==="s"||t.scheme[2]==="S"):!1}function up(t){return t.host||(t.error=t.error||"HTTP URIs must have a host."),t}function lp(t){const e=String(t.scheme).toLowerCase()==="https";return(t.port===(e?443:80)||t.port==="")&&(t.port=void 0),t.path||(t.path="/"),t}function T_(t){return t.secure=fp(t),t.resourceName=(t.path||"/")+(t.query?"?"+t.query:""),t.path=void 0,t.query=void 0,t}function B_(t){if((t.port===(fp(t)?443:80)||t.port==="")&&(t.port=void 0),typeof t.secure=="boolean"&&(t.scheme=t.secure?"wss":"ws",t.secure=void 0),t.resourceName){const[e,r]=t.resourceName.split("?");t.path=e&&e!=="/"?e:void 0,t.query=r,t.resourceName=void 0}return t.fragment=void 0,t}function O_(t,e){if(!t.path)return t.error="URN can not be parsed",t;const r=t.path.match(P_);if(r){const n=e.scheme||t.scheme||"urn";t.nid=r[1].toLowerCase(),t.nss=r[2];const i=`${n}:${e.nid||t.nid}`,s=hf(i);t.path=void 0,s&&(t=s.parse(t,e))}else t.error=t.error||"URN can not be parsed.";return t}function L_(t,e){if(t.nid===void 0)throw new Error("URN without nid cannot be serialized");const r=e.scheme||t.scheme||"urn",n=t.nid.toLowerCase(),i=`${r}:${e.nid||n}`,s=hf(i);s&&(t=s.serialize(t,e));const o=t,a=t.nss;return o.path=`${n||e.nid}:${a}`,e.skipEscape=!0,o}function D_(t,e){const r=t;return r.uuid=r.nss,r.nss=void 0,!e.tolerant&&(!r.uuid||!k_(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function U_(t){const e=t;return e.nss=(t.uuid||"").toLowerCase(),e}const dp={scheme:"http",domainHost:!0,parse:up,serialize:lp},M_={scheme:"https",domainHost:dp.domainHost,parse:up,serialize:lp},Eo={scheme:"ws",domainHost:!0,parse:T_,serialize:B_},F_={scheme:"wss",domainHost:Eo.domainHost,parse:Eo.parse,serialize:Eo.serialize},H_={scheme:"urn",parse:O_,serialize:L_,skipNormalize:!0},j_={scheme:"urn:uuid",parse:D_,serialize:U_,skipNormalize:!0},No={http:dp,https:M_,ws:Eo,wss:F_,urn:H_,"urn:uuid":j_};Object.setPrototypeOf(No,null);function hf(t){return t&&(No[t]||No[t.toLowerCase()])||void 0}var Q_={SCHEMES:No,getSchemeHandler:hf};const{normalizeIPv6:q_,removeDotSegments:cs,recomposeAuthority:K_,normalizeComponentEncoding:Ws,isIPv4:W_,nonSimpleDomain:G_}=cp,{SCHEMES:V_,getSchemeHandler:hp}=Q_;function Y_(t,e){return typeof t=="string"?t=fn($n(t,e),e):typeof t=="object"&&(t=$n(fn(t,e),e)),t}function z_(t,e,r){const n=r?Object.assign({scheme:"null"},r):{scheme:"null"},i=pp($n(t,n),$n(e,n),n,!0);return n.skipEscape=!0,fn(i,n)}function pp(t,e,r,n){const i={};return n||(t=$n(fn(t,r),r),e=$n(fn(e,r),r)),r=r||{},!r.tolerant&&e.scheme?(i.scheme=e.scheme,i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=cs(e.path||""),i.query=e.query):(e.userinfo!==void 0||e.host!==void 0||e.port!==void 0?(i.userinfo=e.userinfo,i.host=e.host,i.port=e.port,i.path=cs(e.path||""),i.query=e.query):(e.path?(e.path[0]==="/"?i.path=cs(e.path):((t.userinfo!==void 0||t.host!==void 0||t.port!==void 0)&&!t.path?i.path="/"+e.path:t.path?i.path=t.path.slice(0,t.path.lastIndexOf("/")+1)+e.path:i.path=e.path,i.path=cs(i.path)),i.query=e.query):(i.path=t.path,e.query!==void 0?i.query=e.query:i.query=t.query),i.userinfo=t.userinfo,i.host=t.host,i.port=t.port),i.scheme=t.scheme),i.fragment=e.fragment,i}function X_(t,e,r){return typeof t=="string"?(t=unescape(t),t=fn(Ws($n(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=fn(Ws(t,!0),{...r,skipEscape:!0})),typeof e=="string"?(e=unescape(e),e=fn(Ws($n(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=fn(Ws(e,!0),{...r,skipEscape:!0})),t.toLowerCase()===e.toLowerCase()}function fn(t,e){const r={host:t.host,scheme:t.scheme,userinfo:t.userinfo,port:t.port,path:t.path,query:t.query,nid:t.nid,nss:t.nss,uuid:t.uuid,fragment:t.fragment,reference:t.reference,resourceName:t.resourceName,secure:t.secure,error:""},n=Object.assign({},e),i=[],s=hp(n.scheme||r.scheme);s&&s.serialize&&s.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&i.push(r.scheme,":");const o=K_(r);if(o!==void 0&&(n.reference!=="suffix"&&i.push("//"),i.push(o),r.path&&r.path[0]!=="/"&&i.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!s||!s.absolutePath)&&(a=cs(a)),o===void 0&&a[0]==="/"&&a[1]==="/"&&(a="/%2F"+a.slice(2)),i.push(a)}return r.query!==void 0&&i.push("?",r.query),r.fragment!==void 0&&i.push("#",r.fragment),i.join("")}const J_=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function $n(t,e){const r=Object.assign({},e),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let i=!1;r.reference==="suffix"&&(r.scheme?t=r.scheme+":"+t:t="//"+t);const s=t.match(J_);if(s){if(n.scheme=s[1],n.userinfo=s[3],n.host=s[4],n.port=parseInt(s[5],10),n.path=s[6]||"",n.query=s[7],n.fragment=s[8],isNaN(n.port)&&(n.port=s[5]),n.host)if(W_(n.host)===!1){const c=q_(n.host);n.host=c.host.toLowerCase(),i=c.isIPV6}else i=!0;n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");const o=hp(r.scheme||n.scheme);if(!r.unicodeSupport&&(!o||!o.unicodeSupport)&&n.host&&(r.domainHost||o&&o.domainHost)&&i===!1&&G_(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(a){n.error=n.error||"Host's domain name can not be converted to ASCII: "+a}(!o||o&&!o.skipNormalize)&&(t.indexOf("%")!==-1&&(n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),n.host!==void 0&&(n.host=unescape(n.host))),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),o&&o.parse&&o.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}const pf={SCHEMES:V_,normalize:Y_,resolve:z_,resolveComponent:pp,equal:X_,serialize:fn,parse:$n};na.exports=pf;na.exports.default=pf;na.exports.fastUri=pf;var gp=na.exports;Object.defineProperty(df,"__esModule",{value:!0});const mp=gp;mp.code='require("ajv/dist/runtime/uri").default';df.default=mp;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=ea();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=ht;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=uf(),i=ji,s=ci,o=Nr,a=ht,c=or,f=Jt,u=Re,l=w_,h=df,d=(C,v)=>new RegExp(C,v);d.code="new RegExp";const m=["removeAdditional","useDefaults","coerceTypes"],_=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},E={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},I=200;function R(C){var v,B,x,g,S,U,pe,me,Ie,Se,w,b,A,T,V,G,H,q,D,ee,ce,le,xe,Je,Ct;const Le=C.strict,mt=(v=C.code)===null||v===void 0?void 0:v.optimize,_t=mt===!0||mt===void 0?1:mt||0,pt=(x=(B=C.code)===null||B===void 0?void 0:B.regExp)!==null&&x!==void 0?x:d,Ge=(g=C.uriResolver)!==null&&g!==void 0?g:h.default;return{strictSchema:(U=(S=C.strictSchema)!==null&&S!==void 0?S:Le)!==null&&U!==void 0?U:!0,strictNumbers:(me=(pe=C.strictNumbers)!==null&&pe!==void 0?pe:Le)!==null&&me!==void 0?me:!0,strictTypes:(Se=(Ie=C.strictTypes)!==null&&Ie!==void 0?Ie:Le)!==null&&Se!==void 0?Se:"log",strictTuples:(b=(w=C.strictTuples)!==null&&w!==void 0?w:Le)!==null&&b!==void 0?b:"log",strictRequired:(T=(A=C.strictRequired)!==null&&A!==void 0?A:Le)!==null&&T!==void 0?T:!1,code:C.code?{...C.code,optimize:_t,regExp:pt}:{optimize:_t,regExp:pt},loopRequired:(V=C.loopRequired)!==null&&V!==void 0?V:I,loopEnum:(G=C.loopEnum)!==null&&G!==void 0?G:I,meta:(H=C.meta)!==null&&H!==void 0?H:!0,messages:(q=C.messages)!==null&&q!==void 0?q:!0,inlineRefs:(D=C.inlineRefs)!==null&&D!==void 0?D:!0,schemaId:(ee=C.schemaId)!==null&&ee!==void 0?ee:"$id",addUsedSchema:(ce=C.addUsedSchema)!==null&&ce!==void 0?ce:!0,validateSchema:(le=C.validateSchema)!==null&&le!==void 0?le:!0,validateFormats:(xe=C.validateFormats)!==null&&xe!==void 0?xe:!0,unicodeRegExp:(Je=C.unicodeRegExp)!==null&&Je!==void 0?Je:!0,int32range:(Ct=C.int32range)!==null&&Ct!==void 0?Ct:!0,uriResolver:Ge}}class P{constructor(v={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,v=this.opts={...v,...R(v)};const{es5:B,lines:x}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:_,es5:B,lines:x}),this.logger=J(v.logger);const g=v.validateFormats;v.validateFormats=!1,this.RULES=(0,s.getRules)(),Q.call(this,y,v,"NOT SUPPORTED"),Q.call(this,E,v,"DEPRECATED","warn"),this._metaOpts=K.call(this),v.formats&&M.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),v.keywords&&F.call(this,v.keywords),typeof v.meta=="object"&&this.addMetaSchema(v.meta),X.call(this),v.validateFormats=g}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:v,meta:B,schemaId:x}=this.opts;let g=l;x==="id"&&(g={...l},g.id=g.$id,delete g.$id),B&&v&&this.addMetaSchema(g,g[x],!1)}defaultMeta(){const{meta:v,schemaId:B}=this.opts;return this.opts.defaultMeta=typeof v=="object"?v[B]||v:void 0}validate(v,B){let x;if(typeof v=="string"){if(x=this.getSchema(v),!x)throw new Error(`no schema with key or ref "${v}"`)}else x=this.compile(v);const g=x(B);return"$async"in x||(this.errors=x.errors),g}compile(v,B){const x=this._addSchema(v,B);return x.validate||this._compileSchemaEnv(x)}compileAsync(v,B){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:x}=this.opts;return g.call(this,v,B);async function g(Se,w){await S.call(this,Se.$schema);const b=this._addSchema(Se,w);return b.validate||U.call(this,b)}async function S(Se){Se&&!this.getSchema(Se)&&await g.call(this,{$ref:Se},!0)}async function U(Se){try{return this._compileSchemaEnv(Se)}catch(w){if(!(w instanceof i.default))throw w;return pe.call(this,w),await me.call(this,w.missingSchema),U.call(this,Se)}}function pe({missingSchema:Se,missingRef:w}){if(this.refs[Se])throw new Error(`AnySchema ${Se} is loaded but ${w} cannot be resolved`)}async function me(Se){const w=await Ie.call(this,Se);this.refs[Se]||await S.call(this,w.$schema),this.refs[Se]||this.addSchema(w,Se,B)}async function Ie(Se){const w=this._loading[Se];if(w)return w;try{return await(this._loading[Se]=x(Se))}finally{delete this._loading[Se]}}}addSchema(v,B,x,g=this.opts.validateSchema){if(Array.isArray(v)){for(const U of v)this.addSchema(U,void 0,x,g);return this}let S;if(typeof v=="object"){const{schemaId:U}=this.opts;if(S=v[U],S!==void 0&&typeof S!="string")throw new Error(`schema ${U} must be string`)}return B=(0,c.normalizeId)(B||S),this._checkUnique(B),this.schemas[B]=this._addSchema(v,x,B,g,!0),this}addMetaSchema(v,B,x=this.opts.validateSchema){return this.addSchema(v,B,!0,x),this}validateSchema(v,B){if(typeof v=="boolean")return!0;let x;if(x=v.$schema,x!==void 0&&typeof x!="string")throw new Error("$schema must be a string");if(x=x||this.opts.defaultMeta||this.defaultMeta(),!x)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const g=this.validate(x,v);if(!g&&B){const S="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(S);else throw new Error(S)}return g}getSchema(v){let B;for(;typeof(B=z.call(this,v))=="string";)v=B;if(B===void 0){const{schemaId:x}=this.opts,g=new o.SchemaEnv({schema:{},schemaId:x});if(B=o.resolveSchema.call(this,g,v),!B)return;this.refs[v]=B}return B.validate||this._compileSchemaEnv(B)}removeSchema(v){if(v instanceof RegExp)return this._removeAllSchemas(this.schemas,v),this._removeAllSchemas(this.refs,v),this;switch(typeof v){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const B=z.call(this,v);return typeof B=="object"&&this._cache.delete(B.schema),delete this.schemas[v],delete this.refs[v],this}case"object":{const B=v;this._cache.delete(B);let x=v[this.opts.schemaId];return x&&(x=(0,c.normalizeId)(x),delete this.schemas[x],delete this.refs[x]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(v){for(const B of v)this.addKeyword(B);return this}addKeyword(v,B){let x;if(typeof v=="string")x=v,typeof B=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),B.keyword=x);else if(typeof v=="object"&&B===void 0){if(B=v,x=B.keyword,Array.isArray(x)&&!x.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Y.call(this,x,B),!B)return(0,u.eachItem)(x,S=>Z.call(this,S)),this;oe.call(this,B);const g={...B,type:(0,f.getJSONTypes)(B.type),schemaType:(0,f.getJSONTypes)(B.schemaType)};return(0,u.eachItem)(x,g.type.length===0?S=>Z.call(this,S,g):S=>g.type.forEach(U=>Z.call(this,S,g,U))),this}getKeyword(v){const B=this.RULES.all[v];return typeof B=="object"?B.definition:!!B}removeKeyword(v){const{RULES:B}=this;delete B.keywords[v],delete B.all[v];for(const x of B.rules){const g=x.rules.findIndex(S=>S.keyword===v);g>=0&&x.rules.splice(g,1)}return this}addFormat(v,B){return typeof B=="string"&&(B=new RegExp(B)),this.formats[v]=B,this}errorsText(v=this.errors,{separator:B=", ",dataVar:x="data"}={}){return!v||v.length===0?"No errors":v.map(g=>`${x}${g.instancePath} ${g.message}`).reduce((g,S)=>g+B+S)}$dataMetaSchema(v,B){const x=this.RULES.all;v=JSON.parse(JSON.stringify(v));for(const g of B){const S=g.split("/").slice(1);let U=v;for(const pe of S)U=U[pe];for(const pe in x){const me=x[pe];if(typeof me!="object")continue;const{$data:Ie}=me.definition,Se=U[pe];Ie&&Se&&(U[pe]=j(Se))}}return v}_removeAllSchemas(v,B){for(const x in v){const g=v[x];(!B||B.test(x))&&(typeof g=="string"?delete v[x]:g&&!g.meta&&(this._cache.delete(g.schema),delete v[x]))}}_addSchema(v,B,x,g=this.opts.validateSchema,S=this.opts.addUsedSchema){let U;const{schemaId:pe}=this.opts;if(typeof v=="object")U=v[pe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof v!="boolean")throw new Error("schema must be object or boolean")}let me=this._cache.get(v);if(me!==void 0)return me;x=(0,c.normalizeId)(U||x);const Ie=c.getSchemaRefs.call(this,v,x);return me=new o.SchemaEnv({schema:v,schemaId:pe,meta:B,baseId:x,localRefs:Ie}),this._cache.set(me.schema,me),S&&!x.startsWith("#")&&(x&&this._checkUnique(x),this.refs[x]=me),g&&this.validateSchema(v,!0),me}_checkUnique(v){if(this.schemas[v]||this.refs[v])throw new Error(`schema with key or id "${v}" already exists`)}_compileSchemaEnv(v){if(v.meta?this._compileMetaSchema(v):o.compileSchema.call(this,v),!v.validate)throw new Error("ajv implementation error");return v.validate}_compileMetaSchema(v){const B=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,v)}finally{this.opts=B}}}P.ValidationError=n.default,P.MissingRefError=i.default,t.default=P;function Q(C,v,B,x="error"){for(const g in C){const S=g;S in v&&this.logger[x](`${B}: option ${g}. ${C[S]}`)}}function z(C){return C=(0,c.normalizeId)(C),this.schemas[C]||this.refs[C]}function X(){const C=this.opts.schemas;if(C)if(Array.isArray(C))this.addSchema(C);else for(const v in C)this.addSchema(C[v],v)}function M(){for(const C in this.opts.formats){const v=this.opts.formats[C];v&&this.addFormat(C,v)}}function F(C){if(Array.isArray(C)){this.addVocabulary(C);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const v in C){const B=C[v];B.keyword||(B.keyword=v),this.addKeyword(B)}}function K(){const C={...this.opts};for(const v of m)delete C[v];return C}const se={log(){},warn(){},error(){}};function J(C){if(C===!1)return se;if(C===void 0)return console;if(C.log&&C.warn&&C.error)return C;throw new Error("logger must implement log, warn and error methods")}const ue=/^[a-z_$][a-z0-9_$:-]*$/i;function Y(C,v){const{RULES:B}=this;if((0,u.eachItem)(C,x=>{if(B.keywords[x])throw new Error(`Keyword ${x} is already defined`);if(!ue.test(x))throw new Error(`Keyword ${x} has invalid name`)}),!!v&&v.$data&&!("code"in v||"validate"in v))throw new Error('$data keyword must have "code" or "validate" function')}function Z(C,v,B){var x;const g=v==null?void 0:v.post;if(B&&g)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:S}=this;let U=g?S.post:S.rules.find(({type:me})=>me===B);if(U||(U={type:B,rules:[]},S.rules.push(U)),S.keywords[C]=!0,!v)return;const pe={keyword:C,definition:{...v,type:(0,f.getJSONTypes)(v.type),schemaType:(0,f.getJSONTypes)(v.schemaType)}};v.before?ie.call(this,U,pe,v.before):U.rules.push(pe),S.all[C]=pe,(x=v.implements)===null||x===void 0||x.forEach(me=>this.addKeyword(me))}function ie(C,v,B){const x=C.rules.findIndex(g=>g.keyword===B);x>=0?C.rules.splice(x,0,v):(C.rules.push(v),this.logger.warn(`rule ${B} is not defined`))}function oe(C){let{metaSchema:v}=C;v!==void 0&&(C.$data&&this.opts.$data&&(v=j(v)),C.validateSchema=this.compile(v,!0))}const O={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function j(C){return{anyOf:[C,O]}}})(Hh);var gf={},mf={},_f={};Object.defineProperty(_f,"__esModule",{value:!0});const Z_={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};_f.default=Z_;var fi={};Object.defineProperty(fi,"__esModule",{value:!0});fi.callRef=fi.getValidate=void 0;const eE=ji,_l=dt,Cr=ht,mi=un,El=Nr,Gs=Re,tE={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:r,it:n}=t,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:c}=n,{root:f}=s;if((r==="#"||r==="#/")&&i===f.baseId)return l();const u=El.resolveRef.call(c,f,i,r);if(u===void 0)throw new eE.default(n.opts.uriResolver,i,r);if(u instanceof El.SchemaEnv)return h(u);return d(u);function l(){if(s===f)return yo(t,o,s,s.$async);const m=e.scopeValue("root",{ref:f});return yo(t,(0,Cr._)`${m}.validate`,f,f.$async)}function h(m){const _=_p(t,m);yo(t,_,m,m.$async)}function d(m){const _=e.scopeValue("schema",a.code.source===!0?{ref:m,code:(0,Cr.stringify)(m)}:{ref:m}),y=e.name("valid"),E=t.subschema({schema:m,dataTypes:[],schemaPath:Cr.nil,topSchemaRef:_,errSchemaPath:r},y);t.mergeEvaluated(E),t.ok(y)}}};function _p(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,Cr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}fi.getValidate=_p;function yo(t,e,r,n){const{gen:i,it:s}=t,{allErrors:o,schemaEnv:a,opts:c}=s,f=c.passContext?mi.default.this:Cr.nil;n?u():l();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");const m=i.let("valid");i.try(()=>{i.code((0,Cr._)`await ${(0,_l.callValidateCode)(t,e,f)}`),d(e),o||i.assign(m,!0)},_=>{i.if((0,Cr._)`!(${_} instanceof ${s.ValidationError})`,()=>i.throw(_)),h(_),o||i.assign(m,!1)}),t.ok(m)}function l(){t.result((0,_l.callValidateCode)(t,e,f),()=>d(e),()=>h(e))}function h(m){const _=(0,Cr._)`${m}.errors`;i.assign(mi.default.vErrors,(0,Cr._)`${mi.default.vErrors} === null ? ${_} : ${mi.default.vErrors}.concat(${_})`),i.assign(mi.default.errors,(0,Cr._)`${mi.default.vErrors}.length`)}function d(m){var _;if(!s.opts.unevaluated)return;const y=(_=r==null?void 0:r.validate)===null||_===void 0?void 0:_.evaluated;if(s.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(s.props=Gs.mergeEvaluated.props(i,y.props,s.props));else{const E=i.var("props",(0,Cr._)`${m}.evaluated.props`);s.props=Gs.mergeEvaluated.props(i,E,s.props,Cr.Name)}if(s.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(s.items=Gs.mergeEvaluated.items(i,y.items,s.items));else{const E=i.var("items",(0,Cr._)`${m}.evaluated.items`);s.items=Gs.mergeEvaluated.items(i,E,s.items,Cr.Name)}}}fi.callRef=yo;fi.default=tE;Object.defineProperty(mf,"__esModule",{value:!0});const rE=_f,nE=fi,iE=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",rE.default,nE.default];mf.default=iE;var Ef={},yf={};Object.defineProperty(yf,"__esModule",{value:!0});const ko=ht,Nn=ko.operators,Po={maximum:{okStr:"<=",ok:Nn.LTE,fail:Nn.GT},minimum:{okStr:">=",ok:Nn.GTE,fail:Nn.LT},exclusiveMaximum:{okStr:"<",ok:Nn.LT,fail:Nn.GTE},exclusiveMinimum:{okStr:">",ok:Nn.GT,fail:Nn.LTE}},sE={message:({keyword:t,schemaCode:e})=>(0,ko.str)`must be ${Po[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,ko._)`{comparison: ${Po[t].okStr}, limit: ${e}}`},oE={keyword:Object.keys(Po),type:"number",schemaType:"number",$data:!0,error:sE,code(t){const{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,ko._)`${r} ${Po[e].fail} ${n} || isNaN(${r})`)}};yf.default=oE;var Af={};Object.defineProperty(Af,"__esModule",{value:!0});const ps=ht,aE={message:({schemaCode:t})=>(0,ps.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,ps._)`{multipleOf: ${t}}`},cE={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:aE,code(t){const{gen:e,data:r,schemaCode:n,it:i}=t,s=i.opts.multipleOfPrecision,o=e.let("res"),a=s?(0,ps._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,ps._)`${o} !== parseInt(${o})`;t.fail$data((0,ps._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};Af.default=cE;var bf={},wf={};Object.defineProperty(wf,"__esModule",{value:!0});function Ep(t){const e=t.length;let r=0,n=0,i;for(;n<e;)r++,i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<e&&(i=t.charCodeAt(n),(i&64512)===56320&&n++);return r}wf.default=Ep;Ep.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(bf,"__esModule",{value:!0});const ti=ht,fE=Re,uE=wf,lE={message({keyword:t,schemaCode:e}){const r=t==="maxLength"?"more":"fewer";return(0,ti.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ti._)`{limit: ${t}}`},dE={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:lE,code(t){const{keyword:e,data:r,schemaCode:n,it:i}=t,s=e==="maxLength"?ti.operators.GT:ti.operators.LT,o=i.opts.unicode===!1?(0,ti._)`${r}.length`:(0,ti._)`${(0,fE.useFunc)(t.gen,uE.default)}(${r})`;t.fail$data((0,ti._)`${o} ${s} ${n}`)}};bf.default=dE;var Sf={};Object.defineProperty(Sf,"__esModule",{value:!0});const hE=dt,To=ht,pE={message:({schemaCode:t})=>(0,To.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,To._)`{pattern: ${t}}`},gE={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:pE,code(t){const{data:e,$data:r,schema:n,schemaCode:i,it:s}=t,o=s.opts.unicodeRegExp?"u":"",a=r?(0,To._)`(new RegExp(${i}, ${o}))`:(0,hE.usePattern)(t,n);t.fail$data((0,To._)`!${a}.test(${e})`)}};Sf.default=gE;var If={};Object.defineProperty(If,"__esModule",{value:!0});const gs=ht,mE={message({keyword:t,schemaCode:e}){const r=t==="maxProperties"?"more":"fewer";return(0,gs.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,gs._)`{limit: ${t}}`},_E={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:mE,code(t){const{keyword:e,data:r,schemaCode:n}=t,i=e==="maxProperties"?gs.operators.GT:gs.operators.LT;t.fail$data((0,gs._)`Object.keys(${r}).length ${i} ${n}`)}};If.default=_E;var vf={};Object.defineProperty(vf,"__esModule",{value:!0});const Zi=dt,ms=ht,EE=Re,yE={message:({params:{missingProperty:t}})=>(0,ms.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,ms._)`{missingProperty: ${t}}`},AE={keyword:"required",type:"object",schemaType:"array",$data:!0,error:yE,code(t){const{gen:e,schema:r,schemaCode:n,data:i,$data:s,it:o}=t,{opts:a}=o;if(!s&&r.length===0)return;const c=r.length>=a.loopRequired;if(o.allErrors?f():u(),a.strictRequired){const d=t.parentSchema.properties,{definedProperties:m}=t.it;for(const _ of r)if((d==null?void 0:d[_])===void 0&&!m.has(_)){const y=o.schemaEnv.baseId+o.errSchemaPath,E=`required property "${_}" is not defined at "${y}" (strictRequired)`;(0,EE.checkStrictMode)(o,E,o.opts.strictRequired)}}function f(){if(c||s)t.block$data(ms.nil,l);else for(const d of r)(0,Zi.checkReportMissingProp)(t,d)}function u(){const d=e.let("missing");if(c||s){const m=e.let("valid",!0);t.block$data(m,()=>h(d,m)),t.ok(m)}else e.if((0,Zi.checkMissingProp)(t,r,d)),(0,Zi.reportMissingProp)(t,d),e.else()}function l(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,Zi.noPropertyInData)(e,i,d,a.ownProperties),()=>t.error())})}function h(d,m){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(m,(0,Zi.propertyInData)(e,i,d,a.ownProperties)),e.if((0,ms.not)(m),()=>{t.error(),e.break()})},ms.nil)}}};vf.default=AE;var $f={};Object.defineProperty($f,"__esModule",{value:!0});const _s=ht,bE={message({keyword:t,schemaCode:e}){const r=t==="maxItems"?"more":"fewer";return(0,_s.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,_s._)`{limit: ${t}}`},wE={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:bE,code(t){const{keyword:e,data:r,schemaCode:n}=t,i=e==="maxItems"?_s.operators.GT:_s.operators.LT;t.fail$data((0,_s._)`${r}.length ${i} ${n}`)}};$f.default=wE;var Cf={},Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});const yp=Zo;yp.code='require("ajv/dist/runtime/equal").default';Ns.default=yp;Object.defineProperty(Cf,"__esModule",{value:!0});const Ra=Jt,nr=ht,SE=Re,IE=Ns,vE={message:({params:{i:t,j:e}})=>(0,nr.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,nr._)`{i: ${t}, j: ${e}}`},$E={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:vE,code(t){const{gen:e,data:r,$data:n,schema:i,parentSchema:s,schemaCode:o,it:a}=t;if(!n&&!i)return;const c=e.let("valid"),f=s.items?(0,Ra.getSchemaTypes)(s.items):[];t.block$data(c,u,(0,nr._)`${o} === false`),t.ok(c);function u(){const m=e.let("i",(0,nr._)`${r}.length`),_=e.let("j");t.setParams({i:m,j:_}),e.assign(c,!0),e.if((0,nr._)`${m} > 1`,()=>(l()?h:d)(m,_))}function l(){return f.length>0&&!f.some(m=>m==="object"||m==="array")}function h(m,_){const y=e.name("item"),E=(0,Ra.checkDataTypes)(f,y,a.opts.strictNumbers,Ra.DataType.Wrong),I=e.const("indices",(0,nr._)`{}`);e.for((0,nr._)`;${m}--;`,()=>{e.let(y,(0,nr._)`${r}[${m}]`),e.if(E,(0,nr._)`continue`),f.length>1&&e.if((0,nr._)`typeof ${y} == "string"`,(0,nr._)`${y} += "_"`),e.if((0,nr._)`typeof ${I}[${y}] == "number"`,()=>{e.assign(_,(0,nr._)`${I}[${y}]`),t.error(),e.assign(c,!1).break()}).code((0,nr._)`${I}[${y}] = ${m}`)})}function d(m,_){const y=(0,SE.useFunc)(e,IE.default),E=e.name("outer");e.label(E).for((0,nr._)`;${m}--;`,()=>e.for((0,nr._)`${_} = ${m}; ${_}--;`,()=>e.if((0,nr._)`${y}(${r}[${m}], ${r}[${_}])`,()=>{t.error(),e.assign(c,!1).break(E)})))}}};Cf.default=$E;var xf={};Object.defineProperty(xf,"__esModule",{value:!0});const mc=ht,CE=Re,xE=Ns,RE={message:"must be equal to constant",params:({schemaCode:t})=>(0,mc._)`{allowedValue: ${t}}`},NE={keyword:"const",$data:!0,error:RE,code(t){const{gen:e,data:r,$data:n,schemaCode:i,schema:s}=t;n||s&&typeof s=="object"?t.fail$data((0,mc._)`!${(0,CE.useFunc)(e,xE.default)}(${r}, ${i})`):t.fail((0,mc._)`${s} !== ${r}`)}};xf.default=NE;var Rf={};Object.defineProperty(Rf,"__esModule",{value:!0});const fs=ht,kE=Re,PE=Ns,TE={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,fs._)`{allowedValues: ${t}}`},BE={keyword:"enum",schemaType:"array",$data:!0,error:TE,code(t){const{gen:e,data:r,$data:n,schema:i,schemaCode:s,it:o}=t;if(!n&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let c;const f=()=>c??(c=(0,kE.useFunc)(e,PE.default));let u;if(a||n)u=e.let("valid"),t.block$data(u,l);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const d=e.const("vSchema",s);u=(0,fs.or)(...i.map((m,_)=>h(d,_)))}t.pass(u);function l(){e.assign(u,!1),e.forOf("v",s,d=>e.if((0,fs._)`${f()}(${r}, ${d})`,()=>e.assign(u,!0).break()))}function h(d,m){const _=i[m];return typeof _=="object"&&_!==null?(0,fs._)`${f()}(${r}, ${d}[${m}])`:(0,fs._)`${r} === ${_}`}}};Rf.default=BE;Object.defineProperty(Ef,"__esModule",{value:!0});const OE=yf,LE=Af,DE=bf,UE=Sf,ME=If,FE=vf,HE=$f,jE=Cf,QE=xf,qE=Rf,KE=[OE.default,LE.default,DE.default,UE.default,ME.default,FE.default,HE.default,jE.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},QE.default,qE.default];Ef.default=KE;var Nf={},Qi={};Object.defineProperty(Qi,"__esModule",{value:!0});Qi.validateAdditionalItems=void 0;const ri=ht,_c=Re,WE={message:({params:{len:t}})=>(0,ri.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ri._)`{limit: ${t}}`},GE={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:WE,code(t){const{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,_c.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Ap(t,n)}};function Ap(t,e){const{gen:r,schema:n,data:i,keyword:s,it:o}=t;o.items=!0;const a=r.const("len",(0,ri._)`${i}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,ri._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,_c.alwaysValidSchema)(o,n)){const f=r.var("valid",(0,ri._)`${a} <= ${e.length}`);r.if((0,ri.not)(f),()=>c(f)),t.ok(f)}function c(f){r.forRange("i",e.length,a,u=>{t.subschema({keyword:s,dataProp:u,dataPropType:_c.Type.Num},f),o.allErrors||r.if((0,ri.not)(f),()=>r.break())})}}Qi.validateAdditionalItems=Ap;Qi.default=GE;var kf={},qi={};Object.defineProperty(qi,"__esModule",{value:!0});qi.validateTuple=void 0;const yl=ht,Ao=Re,VE=dt,YE={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:r}=t;if(Array.isArray(e))return bp(t,"additionalItems",e);r.items=!0,!(0,Ao.alwaysValidSchema)(r,e)&&t.ok((0,VE.validateArray)(t))}};function bp(t,e,r=t.schema){const{gen:n,parentSchema:i,data:s,keyword:o,it:a}=t;u(i),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Ao.mergeEvaluated.items(n,r.length,a.items));const c=n.name("valid"),f=n.const("len",(0,yl._)`${s}.length`);r.forEach((l,h)=>{(0,Ao.alwaysValidSchema)(a,l)||(n.if((0,yl._)`${f} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},c)),t.ok(c))});function u(l){const{opts:h,errSchemaPath:d}=a,m=r.length,_=m===l.minItems&&(m===l.maxItems||l[e]===!1);if(h.strictTuples&&!_){const y=`"${o}" is ${m}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,Ao.checkStrictMode)(a,y,h.strictTuples)}}}qi.validateTuple=bp;qi.default=YE;Object.defineProperty(kf,"__esModule",{value:!0});const zE=qi,XE={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,zE.validateTuple)(t,"items")};kf.default=XE;var Pf={};Object.defineProperty(Pf,"__esModule",{value:!0});const Al=ht,JE=Re,ZE=dt,ey=Qi,ty={message:({params:{len:t}})=>(0,Al.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,Al._)`{limit: ${t}}`},ry={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:ty,code(t){const{schema:e,parentSchema:r,it:n}=t,{prefixItems:i}=r;n.items=!0,!(0,JE.alwaysValidSchema)(n,e)&&(i?(0,ey.validateAdditionalItems)(t,i):t.ok((0,ZE.validateArray)(t)))}};Pf.default=ry;var Tf={};Object.defineProperty(Tf,"__esModule",{value:!0});const Lr=ht,Vs=Re,ny={message:({params:{min:t,max:e}})=>e===void 0?(0,Lr.str)`must contain at least ${t} valid item(s)`:(0,Lr.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Lr._)`{minContains: ${t}}`:(0,Lr._)`{minContains: ${t}, maxContains: ${e}}`},iy={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:ny,code(t){const{gen:e,schema:r,parentSchema:n,data:i,it:s}=t;let o,a;const{minContains:c,maxContains:f}=n;s.opts.next?(o=c===void 0?1:c,a=f):o=1;const u=e.const("len",(0,Lr._)`${i}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,Vs.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,Vs.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,Vs.alwaysValidSchema)(s,r)){let _=(0,Lr._)`${u} >= ${o}`;a!==void 0&&(_=(0,Lr._)`${_} && ${u} <= ${a}`),t.pass(_);return}s.items=!0;const l=e.name("valid");a===void 0&&o===1?d(l,()=>e.if(l,()=>e.break())):o===0?(e.let(l,!0),a!==void 0&&e.if((0,Lr._)`${i}.length > 0`,h)):(e.let(l,!1),h()),t.result(l,()=>t.reset());function h(){const _=e.name("_valid"),y=e.let("count",0);d(_,()=>e.if(_,()=>m(y)))}function d(_,y){e.forRange("i",0,u,E=>{t.subschema({keyword:"contains",dataProp:E,dataPropType:Vs.Type.Num,compositeRule:!0},_),y()})}function m(_){e.code((0,Lr._)`${_}++`),a===void 0?e.if((0,Lr._)`${_} >= ${o}`,()=>e.assign(l,!0).break()):(e.if((0,Lr._)`${_} > ${a}`,()=>e.assign(l,!1).break()),o===1?e.assign(l,!0):e.if((0,Lr._)`${_} >= ${o}`,()=>e.assign(l,!0)))}}};Tf.default=iy;var wp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=ht,r=Re,n=dt;t.error={message:({params:{property:c,depsCount:f,deps:u}})=>{const l=f===1?"property":"properties";return(0,e.str)`must have ${l} ${u} when property ${c} is present`},params:({params:{property:c,depsCount:f,deps:u,missingProperty:l}})=>(0,e._)`{property: ${c},
    missingProperty: ${l},
    depsCount: ${f},
    deps: ${u}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(c){const[f,u]=s(c);o(c,f),a(c,u)}};function s({schema:c}){const f={},u={};for(const l in c){if(l==="__proto__")continue;const h=Array.isArray(c[l])?f:u;h[l]=c[l]}return[f,u]}function o(c,f=c.schema){const{gen:u,data:l,it:h}=c;if(Object.keys(f).length===0)return;const d=u.let("missing");for(const m in f){const _=f[m];if(_.length===0)continue;const y=(0,n.propertyInData)(u,l,m,h.opts.ownProperties);c.setParams({property:m,depsCount:_.length,deps:_.join(", ")}),h.allErrors?u.if(y,()=>{for(const E of _)(0,n.checkReportMissingProp)(c,E)}):(u.if((0,e._)`${y} && (${(0,n.checkMissingProp)(c,_,d)})`),(0,n.reportMissingProp)(c,d),u.else())}}t.validatePropertyDeps=o;function a(c,f=c.schema){const{gen:u,data:l,keyword:h,it:d}=c,m=u.name("valid");for(const _ in f)(0,r.alwaysValidSchema)(d,f[_])||(u.if((0,n.propertyInData)(u,l,_,d.opts.ownProperties),()=>{const y=c.subschema({keyword:h,schemaProp:_},m);c.mergeValidEvaluated(y,m)},()=>u.var(m,!0)),c.ok(m))}t.validateSchemaDeps=a,t.default=i})(wp);var Bf={};Object.defineProperty(Bf,"__esModule",{value:!0});const Sp=ht,sy=Re,oy={message:"property name must be valid",params:({params:t})=>(0,Sp._)`{propertyName: ${t.propertyName}}`},ay={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:oy,code(t){const{gen:e,schema:r,data:n,it:i}=t;if((0,sy.alwaysValidSchema)(i,r))return;const s=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),e.if((0,Sp.not)(s),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(s)}};Bf.default=ay;var ia={};Object.defineProperty(ia,"__esModule",{value:!0});const Ys=dt,Wr=ht,cy=un,zs=Re,fy={message:"must NOT have additional properties",params:({params:t})=>(0,Wr._)`{additionalProperty: ${t.additionalProperty}}`},uy={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:fy,code(t){const{gen:e,schema:r,parentSchema:n,data:i,errsCount:s,it:o}=t;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,zs.alwaysValidSchema)(o,r))return;const f=(0,Ys.allSchemaProperties)(n.properties),u=(0,Ys.allSchemaProperties)(n.patternProperties);l(),t.ok((0,Wr._)`${s} === ${cy.default.errors}`);function l(){e.forIn("key",i,y=>{!f.length&&!u.length?m(y):e.if(h(y),()=>m(y))})}function h(y){let E;if(f.length>8){const I=(0,zs.schemaRefOrVal)(o,n.properties,"properties");E=(0,Ys.isOwnProperty)(e,I,y)}else f.length?E=(0,Wr.or)(...f.map(I=>(0,Wr._)`${y} === ${I}`)):E=Wr.nil;return u.length&&(E=(0,Wr.or)(E,...u.map(I=>(0,Wr._)`${(0,Ys.usePattern)(t,I)}.test(${y})`))),(0,Wr.not)(E)}function d(y){e.code((0,Wr._)`delete ${i}[${y}]`)}function m(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){d(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,zs.alwaysValidSchema)(o,r)){const E=e.name("valid");c.removeAdditional==="failing"?(_(y,E,!1),e.if((0,Wr.not)(E),()=>{t.reset(),d(y)})):(_(y,E),a||e.if((0,Wr.not)(E),()=>e.break()))}}function _(y,E,I){const R={keyword:"additionalProperties",dataProp:y,dataPropType:zs.Type.Str};I===!1&&Object.assign(R,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(R,E)}}};ia.default=uy;var Of={};Object.defineProperty(Of,"__esModule",{value:!0});const ly=ea(),bl=dt,Na=Re,wl=ia,dy={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:n,data:i,it:s}=t;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&wl.default.code(new ly.KeywordCxt(s,wl.default,"additionalProperties"));const o=(0,bl.allSchemaProperties)(r);for(const l of o)s.definedProperties.add(l);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=Na.mergeEvaluated.props(e,(0,Na.toHash)(o),s.props));const a=o.filter(l=>!(0,Na.alwaysValidSchema)(s,r[l]));if(a.length===0)return;const c=e.name("valid");for(const l of a)f(l)?u(l):(e.if((0,bl.propertyInData)(e,i,l,s.opts.ownProperties)),u(l),s.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(l),t.ok(c);function f(l){return s.opts.useDefaults&&!s.compositeRule&&r[l].default!==void 0}function u(l){t.subschema({keyword:"properties",schemaProp:l,dataProp:l},c)}}};Of.default=dy;var Lf={};Object.defineProperty(Lf,"__esModule",{value:!0});const Sl=dt,Xs=ht,Il=Re,vl=Re,hy={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,data:n,parentSchema:i,it:s}=t,{opts:o}=s,a=(0,Sl.allSchemaProperties)(r),c=a.filter(_=>(0,Il.alwaysValidSchema)(s,r[_]));if(a.length===0||c.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const f=o.strictSchema&&!o.allowMatchingProperties&&i.properties,u=e.name("valid");s.props!==!0&&!(s.props instanceof Xs.Name)&&(s.props=(0,vl.evaluatedPropsToName)(e,s.props));const{props:l}=s;h();function h(){for(const _ of a)f&&d(_),s.allErrors?m(_):(e.var(u,!0),m(_),e.if(u))}function d(_){for(const y in f)new RegExp(_).test(y)&&(0,Il.checkStrictMode)(s,`property ${y} matches pattern ${_} (use allowMatchingProperties)`)}function m(_){e.forIn("key",n,y=>{e.if((0,Xs._)`${(0,Sl.usePattern)(t,_)}.test(${y})`,()=>{const E=c.includes(_);E||t.subschema({keyword:"patternProperties",schemaProp:_,dataProp:y,dataPropType:vl.Type.Str},u),s.opts.unevaluated&&l!==!0?e.assign((0,Xs._)`${l}[${y}]`,!0):!E&&!s.allErrors&&e.if((0,Xs.not)(u),()=>e.break())})})}}};Lf.default=hy;var Df={};Object.defineProperty(Df,"__esModule",{value:!0});const py=Re,gy={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:r,it:n}=t;if((0,py.alwaysValidSchema)(n,r)){t.fail();return}const i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};Df.default=gy;var Uf={};Object.defineProperty(Uf,"__esModule",{value:!0});const my=dt,_y={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:my.validateUnion,error:{message:"must match a schema in anyOf"}};Uf.default=_y;var Mf={};Object.defineProperty(Mf,"__esModule",{value:!0});const bo=ht,Ey=Re,yy={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,bo._)`{passingSchemas: ${t.passing}}`},Ay={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:yy,code(t){const{gen:e,schema:r,parentSchema:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;const s=r,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(f),t.result(o,()=>t.reset(),()=>t.error(!0));function f(){s.forEach((u,l)=>{let h;(0,Ey.alwaysValidSchema)(i,u)?e.var(c,!0):h=t.subschema({keyword:"oneOf",schemaProp:l,compositeRule:!0},c),l>0&&e.if((0,bo._)`${c} && ${o}`).assign(o,!1).assign(a,(0,bo._)`[${a}, ${l}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,l),h&&t.mergeEvaluated(h,bo.Name)})})}}};Mf.default=Ay;var Ff={};Object.defineProperty(Ff,"__esModule",{value:!0});const by=Re,wy={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const i=e.name("valid");r.forEach((s,o)=>{if((0,by.alwaysValidSchema)(n,s))return;const a=t.subschema({keyword:"allOf",schemaProp:o},i);t.ok(i),t.mergeEvaluated(a)})}};Ff.default=wy;var Hf={};Object.defineProperty(Hf,"__esModule",{value:!0});const Bo=ht,Ip=Re,Sy={message:({params:t})=>(0,Bo.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Bo._)`{failingKeyword: ${t.ifClause}}`},Iy={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Sy,code(t){const{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,Ip.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const i=$l(n,"then"),s=$l(n,"else");if(!i&&!s)return;const o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),i&&s){const u=e.let("ifClause");t.setParams({ifClause:u}),e.if(a,f("then",u),f("else",u))}else i?e.if(a,f("then")):e.if((0,Bo.not)(a),f("else"));t.pass(o,()=>t.error(!0));function c(){const u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(u)}function f(u,l){return()=>{const h=t.subschema({keyword:u},a);e.assign(o,a),t.mergeValidEvaluated(h,o),l?e.assign(l,(0,Bo._)`${u}`):t.setParams({ifClause:u})}}}};function $l(t,e){const r=t.schema[e];return r!==void 0&&!(0,Ip.alwaysValidSchema)(t,r)}Hf.default=Iy;var jf={};Object.defineProperty(jf,"__esModule",{value:!0});const vy=Re,$y={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,vy.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};jf.default=$y;Object.defineProperty(Nf,"__esModule",{value:!0});const Cy=Qi,xy=kf,Ry=qi,Ny=Pf,ky=Tf,Py=wp,Ty=Bf,By=ia,Oy=Of,Ly=Lf,Dy=Df,Uy=Uf,My=Mf,Fy=Ff,Hy=Hf,jy=jf;function Qy(t=!1){const e=[Dy.default,Uy.default,My.default,Fy.default,Hy.default,jy.default,Ty.default,By.default,Py.default,Oy.default,Ly.default];return t?e.push(xy.default,Ny.default):e.push(Cy.default,Ry.default),e.push(ky.default),e}Nf.default=Qy;var Qf={},qf={};Object.defineProperty(qf,"__esModule",{value:!0});const Vt=ht,qy={message:({schemaCode:t})=>(0,Vt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Vt._)`{format: ${t}}`},Ky={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:qy,code(t,e){const{gen:r,data:n,$data:i,schema:s,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:f,schemaEnv:u,self:l}=a;if(!c.validateFormats)return;i?h():d();function h(){const m=r.scopeValue("formats",{ref:l.formats,code:c.code.formats}),_=r.const("fDef",(0,Vt._)`${m}[${o}]`),y=r.let("fType"),E=r.let("format");r.if((0,Vt._)`typeof ${_} == "object" && !(${_} instanceof RegExp)`,()=>r.assign(y,(0,Vt._)`${_}.type || "string"`).assign(E,(0,Vt._)`${_}.validate`),()=>r.assign(y,(0,Vt._)`"string"`).assign(E,_)),t.fail$data((0,Vt.or)(I(),R()));function I(){return c.strictSchema===!1?Vt.nil:(0,Vt._)`${o} && !${E}`}function R(){const P=u.$async?(0,Vt._)`(${_}.async ? await ${E}(${n}) : ${E}(${n}))`:(0,Vt._)`${E}(${n})`,Q=(0,Vt._)`(typeof ${E} == "function" ? ${P} : ${E}.test(${n}))`;return(0,Vt._)`${E} && ${E} !== true && ${y} === ${e} && !${Q}`}}function d(){const m=l.formats[s];if(!m){I();return}if(m===!0)return;const[_,y,E]=R(m);_===e&&t.pass(P());function I(){if(c.strictSchema===!1){l.logger.warn(Q());return}throw new Error(Q());function Q(){return`unknown format "${s}" ignored in schema at path "${f}"`}}function R(Q){const z=Q instanceof RegExp?(0,Vt.regexpCode)(Q):c.code.formats?(0,Vt._)`${c.code.formats}${(0,Vt.getProperty)(s)}`:void 0,X=r.scopeValue("formats",{key:s,ref:Q,code:z});return typeof Q=="object"&&!(Q instanceof RegExp)?[Q.type||"string",Q.validate,(0,Vt._)`${X}.validate`]:["string",Q,X]}function P(){if(typeof m=="object"&&!(m instanceof RegExp)&&m.async){if(!u.$async)throw new Error("async format in sync schema");return(0,Vt._)`await ${E}(${n})`}return typeof y=="function"?(0,Vt._)`${E}(${n})`:(0,Vt._)`${E}.test(${n})`}}}};qf.default=Ky;Object.defineProperty(Qf,"__esModule",{value:!0});const Wy=qf,Gy=[Wy.default];Qf.default=Gy;var Di={};Object.defineProperty(Di,"__esModule",{value:!0});Di.contentVocabulary=Di.metadataVocabulary=void 0;Di.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Di.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(gf,"__esModule",{value:!0});const Vy=mf,Yy=Ef,zy=Nf,Xy=Qf,Cl=Di,Jy=[Vy.default,Yy.default,(0,zy.default)(),Xy.default,Cl.metadataVocabulary,Cl.contentVocabulary];gf.default=Jy;var Kf={},sa={};Object.defineProperty(sa,"__esModule",{value:!0});sa.DiscrError=void 0;var xl;(function(t){t.Tag="tag",t.Mapping="mapping"})(xl||(sa.DiscrError=xl={}));Object.defineProperty(Kf,"__esModule",{value:!0});const Si=ht,Ec=sa,Rl=Nr,Zy=ji,eA=Re,tA={message:({params:{discrError:t,tagName:e}})=>t===Ec.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Si._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},rA={keyword:"discriminator",type:"object",schemaType:"object",error:tA,code(t){const{gen:e,data:r,schema:n,parentSchema:i,it:s}=t,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const c=e.let("valid",!1),f=e.const("tag",(0,Si._)`${r}${(0,Si.getProperty)(a)}`);e.if((0,Si._)`typeof ${f} == "string"`,()=>u(),()=>t.error(!1,{discrError:Ec.DiscrError.Tag,tag:f,tagName:a})),t.ok(c);function u(){const d=h();e.if(!1);for(const m in d)e.elseIf((0,Si._)`${f} === ${m}`),e.assign(c,l(d[m]));e.else(),t.error(!1,{discrError:Ec.DiscrError.Mapping,tag:f,tagName:a}),e.endIf()}function l(d){const m=e.name("valid"),_=t.subschema({keyword:"oneOf",schemaProp:d},m);return t.mergeEvaluated(_,Si.Name),m}function h(){var d;const m={},_=E(i);let y=!0;for(let P=0;P<o.length;P++){let Q=o[P];if(Q!=null&&Q.$ref&&!(0,eA.schemaHasRulesButRef)(Q,s.self.RULES)){const X=Q.$ref;if(Q=Rl.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,X),Q instanceof Rl.SchemaEnv&&(Q=Q.schema),Q===void 0)throw new Zy.default(s.opts.uriResolver,s.baseId,X)}const z=(d=Q==null?void 0:Q.properties)===null||d===void 0?void 0:d[a];if(typeof z!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(_||E(Q)),I(z,P)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return m;function E({required:P}){return Array.isArray(P)&&P.includes(a)}function I(P,Q){if(P.const)R(P.const,Q);else if(P.enum)for(const z of P.enum)R(z,Q);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function R(P,Q){if(typeof P!="string"||P in m)throw new Error(`discriminator: "${a}" values must be unique strings`);m[P]=Q}}}};Kf.default=rA;const nA="http://json-schema.org/draft-07/schema#",iA="http://json-schema.org/draft-07/schema#",sA="Core schema meta-schema",oA={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},aA=["object","boolean"],cA={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},fA={$schema:nA,$id:iA,title:sA,definitions:oA,type:aA,properties:cA,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const r=Hh,n=gf,i=Kf,s=fA,o=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(m=>this.addVocabulary(m)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const m=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(m,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.Ajv=c,t.exports=e=c,t.exports.Ajv=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var f=ea();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return f.KeywordCxt}});var u=ht;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var l=uf();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return l.default}});var h=ji;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return h.default}})})(lc,lc.exports);var uA=lc.exports,yc={exports:{}},vp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0;function e(F,K){return{validate:F,compare:K}}t.fullFormats={date:e(s,o),time:e(c,f),"date-time":e(l,h),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:_,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:M,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:E,int32:{type:"number",validate:P},int64:{type:"number",validate:Q},float:{type:"number",validate:z},double:{type:"number",validate:z},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:e(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,o),time:e(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,f),"date-time":e(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,h),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);function r(F){return F%4===0&&(F%100!==0||F%400===0)}const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];function s(F){const K=n.exec(F);if(!K)return!1;const se=+K[1],J=+K[2],ue=+K[3];return J>=1&&J<=12&&ue>=1&&ue<=(J===2&&r(se)?29:i[J])}function o(F,K){if(F&&K)return F>K?1:F<K?-1:0}const a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function c(F,K){const se=a.exec(F);if(!se)return!1;const J=+se[1],ue=+se[2],Y=+se[3],Z=se[5];return(J<=23&&ue<=59&&Y<=59||J===23&&ue===59&&Y===60)&&(!K||Z!=="")}function f(F,K){if(!(F&&K))return;const se=a.exec(F),J=a.exec(K);if(se&&J)return F=se[1]+se[2]+se[3]+(se[4]||""),K=J[1]+J[2]+J[3]+(J[4]||""),F>K?1:F<K?-1:0}const u=/t|\s/i;function l(F){const K=F.split(u);return K.length===2&&s(K[0])&&c(K[1],!0)}function h(F,K){if(!(F&&K))return;const[se,J]=F.split(u),[ue,Y]=K.split(u),Z=o(se,ue);if(Z!==void 0)return Z||f(J,Y)}const d=/\/|:/,m=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function _(F){return d.test(F)&&m.test(F)}const y=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function E(F){return y.lastIndex=0,y.test(F)}const I=-2147483648,R=2**31-1;function P(F){return Number.isInteger(F)&&F<=R&&F>=I}function Q(F){return Number.isInteger(F)}function z(){return!0}const X=/[^\\]\\Z/;function M(F){if(X.test(F))return!1;try{return new RegExp(F),!0}catch{return!1}}})(vp);var $p={},Ac={exports:{}},Cp={},En={},Jn={},ka={},ut={},$s={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class e{}t._CodeOrName=e,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends e{constructor(I){if(super(),!t.IDENTIFIER.test(I))throw new Error("CodeGen: name must be a valid identifier");this.str=I}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=r;class n extends e{constructor(I){super(),this._items=typeof I=="string"?[I]:I}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const I=this._items[0];return I===""||I==='""'}get str(){var I;return(I=this._str)!==null&&I!==void 0?I:this._str=this._items.reduce((R,P)=>`${R}${P}`,"")}get names(){var I;return(I=this._names)!==null&&I!==void 0?I:this._names=this._items.reduce((R,P)=>(P instanceof r&&(R[P.str]=(R[P.str]||0)+1),R),{})}}t._Code=n,t.nil=new n("");function i(E,...I){const R=[E[0]];let P=0;for(;P<I.length;)a(R,I[P]),R.push(E[++P]);return new n(R)}t._=i;const s=new n("+");function o(E,...I){const R=[d(E[0])];let P=0;for(;P<I.length;)R.push(s),a(R,I[P]),R.push(s,d(E[++P]));return c(R),new n(R)}t.str=o;function a(E,I){I instanceof n?E.push(...I._items):I instanceof r?E.push(I):E.push(l(I))}t.addCodeArg=a;function c(E){let I=1;for(;I<E.length-1;){if(E[I]===s){const R=f(E[I-1],E[I+1]);if(R!==void 0){E.splice(I-1,3,R);continue}E[I++]="+"}I++}}function f(E,I){if(I==='""')return E;if(E==='""')return I;if(typeof E=="string")return I instanceof r||E[E.length-1]!=='"'?void 0:typeof I!="string"?`${E.slice(0,-1)}${I}"`:I[0]==='"'?E.slice(0,-1)+I.slice(1):void 0;if(typeof I=="string"&&I[0]==='"'&&!(E instanceof r))return`"${E}${I.slice(1)}`}function u(E,I){return I.emptyStr()?E:E.emptyStr()?I:o`${E}${I}`}t.strConcat=u;function l(E){return typeof E=="number"||typeof E=="boolean"||E===null?E:d(Array.isArray(E)?E.join(","):E)}function h(E){return new n(d(E))}t.stringify=h;function d(E){return JSON.stringify(E).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.safeStringify=d;function m(E){return typeof E=="string"&&t.IDENTIFIER.test(E)?new n(`.${E}`):i`[${E}]`}t.getProperty=m;function _(E){if(typeof E=="string"&&t.IDENTIFIER.test(E))return new n(`${E}`);throw new Error(`CodeGen: invalid export name: ${E}, use explicit $id name mapping`)}t.getEsmExportName=_;function y(E){return new n(E.toString())}t.regexpCode=y})($s);var bc={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const e=$s;class r extends Error{constructor(f){super(`CodeGen: "code" for ${f} not defined`),this.value=f.value}}var n;(function(c){c[c.Started=0]="Started",c[c.Completed=1]="Completed"})(n||(t.UsedValueState=n={})),t.varKinds={const:new e.Name("const"),let:new e.Name("let"),var:new e.Name("var")};class i{constructor({prefixes:f,parent:u}={}){this._names={},this._prefixes=f,this._parent=u}toName(f){return f instanceof e.Name?f:this.name(f)}name(f){return new e.Name(this._newName(f))}_newName(f){const u=this._names[f]||this._nameGroup(f);return`${f}${u.index++}`}_nameGroup(f){var u,l;if(!((l=(u=this._parent)===null||u===void 0?void 0:u._prefixes)===null||l===void 0)&&l.has(f)||this._prefixes&&!this._prefixes.has(f))throw new Error(`CodeGen: prefix "${f}" is not allowed in this scope`);return this._names[f]={prefix:f,index:0}}}t.Scope=i;class s extends e.Name{constructor(f,u){super(u),this.prefix=f}setValue(f,{property:u,itemIndex:l}){this.value=f,this.scopePath=(0,e._)`.${new e.Name(u)}[${l}]`}}t.ValueScopeName=s;const o=(0,e._)`\n`;class a extends i{constructor(f){super(f),this._values={},this._scope=f.scope,this.opts={...f,_n:f.lines?o:e.nil}}get(){return this._scope}name(f){return new s(f,this._newName(f))}value(f,u){var l;if(u.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const h=this.toName(f),{prefix:d}=h,m=(l=u.key)!==null&&l!==void 0?l:u.ref;let _=this._values[d];if(_){const I=_.get(m);if(I)return I}else _=this._values[d]=new Map;_.set(m,h);const y=this._scope[d]||(this._scope[d]=[]),E=y.length;return y[E]=u.ref,h.setValue(u,{property:d,itemIndex:E}),h}getValue(f,u){const l=this._values[f];if(l)return l.get(u)}scopeRefs(f,u=this._values){return this._reduceValues(u,l=>{if(l.scopePath===void 0)throw new Error(`CodeGen: name "${l}" has no value`);return(0,e._)`${f}${l.scopePath}`})}scopeCode(f=this._values,u,l){return this._reduceValues(f,h=>{if(h.value===void 0)throw new Error(`CodeGen: name "${h}" has no value`);return h.value.code},u,l)}_reduceValues(f,u,l={},h){let d=e.nil;for(const m in f){const _=f[m];if(!_)continue;const y=l[m]=l[m]||new Map;_.forEach(E=>{if(y.has(E))return;y.set(E,n.Started);let I=u(E);if(I){const R=this.opts.es5?t.varKinds.var:t.varKinds.const;d=(0,e._)`${d}${R} ${E} = ${I};${this.opts._n}`}else if(I=h==null?void 0:h(E))d=(0,e._)`${d}${I}${this.opts._n}`;else throw new r(E);y.set(E,n.Completed)})}return d}}t.ValueScope=a})(bc);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const e=$s,r=bc;var n=$s;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return n.Name}});var i=bc;Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),t.operators={GT:new e._Code(">"),GTE:new e._Code(">="),LT:new e._Code("<"),LTE:new e._Code("<="),EQ:new e._Code("==="),NEQ:new e._Code("!=="),NOT:new e._Code("!"),OR:new e._Code("||"),AND:new e._Code("&&"),ADD:new e._Code("+")};class s{optimizeNodes(){return this}optimizeNames(g,S){return this}}class o extends s{constructor(g,S,U){super(),this.varKind=g,this.name=S,this.rhs=U}render({es5:g,_n:S}){const U=g?r.varKinds.var:this.varKind,pe=this.rhs===void 0?"":` = ${this.rhs}`;return`${U} ${this.name}${pe};`+S}optimizeNames(g,S){if(g[this.name.str])return this.rhs&&(this.rhs=Y(this.rhs,g,S)),this}get names(){return this.rhs instanceof e._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(g,S,U){super(),this.lhs=g,this.rhs=S,this.sideEffects=U}render({_n:g}){return`${this.lhs} = ${this.rhs};`+g}optimizeNames(g,S){if(!(this.lhs instanceof e.Name&&!g[this.lhs.str]&&!this.sideEffects))return this.rhs=Y(this.rhs,g,S),this}get names(){const g=this.lhs instanceof e.Name?{}:{...this.lhs.names};return ue(g,this.rhs)}}class c extends a{constructor(g,S,U,pe){super(g,U,pe),this.op=S}render({_n:g}){return`${this.lhs} ${this.op}= ${this.rhs};`+g}}class f extends s{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`${this.label}:`+g}}class u extends s{constructor(g){super(),this.label=g,this.names={}}render({_n:g}){return`break${this.label?` ${this.label}`:""};`+g}}class l extends s{constructor(g){super(),this.error=g}render({_n:g}){return`throw ${this.error};`+g}get names(){return this.error.names}}class h extends s{constructor(g){super(),this.code=g}render({_n:g}){return`${this.code};`+g}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(g,S){return this.code=Y(this.code,g,S),this}get names(){return this.code instanceof e._CodeOrName?this.code.names:{}}}class d extends s{constructor(g=[]){super(),this.nodes=g}render(g){return this.nodes.reduce((S,U)=>S+U.render(g),"")}optimizeNodes(){const{nodes:g}=this;let S=g.length;for(;S--;){const U=g[S].optimizeNodes();Array.isArray(U)?g.splice(S,1,...U):U?g[S]=U:g.splice(S,1)}return g.length>0?this:void 0}optimizeNames(g,S){const{nodes:U}=this;let pe=U.length;for(;pe--;){const me=U[pe];me.optimizeNames(g,S)||(Z(g,me.names),U.splice(pe,1))}return U.length>0?this:void 0}get names(){return this.nodes.reduce((g,S)=>J(g,S.names),{})}}class m extends d{render(g){return"{"+g._n+super.render(g)+"}"+g._n}}class _ extends d{}class y extends m{}y.kind="else";class E extends m{constructor(g,S){super(S),this.condition=g}render(g){let S=`if(${this.condition})`+super.render(g);return this.else&&(S+="else "+this.else.render(g)),S}optimizeNodes(){super.optimizeNodes();const g=this.condition;if(g===!0)return this.nodes;let S=this.else;if(S){const U=S.optimizeNodes();S=this.else=Array.isArray(U)?new y(U):U}if(S)return g===!1?S instanceof E?S:S.nodes:this.nodes.length?this:new E(ie(g),S instanceof E?[S]:S.nodes);if(!(g===!1||!this.nodes.length))return this}optimizeNames(g,S){var U;if(this.else=(U=this.else)===null||U===void 0?void 0:U.optimizeNames(g,S),!!(super.optimizeNames(g,S)||this.else))return this.condition=Y(this.condition,g,S),this}get names(){const g=super.names;return ue(g,this.condition),this.else&&J(g,this.else.names),g}}E.kind="if";class I extends m{}I.kind="for";class R extends I{constructor(g){super(),this.iteration=g}render(g){return`for(${this.iteration})`+super.render(g)}optimizeNames(g,S){if(super.optimizeNames(g,S))return this.iteration=Y(this.iteration,g,S),this}get names(){return J(super.names,this.iteration.names)}}class P extends I{constructor(g,S,U,pe){super(),this.varKind=g,this.name=S,this.from=U,this.to=pe}render(g){const S=g.es5?r.varKinds.var:this.varKind,{name:U,from:pe,to:me}=this;return`for(${S} ${U}=${pe}; ${U}<${me}; ${U}++)`+super.render(g)}get names(){const g=ue(super.names,this.from);return ue(g,this.to)}}class Q extends I{constructor(g,S,U,pe){super(),this.loop=g,this.varKind=S,this.name=U,this.iterable=pe}render(g){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(g)}optimizeNames(g,S){if(super.optimizeNames(g,S))return this.iterable=Y(this.iterable,g,S),this}get names(){return J(super.names,this.iterable.names)}}class z extends m{constructor(g,S,U){super(),this.name=g,this.args=S,this.async=U}render(g){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(g)}}z.kind="func";class X extends d{render(g){return"return "+super.render(g)}}X.kind="return";class M extends m{render(g){let S="try"+super.render(g);return this.catch&&(S+=this.catch.render(g)),this.finally&&(S+=this.finally.render(g)),S}optimizeNodes(){var g,S;return super.optimizeNodes(),(g=this.catch)===null||g===void 0||g.optimizeNodes(),(S=this.finally)===null||S===void 0||S.optimizeNodes(),this}optimizeNames(g,S){var U,pe;return super.optimizeNames(g,S),(U=this.catch)===null||U===void 0||U.optimizeNames(g,S),(pe=this.finally)===null||pe===void 0||pe.optimizeNames(g,S),this}get names(){const g=super.names;return this.catch&&J(g,this.catch.names),this.finally&&J(g,this.finally.names),g}}class F extends m{constructor(g){super(),this.error=g}render(g){return`catch(${this.error})`+super.render(g)}}F.kind="catch";class K extends m{render(g){return"finally"+super.render(g)}}K.kind="finally";class se{constructor(g,S={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...S,_n:S.lines?`
`:""},this._extScope=g,this._scope=new r.Scope({parent:g}),this._nodes=[new _]}toString(){return this._root.render(this.opts)}name(g){return this._scope.name(g)}scopeName(g){return this._extScope.name(g)}scopeValue(g,S){const U=this._extScope.value(g,S);return(this._values[U.prefix]||(this._values[U.prefix]=new Set)).add(U),U}getScopeValue(g,S){return this._extScope.getValue(g,S)}scopeRefs(g){return this._extScope.scopeRefs(g,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(g,S,U,pe){const me=this._scope.toName(S);return U!==void 0&&pe&&(this._constants[me.str]=U),this._leafNode(new o(g,me,U)),me}const(g,S,U){return this._def(r.varKinds.const,g,S,U)}let(g,S,U){return this._def(r.varKinds.let,g,S,U)}var(g,S,U){return this._def(r.varKinds.var,g,S,U)}assign(g,S,U){return this._leafNode(new a(g,S,U))}add(g,S){return this._leafNode(new c(g,t.operators.ADD,S))}code(g){return typeof g=="function"?g():g!==e.nil&&this._leafNode(new h(g)),this}object(...g){const S=["{"];for(const[U,pe]of g)S.length>1&&S.push(","),S.push(U),(U!==pe||this.opts.es5)&&(S.push(":"),(0,e.addCodeArg)(S,pe));return S.push("}"),new e._Code(S)}if(g,S,U){if(this._blockNode(new E(g)),S&&U)this.code(S).else().code(U).endIf();else if(S)this.code(S).endIf();else if(U)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(g){return this._elseNode(new E(g))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(E,y)}_for(g,S){return this._blockNode(g),S&&this.code(S).endFor(),this}for(g,S){return this._for(new R(g),S)}forRange(g,S,U,pe,me=this.opts.es5?r.varKinds.var:r.varKinds.let){const Ie=this._scope.toName(g);return this._for(new P(me,Ie,S,U),()=>pe(Ie))}forOf(g,S,U,pe=r.varKinds.const){const me=this._scope.toName(g);if(this.opts.es5){const Ie=S instanceof e.Name?S:this.var("_arr",S);return this.forRange("_i",0,(0,e._)`${Ie}.length`,Se=>{this.var(me,(0,e._)`${Ie}[${Se}]`),U(me)})}return this._for(new Q("of",pe,me,S),()=>U(me))}forIn(g,S,U,pe=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(g,(0,e._)`Object.keys(${S})`,U);const me=this._scope.toName(g);return this._for(new Q("in",pe,me,S),()=>U(me))}endFor(){return this._endBlockNode(I)}label(g){return this._leafNode(new f(g))}break(g){return this._leafNode(new u(g))}return(g){const S=new X;if(this._blockNode(S),this.code(g),S.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(X)}try(g,S,U){if(!S&&!U)throw new Error('CodeGen: "try" without "catch" and "finally"');const pe=new M;if(this._blockNode(pe),this.code(g),S){const me=this.name("e");this._currNode=pe.catch=new F(me),S(me)}return U&&(this._currNode=pe.finally=new K,this.code(U)),this._endBlockNode(F,K)}throw(g){return this._leafNode(new l(g))}block(g,S){return this._blockStarts.push(this._nodes.length),g&&this.code(g).endBlock(S),this}endBlock(g){const S=this._blockStarts.pop();if(S===void 0)throw new Error("CodeGen: not in self-balancing block");const U=this._nodes.length-S;if(U<0||g!==void 0&&U!==g)throw new Error(`CodeGen: wrong number of nodes: ${U} vs ${g} expected`);return this._nodes.length=S,this}func(g,S=e.nil,U,pe){return this._blockNode(new z(g,S,U)),pe&&this.code(pe).endFunc(),this}endFunc(){return this._endBlockNode(z)}optimize(g=1){for(;g-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(g){return this._currNode.nodes.push(g),this}_blockNode(g){this._currNode.nodes.push(g),this._nodes.push(g)}_endBlockNode(g,S){const U=this._currNode;if(U instanceof g||S&&U instanceof S)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${S?`${g.kind}/${S.kind}`:g.kind}"`)}_elseNode(g){const S=this._currNode;if(!(S instanceof E))throw new Error('CodeGen: "else" without "if"');return this._currNode=S.else=g,this}get _root(){return this._nodes[0]}get _currNode(){const g=this._nodes;return g[g.length-1]}set _currNode(g){const S=this._nodes;S[S.length-1]=g}}t.CodeGen=se;function J(x,g){for(const S in g)x[S]=(x[S]||0)+(g[S]||0);return x}function ue(x,g){return g instanceof e._CodeOrName?J(x,g.names):x}function Y(x,g,S){if(x instanceof e.Name)return U(x);if(!pe(x))return x;return new e._Code(x._items.reduce((me,Ie)=>(Ie instanceof e.Name&&(Ie=U(Ie)),Ie instanceof e._Code?me.push(...Ie._items):me.push(Ie),me),[]));function U(me){const Ie=S[me.str];return Ie===void 0||g[me.str]!==1?me:(delete g[me.str],Ie)}function pe(me){return me instanceof e._Code&&me._items.some(Ie=>Ie instanceof e.Name&&g[Ie.str]===1&&S[Ie.str]!==void 0)}}function Z(x,g){for(const S in g)x[S]=(x[S]||0)-(g[S]||0)}function ie(x){return typeof x=="boolean"||typeof x=="number"||x===null?!x:(0,e._)`!${B(x)}`}t.not=ie;const oe=v(t.operators.AND);function O(...x){return x.reduce(oe)}t.and=O;const j=v(t.operators.OR);function C(...x){return x.reduce(j)}t.or=C;function v(x){return(g,S)=>g===e.nil?S:S===e.nil?g:(0,e._)`${B(g)} ${x} ${B(S)}`}function B(x){return x instanceof e.Name?x:(0,e._)`(${x})`}})(ut);var Ne={};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.checkStrictMode=Ne.getErrorPath=Ne.Type=Ne.useFunc=Ne.setEvaluated=Ne.evaluatedPropsToName=Ne.mergeEvaluated=Ne.eachItem=Ne.unescapeJsonPointer=Ne.escapeJsonPointer=Ne.escapeFragment=Ne.unescapeFragment=Ne.schemaRefOrVal=Ne.schemaHasRulesButRef=Ne.schemaHasRules=Ne.checkUnknownRules=Ne.alwaysValidSchema=Ne.toHash=void 0;const Tt=ut,lA=$s;function dA(t){const e={};for(const r of t)e[r]=!0;return e}Ne.toHash=dA;function hA(t,e){return typeof e=="boolean"?e:Object.keys(e).length===0?!0:(xp(t,e),!Rp(e,t.self.RULES.all))}Ne.alwaysValidSchema=hA;function xp(t,e=t.schema){const{opts:r,self:n}=t;if(!r.strictSchema||typeof e=="boolean")return;const i=n.RULES.keywords;for(const s in e)i[s]||Pp(t,`unknown keyword: "${s}"`)}Ne.checkUnknownRules=xp;function Rp(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(e[r])return!0;return!1}Ne.schemaHasRules=Rp;function pA(t,e){if(typeof t=="boolean")return!t;for(const r in t)if(r!=="$ref"&&e.all[r])return!0;return!1}Ne.schemaHasRulesButRef=pA;function gA({topSchemaRef:t,schemaPath:e},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,Tt._)`${r}`}return(0,Tt._)`${t}${e}${(0,Tt.getProperty)(n)}`}Ne.schemaRefOrVal=gA;function mA(t){return Np(decodeURIComponent(t))}Ne.unescapeFragment=mA;function _A(t){return encodeURIComponent(Wf(t))}Ne.escapeFragment=_A;function Wf(t){return typeof t=="number"?`${t}`:t.replace(/~/g,"~0").replace(/\//g,"~1")}Ne.escapeJsonPointer=Wf;function Np(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}Ne.unescapeJsonPointer=Np;function EA(t,e){if(Array.isArray(t))for(const r of t)e(r);else e(t)}Ne.eachItem=EA;function Nl({mergeNames:t,mergeToName:e,mergeValues:r,resultToName:n}){return(i,s,o,a)=>{const c=o===void 0?s:o instanceof Tt.Name?(s instanceof Tt.Name?t(i,s,o):e(i,s,o),o):s instanceof Tt.Name?(e(i,o,s),s):r(s,o);return a===Tt.Name&&!(c instanceof Tt.Name)?n(i,c):c}}Ne.mergeEvaluated={props:Nl({mergeNames:(t,e,r)=>t.if((0,Tt._)`${r} !== true && ${e} !== undefined`,()=>{t.if((0,Tt._)`${e} === true`,()=>t.assign(r,!0),()=>t.assign(r,(0,Tt._)`${r} || {}`).code((0,Tt._)`Object.assign(${r}, ${e})`))}),mergeToName:(t,e,r)=>t.if((0,Tt._)`${r} !== true`,()=>{e===!0?t.assign(r,!0):(t.assign(r,(0,Tt._)`${r} || {}`),Gf(t,r,e))}),mergeValues:(t,e)=>t===!0?!0:{...t,...e},resultToName:kp}),items:Nl({mergeNames:(t,e,r)=>t.if((0,Tt._)`${r} !== true && ${e} !== undefined`,()=>t.assign(r,(0,Tt._)`${e} === true ? true : ${r} > ${e} ? ${r} : ${e}`)),mergeToName:(t,e,r)=>t.if((0,Tt._)`${r} !== true`,()=>t.assign(r,e===!0?!0:(0,Tt._)`${r} > ${e} ? ${r} : ${e}`)),mergeValues:(t,e)=>t===!0?!0:Math.max(t,e),resultToName:(t,e)=>t.var("items",e)})};function kp(t,e){if(e===!0)return t.var("props",!0);const r=t.var("props",(0,Tt._)`{}`);return e!==void 0&&Gf(t,r,e),r}Ne.evaluatedPropsToName=kp;function Gf(t,e,r){Object.keys(r).forEach(n=>t.assign((0,Tt._)`${e}${(0,Tt.getProperty)(n)}`,!0))}Ne.setEvaluated=Gf;const kl={};function yA(t,e){return t.scopeValue("func",{ref:e,code:kl[e.code]||(kl[e.code]=new lA._Code(e.code))})}Ne.useFunc=yA;var wc;(function(t){t[t.Num=0]="Num",t[t.Str=1]="Str"})(wc||(Ne.Type=wc={}));function AA(t,e,r){if(t instanceof Tt.Name){const n=e===wc.Num;return r?n?(0,Tt._)`"[" + ${t} + "]"`:(0,Tt._)`"['" + ${t} + "']"`:n?(0,Tt._)`"/" + ${t}`:(0,Tt._)`"/" + ${t}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,Tt.getProperty)(t).toString():"/"+Wf(t)}Ne.getErrorPath=AA;function Pp(t,e,r=t.opts.strictSchema){if(r){if(e=`strict mode: ${e}`,r===!0)throw new Error(e);t.self.logger.warn(e)}}Ne.checkStrictMode=Pp;var ln={};Object.defineProperty(ln,"__esModule",{value:!0});const hr=ut,bA={data:new hr.Name("data"),valCxt:new hr.Name("valCxt"),instancePath:new hr.Name("instancePath"),parentData:new hr.Name("parentData"),parentDataProperty:new hr.Name("parentDataProperty"),rootData:new hr.Name("rootData"),dynamicAnchors:new hr.Name("dynamicAnchors"),vErrors:new hr.Name("vErrors"),errors:new hr.Name("errors"),this:new hr.Name("this"),self:new hr.Name("self"),scope:new hr.Name("scope"),json:new hr.Name("json"),jsonPos:new hr.Name("jsonPos"),jsonLen:new hr.Name("jsonLen"),jsonPart:new hr.Name("jsonPart")};ln.default=bA;var Pl;function oa(){return Pl||(Pl=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const e=ut,r=Ne,n=ln;t.keywordError={message:({keyword:y})=>(0,e.str)`must pass "${y}" keyword validation`},t.keyword$DataError={message:({keyword:y,schemaType:E})=>E?(0,e.str)`"${y}" keyword must be ${E} ($data)`:(0,e.str)`"${y}" keyword is invalid ($data)`};function i(y,E=t.keywordError,I,R){const{it:P}=y,{gen:Q,compositeRule:z,allErrors:X}=P,M=l(y,E,I);R??(z||X)?c(Q,M):f(P,(0,e._)`[${M}]`)}t.reportError=i;function s(y,E=t.keywordError,I){const{it:R}=y,{gen:P,compositeRule:Q,allErrors:z}=R,X=l(y,E,I);c(P,X),Q||z||f(R,n.default.vErrors)}t.reportExtraError=s;function o(y,E){y.assign(n.default.errors,E),y.if((0,e._)`${n.default.vErrors} !== null`,()=>y.if(E,()=>y.assign((0,e._)`${n.default.vErrors}.length`,E),()=>y.assign(n.default.vErrors,null)))}t.resetErrorsCount=o;function a({gen:y,keyword:E,schemaValue:I,data:R,errsCount:P,it:Q}){if(P===void 0)throw new Error("ajv implementation error");const z=y.name("err");y.forRange("i",P,n.default.errors,X=>{y.const(z,(0,e._)`${n.default.vErrors}[${X}]`),y.if((0,e._)`${z}.instancePath === undefined`,()=>y.assign((0,e._)`${z}.instancePath`,(0,e.strConcat)(n.default.instancePath,Q.errorPath))),y.assign((0,e._)`${z}.schemaPath`,(0,e.str)`${Q.errSchemaPath}/${E}`),Q.opts.verbose&&(y.assign((0,e._)`${z}.schema`,I),y.assign((0,e._)`${z}.data`,R))})}t.extendErrors=a;function c(y,E){const I=y.const("err",E);y.if((0,e._)`${n.default.vErrors} === null`,()=>y.assign(n.default.vErrors,(0,e._)`[${I}]`),(0,e._)`${n.default.vErrors}.push(${I})`),y.code((0,e._)`${n.default.errors}++`)}function f(y,E){const{gen:I,validateName:R,schemaEnv:P}=y;P.$async?I.throw((0,e._)`new ${y.ValidationError}(${E})`):(I.assign((0,e._)`${R}.errors`,E),I.return(!1))}const u={keyword:new e.Name("keyword"),schemaPath:new e.Name("schemaPath"),params:new e.Name("params"),propertyName:new e.Name("propertyName"),message:new e.Name("message"),schema:new e.Name("schema"),parentSchema:new e.Name("parentSchema")};function l(y,E,I){const{createErrors:R}=y.it;return R===!1?(0,e._)`{}`:h(y,E,I)}function h(y,E,I={}){const{gen:R,it:P}=y,Q=[d(P,I),m(y,I)];return _(y,E,Q),R.object(...Q)}function d({errorPath:y},{instancePath:E}){const I=E?(0,e.str)`${y}${(0,r.getErrorPath)(E,r.Type.Str)}`:y;return[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,I)]}function m({keyword:y,it:{errSchemaPath:E}},{schemaPath:I,parentSchema:R}){let P=R?E:(0,e.str)`${E}/${y}`;return I&&(P=(0,e.str)`${P}${(0,r.getErrorPath)(I,r.Type.Str)}`),[u.schemaPath,P]}function _(y,{params:E,message:I},R){const{keyword:P,data:Q,schemaValue:z,it:X}=y,{opts:M,propertyName:F,topSchemaRef:K,schemaPath:se}=X;R.push([u.keyword,P],[u.params,typeof E=="function"?E(y):E||(0,e._)`{}`]),M.messages&&R.push([u.message,typeof I=="function"?I(y):I]),M.verbose&&R.push([u.schema,z],[u.parentSchema,(0,e._)`${K}${se}`],[n.default.data,Q]),F&&R.push([u.propertyName,F])}}(ka)),ka}var Tl;function wA(){if(Tl)return Jn;Tl=1,Object.defineProperty(Jn,"__esModule",{value:!0}),Jn.boolOrEmptySchema=Jn.topBoolOrEmptySchema=void 0;const t=oa(),e=ut,r=ln,n={message:"boolean schema is false"};function i(a){const{gen:c,schema:f,validateName:u}=a;f===!1?o(a,!1):typeof f=="object"&&f.$async===!0?c.return(r.default.data):(c.assign((0,e._)`${u}.errors`,null),c.return(!0))}Jn.topBoolOrEmptySchema=i;function s(a,c){const{gen:f,schema:u}=a;u===!1?(f.var(c,!1),o(a)):f.var(c,!0)}Jn.boolOrEmptySchema=s;function o(a,c){const{gen:f,data:u}=a,l={gen:f,keyword:"false schema",data:u,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,t.reportError)(l,n,void 0,c)}return Jn}var Zt={},ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.getRules=ui.isJSONType=void 0;const SA=["string","number","integer","boolean","null","object","array"],IA=new Set(SA);function vA(t){return typeof t=="string"&&IA.has(t)}ui.isJSONType=vA;function $A(){const t={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...t,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},t.number,t.string,t.array,t.object],post:{rules:[]},all:{},keywords:{}}}ui.getRules=$A;var vn={};Object.defineProperty(vn,"__esModule",{value:!0});vn.shouldUseRule=vn.shouldUseGroup=vn.schemaHasRulesForType=void 0;function CA({schema:t,self:e},r){const n=e.RULES.types[r];return n&&n!==!0&&Tp(t,n)}vn.schemaHasRulesForType=CA;function Tp(t,e){return e.rules.some(r=>Bp(t,r))}vn.shouldUseGroup=Tp;function Bp(t,e){var r;return t[e.keyword]!==void 0||((r=e.definition.implements)===null||r===void 0?void 0:r.some(n=>t[n]!==void 0))}vn.shouldUseRule=Bp;Object.defineProperty(Zt,"__esModule",{value:!0});Zt.reportTypeError=Zt.checkDataTypes=Zt.checkDataType=Zt.coerceAndCheckDataType=Zt.getJSONTypes=Zt.getSchemaTypes=Zt.DataType=void 0;const xA=ui,RA=vn,NA=oa(),at=ut,Op=Ne;var Ni;(function(t){t[t.Correct=0]="Correct",t[t.Wrong=1]="Wrong"})(Ni||(Zt.DataType=Ni={}));function kA(t){const e=Lp(t.type);if(e.includes("null")){if(t.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!e.length&&t.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');t.nullable===!0&&e.push("null")}return e}Zt.getSchemaTypes=kA;function Lp(t){const e=Array.isArray(t)?t:t?[t]:[];if(e.every(xA.isJSONType))return e;throw new Error("type must be JSONType or JSONType[]: "+e.join(","))}Zt.getJSONTypes=Lp;function PA(t,e){const{gen:r,data:n,opts:i}=t,s=TA(e,i.coerceTypes),o=e.length>0&&!(s.length===0&&e.length===1&&(0,RA.schemaHasRulesForType)(t,e[0]));if(o){const a=Vf(e,n,i.strictNumbers,Ni.Wrong);r.if(a,()=>{s.length?BA(t,e,s):Yf(t)})}return o}Zt.coerceAndCheckDataType=PA;const Dp=new Set(["string","number","integer","boolean","null"]);function TA(t,e){return e?t.filter(r=>Dp.has(r)||e==="array"&&r==="array"):[]}function BA(t,e,r){const{gen:n,data:i,opts:s}=t,o=n.let("dataType",(0,at._)`typeof ${i}`),a=n.let("coerced",(0,at._)`undefined`);s.coerceTypes==="array"&&n.if((0,at._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,at._)`${i}[0]`).assign(o,(0,at._)`typeof ${i}`).if(Vf(e,i,s.strictNumbers),()=>n.assign(a,i))),n.if((0,at._)`${a} !== undefined`);for(const f of r)(Dp.has(f)||f==="array"&&s.coerceTypes==="array")&&c(f);n.else(),Yf(t),n.endIf(),n.if((0,at._)`${a} !== undefined`,()=>{n.assign(i,a),OA(t,a)});function c(f){switch(f){case"string":n.elseIf((0,at._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,at._)`"" + ${i}`).elseIf((0,at._)`${i} === null`).assign(a,(0,at._)`""`);return;case"number":n.elseIf((0,at._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,at._)`+${i}`);return;case"integer":n.elseIf((0,at._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,at._)`+${i}`);return;case"boolean":n.elseIf((0,at._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,at._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":n.elseIf((0,at._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(a,null);return;case"array":n.elseIf((0,at._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,at._)`[${i}]`)}}}function OA({gen:t,parentData:e,parentDataProperty:r},n){t.if((0,at._)`${e} !== undefined`,()=>t.assign((0,at._)`${e}[${r}]`,n))}function Sc(t,e,r,n=Ni.Correct){const i=n===Ni.Correct?at.operators.EQ:at.operators.NEQ;let s;switch(t){case"null":return(0,at._)`${e} ${i} null`;case"array":s=(0,at._)`Array.isArray(${e})`;break;case"object":s=(0,at._)`${e} && typeof ${e} == "object" && !Array.isArray(${e})`;break;case"integer":s=o((0,at._)`!(${e} % 1) && !isNaN(${e})`);break;case"number":s=o();break;default:return(0,at._)`typeof ${e} ${i} ${t}`}return n===Ni.Correct?s:(0,at.not)(s);function o(a=at.nil){return(0,at.and)((0,at._)`typeof ${e} == "number"`,a,r?(0,at._)`isFinite(${e})`:at.nil)}}Zt.checkDataType=Sc;function Vf(t,e,r,n){if(t.length===1)return Sc(t[0],e,r,n);let i;const s=(0,Op.toHash)(t);if(s.array&&s.object){const o=(0,at._)`typeof ${e} != "object"`;i=s.null?o:(0,at._)`!${e} || ${o}`,delete s.null,delete s.array,delete s.object}else i=at.nil;s.number&&delete s.integer;for(const o in s)i=(0,at.and)(i,Sc(o,e,r,n));return i}Zt.checkDataTypes=Vf;const LA={message:({schema:t})=>`must be ${t}`,params:({schema:t,schemaValue:e})=>typeof t=="string"?(0,at._)`{type: ${t}}`:(0,at._)`{type: ${e}}`};function Yf(t){const e=DA(t);(0,NA.reportError)(e,LA)}Zt.reportTypeError=Yf;function DA(t){const{gen:e,data:r,schema:n}=t,i=(0,Op.schemaRefOrVal)(t,n,"type");return{gen:e,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:t}}var es={},Bl;function UA(){if(Bl)return es;Bl=1,Object.defineProperty(es,"__esModule",{value:!0}),es.assignDefaults=void 0;const t=ut,e=Ne;function r(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const c in o)n(i,c,o[c].default);else s==="array"&&Array.isArray(a)&&a.forEach((c,f)=>n(i,f,c.default))}es.assignDefaults=r;function n(i,s,o){const{gen:a,compositeRule:c,data:f,opts:u}=i;if(o===void 0)return;const l=(0,t._)`${f}${(0,t.getProperty)(s)}`;if(c){(0,e.checkStrictMode)(i,`default is ignored for: ${l}`);return}let h=(0,t._)`${l} === undefined`;u.useDefaults==="empty"&&(h=(0,t._)`${h} || ${l} === null || ${l} === ""`),a.if(h,(0,t._)`${l} = ${(0,t.stringify)(o)}`)}return es}var Qr={},Nt={},Ol;function en(){if(Ol)return Nt;Ol=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.validateUnion=Nt.validateArray=Nt.usePattern=Nt.callValidateCode=Nt.schemaProperties=Nt.allSchemaProperties=Nt.noPropertyInData=Nt.propertyInData=Nt.isOwnProperty=Nt.hasPropFunc=Nt.reportMissingProp=Nt.checkMissingProp=Nt.checkReportMissingProp=void 0;const t=ut,e=Ne,r=ln,n=Ne;function i(I,R){const{gen:P,data:Q,it:z}=I;P.if(u(P,Q,R,z.opts.ownProperties),()=>{I.setParams({missingProperty:(0,t._)`${R}`},!0),I.error()})}Nt.checkReportMissingProp=i;function s({gen:I,data:R,it:{opts:P}},Q,z){return(0,t.or)(...Q.map(X=>(0,t.and)(u(I,R,X,P.ownProperties),(0,t._)`${z} = ${X}`)))}Nt.checkMissingProp=s;function o(I,R){I.setParams({missingProperty:R},!0),I.error()}Nt.reportMissingProp=o;function a(I){return I.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,t._)`Object.prototype.hasOwnProperty`})}Nt.hasPropFunc=a;function c(I,R,P){return(0,t._)`${a(I)}.call(${R}, ${P})`}Nt.isOwnProperty=c;function f(I,R,P,Q){const z=(0,t._)`${R}${(0,t.getProperty)(P)} !== undefined`;return Q?(0,t._)`${z} && ${c(I,R,P)}`:z}Nt.propertyInData=f;function u(I,R,P,Q){const z=(0,t._)`${R}${(0,t.getProperty)(P)} === undefined`;return Q?(0,t.or)(z,(0,t.not)(c(I,R,P))):z}Nt.noPropertyInData=u;function l(I){return I?Object.keys(I).filter(R=>R!=="__proto__"):[]}Nt.allSchemaProperties=l;function h(I,R){return l(R).filter(P=>!(0,e.alwaysValidSchema)(I,R[P]))}Nt.schemaProperties=h;function d({schemaCode:I,data:R,it:{gen:P,topSchemaRef:Q,schemaPath:z,errorPath:X},it:M},F,K,se){const J=se?(0,t._)`${I}, ${R}, ${Q}${z}`:R,ue=[[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,X)],[r.default.parentData,M.parentData],[r.default.parentDataProperty,M.parentDataProperty],[r.default.rootData,r.default.rootData]];M.opts.dynamicRef&&ue.push([r.default.dynamicAnchors,r.default.dynamicAnchors]);const Y=(0,t._)`${J}, ${P.object(...ue)}`;return K!==t.nil?(0,t._)`${F}.call(${K}, ${Y})`:(0,t._)`${F}(${Y})`}Nt.callValidateCode=d;const m=(0,t._)`new RegExp`;function _({gen:I,it:{opts:R}},P){const Q=R.unicodeRegExp?"u":"",{regExp:z}=R.code,X=z(P,Q);return I.scopeValue("pattern",{key:X.toString(),ref:X,code:(0,t._)`${z.code==="new RegExp"?m:(0,n.useFunc)(I,z)}(${P}, ${Q})`})}Nt.usePattern=_;function y(I){const{gen:R,data:P,keyword:Q,it:z}=I,X=R.name("valid");if(z.allErrors){const F=R.let("valid",!0);return M(()=>R.assign(F,!1)),F}return R.var(X,!0),M(()=>R.break()),X;function M(F){const K=R.const("len",(0,t._)`${P}.length`);R.forRange("i",0,K,se=>{I.subschema({keyword:Q,dataProp:se,dataPropType:e.Type.Num},X),R.if((0,t.not)(X),F)})}}Nt.validateArray=y;function E(I){const{gen:R,schema:P,keyword:Q,it:z}=I;if(!Array.isArray(P))throw new Error("ajv implementation error");if(P.some(K=>(0,e.alwaysValidSchema)(z,K))&&!z.opts.unevaluated)return;const M=R.let("valid",!1),F=R.name("_valid");R.block(()=>P.forEach((K,se)=>{const J=I.subschema({keyword:Q,schemaProp:se,compositeRule:!0},F);R.assign(M,(0,t._)`${M} || ${F}`),I.mergeValidEvaluated(J,F)||R.if((0,t.not)(M))})),I.result(M,()=>I.reset(),()=>I.error(!0))}return Nt.validateUnion=E,Nt}var Ll;function MA(){if(Ll)return Qr;Ll=1,Object.defineProperty(Qr,"__esModule",{value:!0}),Qr.validateKeywordUsage=Qr.validSchemaType=Qr.funcKeywordCode=Qr.macroKeywordCode=void 0;const t=ut,e=ln,r=en(),n=oa();function i(h,d){const{gen:m,keyword:_,schema:y,parentSchema:E,it:I}=h,R=d.macro.call(I.self,y,E,I),P=f(m,_,R);I.opts.validateSchema!==!1&&I.self.validateSchema(R,!0);const Q=m.name("valid");h.subschema({schema:R,schemaPath:t.nil,errSchemaPath:`${I.errSchemaPath}/${_}`,topSchemaRef:P,compositeRule:!0},Q),h.pass(Q,()=>h.error(!0))}Qr.macroKeywordCode=i;function s(h,d){var m;const{gen:_,keyword:y,schema:E,parentSchema:I,$data:R,it:P}=h;c(P,d);const Q=!R&&d.compile?d.compile.call(P.self,E,I,P):d.validate,z=f(_,y,Q),X=_.let("valid");h.block$data(X,M),h.ok((m=d.valid)!==null&&m!==void 0?m:X);function M(){if(d.errors===!1)se(),d.modifying&&o(h),J(()=>h.error());else{const ue=d.async?F():K();d.modifying&&o(h),J(()=>a(h,ue))}}function F(){const ue=_.let("ruleErrs",null);return _.try(()=>se((0,t._)`await `),Y=>_.assign(X,!1).if((0,t._)`${Y} instanceof ${P.ValidationError}`,()=>_.assign(ue,(0,t._)`${Y}.errors`),()=>_.throw(Y))),ue}function K(){const ue=(0,t._)`${z}.errors`;return _.assign(ue,null),se(t.nil),ue}function se(ue=d.async?(0,t._)`await `:t.nil){const Y=P.opts.passContext?e.default.this:e.default.self,Z=!("compile"in d&&!R||d.schema===!1);_.assign(X,(0,t._)`${ue}${(0,r.callValidateCode)(h,z,Y,Z)}`,d.modifying)}function J(ue){var Y;_.if((0,t.not)((Y=d.valid)!==null&&Y!==void 0?Y:X),ue)}}Qr.funcKeywordCode=s;function o(h){const{gen:d,data:m,it:_}=h;d.if(_.parentData,()=>d.assign(m,(0,t._)`${_.parentData}[${_.parentDataProperty}]`))}function a(h,d){const{gen:m}=h;m.if((0,t._)`Array.isArray(${d})`,()=>{m.assign(e.default.vErrors,(0,t._)`${e.default.vErrors} === null ? ${d} : ${e.default.vErrors}.concat(${d})`).assign(e.default.errors,(0,t._)`${e.default.vErrors}.length`),(0,n.extendErrors)(h)},()=>h.error())}function c({schemaEnv:h},d){if(d.async&&!h.$async)throw new Error("async keyword in sync schema")}function f(h,d,m){if(m===void 0)throw new Error(`keyword "${d}" failed to compile`);return h.scopeValue("keyword",typeof m=="function"?{ref:m}:{ref:m,code:(0,t.stringify)(m)})}function u(h,d,m=!1){return!d.length||d.some(_=>_==="array"?Array.isArray(h):_==="object"?h&&typeof h=="object"&&!Array.isArray(h):typeof h==_||m&&typeof h>"u")}Qr.validSchemaType=u;function l({schema:h,opts:d,self:m,errSchemaPath:_},y,E){if(Array.isArray(y.keyword)?!y.keyword.includes(E):y.keyword!==E)throw new Error("ajv implementation error");const I=y.dependencies;if(I!=null&&I.some(R=>!Object.prototype.hasOwnProperty.call(h,R)))throw new Error(`parent schema must have dependencies of ${E}: ${I.join(",")}`);if(y.validateSchema&&!y.validateSchema(h[E])){const P=`keyword "${E}" value is invalid at path "${_}": `+m.errorsText(y.validateSchema.errors);if(d.validateSchema==="log")m.logger.error(P);else throw new Error(P)}}return Qr.validateKeywordUsage=l,Qr}var yn={},Dl;function FA(){if(Dl)return yn;Dl=1,Object.defineProperty(yn,"__esModule",{value:!0}),yn.extendSubschemaMode=yn.extendSubschemaData=yn.getSubschema=void 0;const t=ut,e=Ne;function r(s,{keyword:o,schemaProp:a,schema:c,schemaPath:f,errSchemaPath:u,topSchemaRef:l}){if(o!==void 0&&c!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const h=s.schema[o];return a===void 0?{schema:h,schemaPath:(0,t._)`${s.schemaPath}${(0,t.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:h[a],schemaPath:(0,t._)`${s.schemaPath}${(0,t.getProperty)(o)}${(0,t.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,e.escapeFragment)(a)}`}}if(c!==void 0){if(f===void 0||u===void 0||l===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:c,schemaPath:f,topSchemaRef:l,errSchemaPath:u}}throw new Error('either "keyword" or "schema" must be passed')}yn.getSubschema=r;function n(s,o,{dataProp:a,dataPropType:c,data:f,dataTypes:u,propertyName:l}){if(f!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:h}=o;if(a!==void 0){const{errorPath:m,dataPathArr:_,opts:y}=o,E=h.let("data",(0,t._)`${o.data}${(0,t.getProperty)(a)}`,!0);d(E),s.errorPath=(0,t.str)`${m}${(0,e.getErrorPath)(a,c,y.jsPropertySyntax)}`,s.parentDataProperty=(0,t._)`${a}`,s.dataPathArr=[..._,s.parentDataProperty]}if(f!==void 0){const m=f instanceof t.Name?f:h.let("data",f,!0);d(m),l!==void 0&&(s.propertyName=l)}u&&(s.dataTypes=u);function d(m){s.data=m,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,m]}}yn.extendSubschemaData=n;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:c,createErrors:f,allErrors:u}){c!==void 0&&(s.compositeRule=c),f!==void 0&&(s.createErrors=f),u!==void 0&&(s.allErrors=u),s.jtdDiscriminator=o,s.jtdMetadata=a}return yn.extendSubschemaMode=i,yn}var ar={},Up={exports:{}},Hn=Up.exports=function(t,e,r){typeof e=="function"&&(r=e,e={}),r=e.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};wo(e,n,i,t,"",t)};Hn.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Hn.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Hn.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Hn.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function wo(t,e,r,n,i,s,o,a,c,f){if(n&&typeof n=="object"&&!Array.isArray(n)){e(n,i,s,o,a,c,f);for(var u in n){var l=n[u];if(Array.isArray(l)){if(u in Hn.arrayKeywords)for(var h=0;h<l.length;h++)wo(t,e,r,l[h],i+"/"+u+"/"+h,s,i,u,n,h)}else if(u in Hn.propsKeywords){if(l&&typeof l=="object")for(var d in l)wo(t,e,r,l[d],i+"/"+u+"/"+HA(d),s,i,u,n,d)}else(u in Hn.keywords||t.allKeys&&!(u in Hn.skipKeywords))&&wo(t,e,r,l,i+"/"+u,s,i,u,n)}r(n,i,s,o,a,c,f)}}function HA(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}var jA=Up.exports;Object.defineProperty(ar,"__esModule",{value:!0});ar.getSchemaRefs=ar.resolveUrl=ar.normalizeId=ar._getFullPath=ar.getFullPath=ar.inlineRef=void 0;const QA=Ne,qA=Zo,KA=jA,WA=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function GA(t,e=!0){return typeof t=="boolean"?!0:e===!0?!Ic(t):e?Mp(t)<=e:!1}ar.inlineRef=GA;const VA=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Ic(t){for(const e in t){if(VA.has(e))return!0;const r=t[e];if(Array.isArray(r)&&r.some(Ic)||typeof r=="object"&&Ic(r))return!0}return!1}function Mp(t){let e=0;for(const r in t){if(r==="$ref")return 1/0;if(e++,!WA.has(r)&&(typeof t[r]=="object"&&(0,QA.eachItem)(t[r],n=>e+=Mp(n)),e===1/0))return 1/0}return e}function Fp(t,e="",r){r!==!1&&(e=ki(e));const n=t.parse(e);return Hp(t,n)}ar.getFullPath=Fp;function Hp(t,e){return t.serialize(e).split("#")[0]+"#"}ar._getFullPath=Hp;const YA=/#\/?$/;function ki(t){return t?t.replace(YA,""):""}ar.normalizeId=ki;function zA(t,e,r){return r=ki(r),t.resolve(e,r)}ar.resolveUrl=zA;const XA=/^[a-z_][-a-z0-9._]*$/i;function JA(t,e){if(typeof t=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,i=ki(t[r]||e),s={"":i},o=Fp(n,i,!1),a={},c=new Set;return KA(t,{allKeys:!0},(l,h,d,m)=>{if(m===void 0)return;const _=o+h;let y=s[m];typeof l[r]=="string"&&(y=E.call(this,l[r])),I.call(this,l.$anchor),I.call(this,l.$dynamicAnchor),s[h]=y;function E(R){const P=this.opts.uriResolver.resolve;if(R=ki(y?P(y,R):R),c.has(R))throw u(R);c.add(R);let Q=this.refs[R];return typeof Q=="string"&&(Q=this.refs[Q]),typeof Q=="object"?f(l,Q.schema,R):R!==ki(_)&&(R[0]==="#"?(f(l,a[R],R),a[R]=l):this.refs[R]=_),R}function I(R){if(typeof R=="string"){if(!XA.test(R))throw new Error(`invalid anchor "${R}"`);E.call(this,`#${R}`)}}}),a;function f(l,h,d){if(h!==void 0&&!qA(l,h))throw u(d)}function u(l){return new Error(`reference "${l}" resolves to more than one schema`)}}ar.getSchemaRefs=JA;var Ul;function aa(){if(Ul)return En;Ul=1,Object.defineProperty(En,"__esModule",{value:!0}),En.getData=En.KeywordCxt=En.validateFunctionCode=void 0;const t=wA(),e=Zt,r=vn,n=Zt,i=UA(),s=MA(),o=FA(),a=ut,c=ln,f=ar,u=Ne,l=oa();function h(w){if(Q(w)&&(X(w),P(w))){y(w);return}d(w,()=>(0,t.topBoolOrEmptySchema)(w))}En.validateFunctionCode=h;function d({gen:w,validateName:b,schema:A,schemaEnv:T,opts:V},G){V.code.es5?w.func(b,(0,a._)`${c.default.data}, ${c.default.valCxt}`,T.$async,()=>{w.code((0,a._)`"use strict"; ${I(A,V)}`),_(w,V),w.code(G)}):w.func(b,(0,a._)`${c.default.data}, ${m(V)}`,T.$async,()=>w.code(I(A,V)).code(G))}function m(w){return(0,a._)`{${c.default.instancePath}="", ${c.default.parentData}, ${c.default.parentDataProperty}, ${c.default.rootData}=${c.default.data}${w.dynamicRef?(0,a._)`, ${c.default.dynamicAnchors}={}`:a.nil}}={}`}function _(w,b){w.if(c.default.valCxt,()=>{w.var(c.default.instancePath,(0,a._)`${c.default.valCxt}.${c.default.instancePath}`),w.var(c.default.parentData,(0,a._)`${c.default.valCxt}.${c.default.parentData}`),w.var(c.default.parentDataProperty,(0,a._)`${c.default.valCxt}.${c.default.parentDataProperty}`),w.var(c.default.rootData,(0,a._)`${c.default.valCxt}.${c.default.rootData}`),b.dynamicRef&&w.var(c.default.dynamicAnchors,(0,a._)`${c.default.valCxt}.${c.default.dynamicAnchors}`)},()=>{w.var(c.default.instancePath,(0,a._)`""`),w.var(c.default.parentData,(0,a._)`undefined`),w.var(c.default.parentDataProperty,(0,a._)`undefined`),w.var(c.default.rootData,c.default.data),b.dynamicRef&&w.var(c.default.dynamicAnchors,(0,a._)`{}`)})}function y(w){const{schema:b,opts:A,gen:T}=w;d(w,()=>{A.$comment&&b.$comment&&ue(w),K(w),T.let(c.default.vErrors,null),T.let(c.default.errors,0),A.unevaluated&&E(w),M(w),Y(w)})}function E(w){const{gen:b,validateName:A}=w;w.evaluated=b.const("evaluated",(0,a._)`${A}.evaluated`),b.if((0,a._)`${w.evaluated}.dynamicProps`,()=>b.assign((0,a._)`${w.evaluated}.props`,(0,a._)`undefined`)),b.if((0,a._)`${w.evaluated}.dynamicItems`,()=>b.assign((0,a._)`${w.evaluated}.items`,(0,a._)`undefined`))}function I(w,b){const A=typeof w=="object"&&w[b.schemaId];return A&&(b.code.source||b.code.process)?(0,a._)`/*# sourceURL=${A} */`:a.nil}function R(w,b){if(Q(w)&&(X(w),P(w))){z(w,b);return}(0,t.boolOrEmptySchema)(w,b)}function P({schema:w,self:b}){if(typeof w=="boolean")return!w;for(const A in w)if(b.RULES.all[A])return!0;return!1}function Q(w){return typeof w.schema!="boolean"}function z(w,b){const{schema:A,gen:T,opts:V}=w;V.$comment&&A.$comment&&ue(w),se(w),J(w);const G=T.const("_errs",c.default.errors);M(w,G),T.var(b,(0,a._)`${G} === ${c.default.errors}`)}function X(w){(0,u.checkUnknownRules)(w),F(w)}function M(w,b){if(w.opts.jtd)return ie(w,[],!1,b);const A=(0,e.getSchemaTypes)(w.schema),T=(0,e.coerceAndCheckDataType)(w,A);ie(w,A,!T,b)}function F(w){const{schema:b,errSchemaPath:A,opts:T,self:V}=w;b.$ref&&T.ignoreKeywordsWithRef&&(0,u.schemaHasRulesButRef)(b,V.RULES)&&V.logger.warn(`$ref: keywords ignored in schema at path "${A}"`)}function K(w){const{schema:b,opts:A}=w;b.default!==void 0&&A.useDefaults&&A.strictSchema&&(0,u.checkStrictMode)(w,"default is ignored in the schema root")}function se(w){const b=w.schema[w.opts.schemaId];b&&(w.baseId=(0,f.resolveUrl)(w.opts.uriResolver,w.baseId,b))}function J(w){if(w.schema.$async&&!w.schemaEnv.$async)throw new Error("async schema in sync schema")}function ue({gen:w,schemaEnv:b,schema:A,errSchemaPath:T,opts:V}){const G=A.$comment;if(V.$comment===!0)w.code((0,a._)`${c.default.self}.logger.log(${G})`);else if(typeof V.$comment=="function"){const H=(0,a.str)`${T}/$comment`,q=w.scopeValue("root",{ref:b.root});w.code((0,a._)`${c.default.self}.opts.$comment(${G}, ${H}, ${q}.schema)`)}}function Y(w){const{gen:b,schemaEnv:A,validateName:T,ValidationError:V,opts:G}=w;A.$async?b.if((0,a._)`${c.default.errors} === 0`,()=>b.return(c.default.data),()=>b.throw((0,a._)`new ${V}(${c.default.vErrors})`)):(b.assign((0,a._)`${T}.errors`,c.default.vErrors),G.unevaluated&&Z(w),b.return((0,a._)`${c.default.errors} === 0`))}function Z({gen:w,evaluated:b,props:A,items:T}){A instanceof a.Name&&w.assign((0,a._)`${b}.props`,A),T instanceof a.Name&&w.assign((0,a._)`${b}.items`,T)}function ie(w,b,A,T){const{gen:V,schema:G,data:H,allErrors:q,opts:D,self:ee}=w,{RULES:ce}=ee;if(G.$ref&&(D.ignoreKeywordsWithRef||!(0,u.schemaHasRulesButRef)(G,ce))){V.block(()=>pe(w,"$ref",ce.all.$ref.definition));return}D.jtd||O(w,b),V.block(()=>{for(const xe of ce.rules)le(xe);le(ce.post)});function le(xe){(0,r.shouldUseGroup)(G,xe)&&(xe.type?(V.if((0,n.checkDataType)(xe.type,H,D.strictNumbers)),oe(w,xe),b.length===1&&b[0]===xe.type&&A&&(V.else(),(0,n.reportTypeError)(w)),V.endIf()):oe(w,xe),q||V.if((0,a._)`${c.default.errors} === ${T||0}`))}}function oe(w,b){const{gen:A,schema:T,opts:{useDefaults:V}}=w;V&&(0,i.assignDefaults)(w,b.type),A.block(()=>{for(const G of b.rules)(0,r.shouldUseRule)(T,G)&&pe(w,G.keyword,G.definition,b.type)})}function O(w,b){w.schemaEnv.meta||!w.opts.strictTypes||(j(w,b),w.opts.allowUnionTypes||C(w,b),v(w,w.dataTypes))}function j(w,b){if(b.length){if(!w.dataTypes.length){w.dataTypes=b;return}b.forEach(A=>{x(w.dataTypes,A)||S(w,`type "${A}" not allowed by context "${w.dataTypes.join(",")}"`)}),g(w,b)}}function C(w,b){b.length>1&&!(b.length===2&&b.includes("null"))&&S(w,"use allowUnionTypes to allow union type keyword")}function v(w,b){const A=w.self.RULES.all;for(const T in A){const V=A[T];if(typeof V=="object"&&(0,r.shouldUseRule)(w.schema,V)){const{type:G}=V.definition;G.length&&!G.some(H=>B(b,H))&&S(w,`missing type "${G.join(",")}" for keyword "${T}"`)}}}function B(w,b){return w.includes(b)||b==="number"&&w.includes("integer")}function x(w,b){return w.includes(b)||b==="integer"&&w.includes("number")}function g(w,b){const A=[];for(const T of w.dataTypes)x(b,T)?A.push(T):b.includes("integer")&&T==="number"&&A.push("integer");w.dataTypes=A}function S(w,b){const A=w.schemaEnv.baseId+w.errSchemaPath;b+=` at "${A}" (strictTypes)`,(0,u.checkStrictMode)(w,b,w.opts.strictTypes)}class U{constructor(b,A,T){if((0,s.validateKeywordUsage)(b,A,T),this.gen=b.gen,this.allErrors=b.allErrors,this.keyword=T,this.data=b.data,this.schema=b.schema[T],this.$data=A.$data&&b.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,u.schemaRefOrVal)(b,this.schema,T,this.$data),this.schemaType=A.schemaType,this.parentSchema=b.schema,this.params={},this.it=b,this.def=A,this.$data)this.schemaCode=b.gen.const("vSchema",Se(this.$data,b));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,A.schemaType,A.allowUndefined))throw new Error(`${T} value must be ${JSON.stringify(A.schemaType)}`);("code"in A?A.trackErrors:A.errors!==!1)&&(this.errsCount=b.gen.const("_errs",c.default.errors))}result(b,A,T){this.failResult((0,a.not)(b),A,T)}failResult(b,A,T){this.gen.if(b),T?T():this.error(),A?(this.gen.else(),A(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(b,A){this.failResult((0,a.not)(b),void 0,A)}fail(b){if(b===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(b),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(b){if(!this.$data)return this.fail(b);const{schemaCode:A}=this;this.fail((0,a._)`${A} !== undefined && (${(0,a.or)(this.invalid$data(),b)})`)}error(b,A,T){if(A){this.setParams(A),this._error(b,T),this.setParams({});return}this._error(b,T)}_error(b,A){(b?l.reportExtraError:l.reportError)(this,this.def.error,A)}$dataError(){(0,l.reportError)(this,this.def.$dataError||l.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,l.resetErrorsCount)(this.gen,this.errsCount)}ok(b){this.allErrors||this.gen.if(b)}setParams(b,A){A?Object.assign(this.params,b):this.params=b}block$data(b,A,T=a.nil){this.gen.block(()=>{this.check$data(b,T),A()})}check$data(b=a.nil,A=a.nil){if(!this.$data)return;const{gen:T,schemaCode:V,schemaType:G,def:H}=this;T.if((0,a.or)((0,a._)`${V} === undefined`,A)),b!==a.nil&&T.assign(b,!0),(G.length||H.validateSchema)&&(T.elseIf(this.invalid$data()),this.$dataError(),b!==a.nil&&T.assign(b,!1)),T.else()}invalid$data(){const{gen:b,schemaCode:A,schemaType:T,def:V,it:G}=this;return(0,a.or)(H(),q());function H(){if(T.length){if(!(A instanceof a.Name))throw new Error("ajv implementation error");const D=Array.isArray(T)?T:[T];return(0,a._)`${(0,n.checkDataTypes)(D,A,G.opts.strictNumbers,n.DataType.Wrong)}`}return a.nil}function q(){if(V.validateSchema){const D=b.scopeValue("validate$data",{ref:V.validateSchema});return(0,a._)`!${D}(${A})`}return a.nil}}subschema(b,A){const T=(0,o.getSubschema)(this.it,b);(0,o.extendSubschemaData)(T,this.it,b),(0,o.extendSubschemaMode)(T,b);const V={...this.it,...T,items:void 0,props:void 0};return R(V,A),V}mergeEvaluated(b,A){const{it:T,gen:V}=this;T.opts.unevaluated&&(T.props!==!0&&b.props!==void 0&&(T.props=u.mergeEvaluated.props(V,b.props,T.props,A)),T.items!==!0&&b.items!==void 0&&(T.items=u.mergeEvaluated.items(V,b.items,T.items,A)))}mergeValidEvaluated(b,A){const{it:T,gen:V}=this;if(T.opts.unevaluated&&(T.props!==!0||T.items!==!0))return V.if(A,()=>this.mergeEvaluated(b,a.Name)),!0}}En.KeywordCxt=U;function pe(w,b,A,T){const V=new U(w,A,b);"code"in A?A.code(V,T):V.$data&&A.validate?(0,s.funcKeywordCode)(V,A):"macro"in A?(0,s.macroKeywordCode)(V,A):(A.compile||A.validate)&&(0,s.funcKeywordCode)(V,A)}const me=/^\/(?:[^~]|~0|~1)*$/,Ie=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Se(w,{dataLevel:b,dataNames:A,dataPathArr:T}){let V,G;if(w==="")return c.default.rootData;if(w[0]==="/"){if(!me.test(w))throw new Error(`Invalid JSON-pointer: ${w}`);V=w,G=c.default.rootData}else{const ee=Ie.exec(w);if(!ee)throw new Error(`Invalid JSON-pointer: ${w}`);const ce=+ee[1];if(V=ee[2],V==="#"){if(ce>=b)throw new Error(D("property/index",ce));return T[b-ce]}if(ce>b)throw new Error(D("data",ce));if(G=A[b-ce],!V)return G}let H=G;const q=V.split("/");for(const ee of q)ee&&(G=(0,a._)`${G}${(0,a.getProperty)((0,u.unescapeJsonPointer)(ee))}`,H=(0,a._)`${H} && ${G}`);return H;function D(ee,ce){return`Cannot access ${ee} ${ce} levels up, current level is ${b}`}}return En.getData=Se,En}var Js={},Ml;function zf(){if(Ml)return Js;Ml=1,Object.defineProperty(Js,"__esModule",{value:!0});class t extends Error{constructor(r){super("validation failed"),this.errors=r,this.ajv=this.validation=!0}}return Js.default=t,Js}var Ki={};Object.defineProperty(Ki,"__esModule",{value:!0});const Pa=ar;class ZA extends Error{constructor(e,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Pa.resolveUrl)(e,r,n),this.missingSchema=(0,Pa.normalizeId)((0,Pa.getFullPath)(e,this.missingRef))}}Ki.default=ZA;var kr={};Object.defineProperty(kr,"__esModule",{value:!0});kr.resolveSchema=kr.getCompilingSchema=kr.resolveRef=kr.compileSchema=kr.SchemaEnv=void 0;const qr=ut,eb=zf(),Zn=ln,Xr=ar,Fl=Ne,tb=aa();class ca{constructor(e){var r;this.refs={},this.dynamicAnchors={};let n;typeof e.schema=="object"&&(n=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=(r=e.baseId)!==null&&r!==void 0?r:(0,Xr.normalizeId)(n==null?void 0:n[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}kr.SchemaEnv=ca;function Xf(t){const e=jp.call(this,t);if(e)return e;const r=(0,Xr.getFullPath)(this.opts.uriResolver,t.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new qr.CodeGen(this.scope,{es5:n,lines:i,ownProperties:s});let a;t.$async&&(a=o.scopeValue("Error",{ref:eb.default,code:(0,qr._)`require("ajv/dist/runtime/validation_error").default`}));const c=o.scopeName("validate");t.validateName=c;const f={gen:o,allErrors:this.opts.allErrors,data:Zn.default.data,parentData:Zn.default.parentData,parentDataProperty:Zn.default.parentDataProperty,dataNames:[Zn.default.data],dataPathArr:[qr.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:t.schema,code:(0,qr.stringify)(t.schema)}:{ref:t.schema}),validateName:c,ValidationError:a,schema:t.schema,schemaEnv:t,rootId:r,baseId:t.baseId||r,schemaPath:qr.nil,errSchemaPath:t.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,qr._)`""`,opts:this.opts,self:this};let u;try{this._compilations.add(t),(0,tb.validateFunctionCode)(f),o.optimize(this.opts.code.optimize);const l=o.toString();u=`${o.scopeRefs(Zn.default.scope)}return ${l}`,this.opts.code.process&&(u=this.opts.code.process(u,t));const d=new Function(`${Zn.default.self}`,`${Zn.default.scope}`,u)(this,this.scope.get());if(this.scope.value(c,{ref:d}),d.errors=null,d.schema=t.schema,d.schemaEnv=t,t.$async&&(d.$async=!0),this.opts.code.source===!0&&(d.source={validateName:c,validateCode:l,scopeValues:o._values}),this.opts.unevaluated){const{props:m,items:_}=f;d.evaluated={props:m instanceof qr.Name?void 0:m,items:_ instanceof qr.Name?void 0:_,dynamicProps:m instanceof qr.Name,dynamicItems:_ instanceof qr.Name},d.source&&(d.source.evaluated=(0,qr.stringify)(d.evaluated))}return t.validate=d,t}catch(l){throw delete t.validate,delete t.validateName,u&&this.logger.error("Error compiling schema, function code:",u),l}finally{this._compilations.delete(t)}}kr.compileSchema=Xf;function rb(t,e,r){var n;r=(0,Xr.resolveUrl)(this.opts.uriResolver,e,r);const i=t.refs[r];if(i)return i;let s=sb.call(this,t,r);if(s===void 0){const o=(n=t.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(s=new ca({schema:o,schemaId:a,root:t,baseId:e}))}if(s!==void 0)return t.refs[r]=nb.call(this,s)}kr.resolveRef=rb;function nb(t){return(0,Xr.inlineRef)(t.schema,this.opts.inlineRefs)?t.schema:t.validate?t:Xf.call(this,t)}function jp(t){for(const e of this._compilations)if(ib(e,t))return e}kr.getCompilingSchema=jp;function ib(t,e){return t.schema===e.schema&&t.root===e.root&&t.baseId===e.baseId}function sb(t,e){let r;for(;typeof(r=this.refs[e])=="string";)e=r;return r||this.schemas[e]||fa.call(this,t,e)}function fa(t,e){const r=this.opts.uriResolver.parse(e),n=(0,Xr._getFullPath)(this.opts.uriResolver,r);let i=(0,Xr.getFullPath)(this.opts.uriResolver,t.baseId,void 0);if(Object.keys(t.schema).length>0&&n===i)return Ta.call(this,r,t);const s=(0,Xr.normalizeId)(n),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=fa.call(this,t,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:Ta.call(this,r,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||Xf.call(this,o),s===(0,Xr.normalizeId)(e)){const{schema:a}=o,{schemaId:c}=this.opts,f=a[c];return f&&(i=(0,Xr.resolveUrl)(this.opts.uriResolver,i,f)),new ca({schema:a,schemaId:c,root:t,baseId:i})}return Ta.call(this,r,o)}}kr.resolveSchema=fa;const ob=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Ta(t,{baseId:e,schema:r,root:n}){var i;if(((i=t.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of t.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const c=r[(0,Fl.unescapeFragment)(a)];if(c===void 0)return;r=c;const f=typeof r=="object"&&r[this.opts.schemaId];!ob.has(a)&&f&&(e=(0,Xr.resolveUrl)(this.opts.uriResolver,e,f))}let s;if(typeof r!="boolean"&&r.$ref&&!(0,Fl.schemaHasRulesButRef)(r,this.RULES)){const a=(0,Xr.resolveUrl)(this.opts.uriResolver,e,r.$ref);s=fa.call(this,n,a)}const{schemaId:o}=this.opts;if(s=s||new ca({schema:r,schemaId:o,root:n,baseId:e}),s.schema!==s.root.schema)return s}const ab="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",cb="Meta-schema for $data reference (JSON AnySchema extension proposal)",fb="object",ub=["$data"],lb={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},db=!1,hb={$id:ab,description:cb,type:fb,required:ub,properties:lb,additionalProperties:db};var Jf={};Object.defineProperty(Jf,"__esModule",{value:!0});const Qp=gp;Qp.code='require("ajv/dist/runtime/uri").default';Jf.default=Qp;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var e=aa();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return e.KeywordCxt}});var r=ut;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return r.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return r.CodeGen}});const n=zf(),i=Ki,s=ui,o=kr,a=ut,c=ar,f=Zt,u=Ne,l=hb,h=Jf,d=(C,v)=>new RegExp(C,v);d.code="new RegExp";const m=["removeAdditional","useDefaults","coerceTypes"],_=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},E={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},I=200;function R(C){var v,B,x,g,S,U,pe,me,Ie,Se,w,b,A,T,V,G,H,q,D,ee,ce,le,xe,Je,Ct;const Le=C.strict,mt=(v=C.code)===null||v===void 0?void 0:v.optimize,_t=mt===!0||mt===void 0?1:mt||0,pt=(x=(B=C.code)===null||B===void 0?void 0:B.regExp)!==null&&x!==void 0?x:d,Ge=(g=C.uriResolver)!==null&&g!==void 0?g:h.default;return{strictSchema:(U=(S=C.strictSchema)!==null&&S!==void 0?S:Le)!==null&&U!==void 0?U:!0,strictNumbers:(me=(pe=C.strictNumbers)!==null&&pe!==void 0?pe:Le)!==null&&me!==void 0?me:!0,strictTypes:(Se=(Ie=C.strictTypes)!==null&&Ie!==void 0?Ie:Le)!==null&&Se!==void 0?Se:"log",strictTuples:(b=(w=C.strictTuples)!==null&&w!==void 0?w:Le)!==null&&b!==void 0?b:"log",strictRequired:(T=(A=C.strictRequired)!==null&&A!==void 0?A:Le)!==null&&T!==void 0?T:!1,code:C.code?{...C.code,optimize:_t,regExp:pt}:{optimize:_t,regExp:pt},loopRequired:(V=C.loopRequired)!==null&&V!==void 0?V:I,loopEnum:(G=C.loopEnum)!==null&&G!==void 0?G:I,meta:(H=C.meta)!==null&&H!==void 0?H:!0,messages:(q=C.messages)!==null&&q!==void 0?q:!0,inlineRefs:(D=C.inlineRefs)!==null&&D!==void 0?D:!0,schemaId:(ee=C.schemaId)!==null&&ee!==void 0?ee:"$id",addUsedSchema:(ce=C.addUsedSchema)!==null&&ce!==void 0?ce:!0,validateSchema:(le=C.validateSchema)!==null&&le!==void 0?le:!0,validateFormats:(xe=C.validateFormats)!==null&&xe!==void 0?xe:!0,unicodeRegExp:(Je=C.unicodeRegExp)!==null&&Je!==void 0?Je:!0,int32range:(Ct=C.int32range)!==null&&Ct!==void 0?Ct:!0,uriResolver:Ge}}class P{constructor(v={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,v=this.opts={...v,...R(v)};const{es5:B,lines:x}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:_,es5:B,lines:x}),this.logger=J(v.logger);const g=v.validateFormats;v.validateFormats=!1,this.RULES=(0,s.getRules)(),Q.call(this,y,v,"NOT SUPPORTED"),Q.call(this,E,v,"DEPRECATED","warn"),this._metaOpts=K.call(this),v.formats&&M.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),v.keywords&&F.call(this,v.keywords),typeof v.meta=="object"&&this.addMetaSchema(v.meta),X.call(this),v.validateFormats=g}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:v,meta:B,schemaId:x}=this.opts;let g=l;x==="id"&&(g={...l},g.id=g.$id,delete g.$id),B&&v&&this.addMetaSchema(g,g[x],!1)}defaultMeta(){const{meta:v,schemaId:B}=this.opts;return this.opts.defaultMeta=typeof v=="object"?v[B]||v:void 0}validate(v,B){let x;if(typeof v=="string"){if(x=this.getSchema(v),!x)throw new Error(`no schema with key or ref "${v}"`)}else x=this.compile(v);const g=x(B);return"$async"in x||(this.errors=x.errors),g}compile(v,B){const x=this._addSchema(v,B);return x.validate||this._compileSchemaEnv(x)}compileAsync(v,B){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:x}=this.opts;return g.call(this,v,B);async function g(Se,w){await S.call(this,Se.$schema);const b=this._addSchema(Se,w);return b.validate||U.call(this,b)}async function S(Se){Se&&!this.getSchema(Se)&&await g.call(this,{$ref:Se},!0)}async function U(Se){try{return this._compileSchemaEnv(Se)}catch(w){if(!(w instanceof i.default))throw w;return pe.call(this,w),await me.call(this,w.missingSchema),U.call(this,Se)}}function pe({missingSchema:Se,missingRef:w}){if(this.refs[Se])throw new Error(`AnySchema ${Se} is loaded but ${w} cannot be resolved`)}async function me(Se){const w=await Ie.call(this,Se);this.refs[Se]||await S.call(this,w.$schema),this.refs[Se]||this.addSchema(w,Se,B)}async function Ie(Se){const w=this._loading[Se];if(w)return w;try{return await(this._loading[Se]=x(Se))}finally{delete this._loading[Se]}}}addSchema(v,B,x,g=this.opts.validateSchema){if(Array.isArray(v)){for(const U of v)this.addSchema(U,void 0,x,g);return this}let S;if(typeof v=="object"){const{schemaId:U}=this.opts;if(S=v[U],S!==void 0&&typeof S!="string")throw new Error(`schema ${U} must be string`)}return B=(0,c.normalizeId)(B||S),this._checkUnique(B),this.schemas[B]=this._addSchema(v,x,B,g,!0),this}addMetaSchema(v,B,x=this.opts.validateSchema){return this.addSchema(v,B,!0,x),this}validateSchema(v,B){if(typeof v=="boolean")return!0;let x;if(x=v.$schema,x!==void 0&&typeof x!="string")throw new Error("$schema must be a string");if(x=x||this.opts.defaultMeta||this.defaultMeta(),!x)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const g=this.validate(x,v);if(!g&&B){const S="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(S);else throw new Error(S)}return g}getSchema(v){let B;for(;typeof(B=z.call(this,v))=="string";)v=B;if(B===void 0){const{schemaId:x}=this.opts,g=new o.SchemaEnv({schema:{},schemaId:x});if(B=o.resolveSchema.call(this,g,v),!B)return;this.refs[v]=B}return B.validate||this._compileSchemaEnv(B)}removeSchema(v){if(v instanceof RegExp)return this._removeAllSchemas(this.schemas,v),this._removeAllSchemas(this.refs,v),this;switch(typeof v){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const B=z.call(this,v);return typeof B=="object"&&this._cache.delete(B.schema),delete this.schemas[v],delete this.refs[v],this}case"object":{const B=v;this._cache.delete(B);let x=v[this.opts.schemaId];return x&&(x=(0,c.normalizeId)(x),delete this.schemas[x],delete this.refs[x]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(v){for(const B of v)this.addKeyword(B);return this}addKeyword(v,B){let x;if(typeof v=="string")x=v,typeof B=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),B.keyword=x);else if(typeof v=="object"&&B===void 0){if(B=v,x=B.keyword,Array.isArray(x)&&!x.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Y.call(this,x,B),!B)return(0,u.eachItem)(x,S=>Z.call(this,S)),this;oe.call(this,B);const g={...B,type:(0,f.getJSONTypes)(B.type),schemaType:(0,f.getJSONTypes)(B.schemaType)};return(0,u.eachItem)(x,g.type.length===0?S=>Z.call(this,S,g):S=>g.type.forEach(U=>Z.call(this,S,g,U))),this}getKeyword(v){const B=this.RULES.all[v];return typeof B=="object"?B.definition:!!B}removeKeyword(v){const{RULES:B}=this;delete B.keywords[v],delete B.all[v];for(const x of B.rules){const g=x.rules.findIndex(S=>S.keyword===v);g>=0&&x.rules.splice(g,1)}return this}addFormat(v,B){return typeof B=="string"&&(B=new RegExp(B)),this.formats[v]=B,this}errorsText(v=this.errors,{separator:B=", ",dataVar:x="data"}={}){return!v||v.length===0?"No errors":v.map(g=>`${x}${g.instancePath} ${g.message}`).reduce((g,S)=>g+B+S)}$dataMetaSchema(v,B){const x=this.RULES.all;v=JSON.parse(JSON.stringify(v));for(const g of B){const S=g.split("/").slice(1);let U=v;for(const pe of S)U=U[pe];for(const pe in x){const me=x[pe];if(typeof me!="object")continue;const{$data:Ie}=me.definition,Se=U[pe];Ie&&Se&&(U[pe]=j(Se))}}return v}_removeAllSchemas(v,B){for(const x in v){const g=v[x];(!B||B.test(x))&&(typeof g=="string"?delete v[x]:g&&!g.meta&&(this._cache.delete(g.schema),delete v[x]))}}_addSchema(v,B,x,g=this.opts.validateSchema,S=this.opts.addUsedSchema){let U;const{schemaId:pe}=this.opts;if(typeof v=="object")U=v[pe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof v!="boolean")throw new Error("schema must be object or boolean")}let me=this._cache.get(v);if(me!==void 0)return me;x=(0,c.normalizeId)(U||x);const Ie=c.getSchemaRefs.call(this,v,x);return me=new o.SchemaEnv({schema:v,schemaId:pe,meta:B,baseId:x,localRefs:Ie}),this._cache.set(me.schema,me),S&&!x.startsWith("#")&&(x&&this._checkUnique(x),this.refs[x]=me),g&&this.validateSchema(v,!0),me}_checkUnique(v){if(this.schemas[v]||this.refs[v])throw new Error(`schema with key or id "${v}" already exists`)}_compileSchemaEnv(v){if(v.meta?this._compileMetaSchema(v):o.compileSchema.call(this,v),!v.validate)throw new Error("ajv implementation error");return v.validate}_compileMetaSchema(v){const B=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,v)}finally{this.opts=B}}}P.ValidationError=n.default,P.MissingRefError=i.default,t.default=P;function Q(C,v,B,x="error"){for(const g in C){const S=g;S in v&&this.logger[x](`${B}: option ${g}. ${C[S]}`)}}function z(C){return C=(0,c.normalizeId)(C),this.schemas[C]||this.refs[C]}function X(){const C=this.opts.schemas;if(C)if(Array.isArray(C))this.addSchema(C);else for(const v in C)this.addSchema(C[v],v)}function M(){for(const C in this.opts.formats){const v=this.opts.formats[C];v&&this.addFormat(C,v)}}function F(C){if(Array.isArray(C)){this.addVocabulary(C);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const v in C){const B=C[v];B.keyword||(B.keyword=v),this.addKeyword(B)}}function K(){const C={...this.opts};for(const v of m)delete C[v];return C}const se={log(){},warn(){},error(){}};function J(C){if(C===!1)return se;if(C===void 0)return console;if(C.log&&C.warn&&C.error)return C;throw new Error("logger must implement log, warn and error methods")}const ue=/^[a-z_$][a-z0-9_$:-]*$/i;function Y(C,v){const{RULES:B}=this;if((0,u.eachItem)(C,x=>{if(B.keywords[x])throw new Error(`Keyword ${x} is already defined`);if(!ue.test(x))throw new Error(`Keyword ${x} has invalid name`)}),!!v&&v.$data&&!("code"in v||"validate"in v))throw new Error('$data keyword must have "code" or "validate" function')}function Z(C,v,B){var x;const g=v==null?void 0:v.post;if(B&&g)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:S}=this;let U=g?S.post:S.rules.find(({type:me})=>me===B);if(U||(U={type:B,rules:[]},S.rules.push(U)),S.keywords[C]=!0,!v)return;const pe={keyword:C,definition:{...v,type:(0,f.getJSONTypes)(v.type),schemaType:(0,f.getJSONTypes)(v.schemaType)}};v.before?ie.call(this,U,pe,v.before):U.rules.push(pe),S.all[C]=pe,(x=v.implements)===null||x===void 0||x.forEach(me=>this.addKeyword(me))}function ie(C,v,B){const x=C.rules.findIndex(g=>g.keyword===B);x>=0?C.rules.splice(x,0,v):(C.rules.push(v),this.logger.warn(`rule ${B} is not defined`))}function oe(C){let{metaSchema:v}=C;v!==void 0&&(C.$data&&this.opts.$data&&(v=j(v)),C.validateSchema=this.compile(v,!0))}const O={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function j(C){return{anyOf:[C,O]}}})(Cp);var Zf={},eu={},tu={};Object.defineProperty(tu,"__esModule",{value:!0});const pb={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};tu.default=pb;var li={};Object.defineProperty(li,"__esModule",{value:!0});li.callRef=li.getValidate=void 0;const gb=Ki,Hl=en(),xr=ut,_i=ln,jl=kr,Zs=Ne,mb={keyword:"$ref",schemaType:"string",code(t){const{gen:e,schema:r,it:n}=t,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:c}=n,{root:f}=s;if((r==="#"||r==="#/")&&i===f.baseId)return l();const u=jl.resolveRef.call(c,f,i,r);if(u===void 0)throw new gb.default(n.opts.uriResolver,i,r);if(u instanceof jl.SchemaEnv)return h(u);return d(u);function l(){if(s===f)return So(t,o,s,s.$async);const m=e.scopeValue("root",{ref:f});return So(t,(0,xr._)`${m}.validate`,f,f.$async)}function h(m){const _=qp(t,m);So(t,_,m,m.$async)}function d(m){const _=e.scopeValue("schema",a.code.source===!0?{ref:m,code:(0,xr.stringify)(m)}:{ref:m}),y=e.name("valid"),E=t.subschema({schema:m,dataTypes:[],schemaPath:xr.nil,topSchemaRef:_,errSchemaPath:r},y);t.mergeEvaluated(E),t.ok(y)}}};function qp(t,e){const{gen:r}=t;return e.validate?r.scopeValue("validate",{ref:e.validate}):(0,xr._)`${r.scopeValue("wrapper",{ref:e})}.validate`}li.getValidate=qp;function So(t,e,r,n){const{gen:i,it:s}=t,{allErrors:o,schemaEnv:a,opts:c}=s,f=c.passContext?_i.default.this:xr.nil;n?u():l();function u(){if(!a.$async)throw new Error("async schema referenced by sync schema");const m=i.let("valid");i.try(()=>{i.code((0,xr._)`await ${(0,Hl.callValidateCode)(t,e,f)}`),d(e),o||i.assign(m,!0)},_=>{i.if((0,xr._)`!(${_} instanceof ${s.ValidationError})`,()=>i.throw(_)),h(_),o||i.assign(m,!1)}),t.ok(m)}function l(){t.result((0,Hl.callValidateCode)(t,e,f),()=>d(e),()=>h(e))}function h(m){const _=(0,xr._)`${m}.errors`;i.assign(_i.default.vErrors,(0,xr._)`${_i.default.vErrors} === null ? ${_} : ${_i.default.vErrors}.concat(${_})`),i.assign(_i.default.errors,(0,xr._)`${_i.default.vErrors}.length`)}function d(m){var _;if(!s.opts.unevaluated)return;const y=(_=r==null?void 0:r.validate)===null||_===void 0?void 0:_.evaluated;if(s.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(s.props=Zs.mergeEvaluated.props(i,y.props,s.props));else{const E=i.var("props",(0,xr._)`${m}.evaluated.props`);s.props=Zs.mergeEvaluated.props(i,E,s.props,xr.Name)}if(s.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(s.items=Zs.mergeEvaluated.items(i,y.items,s.items));else{const E=i.var("items",(0,xr._)`${m}.evaluated.items`);s.items=Zs.mergeEvaluated.items(i,E,s.items,xr.Name)}}}li.callRef=So;li.default=mb;Object.defineProperty(eu,"__esModule",{value:!0});const _b=tu,Eb=li,yb=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",_b.default,Eb.default];eu.default=yb;var ru={},nu={};Object.defineProperty(nu,"__esModule",{value:!0});const Oo=ut,kn=Oo.operators,Lo={maximum:{okStr:"<=",ok:kn.LTE,fail:kn.GT},minimum:{okStr:">=",ok:kn.GTE,fail:kn.LT},exclusiveMaximum:{okStr:"<",ok:kn.LT,fail:kn.GTE},exclusiveMinimum:{okStr:">",ok:kn.GT,fail:kn.LTE}},Ab={message:({keyword:t,schemaCode:e})=>(0,Oo.str)`must be ${Lo[t].okStr} ${e}`,params:({keyword:t,schemaCode:e})=>(0,Oo._)`{comparison: ${Lo[t].okStr}, limit: ${e}}`},bb={keyword:Object.keys(Lo),type:"number",schemaType:"number",$data:!0,error:Ab,code(t){const{keyword:e,data:r,schemaCode:n}=t;t.fail$data((0,Oo._)`${r} ${Lo[e].fail} ${n} || isNaN(${r})`)}};nu.default=bb;var iu={};Object.defineProperty(iu,"__esModule",{value:!0});const Es=ut,wb={message:({schemaCode:t})=>(0,Es.str)`must be multiple of ${t}`,params:({schemaCode:t})=>(0,Es._)`{multipleOf: ${t}}`},Sb={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:wb,code(t){const{gen:e,data:r,schemaCode:n,it:i}=t,s=i.opts.multipleOfPrecision,o=e.let("res"),a=s?(0,Es._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Es._)`${o} !== parseInt(${o})`;t.fail$data((0,Es._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};iu.default=Sb;var su={},ou={};Object.defineProperty(ou,"__esModule",{value:!0});function Kp(t){const e=t.length;let r=0,n=0,i;for(;n<e;)r++,i=t.charCodeAt(n++),i>=55296&&i<=56319&&n<e&&(i=t.charCodeAt(n),(i&64512)===56320&&n++);return r}ou.default=Kp;Kp.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(su,"__esModule",{value:!0});const ni=ut,Ib=Ne,vb=ou,$b={message({keyword:t,schemaCode:e}){const r=t==="maxLength"?"more":"fewer";return(0,ni.str)`must NOT have ${r} than ${e} characters`},params:({schemaCode:t})=>(0,ni._)`{limit: ${t}}`},Cb={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:$b,code(t){const{keyword:e,data:r,schemaCode:n,it:i}=t,s=e==="maxLength"?ni.operators.GT:ni.operators.LT,o=i.opts.unicode===!1?(0,ni._)`${r}.length`:(0,ni._)`${(0,Ib.useFunc)(t.gen,vb.default)}(${r})`;t.fail$data((0,ni._)`${o} ${s} ${n}`)}};su.default=Cb;var au={};Object.defineProperty(au,"__esModule",{value:!0});const xb=en(),Do=ut,Rb={message:({schemaCode:t})=>(0,Do.str)`must match pattern "${t}"`,params:({schemaCode:t})=>(0,Do._)`{pattern: ${t}}`},Nb={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Rb,code(t){const{data:e,$data:r,schema:n,schemaCode:i,it:s}=t,o=s.opts.unicodeRegExp?"u":"",a=r?(0,Do._)`(new RegExp(${i}, ${o}))`:(0,xb.usePattern)(t,n);t.fail$data((0,Do._)`!${a}.test(${e})`)}};au.default=Nb;var cu={};Object.defineProperty(cu,"__esModule",{value:!0});const ys=ut,kb={message({keyword:t,schemaCode:e}){const r=t==="maxProperties"?"more":"fewer";return(0,ys.str)`must NOT have ${r} than ${e} properties`},params:({schemaCode:t})=>(0,ys._)`{limit: ${t}}`},Pb={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:kb,code(t){const{keyword:e,data:r,schemaCode:n}=t,i=e==="maxProperties"?ys.operators.GT:ys.operators.LT;t.fail$data((0,ys._)`Object.keys(${r}).length ${i} ${n}`)}};cu.default=Pb;var fu={};Object.defineProperty(fu,"__esModule",{value:!0});const ts=en(),As=ut,Tb=Ne,Bb={message:({params:{missingProperty:t}})=>(0,As.str)`must have required property '${t}'`,params:({params:{missingProperty:t}})=>(0,As._)`{missingProperty: ${t}}`},Ob={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Bb,code(t){const{gen:e,schema:r,schemaCode:n,data:i,$data:s,it:o}=t,{opts:a}=o;if(!s&&r.length===0)return;const c=r.length>=a.loopRequired;if(o.allErrors?f():u(),a.strictRequired){const d=t.parentSchema.properties,{definedProperties:m}=t.it;for(const _ of r)if((d==null?void 0:d[_])===void 0&&!m.has(_)){const y=o.schemaEnv.baseId+o.errSchemaPath,E=`required property "${_}" is not defined at "${y}" (strictRequired)`;(0,Tb.checkStrictMode)(o,E,o.opts.strictRequired)}}function f(){if(c||s)t.block$data(As.nil,l);else for(const d of r)(0,ts.checkReportMissingProp)(t,d)}function u(){const d=e.let("missing");if(c||s){const m=e.let("valid",!0);t.block$data(m,()=>h(d,m)),t.ok(m)}else e.if((0,ts.checkMissingProp)(t,r,d)),(0,ts.reportMissingProp)(t,d),e.else()}function l(){e.forOf("prop",n,d=>{t.setParams({missingProperty:d}),e.if((0,ts.noPropertyInData)(e,i,d,a.ownProperties),()=>t.error())})}function h(d,m){t.setParams({missingProperty:d}),e.forOf(d,n,()=>{e.assign(m,(0,ts.propertyInData)(e,i,d,a.ownProperties)),e.if((0,As.not)(m),()=>{t.error(),e.break()})},As.nil)}}};fu.default=Ob;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});const bs=ut,Lb={message({keyword:t,schemaCode:e}){const r=t==="maxItems"?"more":"fewer";return(0,bs.str)`must NOT have ${r} than ${e} items`},params:({schemaCode:t})=>(0,bs._)`{limit: ${t}}`},Db={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Lb,code(t){const{keyword:e,data:r,schemaCode:n}=t,i=e==="maxItems"?bs.operators.GT:bs.operators.LT;t.fail$data((0,bs._)`${r}.length ${i} ${n}`)}};uu.default=Db;var lu={},ks={};Object.defineProperty(ks,"__esModule",{value:!0});const Wp=Zo;Wp.code='require("ajv/dist/runtime/equal").default';ks.default=Wp;Object.defineProperty(lu,"__esModule",{value:!0});const Ba=Zt,ir=ut,Ub=Ne,Mb=ks,Fb={message:({params:{i:t,j:e}})=>(0,ir.str)`must NOT have duplicate items (items ## ${e} and ${t} are identical)`,params:({params:{i:t,j:e}})=>(0,ir._)`{i: ${t}, j: ${e}}`},Hb={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Fb,code(t){const{gen:e,data:r,$data:n,schema:i,parentSchema:s,schemaCode:o,it:a}=t;if(!n&&!i)return;const c=e.let("valid"),f=s.items?(0,Ba.getSchemaTypes)(s.items):[];t.block$data(c,u,(0,ir._)`${o} === false`),t.ok(c);function u(){const m=e.let("i",(0,ir._)`${r}.length`),_=e.let("j");t.setParams({i:m,j:_}),e.assign(c,!0),e.if((0,ir._)`${m} > 1`,()=>(l()?h:d)(m,_))}function l(){return f.length>0&&!f.some(m=>m==="object"||m==="array")}function h(m,_){const y=e.name("item"),E=(0,Ba.checkDataTypes)(f,y,a.opts.strictNumbers,Ba.DataType.Wrong),I=e.const("indices",(0,ir._)`{}`);e.for((0,ir._)`;${m}--;`,()=>{e.let(y,(0,ir._)`${r}[${m}]`),e.if(E,(0,ir._)`continue`),f.length>1&&e.if((0,ir._)`typeof ${y} == "string"`,(0,ir._)`${y} += "_"`),e.if((0,ir._)`typeof ${I}[${y}] == "number"`,()=>{e.assign(_,(0,ir._)`${I}[${y}]`),t.error(),e.assign(c,!1).break()}).code((0,ir._)`${I}[${y}] = ${m}`)})}function d(m,_){const y=(0,Ub.useFunc)(e,Mb.default),E=e.name("outer");e.label(E).for((0,ir._)`;${m}--;`,()=>e.for((0,ir._)`${_} = ${m}; ${_}--;`,()=>e.if((0,ir._)`${y}(${r}[${m}], ${r}[${_}])`,()=>{t.error(),e.assign(c,!1).break(E)})))}}};lu.default=Hb;var du={};Object.defineProperty(du,"__esModule",{value:!0});const vc=ut,jb=Ne,Qb=ks,qb={message:"must be equal to constant",params:({schemaCode:t})=>(0,vc._)`{allowedValue: ${t}}`},Kb={keyword:"const",$data:!0,error:qb,code(t){const{gen:e,data:r,$data:n,schemaCode:i,schema:s}=t;n||s&&typeof s=="object"?t.fail$data((0,vc._)`!${(0,jb.useFunc)(e,Qb.default)}(${r}, ${i})`):t.fail((0,vc._)`${s} !== ${r}`)}};du.default=Kb;var hu={};Object.defineProperty(hu,"__esModule",{value:!0});const us=ut,Wb=Ne,Gb=ks,Vb={message:"must be equal to one of the allowed values",params:({schemaCode:t})=>(0,us._)`{allowedValues: ${t}}`},Yb={keyword:"enum",schemaType:"array",$data:!0,error:Vb,code(t){const{gen:e,data:r,$data:n,schema:i,schemaCode:s,it:o}=t;if(!n&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let c;const f=()=>c??(c=(0,Wb.useFunc)(e,Gb.default));let u;if(a||n)u=e.let("valid"),t.block$data(u,l);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const d=e.const("vSchema",s);u=(0,us.or)(...i.map((m,_)=>h(d,_)))}t.pass(u);function l(){e.assign(u,!1),e.forOf("v",s,d=>e.if((0,us._)`${f()}(${r}, ${d})`,()=>e.assign(u,!0).break()))}function h(d,m){const _=i[m];return typeof _=="object"&&_!==null?(0,us._)`${f()}(${r}, ${d}[${m}])`:(0,us._)`${r} === ${_}`}}};hu.default=Yb;Object.defineProperty(ru,"__esModule",{value:!0});const zb=nu,Xb=iu,Jb=su,Zb=au,ew=cu,tw=fu,rw=uu,nw=lu,iw=du,sw=hu,ow=[zb.default,Xb.default,Jb.default,Zb.default,ew.default,tw.default,rw.default,nw.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},iw.default,sw.default];ru.default=ow;var pu={},Wi={};Object.defineProperty(Wi,"__esModule",{value:!0});Wi.validateAdditionalItems=void 0;const ii=ut,$c=Ne,aw={message:({params:{len:t}})=>(0,ii.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ii._)`{limit: ${t}}`},cw={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:aw,code(t){const{parentSchema:e,it:r}=t,{items:n}=e;if(!Array.isArray(n)){(0,$c.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}Gp(t,n)}};function Gp(t,e){const{gen:r,schema:n,data:i,keyword:s,it:o}=t;o.items=!0;const a=r.const("len",(0,ii._)`${i}.length`);if(n===!1)t.setParams({len:e.length}),t.pass((0,ii._)`${a} <= ${e.length}`);else if(typeof n=="object"&&!(0,$c.alwaysValidSchema)(o,n)){const f=r.var("valid",(0,ii._)`${a} <= ${e.length}`);r.if((0,ii.not)(f),()=>c(f)),t.ok(f)}function c(f){r.forRange("i",e.length,a,u=>{t.subschema({keyword:s,dataProp:u,dataPropType:$c.Type.Num},f),o.allErrors||r.if((0,ii.not)(f),()=>r.break())})}}Wi.validateAdditionalItems=Gp;Wi.default=cw;var gu={},Gi={};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.validateTuple=void 0;const Ql=ut,Io=Ne,fw=en(),uw={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(t){const{schema:e,it:r}=t;if(Array.isArray(e))return Vp(t,"additionalItems",e);r.items=!0,!(0,Io.alwaysValidSchema)(r,e)&&t.ok((0,fw.validateArray)(t))}};function Vp(t,e,r=t.schema){const{gen:n,parentSchema:i,data:s,keyword:o,it:a}=t;u(i),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=Io.mergeEvaluated.items(n,r.length,a.items));const c=n.name("valid"),f=n.const("len",(0,Ql._)`${s}.length`);r.forEach((l,h)=>{(0,Io.alwaysValidSchema)(a,l)||(n.if((0,Ql._)`${f} > ${h}`,()=>t.subschema({keyword:o,schemaProp:h,dataProp:h},c)),t.ok(c))});function u(l){const{opts:h,errSchemaPath:d}=a,m=r.length,_=m===l.minItems&&(m===l.maxItems||l[e]===!1);if(h.strictTuples&&!_){const y=`"${o}" is ${m}-tuple, but minItems or maxItems/${e} are not specified or different at path "${d}"`;(0,Io.checkStrictMode)(a,y,h.strictTuples)}}}Gi.validateTuple=Vp;Gi.default=uw;Object.defineProperty(gu,"__esModule",{value:!0});const lw=Gi,dw={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:t=>(0,lw.validateTuple)(t,"items")};gu.default=dw;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});const ql=ut,hw=Ne,pw=en(),gw=Wi,mw={message:({params:{len:t}})=>(0,ql.str)`must NOT have more than ${t} items`,params:({params:{len:t}})=>(0,ql._)`{limit: ${t}}`},_w={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:mw,code(t){const{schema:e,parentSchema:r,it:n}=t,{prefixItems:i}=r;n.items=!0,!(0,hw.alwaysValidSchema)(n,e)&&(i?(0,gw.validateAdditionalItems)(t,i):t.ok((0,pw.validateArray)(t)))}};mu.default=_w;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});const Dr=ut,eo=Ne,Ew={message:({params:{min:t,max:e}})=>e===void 0?(0,Dr.str)`must contain at least ${t} valid item(s)`:(0,Dr.str)`must contain at least ${t} and no more than ${e} valid item(s)`,params:({params:{min:t,max:e}})=>e===void 0?(0,Dr._)`{minContains: ${t}}`:(0,Dr._)`{minContains: ${t}, maxContains: ${e}}`},yw={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Ew,code(t){const{gen:e,schema:r,parentSchema:n,data:i,it:s}=t;let o,a;const{minContains:c,maxContains:f}=n;s.opts.next?(o=c===void 0?1:c,a=f):o=1;const u=e.const("len",(0,Dr._)`${i}.length`);if(t.setParams({min:o,max:a}),a===void 0&&o===0){(0,eo.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,eo.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),t.fail();return}if((0,eo.alwaysValidSchema)(s,r)){let _=(0,Dr._)`${u} >= ${o}`;a!==void 0&&(_=(0,Dr._)`${_} && ${u} <= ${a}`),t.pass(_);return}s.items=!0;const l=e.name("valid");a===void 0&&o===1?d(l,()=>e.if(l,()=>e.break())):o===0?(e.let(l,!0),a!==void 0&&e.if((0,Dr._)`${i}.length > 0`,h)):(e.let(l,!1),h()),t.result(l,()=>t.reset());function h(){const _=e.name("_valid"),y=e.let("count",0);d(_,()=>e.if(_,()=>m(y)))}function d(_,y){e.forRange("i",0,u,E=>{t.subschema({keyword:"contains",dataProp:E,dataPropType:eo.Type.Num,compositeRule:!0},_),y()})}function m(_){e.code((0,Dr._)`${_}++`),a===void 0?e.if((0,Dr._)`${_} >= ${o}`,()=>e.assign(l,!0).break()):(e.if((0,Dr._)`${_} > ${a}`,()=>e.assign(l,!1).break()),o===1?e.assign(l,!0):e.if((0,Dr._)`${_} >= ${o}`,()=>e.assign(l,!0)))}}};_u.default=yw;var Yp={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const e=ut,r=Ne,n=en();t.error={message:({params:{property:c,depsCount:f,deps:u}})=>{const l=f===1?"property":"properties";return(0,e.str)`must have ${l} ${u} when property ${c} is present`},params:({params:{property:c,depsCount:f,deps:u,missingProperty:l}})=>(0,e._)`{property: ${c},
    missingProperty: ${l},
    depsCount: ${f},
    deps: ${u}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(c){const[f,u]=s(c);o(c,f),a(c,u)}};function s({schema:c}){const f={},u={};for(const l in c){if(l==="__proto__")continue;const h=Array.isArray(c[l])?f:u;h[l]=c[l]}return[f,u]}function o(c,f=c.schema){const{gen:u,data:l,it:h}=c;if(Object.keys(f).length===0)return;const d=u.let("missing");for(const m in f){const _=f[m];if(_.length===0)continue;const y=(0,n.propertyInData)(u,l,m,h.opts.ownProperties);c.setParams({property:m,depsCount:_.length,deps:_.join(", ")}),h.allErrors?u.if(y,()=>{for(const E of _)(0,n.checkReportMissingProp)(c,E)}):(u.if((0,e._)`${y} && (${(0,n.checkMissingProp)(c,_,d)})`),(0,n.reportMissingProp)(c,d),u.else())}}t.validatePropertyDeps=o;function a(c,f=c.schema){const{gen:u,data:l,keyword:h,it:d}=c,m=u.name("valid");for(const _ in f)(0,r.alwaysValidSchema)(d,f[_])||(u.if((0,n.propertyInData)(u,l,_,d.opts.ownProperties),()=>{const y=c.subschema({keyword:h,schemaProp:_},m);c.mergeValidEvaluated(y,m)},()=>u.var(m,!0)),c.ok(m))}t.validateSchemaDeps=a,t.default=i})(Yp);var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});const zp=ut,Aw=Ne,bw={message:"property name must be valid",params:({params:t})=>(0,zp._)`{propertyName: ${t.propertyName}}`},ww={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:bw,code(t){const{gen:e,schema:r,data:n,it:i}=t;if((0,Aw.alwaysValidSchema)(i,r))return;const s=e.name("valid");e.forIn("key",n,o=>{t.setParams({propertyName:o}),t.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),e.if((0,zp.not)(s),()=>{t.error(!0),i.allErrors||e.break()})}),t.ok(s)}};Eu.default=ww;var ua={};Object.defineProperty(ua,"__esModule",{value:!0});const to=en(),Gr=ut,Sw=ln,ro=Ne,Iw={message:"must NOT have additional properties",params:({params:t})=>(0,Gr._)`{additionalProperty: ${t.additionalProperty}}`},vw={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Iw,code(t){const{gen:e,schema:r,parentSchema:n,data:i,errsCount:s,it:o}=t;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:c}=o;if(o.props=!0,c.removeAdditional!=="all"&&(0,ro.alwaysValidSchema)(o,r))return;const f=(0,to.allSchemaProperties)(n.properties),u=(0,to.allSchemaProperties)(n.patternProperties);l(),t.ok((0,Gr._)`${s} === ${Sw.default.errors}`);function l(){e.forIn("key",i,y=>{!f.length&&!u.length?m(y):e.if(h(y),()=>m(y))})}function h(y){let E;if(f.length>8){const I=(0,ro.schemaRefOrVal)(o,n.properties,"properties");E=(0,to.isOwnProperty)(e,I,y)}else f.length?E=(0,Gr.or)(...f.map(I=>(0,Gr._)`${y} === ${I}`)):E=Gr.nil;return u.length&&(E=(0,Gr.or)(E,...u.map(I=>(0,Gr._)`${(0,to.usePattern)(t,I)}.test(${y})`))),(0,Gr.not)(E)}function d(y){e.code((0,Gr._)`delete ${i}[${y}]`)}function m(y){if(c.removeAdditional==="all"||c.removeAdditional&&r===!1){d(y);return}if(r===!1){t.setParams({additionalProperty:y}),t.error(),a||e.break();return}if(typeof r=="object"&&!(0,ro.alwaysValidSchema)(o,r)){const E=e.name("valid");c.removeAdditional==="failing"?(_(y,E,!1),e.if((0,Gr.not)(E),()=>{t.reset(),d(y)})):(_(y,E),a||e.if((0,Gr.not)(E),()=>e.break()))}}function _(y,E,I){const R={keyword:"additionalProperties",dataProp:y,dataPropType:ro.Type.Str};I===!1&&Object.assign(R,{compositeRule:!0,createErrors:!1,allErrors:!1}),t.subschema(R,E)}}};ua.default=vw;var yu={};Object.defineProperty(yu,"__esModule",{value:!0});const $w=aa(),Kl=en(),Oa=Ne,Wl=ua,Cw={keyword:"properties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,parentSchema:n,data:i,it:s}=t;s.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Wl.default.code(new $w.KeywordCxt(s,Wl.default,"additionalProperties"));const o=(0,Kl.allSchemaProperties)(r);for(const l of o)s.definedProperties.add(l);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=Oa.mergeEvaluated.props(e,(0,Oa.toHash)(o),s.props));const a=o.filter(l=>!(0,Oa.alwaysValidSchema)(s,r[l]));if(a.length===0)return;const c=e.name("valid");for(const l of a)f(l)?u(l):(e.if((0,Kl.propertyInData)(e,i,l,s.opts.ownProperties)),u(l),s.allErrors||e.else().var(c,!0),e.endIf()),t.it.definedProperties.add(l),t.ok(c);function f(l){return s.opts.useDefaults&&!s.compositeRule&&r[l].default!==void 0}function u(l){t.subschema({keyword:"properties",schemaProp:l,dataProp:l},c)}}};yu.default=Cw;var Au={};Object.defineProperty(Au,"__esModule",{value:!0});const Gl=en(),no=ut,Vl=Ne,Yl=Ne,xw={keyword:"patternProperties",type:"object",schemaType:"object",code(t){const{gen:e,schema:r,data:n,parentSchema:i,it:s}=t,{opts:o}=s,a=(0,Gl.allSchemaProperties)(r),c=a.filter(_=>(0,Vl.alwaysValidSchema)(s,r[_]));if(a.length===0||c.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const f=o.strictSchema&&!o.allowMatchingProperties&&i.properties,u=e.name("valid");s.props!==!0&&!(s.props instanceof no.Name)&&(s.props=(0,Yl.evaluatedPropsToName)(e,s.props));const{props:l}=s;h();function h(){for(const _ of a)f&&d(_),s.allErrors?m(_):(e.var(u,!0),m(_),e.if(u))}function d(_){for(const y in f)new RegExp(_).test(y)&&(0,Vl.checkStrictMode)(s,`property ${y} matches pattern ${_} (use allowMatchingProperties)`)}function m(_){e.forIn("key",n,y=>{e.if((0,no._)`${(0,Gl.usePattern)(t,_)}.test(${y})`,()=>{const E=c.includes(_);E||t.subschema({keyword:"patternProperties",schemaProp:_,dataProp:y,dataPropType:Yl.Type.Str},u),s.opts.unevaluated&&l!==!0?e.assign((0,no._)`${l}[${y}]`,!0):!E&&!s.allErrors&&e.if((0,no.not)(u),()=>e.break())})})}}};Au.default=xw;var bu={};Object.defineProperty(bu,"__esModule",{value:!0});const Rw=Ne,Nw={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(t){const{gen:e,schema:r,it:n}=t;if((0,Rw.alwaysValidSchema)(n,r)){t.fail();return}const i=e.name("valid");t.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),t.failResult(i,()=>t.reset(),()=>t.error())},error:{message:"must NOT be valid"}};bu.default=Nw;var wu={};Object.defineProperty(wu,"__esModule",{value:!0});const kw=en(),Pw={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:kw.validateUnion,error:{message:"must match a schema in anyOf"}};wu.default=Pw;var Su={};Object.defineProperty(Su,"__esModule",{value:!0});const vo=ut,Tw=Ne,Bw={message:"must match exactly one schema in oneOf",params:({params:t})=>(0,vo._)`{passingSchemas: ${t.passing}}`},Ow={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Bw,code(t){const{gen:e,schema:r,parentSchema:n,it:i}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;const s=r,o=e.let("valid",!1),a=e.let("passing",null),c=e.name("_valid");t.setParams({passing:a}),e.block(f),t.result(o,()=>t.reset(),()=>t.error(!0));function f(){s.forEach((u,l)=>{let h;(0,Tw.alwaysValidSchema)(i,u)?e.var(c,!0):h=t.subschema({keyword:"oneOf",schemaProp:l,compositeRule:!0},c),l>0&&e.if((0,vo._)`${c} && ${o}`).assign(o,!1).assign(a,(0,vo._)`[${a}, ${l}]`).else(),e.if(c,()=>{e.assign(o,!0),e.assign(a,l),h&&t.mergeEvaluated(h,vo.Name)})})}}};Su.default=Ow;var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});const Lw=Ne,Dw={keyword:"allOf",schemaType:"array",code(t){const{gen:e,schema:r,it:n}=t;if(!Array.isArray(r))throw new Error("ajv implementation error");const i=e.name("valid");r.forEach((s,o)=>{if((0,Lw.alwaysValidSchema)(n,s))return;const a=t.subschema({keyword:"allOf",schemaProp:o},i);t.ok(i),t.mergeEvaluated(a)})}};Iu.default=Dw;var vu={};Object.defineProperty(vu,"__esModule",{value:!0});const Uo=ut,Xp=Ne,Uw={message:({params:t})=>(0,Uo.str)`must match "${t.ifClause}" schema`,params:({params:t})=>(0,Uo._)`{failingKeyword: ${t.ifClause}}`},Mw={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Uw,code(t){const{gen:e,parentSchema:r,it:n}=t;r.then===void 0&&r.else===void 0&&(0,Xp.checkStrictMode)(n,'"if" without "then" and "else" is ignored');const i=zl(n,"then"),s=zl(n,"else");if(!i&&!s)return;const o=e.let("valid",!0),a=e.name("_valid");if(c(),t.reset(),i&&s){const u=e.let("ifClause");t.setParams({ifClause:u}),e.if(a,f("then",u),f("else",u))}else i?e.if(a,f("then")):e.if((0,Uo.not)(a),f("else"));t.pass(o,()=>t.error(!0));function c(){const u=t.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);t.mergeEvaluated(u)}function f(u,l){return()=>{const h=t.subschema({keyword:u},a);e.assign(o,a),t.mergeValidEvaluated(h,o),l?e.assign(l,(0,Uo._)`${u}`):t.setParams({ifClause:u})}}}};function zl(t,e){const r=t.schema[e];return r!==void 0&&!(0,Xp.alwaysValidSchema)(t,r)}vu.default=Mw;var $u={};Object.defineProperty($u,"__esModule",{value:!0});const Fw=Ne,Hw={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:t,parentSchema:e,it:r}){e.if===void 0&&(0,Fw.checkStrictMode)(r,`"${t}" without "if" is ignored`)}};$u.default=Hw;Object.defineProperty(pu,"__esModule",{value:!0});const jw=Wi,Qw=gu,qw=Gi,Kw=mu,Ww=_u,Gw=Yp,Vw=Eu,Yw=ua,zw=yu,Xw=Au,Jw=bu,Zw=wu,e1=Su,t1=Iu,r1=vu,n1=$u;function i1(t=!1){const e=[Jw.default,Zw.default,e1.default,t1.default,r1.default,n1.default,Vw.default,Yw.default,Gw.default,zw.default,Xw.default];return t?e.push(Qw.default,Kw.default):e.push(jw.default,qw.default),e.push(Ww.default),e}pu.default=i1;var Cu={},xu={};Object.defineProperty(xu,"__esModule",{value:!0});const Yt=ut,s1={message:({schemaCode:t})=>(0,Yt.str)`must match format "${t}"`,params:({schemaCode:t})=>(0,Yt._)`{format: ${t}}`},o1={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:s1,code(t,e){const{gen:r,data:n,$data:i,schema:s,schemaCode:o,it:a}=t,{opts:c,errSchemaPath:f,schemaEnv:u,self:l}=a;if(!c.validateFormats)return;i?h():d();function h(){const m=r.scopeValue("formats",{ref:l.formats,code:c.code.formats}),_=r.const("fDef",(0,Yt._)`${m}[${o}]`),y=r.let("fType"),E=r.let("format");r.if((0,Yt._)`typeof ${_} == "object" && !(${_} instanceof RegExp)`,()=>r.assign(y,(0,Yt._)`${_}.type || "string"`).assign(E,(0,Yt._)`${_}.validate`),()=>r.assign(y,(0,Yt._)`"string"`).assign(E,_)),t.fail$data((0,Yt.or)(I(),R()));function I(){return c.strictSchema===!1?Yt.nil:(0,Yt._)`${o} && !${E}`}function R(){const P=u.$async?(0,Yt._)`(${_}.async ? await ${E}(${n}) : ${E}(${n}))`:(0,Yt._)`${E}(${n})`,Q=(0,Yt._)`(typeof ${E} == "function" ? ${P} : ${E}.test(${n}))`;return(0,Yt._)`${E} && ${E} !== true && ${y} === ${e} && !${Q}`}}function d(){const m=l.formats[s];if(!m){I();return}if(m===!0)return;const[_,y,E]=R(m);_===e&&t.pass(P());function I(){if(c.strictSchema===!1){l.logger.warn(Q());return}throw new Error(Q());function Q(){return`unknown format "${s}" ignored in schema at path "${f}"`}}function R(Q){const z=Q instanceof RegExp?(0,Yt.regexpCode)(Q):c.code.formats?(0,Yt._)`${c.code.formats}${(0,Yt.getProperty)(s)}`:void 0,X=r.scopeValue("formats",{key:s,ref:Q,code:z});return typeof Q=="object"&&!(Q instanceof RegExp)?[Q.type||"string",Q.validate,(0,Yt._)`${X}.validate`]:["string",Q,X]}function P(){if(typeof m=="object"&&!(m instanceof RegExp)&&m.async){if(!u.$async)throw new Error("async format in sync schema");return(0,Yt._)`await ${E}(${n})`}return typeof y=="function"?(0,Yt._)`${E}(${n})`:(0,Yt._)`${E}.test(${n})`}}}};xu.default=o1;Object.defineProperty(Cu,"__esModule",{value:!0});const a1=xu,c1=[a1.default];Cu.default=c1;var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0});Ui.contentVocabulary=Ui.metadataVocabulary=void 0;Ui.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Ui.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(Zf,"__esModule",{value:!0});const f1=eu,u1=ru,l1=pu,d1=Cu,Xl=Ui,h1=[f1.default,u1.default,(0,l1.default)(),d1.default,Xl.metadataVocabulary,Xl.contentVocabulary];Zf.default=h1;var Ru={},la={};Object.defineProperty(la,"__esModule",{value:!0});la.DiscrError=void 0;var Jl;(function(t){t.Tag="tag",t.Mapping="mapping"})(Jl||(la.DiscrError=Jl={}));Object.defineProperty(Ru,"__esModule",{value:!0});const Ii=ut,Cc=la,Zl=kr,p1=Ki,g1=Ne,m1={message:({params:{discrError:t,tagName:e}})=>t===Cc.DiscrError.Tag?`tag "${e}" must be string`:`value of tag "${e}" must be in oneOf`,params:({params:{discrError:t,tag:e,tagName:r}})=>(0,Ii._)`{error: ${t}, tag: ${r}, tagValue: ${e}}`},_1={keyword:"discriminator",type:"object",schemaType:"object",error:m1,code(t){const{gen:e,data:r,schema:n,parentSchema:i,it:s}=t,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const c=e.let("valid",!1),f=e.const("tag",(0,Ii._)`${r}${(0,Ii.getProperty)(a)}`);e.if((0,Ii._)`typeof ${f} == "string"`,()=>u(),()=>t.error(!1,{discrError:Cc.DiscrError.Tag,tag:f,tagName:a})),t.ok(c);function u(){const d=h();e.if(!1);for(const m in d)e.elseIf((0,Ii._)`${f} === ${m}`),e.assign(c,l(d[m]));e.else(),t.error(!1,{discrError:Cc.DiscrError.Mapping,tag:f,tagName:a}),e.endIf()}function l(d){const m=e.name("valid"),_=t.subschema({keyword:"oneOf",schemaProp:d},m);return t.mergeEvaluated(_,Ii.Name),m}function h(){var d;const m={},_=E(i);let y=!0;for(let P=0;P<o.length;P++){let Q=o[P];if(Q!=null&&Q.$ref&&!(0,g1.schemaHasRulesButRef)(Q,s.self.RULES)){const X=Q.$ref;if(Q=Zl.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,X),Q instanceof Zl.SchemaEnv&&(Q=Q.schema),Q===void 0)throw new p1.default(s.opts.uriResolver,s.baseId,X)}const z=(d=Q==null?void 0:Q.properties)===null||d===void 0?void 0:d[a];if(typeof z!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);y=y&&(_||E(Q)),I(z,P)}if(!y)throw new Error(`discriminator: "${a}" must be required`);return m;function E({required:P}){return Array.isArray(P)&&P.includes(a)}function I(P,Q){if(P.const)R(P.const,Q);else if(P.enum)for(const z of P.enum)R(z,Q);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function R(P,Q){if(typeof P!="string"||P in m)throw new Error(`discriminator: "${a}" values must be unique strings`);m[P]=Q}}}};Ru.default=_1;const E1="http://json-schema.org/draft-07/schema#",y1="http://json-schema.org/draft-07/schema#",A1="Core schema meta-schema",b1={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},w1=["object","boolean"],S1={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},I1={$schema:E1,$id:y1,title:A1,definitions:b1,type:w1,properties:S1,default:!0};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissingRefError=e.ValidationError=e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=e.Ajv=void 0;const r=Cp,n=Zf,i=Ru,s=I1,o=["/properties"],a="http://json-schema.org/draft-07/schema";class c extends r.default{_addVocabularies(){super._addVocabularies(),n.default.forEach(m=>this.addVocabulary(m)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const m=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(m,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}e.Ajv=c,t.exports=e=c,t.exports.Ajv=c,Object.defineProperty(e,"__esModule",{value:!0}),e.default=c;var f=aa();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return f.KeywordCxt}});var u=ut;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var l=zf();Object.defineProperty(e,"ValidationError",{enumerable:!0,get:function(){return l.default}});var h=Ki;Object.defineProperty(e,"MissingRefError",{enumerable:!0,get:function(){return h.default}})})(Ac,Ac.exports);var v1=Ac.exports;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const e=v1,r=ut,n=r.operators,i={formatMaximum:{okStr:"<=",ok:n.LTE,fail:n.GT},formatMinimum:{okStr:">=",ok:n.GTE,fail:n.LT},formatExclusiveMaximum:{okStr:"<",ok:n.LT,fail:n.GTE},formatExclusiveMinimum:{okStr:">",ok:n.GT,fail:n.LTE}},s={message:({keyword:a,schemaCode:c})=>r.str`should be ${i[a].okStr} ${c}`,params:({keyword:a,schemaCode:c})=>r._`{comparison: ${i[a].okStr}, limit: ${c}}`};t.formatLimitDefinition={keyword:Object.keys(i),type:"string",schemaType:"string",$data:!0,error:s,code(a){const{gen:c,data:f,schemaCode:u,keyword:l,it:h}=a,{opts:d,self:m}=h;if(!d.validateFormats)return;const _=new e.KeywordCxt(h,m.RULES.all.format.definition,"format");_.$data?y():E();function y(){const R=c.scopeValue("formats",{ref:m.formats,code:d.code.formats}),P=c.const("fmt",r._`${R}[${_.schemaCode}]`);a.fail$data(r.or(r._`typeof ${P} != "object"`,r._`${P} instanceof RegExp`,r._`typeof ${P}.compare != "function"`,I(P)))}function E(){const R=_.schema,P=m.formats[R];if(!P||P===!0)return;if(typeof P!="object"||P instanceof RegExp||typeof P.compare!="function")throw new Error(`"${l}": format "${R}" does not define "compare" function`);const Q=c.scopeValue("formats",{key:R,ref:P,code:d.code.formats?r._`${d.code.formats}${r.getProperty(R)}`:void 0});a.fail$data(I(Q))}function I(R){return r._`${R}.compare(${f}, ${u}) ${i[l].fail} 0`}},dependencies:["format"]};const o=a=>(a.addKeyword(t.formatLimitDefinition),a);t.default=o})($p);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const r=vp,n=$p,i=ut,s=new i.Name("fullFormats"),o=new i.Name("fastFormats"),a=(f,u={keywords:!0})=>{if(Array.isArray(u))return c(f,u,r.fullFormats,s),f;const[l,h]=u.mode==="fast"?[r.fastFormats,o]:[r.fullFormats,s],d=u.formats||r.formatNames;return c(f,d,l,h),u.keywords&&n.default(f),f};a.get=(f,u="full")=>{const h=(u==="fast"?r.fastFormats:r.fullFormats)[f];if(!h)throw new Error(`Unknown format "${f}"`);return h};function c(f,u,l,h){var d,m;(d=(m=f.opts.code).formats)!==null&&d!==void 0||(m.formats=i._`require("ajv-formats/dist/formats").${h}`);for(const _ of u)f.addFormat(_,l[_])}t.exports=e=a,Object.defineProperty(e,"__esModule",{value:!0}),e.default=a})(yc,yc.exports);var $1=yc.exports;const C1=(t,e,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;const i=Object.getOwnPropertyDescriptor(t,r),s=Object.getOwnPropertyDescriptor(e,r);!x1(i,s)&&n||Object.defineProperty(t,r,s)},x1=function(t,e){return t===void 0||t.configurable||t.writable===e.writable&&t.enumerable===e.enumerable&&t.configurable===e.configurable&&(t.writable||t.value===e.value)},R1=(t,e)=>{const r=Object.getPrototypeOf(e);r!==Object.getPrototypeOf(t)&&Object.setPrototypeOf(t,r)},N1=(t,e)=>`/* Wrapped ${t}*/
${e}`,k1=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),P1=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),T1=(t,e,r)=>{const n=r===""?"":`with ${r.trim()}() `,i=N1.bind(null,n,e.toString());Object.defineProperty(i,"name",P1),Object.defineProperty(t,"toString",{...k1,value:i})},B1=(t,e,{ignoreNonConfigurable:r=!1}={})=>{const{name:n}=t;for(const i of Reflect.ownKeys(e))C1(t,e,i,r);return R1(t,e),T1(t,e,n),t};var O1=B1;const L1=O1;var D1=(t,e={})=>{if(typeof t!="function")throw new TypeError(`Expected the first argument to be a function, got \`${typeof t}\``);const{wait:r=0,before:n=!1,after:i=!0}=e;if(!n&&!i)throw new Error("Both `before` and `after` are false, function wouldn't be called.");let s,o;const a=function(...c){const f=this,u=()=>{s=void 0,i&&(o=t.apply(f,c))},l=n&&!s;return clearTimeout(s),s=setTimeout(u,r),l&&(o=t.apply(f,c)),o};return L1(a,t),a.cancel=()=>{s&&(clearTimeout(s),s=void 0)},a},xc={exports:{}};const U1="2.0.0",Jp=256,M1=Number.MAX_SAFE_INTEGER||9007199254740991,F1=16,H1=Jp-6,j1=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var da={MAX_LENGTH:Jp,MAX_SAFE_COMPONENT_LENGTH:F1,MAX_SAFE_BUILD_LENGTH:H1,MAX_SAFE_INTEGER:M1,RELEASE_TYPES:j1,SEMVER_SPEC_VERSION:U1,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Q1=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};var ha=Q1;(function(t,e){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=da,s=ha;e=t.exports={};const o=e.re=[],a=e.safeRe=[],c=e.src=[],f=e.safeSrc=[],u=e.t={};let l=0;const h="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[h,n]],m=y=>{for(const[E,I]of d)y=y.split(`${E}*`).join(`${E}{0,${I}}`).split(`${E}+`).join(`${E}{1,${I}}`);return y},_=(y,E,I)=>{const R=m(E),P=l++;s(y,P,E),u[y]=P,c[P]=E,f[P]=R,o[P]=new RegExp(E,I?"g":void 0),a[P]=new RegExp(R,I?"g":void 0)};_("NUMERICIDENTIFIER","0|[1-9]\\d*"),_("NUMERICIDENTIFIERLOOSE","\\d+"),_("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),_("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),_("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),_("PRERELEASEIDENTIFIER",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIER]})`),_("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NONNUMERICIDENTIFIER]}|${c[u.NUMERICIDENTIFIERLOOSE]})`),_("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),_("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),_("BUILDIDENTIFIER",`${h}+`),_("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),_("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),_("FULL",`^${c[u.FULLPLAIN]}$`),_("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),_("LOOSE",`^${c[u.LOOSEPLAIN]}$`),_("GTLT","((?:<|>)?=?)"),_("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),_("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),_("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),_("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),_("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),_("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),_("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),_("COERCE",`${c[u.COERCEPLAIN]}(?:$|[^\\d])`),_("COERCEFULL",c[u.COERCEPLAIN]+`(?:${c[u.PRERELEASE]})?(?:${c[u.BUILD]})?(?:$|[^\\d])`),_("COERCERTL",c[u.COERCE],!0),_("COERCERTLFULL",c[u.COERCEFULL],!0),_("LONETILDE","(?:~>?)"),_("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",_("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),_("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),_("LONECARET","(?:\\^)"),_("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",_("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),_("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),_("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),_("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),_("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",_("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),_("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),_("STAR","(<|>)?=?\\s*\\*"),_("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),_("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(xc,xc.exports);var Ps=xc.exports;const q1=Object.freeze({loose:!0}),K1=Object.freeze({}),W1=t=>t?typeof t!="object"?q1:t:K1;var Nu=W1;const ed=/^[0-9]+$/,Zp=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;const r=ed.test(t),n=ed.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},G1=(t,e)=>Zp(e,t);var e0={compareIdentifiers:Zp,rcompareIdentifiers:G1};const io=ha,{MAX_LENGTH:td,MAX_SAFE_INTEGER:so}=da,{safeRe:oo,t:ao}=Ps,V1=Nu,{compareIdentifiers:La}=e0;let Y1=class sn{constructor(e,r){if(r=V1(r),e instanceof sn){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>td)throw new TypeError(`version is longer than ${td} characters`);io("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=e.trim().match(r.loose?oo[ao.LOOSE]:oo[ao.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>so||this.major<0)throw new TypeError("Invalid major version");if(this.minor>so||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>so||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<so)return s}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(io("SemVer.compare",this.version,this.options,e),!(e instanceof sn)){if(typeof e=="string"&&e===this.version)return 0;e=new sn(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof sn||(e=new sn(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof sn||(e=new sn(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],i=e.prerelease[r];if(io("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return La(n,i)}while(++r)}compareBuild(e){e instanceof sn||(e=new sn(e,this.options));let r=0;do{const n=this.build[r],i=e.build[r];if(io("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return La(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){const i=`-${r}`.match(this.options.loose?oo[ao.PRERELEASELOOSE]:oo[ao.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let s=[r,i];n===!1&&(s=[r]),La(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var br=Y1;const rd=br,z1=(t,e,r=!1)=>{if(t instanceof rd)return t;try{return new rd(t,e)}catch(n){if(!r)return null;throw n}};var Vi=z1;const X1=Vi,J1=(t,e)=>{const r=X1(t,e);return r?r.version:null};var Z1=J1;const eS=Vi,tS=(t,e)=>{const r=eS(t.trim().replace(/^[=v]+/,""),e);return r?r.version:null};var rS=tS;const nd=br,nS=(t,e,r,n,i)=>{typeof r=="string"&&(i=n,n=r,r=void 0);try{return new nd(t instanceof nd?t.version:t,r).inc(e,n,i).version}catch{return null}};var iS=nS;const id=Vi,sS=(t,e)=>{const r=id(t,null,!0),n=id(e,null,!0),i=r.compare(n);if(i===0)return null;const s=i>0,o=s?r:n,a=s?n:r,c=!!o.prerelease.length;if(!!a.prerelease.length&&!c){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}const u=c?"pre":"";return r.major!==n.major?u+"major":r.minor!==n.minor?u+"minor":r.patch!==n.patch?u+"patch":"prerelease"};var oS=sS;const aS=br,cS=(t,e)=>new aS(t,e).major;var fS=cS;const uS=br,lS=(t,e)=>new uS(t,e).minor;var dS=lS;const hS=br,pS=(t,e)=>new hS(t,e).patch;var gS=pS;const mS=Vi,_S=(t,e)=>{const r=mS(t,e);return r&&r.prerelease.length?r.prerelease:null};var ES=_S;const sd=br,yS=(t,e,r)=>new sd(t,r).compare(new sd(e,r));var tn=yS;const AS=tn,bS=(t,e,r)=>AS(e,t,r);var wS=bS;const SS=tn,IS=(t,e)=>SS(t,e,!0);var vS=IS;const od=br,$S=(t,e,r)=>{const n=new od(t,r),i=new od(e,r);return n.compare(i)||n.compareBuild(i)};var ku=$S;const CS=ku,xS=(t,e)=>t.sort((r,n)=>CS(r,n,e));var RS=xS;const NS=ku,kS=(t,e)=>t.sort((r,n)=>NS(n,r,e));var PS=kS;const TS=tn,BS=(t,e,r)=>TS(t,e,r)>0;var pa=BS;const OS=tn,LS=(t,e,r)=>OS(t,e,r)<0;var Pu=LS;const DS=tn,US=(t,e,r)=>DS(t,e,r)===0;var t0=US;const MS=tn,FS=(t,e,r)=>MS(t,e,r)!==0;var r0=FS;const HS=tn,jS=(t,e,r)=>HS(t,e,r)>=0;var Tu=jS;const QS=tn,qS=(t,e,r)=>QS(t,e,r)<=0;var Bu=qS;const KS=t0,WS=r0,GS=pa,VS=Tu,YS=Pu,zS=Bu,XS=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return KS(t,r,n);case"!=":return WS(t,r,n);case">":return GS(t,r,n);case">=":return VS(t,r,n);case"<":return YS(t,r,n);case"<=":return zS(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};var n0=XS;const JS=br,ZS=Vi,{safeRe:co,t:fo}=Ps,eI=(t,e)=>{if(t instanceof JS)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let r=null;if(!e.rtl)r=t.match(e.includePrerelease?co[fo.COERCEFULL]:co[fo.COERCE]);else{const c=e.includePrerelease?co[fo.COERCERTLFULL]:co[fo.COERCERTL];let f;for(;(f=c.exec(t))&&(!r||r.index+r[0].length!==t.length);)(!r||f.index+f[0].length!==r.index+r[0].length)&&(r=f),c.lastIndex=f.index+f[1].length+f[2].length;c.lastIndex=-1}if(r===null)return null;const n=r[2],i=r[3]||"0",s=r[4]||"0",o=e.includePrerelease&&r[5]?`-${r[5]}`:"",a=e.includePrerelease&&r[6]?`+${r[6]}`:"";return ZS(`${n}.${i}.${s}${o}${a}`,e)};var tI=eI;class rI{constructor(){this.max=1e3,this.map=new Map}get(e){const r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}}var nI=rI,Da,ad;function rn(){if(ad)return Da;ad=1;const t=/\s+/g;class e{constructor(Z,ie){if(ie=i(ie),Z instanceof e)return Z.loose===!!ie.loose&&Z.includePrerelease===!!ie.includePrerelease?Z:new e(Z.raw,ie);if(Z instanceof s)return this.raw=Z.value,this.set=[[Z]],this.formatted=void 0,this;if(this.options=ie,this.loose=!!ie.loose,this.includePrerelease=!!ie.includePrerelease,this.raw=Z.trim().replace(t," "),this.set=this.raw.split("||").map(oe=>this.parseRange(oe.trim())).filter(oe=>oe.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const oe=this.set[0];if(this.set=this.set.filter(O=>!_(O[0])),this.set.length===0)this.set=[oe];else if(this.set.length>1){for(const O of this.set)if(O.length===1&&y(O[0])){this.set=[O];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let Z=0;Z<this.set.length;Z++){Z>0&&(this.formatted+="||");const ie=this.set[Z];for(let oe=0;oe<ie.length;oe++)oe>0&&(this.formatted+=" "),this.formatted+=ie[oe].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(Z){const oe=((this.options.includePrerelease&&d)|(this.options.loose&&m))+":"+Z,O=n.get(oe);if(O)return O;const j=this.options.loose,C=j?c[f.HYPHENRANGELOOSE]:c[f.HYPHENRANGE];Z=Z.replace(C,J(this.options.includePrerelease)),o("hyphen replace",Z),Z=Z.replace(c[f.COMPARATORTRIM],u),o("comparator trim",Z),Z=Z.replace(c[f.TILDETRIM],l),o("tilde trim",Z),Z=Z.replace(c[f.CARETTRIM],h),o("caret trim",Z);let v=Z.split(" ").map(S=>I(S,this.options)).join(" ").split(/\s+/).map(S=>se(S,this.options));j&&(v=v.filter(S=>(o("loose invalid filter",S,this.options),!!S.match(c[f.COMPARATORLOOSE])))),o("range list",v);const B=new Map,x=v.map(S=>new s(S,this.options));for(const S of x){if(_(S))return[S];B.set(S.value,S)}B.size>1&&B.has("")&&B.delete("");const g=[...B.values()];return n.set(oe,g),g}intersects(Z,ie){if(!(Z instanceof e))throw new TypeError("a Range is required");return this.set.some(oe=>E(oe,ie)&&Z.set.some(O=>E(O,ie)&&oe.every(j=>O.every(C=>j.intersects(C,ie)))))}test(Z){if(!Z)return!1;if(typeof Z=="string")try{Z=new a(Z,this.options)}catch{return!1}for(let ie=0;ie<this.set.length;ie++)if(ue(this.set[ie],Z,this.options))return!0;return!1}}Da=e;const r=nI,n=new r,i=Nu,s=ga(),o=ha,a=br,{safeRe:c,t:f,comparatorTrimReplace:u,tildeTrimReplace:l,caretTrimReplace:h}=Ps,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:m}=da,_=Y=>Y.value==="<0.0.0-0",y=Y=>Y.value==="",E=(Y,Z)=>{let ie=!0;const oe=Y.slice();let O=oe.pop();for(;ie&&oe.length;)ie=oe.every(j=>O.intersects(j,Z)),O=oe.pop();return ie},I=(Y,Z)=>(Y=Y.replace(c[f.BUILD],""),o("comp",Y,Z),Y=z(Y,Z),o("caret",Y),Y=P(Y,Z),o("tildes",Y),Y=M(Y,Z),o("xrange",Y),Y=K(Y,Z),o("stars",Y),Y),R=Y=>!Y||Y.toLowerCase()==="x"||Y==="*",P=(Y,Z)=>Y.trim().split(/\s+/).map(ie=>Q(ie,Z)).join(" "),Q=(Y,Z)=>{const ie=Z.loose?c[f.TILDELOOSE]:c[f.TILDE];return Y.replace(ie,(oe,O,j,C,v)=>{o("tilde",Y,oe,O,j,C,v);let B;return R(O)?B="":R(j)?B=`>=${O}.0.0 <${+O+1}.0.0-0`:R(C)?B=`>=${O}.${j}.0 <${O}.${+j+1}.0-0`:v?(o("replaceTilde pr",v),B=`>=${O}.${j}.${C}-${v} <${O}.${+j+1}.0-0`):B=`>=${O}.${j}.${C} <${O}.${+j+1}.0-0`,o("tilde return",B),B})},z=(Y,Z)=>Y.trim().split(/\s+/).map(ie=>X(ie,Z)).join(" "),X=(Y,Z)=>{o("caret",Y,Z);const ie=Z.loose?c[f.CARETLOOSE]:c[f.CARET],oe=Z.includePrerelease?"-0":"";return Y.replace(ie,(O,j,C,v,B)=>{o("caret",Y,O,j,C,v,B);let x;return R(j)?x="":R(C)?x=`>=${j}.0.0${oe} <${+j+1}.0.0-0`:R(v)?j==="0"?x=`>=${j}.${C}.0${oe} <${j}.${+C+1}.0-0`:x=`>=${j}.${C}.0${oe} <${+j+1}.0.0-0`:B?(o("replaceCaret pr",B),j==="0"?C==="0"?x=`>=${j}.${C}.${v}-${B} <${j}.${C}.${+v+1}-0`:x=`>=${j}.${C}.${v}-${B} <${j}.${+C+1}.0-0`:x=`>=${j}.${C}.${v}-${B} <${+j+1}.0.0-0`):(o("no pr"),j==="0"?C==="0"?x=`>=${j}.${C}.${v}${oe} <${j}.${C}.${+v+1}-0`:x=`>=${j}.${C}.${v}${oe} <${j}.${+C+1}.0-0`:x=`>=${j}.${C}.${v} <${+j+1}.0.0-0`),o("caret return",x),x})},M=(Y,Z)=>(o("replaceXRanges",Y,Z),Y.split(/\s+/).map(ie=>F(ie,Z)).join(" ")),F=(Y,Z)=>{Y=Y.trim();const ie=Z.loose?c[f.XRANGELOOSE]:c[f.XRANGE];return Y.replace(ie,(oe,O,j,C,v,B)=>{o("xRange",Y,oe,O,j,C,v,B);const x=R(j),g=x||R(C),S=g||R(v),U=S;return O==="="&&U&&(O=""),B=Z.includePrerelease?"-0":"",x?O===">"||O==="<"?oe="<0.0.0-0":oe="*":O&&U?(g&&(C=0),v=0,O===">"?(O=">=",g?(j=+j+1,C=0,v=0):(C=+C+1,v=0)):O==="<="&&(O="<",g?j=+j+1:C=+C+1),O==="<"&&(B="-0"),oe=`${O+j}.${C}.${v}${B}`):g?oe=`>=${j}.0.0${B} <${+j+1}.0.0-0`:S&&(oe=`>=${j}.${C}.0${B} <${j}.${+C+1}.0-0`),o("xRange return",oe),oe})},K=(Y,Z)=>(o("replaceStars",Y,Z),Y.trim().replace(c[f.STAR],"")),se=(Y,Z)=>(o("replaceGTE0",Y,Z),Y.trim().replace(c[Z.includePrerelease?f.GTE0PRE:f.GTE0],"")),J=Y=>(Z,ie,oe,O,j,C,v,B,x,g,S,U)=>(R(oe)?ie="":R(O)?ie=`>=${oe}.0.0${Y?"-0":""}`:R(j)?ie=`>=${oe}.${O}.0${Y?"-0":""}`:C?ie=`>=${ie}`:ie=`>=${ie}${Y?"-0":""}`,R(x)?B="":R(g)?B=`<${+x+1}.0.0-0`:R(S)?B=`<${x}.${+g+1}.0-0`:U?B=`<=${x}.${g}.${S}-${U}`:Y?B=`<${x}.${g}.${+S+1}-0`:B=`<=${B}`,`${ie} ${B}`.trim()),ue=(Y,Z,ie)=>{for(let oe=0;oe<Y.length;oe++)if(!Y[oe].test(Z))return!1;if(Z.prerelease.length&&!ie.includePrerelease){for(let oe=0;oe<Y.length;oe++)if(o(Y[oe].semver),Y[oe].semver!==s.ANY&&Y[oe].semver.prerelease.length>0){const O=Y[oe].semver;if(O.major===Z.major&&O.minor===Z.minor&&O.patch===Z.patch)return!0}return!1}return!0};return Da}var Ua,cd;function ga(){if(cd)return Ua;cd=1;const t=Symbol("SemVer ANY");class e{static get ANY(){return t}constructor(u,l){if(l=r(l),u instanceof e){if(u.loose===!!l.loose)return u;u=u.value}u=u.trim().split(/\s+/).join(" "),o("comparator",u,l),this.options=l,this.loose=!!l.loose,this.parse(u),this.semver===t?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(u){const l=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],h=u.match(l);if(!h)throw new TypeError(`Invalid comparator: ${u}`);this.operator=h[1]!==void 0?h[1]:"",this.operator==="="&&(this.operator=""),h[2]?this.semver=new a(h[2],this.options.loose):this.semver=t}toString(){return this.value}test(u){if(o("Comparator.test",u,this.options.loose),this.semver===t||u===t)return!0;if(typeof u=="string")try{u=new a(u,this.options)}catch{return!1}return s(u,this.operator,this.semver,this.options)}intersects(u,l){if(!(u instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(u.value,l).test(this.value):u.operator===""?u.value===""?!0:new c(this.value,l).test(u.semver):(l=r(l),l.includePrerelease&&(this.value==="<0.0.0-0"||u.value==="<0.0.0-0")||!l.includePrerelease&&(this.value.startsWith("<0.0.0")||u.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&u.operator.startsWith(">")||this.operator.startsWith("<")&&u.operator.startsWith("<")||this.semver.version===u.semver.version&&this.operator.includes("=")&&u.operator.includes("=")||s(this.semver,"<",u.semver,l)&&this.operator.startsWith(">")&&u.operator.startsWith("<")||s(this.semver,">",u.semver,l)&&this.operator.startsWith("<")&&u.operator.startsWith(">")))}}Ua=e;const r=Nu,{safeRe:n,t:i}=Ps,s=n0,o=ha,a=br,c=rn();return Ua}const iI=rn(),sI=(t,e,r)=>{try{e=new iI(e,r)}catch{return!1}return e.test(t)};var ma=sI;const oI=rn(),aI=(t,e)=>new oI(t,e).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var cI=aI;const fI=br,uI=rn(),lI=(t,e,r)=>{let n=null,i=null,s=null;try{s=new uI(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===-1)&&(n=o,i=new fI(n,r))}),n};var dI=lI;const hI=br,pI=rn(),gI=(t,e,r)=>{let n=null,i=null,s=null;try{s=new pI(e,r)}catch{return null}return t.forEach(o=>{s.test(o)&&(!n||i.compare(o)===1)&&(n=o,i=new hI(n,r))}),n};var mI=gI;const Ma=br,_I=rn(),fd=pa,EI=(t,e)=>{t=new _I(t,e);let r=new Ma("0.0.0");if(t.test(r)||(r=new Ma("0.0.0-0"),t.test(r)))return r;r=null;for(let n=0;n<t.set.length;++n){const i=t.set[n];let s=null;i.forEach(o=>{const a=new Ma(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!s||fd(a,s))&&(s=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),s&&(!r||fd(r,s))&&(r=s)}return r&&t.test(r)?r:null};var yI=EI;const AI=rn(),bI=(t,e)=>{try{return new AI(t,e).range||"*"}catch{return null}};var wI=bI;const SI=br,i0=ga(),{ANY:II}=i0,vI=rn(),$I=ma,ud=pa,ld=Pu,CI=Bu,xI=Tu,RI=(t,e,r,n)=>{t=new SI(t,n),e=new vI(e,n);let i,s,o,a,c;switch(r){case">":i=ud,s=CI,o=ld,a=">",c=">=";break;case"<":i=ld,s=xI,o=ud,a="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($I(t,e,n))return!1;for(let f=0;f<e.set.length;++f){const u=e.set[f];let l=null,h=null;if(u.forEach(d=>{d.semver===II&&(d=new i0(">=0.0.0")),l=l||d,h=h||d,i(d.semver,l.semver,n)?l=d:o(d.semver,h.semver,n)&&(h=d)}),l.operator===a||l.operator===c||(!h.operator||h.operator===a)&&s(t,h.semver))return!1;if(h.operator===c&&o(t,h.semver))return!1}return!0};var Ou=RI;const NI=Ou,kI=(t,e,r)=>NI(t,e,">",r);var PI=kI;const TI=Ou,BI=(t,e,r)=>TI(t,e,"<",r);var OI=BI;const dd=rn(),LI=(t,e,r)=>(t=new dd(t,r),e=new dd(e,r),t.intersects(e,r));var DI=LI;const UI=ma,MI=tn;var FI=(t,e,r)=>{const n=[];let i=null,s=null;const o=t.sort((u,l)=>MI(u,l,r));for(const u of o)UI(u,e,r)?(s=u,i||(i=u)):(s&&n.push([i,s]),s=null,i=null);i&&n.push([i,null]);const a=[];for(const[u,l]of n)u===l?a.push(u):!l&&u===o[0]?a.push("*"):l?u===o[0]?a.push(`<=${l}`):a.push(`${u} - ${l}`):a.push(`>=${u}`);const c=a.join(" || "),f=typeof e.raw=="string"?e.raw:String(e);return c.length<f.length?c:e};const hd=rn(),Lu=ga(),{ANY:Fa}=Lu,rs=ma,Du=tn,HI=(t,e,r={})=>{if(t===e)return!0;t=new hd(t,r),e=new hd(e,r);let n=!1;e:for(const i of t.set){for(const s of e.set){const o=QI(i,s,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},jI=[new Lu(">=0.0.0-0")],pd=[new Lu(">=0.0.0")],QI=(t,e,r)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Fa){if(e.length===1&&e[0].semver===Fa)return!0;r.includePrerelease?t=jI:t=pd}if(e.length===1&&e[0].semver===Fa){if(r.includePrerelease)return!0;e=pd}const n=new Set;let i,s;for(const d of t)d.operator===">"||d.operator===">="?i=gd(i,d,r):d.operator==="<"||d.operator==="<="?s=md(s,d,r):n.add(d.semver);if(n.size>1)return null;let o;if(i&&s){if(o=Du(i.semver,s.semver,r),o>0)return null;if(o===0&&(i.operator!==">="||s.operator!=="<="))return null}for(const d of n){if(i&&!rs(d,String(i),r)||s&&!rs(d,String(s),r))return null;for(const m of e)if(!rs(d,String(m),r))return!1;return!0}let a,c,f,u,l=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1,h=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1;l&&l.prerelease.length===1&&s.operator==="<"&&l.prerelease[0]===0&&(l=!1);for(const d of e){if(u=u||d.operator===">"||d.operator===">=",f=f||d.operator==="<"||d.operator==="<=",i){if(h&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===h.major&&d.semver.minor===h.minor&&d.semver.patch===h.patch&&(h=!1),d.operator===">"||d.operator===">="){if(a=gd(i,d,r),a===d&&a!==i)return!1}else if(i.operator===">="&&!rs(i.semver,String(d),r))return!1}if(s){if(l&&d.semver.prerelease&&d.semver.prerelease.length&&d.semver.major===l.major&&d.semver.minor===l.minor&&d.semver.patch===l.patch&&(l=!1),d.operator==="<"||d.operator==="<="){if(c=md(s,d,r),c===d&&c!==s)return!1}else if(s.operator==="<="&&!rs(s.semver,String(d),r))return!1}if(!d.operator&&(s||i)&&o!==0)return!1}return!(i&&f&&!s&&o!==0||s&&u&&!i&&o!==0||h||l)},gd=(t,e,r)=>{if(!t)return e;const n=Du(t.semver,e.semver,r);return n>0?t:n<0||e.operator===">"&&t.operator===">="?e:t},md=(t,e,r)=>{if(!t)return e;const n=Du(t.semver,e.semver,r);return n<0?t:n>0||e.operator==="<"&&t.operator==="<="?e:t};var qI=HI;const Ha=Ps,_d=da,KI=br,Ed=e0,WI=Vi,GI=Z1,VI=rS,YI=iS,zI=oS,XI=fS,JI=dS,ZI=gS,ev=ES,tv=tn,rv=wS,nv=vS,iv=ku,sv=RS,ov=PS,av=pa,cv=Pu,fv=t0,uv=r0,lv=Tu,dv=Bu,hv=n0,pv=tI,gv=ga(),mv=rn(),_v=ma,Ev=cI,yv=dI,Av=mI,bv=yI,wv=wI,Sv=Ou,Iv=PI,vv=OI,$v=DI,Cv=FI,xv=qI;var Rv={parse:WI,valid:GI,clean:VI,inc:YI,diff:zI,major:XI,minor:JI,patch:ZI,prerelease:ev,compare:tv,rcompare:rv,compareLoose:nv,compareBuild:iv,sort:sv,rsort:ov,gt:av,lt:cv,eq:fv,neq:uv,gte:lv,lte:dv,cmp:hv,coerce:pv,Comparator:gv,Range:mv,satisfies:_v,toComparators:Ev,maxSatisfying:yv,minSatisfying:Av,minVersion:bv,validRange:wv,outside:Sv,gtr:Iv,ltr:vv,intersects:$v,simplifyRange:Cv,subset:xv,SemVer:KI,re:Ha.re,src:Ha.src,tokens:Ha.t,SEMVER_SPEC_VERSION:_d.SEMVER_SPEC_VERSION,RELEASE_TYPES:_d.RELEASE_TYPES,compareIdentifiers:Ed.compareIdentifiers,rcompareIdentifiers:Ed.rcompareIdentifiers},_a={exports:{}},Uu={exports:{}};const s0=(t,e)=>{for(const r of Reflect.ownKeys(e))Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r));return t};Uu.exports=s0;Uu.exports.default=s0;var Nv=Uu.exports;const kv=Nv,Mo=new WeakMap,o0=(t,e={})=>{if(typeof t!="function")throw new TypeError("Expected a function");let r,n=0;const i=t.displayName||t.name||"<anonymous>",s=function(...o){if(Mo.set(s,++n),n===1)r=t.apply(this,o),t=null;else if(e.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return r};return kv(s,t),Mo.set(s,n),s};_a.exports=o0;_a.exports.default=o0;_a.exports.callCount=t=>{if(!Mo.has(t))throw new Error(`The given function \`${t.name}\` is not wrapped by the \`onetime\` package`);return Mo.get(t)};var Pv=_a.exports;(function(t,e){var r=js&&js.__classPrivateFieldSet||function(oe,O,j,C,v){if(C==="m")throw new TypeError("Private method is not writable");if(C==="a"&&!v)throw new TypeError("Private accessor was defined without a setter");if(typeof O=="function"?oe!==O||!v:!O.has(oe))throw new TypeError("Cannot write private member to an object whose class did not declare it");return C==="a"?v.call(oe,j):v?v.value=j:O.set(oe,j),j},n=js&&js.__classPrivateFieldGet||function(oe,O,j,C){if(j==="a"&&!C)throw new TypeError("Private accessor was defined without a getter");if(typeof O=="function"?oe!==O||!C:!O.has(oe))throw new TypeError("Cannot read private member from an object whose class did not declare it");return j==="m"?C:j==="a"?C.call(oe):C?C.value:O.get(oe)},i,s,o,a,c,f;Object.defineProperty(e,"__esModule",{value:!0});const u=xs,l=ai,h=Jr,d=Kn,m=zo,_=Xo,y=Ig,E=Og,I=Mg,R=cn,P=uA,Q=$1,z=D1,X=Rv,M=Pv,F="aes-256-cbc",K=()=>Object.create(null),se=oe=>oe!=null;let J="";try{delete require.cache[__filename],J=h.dirname((s=(i=t.parent)===null||i===void 0?void 0:i.filename)!==null&&s!==void 0?s:".")}catch{}const ue=(oe,O)=>{const j=new Set(["undefined","symbol","function"]),C=typeof O;if(j.has(C))throw new TypeError(`Setting a value of type \`${C}\` for key \`${oe}\` is not allowed as it's not supported by JSON`)},Y="__internal__",Z=`${Y}.migrations.version`;class ie{constructor(O={}){var j;o.set(this,void 0),a.set(this,void 0),c.set(this,void 0),f.set(this,{}),this._deserialize=S=>JSON.parse(S),this._serialize=S=>JSON.stringify(S,void 0,"	");const C={configName:"config",fileExtension:"json",projectSuffix:"nodejs",clearInvalidConfig:!1,accessPropertiesByDotNotation:!0,configFileMode:438,...O},v=M(()=>{const S=E.sync({cwd:J}),U=S&&JSON.parse(l.readFileSync(S,"utf8"));return U??{}});if(!C.cwd){if(C.projectName||(C.projectName=v().name),!C.projectName)throw new Error("Project name could not be inferred. Please specify the `projectName` option.");C.cwd=I(C.projectName,{suffix:C.projectSuffix}).config}if(r(this,c,C,"f"),C.schema){if(typeof C.schema!="object")throw new TypeError("The `schema` option must be an object.");const S=new P.default({allErrors:!0,useDefaults:!0});(0,Q.default)(S);const U={type:"object",properties:C.schema};r(this,o,S.compile(U),"f");for(const[pe,me]of Object.entries(C.schema))me!=null&&me.default&&(n(this,f,"f")[pe]=me.default)}C.defaults&&r(this,f,{...n(this,f,"f"),...C.defaults},"f"),C.serialize&&(this._serialize=C.serialize),C.deserialize&&(this._deserialize=C.deserialize),this.events=new _.EventEmitter,r(this,a,C.encryptionKey,"f");const B=C.fileExtension?`.${C.fileExtension}`:"";this.path=h.resolve(C.cwd,`${(j=C.configName)!==null&&j!==void 0?j:"config"}${B}`);const x=this.store,g=Object.assign(K(),C.defaults,x);this._validate(g);try{m.deepEqual(x,g)}catch{this.store=g}if(C.watch&&this._watch(),C.migrations){if(C.projectVersion||(C.projectVersion=v().version),!C.projectVersion)throw new Error("Project version could not be inferred. Please specify the `projectVersion` option.");this._migrate(C.migrations,C.projectVersion,C.beforeEachMigration)}}get(O,j){if(n(this,c,"f").accessPropertiesByDotNotation)return this._get(O,j);const{store:C}=this;return O in C?C[O]:j}set(O,j){if(typeof O!="string"&&typeof O!="object")throw new TypeError(`Expected \`key\` to be of type \`string\` or \`object\`, got ${typeof O}`);if(typeof O!="object"&&j===void 0)throw new TypeError("Use `delete()` to clear values");if(this._containsReservedKey(O))throw new TypeError(`Please don't use the ${Y} key, as it's used to manage this module internal operations.`);const{store:C}=this,v=(B,x)=>{ue(B,x),n(this,c,"f").accessPropertiesByDotNotation?y.set(C,B,x):C[B]=x};if(typeof O=="object"){const B=O;for(const[x,g]of Object.entries(B))v(x,g)}else v(O,j);this.store=C}has(O){return n(this,c,"f").accessPropertiesByDotNotation?y.has(this.store,O):O in this.store}reset(...O){for(const j of O)se(n(this,f,"f")[j])&&this.set(j,n(this,f,"f")[j])}delete(O){const{store:j}=this;n(this,c,"f").accessPropertiesByDotNotation?y.delete(j,O):delete j[O],this.store=j}clear(){this.store=K();for(const O of Object.keys(n(this,f,"f")))this.reset(O)}onDidChange(O,j){if(typeof O!="string")throw new TypeError(`Expected \`key\` to be of type \`string\`, got ${typeof O}`);if(typeof j!="function")throw new TypeError(`Expected \`callback\` to be of type \`function\`, got ${typeof j}`);return this._handleChange(()=>this.get(O),j)}onDidAnyChange(O){if(typeof O!="function")throw new TypeError(`Expected \`callback\` to be of type \`function\`, got ${typeof O}`);return this._handleChange(()=>this.store,O)}get size(){return Object.keys(this.store).length}get store(){try{const O=l.readFileSync(this.path,n(this,a,"f")?null:"utf8"),j=this._encryptData(O),C=this._deserialize(j);return this._validate(C),Object.assign(K(),C)}catch(O){if((O==null?void 0:O.code)==="ENOENT")return this._ensureDirectory(),K();if(n(this,c,"f").clearInvalidConfig&&O.name==="SyntaxError")return K();throw O}}set store(O){this._ensureDirectory(),this._validate(O),this._write(O),this.events.emit("change")}*[(o=new WeakMap,a=new WeakMap,c=new WeakMap,f=new WeakMap,Symbol.iterator)](){for(const[O,j]of Object.entries(this.store))yield[O,j]}_encryptData(O){if(!n(this,a,"f"))return O.toString();try{if(n(this,a,"f"))try{if(O.slice(16,17).toString()===":"){const j=O.slice(0,16),C=d.pbkdf2Sync(n(this,a,"f"),j.toString(),1e4,32,"sha512"),v=d.createDecipheriv(F,C,j);O=Buffer.concat([v.update(Buffer.from(O.slice(17))),v.final()]).toString("utf8")}else{const j=d.createDecipher(F,n(this,a,"f"));O=Buffer.concat([j.update(Buffer.from(O)),j.final()]).toString("utf8")}}catch{}}catch{}return O.toString()}_handleChange(O,j){let C=O();const v=()=>{const B=C,x=O();(0,u.isDeepStrictEqual)(x,B)||(C=x,j.call(this,x,B))};return this.events.on("change",v),()=>this.events.removeListener("change",v)}_validate(O){if(!n(this,o,"f")||n(this,o,"f").call(this,O)||!n(this,o,"f").errors)return;const C=n(this,o,"f").errors.map(({instancePath:v,message:B=""})=>`\`${v.slice(1)}\` ${B}`);throw new Error("Config schema violation: "+C.join("; "))}_ensureDirectory(){l.mkdirSync(h.dirname(this.path),{recursive:!0})}_write(O){let j=this._serialize(O);if(n(this,a,"f")){const C=d.randomBytes(16),v=d.pbkdf2Sync(n(this,a,"f"),C.toString(),1e4,32,"sha512"),B=d.createCipheriv(F,v,C);j=Buffer.concat([C,Buffer.from(":"),B.update(Buffer.from(j)),B.final()])}if(process.env.SNAP)l.writeFileSync(this.path,j,{mode:n(this,c,"f").configFileMode});else try{R.writeFileSync(this.path,j,{mode:n(this,c,"f").configFileMode})}catch(C){if((C==null?void 0:C.code)==="EXDEV"){l.writeFileSync(this.path,j,{mode:n(this,c,"f").configFileMode});return}throw C}}_watch(){this._ensureDirectory(),l.existsSync(this.path)||this._write(K()),process.platform==="win32"?l.watch(this.path,{persistent:!1},z(()=>{this.events.emit("change")},{wait:100})):l.watchFile(this.path,{persistent:!1},z(()=>{this.events.emit("change")},{wait:5e3}))}_migrate(O,j,C){let v=this._get(Z,"0.0.0");const B=Object.keys(O).filter(g=>this._shouldPerformMigration(g,v,j));let x={...this.store};for(const g of B)try{C&&C(this,{fromVersion:v,toVersion:g,finalVersion:j,versions:B});const S=O[g];S(this),this._set(Z,g),v=g,x={...this.store}}catch(S){throw this.store=x,new Error(`Something went wrong during the migration! Changes applied to the store until this failed migration will be restored. ${S}`)}(this._isVersionInRangeFormat(v)||!X.eq(v,j))&&this._set(Z,j)}_containsReservedKey(O){return typeof O=="object"&&Object.keys(O)[0]===Y?!0:typeof O!="string"?!1:n(this,c,"f").accessPropertiesByDotNotation?!!O.startsWith(`${Y}.`):!1}_isVersionInRangeFormat(O){return X.clean(O)===null}_shouldPerformMigration(O,j,C){return this._isVersionInRangeFormat(O)?j!=="0.0.0"&&X.satisfies(j,O)?!1:X.satisfies(C,O):!(X.lte(O,j)||X.gt(O,C))}_get(O,j){return y.get(this.store,O,j)}_set(O,j){const{store:C}=this;y.set(C,O,j),this.store=C}}e.default=ie,t.exports=ie,t.exports.default=ie})(fc,fc.exports);var Tv=fc.exports;const yd=Jr,{app:$o,ipcMain:Rc,ipcRenderer:Ad,shell:Bv}=ft,Ov=Tv;let bd=!1;const wd=()=>{if(!Rc||!$o)throw new Error("Electron Store: You need to call `.initRenderer()` from the main process.");const t={defaultCwd:$o.getPath("userData"),appVersion:$o.getVersion()};return bd||(Rc.on("electron-store-get-data",e=>{e.returnValue=t}),bd=!0),t};class Lv extends Ov{constructor(e){let r,n;if(Ad){const i=Ad.sendSync("electron-store-get-data");if(!i)throw new Error("Electron Store: You need to call `.initRenderer()` from the main process.");({defaultCwd:r,appVersion:n}=i)}else Rc&&$o&&({defaultCwd:r,appVersion:n}=wd());e={name:"config",...e},e.projectVersion||(e.projectVersion=n),e.cwd?e.cwd=yd.isAbsolute(e.cwd)?e.cwd:yd.join(r,e.cwd):e.cwd=r,e.configName=e.name,delete e.name,super(e)}static initRenderer(){wd()}async openInEditor(){const e=await Bv.openPath(this.path);if(e)throw new Error(e)}}var Dv=Lv;const Uv=Ag(Dv),uo=new Uv({defaults:{vps:{host:"",username:"root",port:22},apps:{}}}),Pi={get:t=>uo.get(t),set:(t,e)=>uo.set(t,e),getAll:()=>uo.store,clear:()=>uo.clear()};var a0={exports:{}},Mu={newInvalidAsn1Error:function(t){var e=new Error;return e.name="InvalidAsn1Error",e.message=t||"",e}},Fu={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128},Co=wh,Ti=Co.Buffer,Ur={},Mr;for(Mr in Co)Co.hasOwnProperty(Mr)&&(Mr==="SlowBuffer"||Mr==="Buffer"||(Ur[Mr]=Co[Mr]));var Bi=Ur.Buffer={};for(Mr in Ti)Ti.hasOwnProperty(Mr)&&(Mr==="allocUnsafe"||Mr==="allocUnsafeSlow"||(Bi[Mr]=Ti[Mr]));Ur.Buffer.prototype=Ti.prototype;(!Bi.from||Bi.from===Uint8Array.from)&&(Bi.from=function(t,e,r){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return Ti(t,e,r)});Bi.alloc||(Bi.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var n=Ti(t);return!e||e.length===0?n.fill(0):typeof r=="string"?n.fill(e,r):n.fill(e),n});if(!Ur.kStringMaxLength)try{Ur.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch{}Ur.constants||(Ur.constants={MAX_LENGTH:Ur.kMaxLength},Ur.kStringMaxLength&&(Ur.constants.MAX_STRING_LENGTH=Ur.kStringMaxLength));var c0=Ur,Mv=zo,f0=c0.Buffer,Ts=Fu,Fv=Mu,Mi=Fv.newInvalidAsn1Error;function wr(t){if(!t||!f0.isBuffer(t))throw new TypeError("data must be a node Buffer");this._buf=t,this._size=t.length,this._len=0,this._offset=0}Object.defineProperty(wr.prototype,"length",{enumerable:!0,get:function(){return this._len}});Object.defineProperty(wr.prototype,"offset",{enumerable:!0,get:function(){return this._offset}});Object.defineProperty(wr.prototype,"remain",{get:function(){return this._size-this._offset}});Object.defineProperty(wr.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}});wr.prototype.readByte=function(t){if(this._size-this._offset<1)return null;var e=this._buf[this._offset]&255;return t||(this._offset+=1),e};wr.prototype.peek=function(){return this.readByte(!0)};wr.prototype.readLength=function(t){if(t===void 0&&(t=this._offset),t>=this._size)return null;var e=this._buf[t++]&255;if(e===null)return null;if((e&128)===128){if(e&=127,e===0)throw Mi("Indefinite length not supported");if(e>4)throw Mi("encoding too long");if(this._size-t<e)return null;this._len=0;for(var r=0;r<e;r++)this._len=(this._len<<8)+(this._buf[t++]&255)}else this._len=e;return t};wr.prototype.readSequence=function(t){var e=this.peek();if(e===null)return null;if(t!==void 0&&t!==e)throw Mi("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);return r===null?null:(this._offset=r,e)};wr.prototype.readInt=function(){return this._readTag(Ts.Integer)};wr.prototype.readBoolean=function(){return this._readTag(Ts.Boolean)!==0};wr.prototype.readEnumeration=function(){return this._readTag(Ts.Enumeration)};wr.prototype.readString=function(t,e){t||(t=Ts.OctetString);var r=this.peek();if(r===null)return null;if(r!==t)throw Mi("Expected 0x"+t.toString(16)+": got 0x"+r.toString(16));var n=this.readLength(this._offset+1);if(n===null||this.length>this._size-n)return null;if(this._offset=n,this.length===0)return e?f0.alloc(0):"";var i=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,e?i:i.toString("utf8")};wr.prototype.readOID=function(t){t||(t=Ts.OID);var e=this.readString(t,!0);if(e===null)return null;for(var r=[],n=0,i=0;i<e.length;i++){var s=e[i]&255;n<<=7,n+=s&127,s&128||(r.push(n),n=0)}return n=r.shift(),r.unshift(n%40),r.unshift(n/40>>0),r.join(".")};wr.prototype._readTag=function(t){Mv.ok(t!==void 0);var e=this.peek();if(e===null)return null;if(e!==t)throw Mi("Expected 0x"+t.toString(16)+": got 0x"+e.toString(16));var r=this.readLength(this._offset+1);if(r===null)return null;if(this.length>4)throw Mi("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var n=this._buf[this._offset],i=0,s=0;s<this.length;s++)i<<=8,i|=this._buf[this._offset++]&255;return(n&128)===128&&s!==4&&(i-=1<<s*8),i>>0};var Hv=wr,jn=zo,Ea=c0.Buffer,qn=Fu,jv=Mu,ya=jv.newInvalidAsn1Error,Qv={size:1024,growthFactor:8};function qv(t,e){jn.ok(t),jn.equal(typeof t,"object"),jn.ok(e),jn.equal(typeof e,"object");var r=Object.getOwnPropertyNames(t);return r.forEach(function(n){if(!e[n]){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i)}}),e}function mr(t){t=qv(Qv,t||{}),this._buf=Ea.alloc(t.size||1024),this._size=this._buf.length,this._offset=0,this._options=t,this._seq=[]}Object.defineProperty(mr.prototype,"buffer",{get:function(){if(this._seq.length)throw ya(this._seq.length+" unended sequence(s)");return this._buf.slice(0,this._offset)}});mr.prototype.writeByte=function(t){if(typeof t!="number")throw new TypeError("argument must be a Number");this._ensure(1),this._buf[this._offset++]=t};mr.prototype.writeInt=function(t,e){if(typeof t!="number")throw new TypeError("argument must be a Number");typeof e!="number"&&(e=qn.Integer);for(var r=4;(!(t&4286578688)||(t&4286578688)===-8388608)&&r>1;)r--,t<<=8;if(r>4)throw ya("BER ints cannot be > 0xffffffff");for(this._ensure(2+r),this._buf[this._offset++]=e,this._buf[this._offset++]=r;r-- >0;)this._buf[this._offset++]=(t&4278190080)>>>24,t<<=8};mr.prototype.writeNull=function(){this.writeByte(qn.Null),this.writeByte(0)};mr.prototype.writeEnumeration=function(t,e){if(typeof t!="number")throw new TypeError("argument must be a Number");return typeof e!="number"&&(e=qn.Enumeration),this.writeInt(t,e)};mr.prototype.writeBoolean=function(t,e){if(typeof t!="boolean")throw new TypeError("argument must be a Boolean");typeof e!="number"&&(e=qn.Boolean),this._ensure(3),this._buf[this._offset++]=e,this._buf[this._offset++]=1,this._buf[this._offset++]=t?255:0};mr.prototype.writeString=function(t,e){if(typeof t!="string")throw new TypeError("argument must be a string (was: "+typeof t+")");typeof e!="number"&&(e=qn.OctetString);var r=Ea.byteLength(t);this.writeByte(e),this.writeLength(r),r&&(this._ensure(r),this._buf.write(t,this._offset),this._offset+=r)};mr.prototype.writeBuffer=function(t,e){if(typeof e!="number")throw new TypeError("tag must be a number");if(!Ea.isBuffer(t))throw new TypeError("argument must be a buffer");this.writeByte(e),this.writeLength(t.length),this._ensure(t.length),t.copy(this._buf,this._offset,0,t.length),this._offset+=t.length};mr.prototype.writeStringArray=function(t){if(!t instanceof Array)throw new TypeError("argument must be an Array[String]");var e=this;t.forEach(function(r){e.writeString(r)})};mr.prototype.writeOID=function(t,e){if(typeof t!="string")throw new TypeError("argument must be a string");if(typeof e!="number"&&(e=qn.OID),!/^([0-9]+\.){3,}[0-9]+$/.test(t))throw new Error("argument is not a valid OID string");function r(o,a){a<128?o.push(a):a<16384?(o.push(a>>>7|128),o.push(a&127)):a<2097152?(o.push(a>>>14|128),o.push((a>>>7|128)&255),o.push(a&127)):a<268435456?(o.push(a>>>21|128),o.push((a>>>14|128)&255),o.push((a>>>7|128)&255),o.push(a&127)):(o.push((a>>>28|128)&255),o.push((a>>>21|128)&255),o.push((a>>>14|128)&255),o.push((a>>>7|128)&255),o.push(a&127))}var n=t.split("."),i=[];i.push(parseInt(n[0],10)*40+parseInt(n[1],10)),n.slice(2).forEach(function(o){r(i,parseInt(o,10))});var s=this;this._ensure(2+i.length),this.writeByte(e),this.writeLength(i.length),i.forEach(function(o){s.writeByte(o)})};mr.prototype.writeLength=function(t){if(typeof t!="number")throw new TypeError("argument must be a Number");if(this._ensure(4),t<=127)this._buf[this._offset++]=t;else if(t<=255)this._buf[this._offset++]=129,this._buf[this._offset++]=t;else if(t<=65535)this._buf[this._offset++]=130,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else if(t<=16777215)this._buf[this._offset++]=131,this._buf[this._offset++]=t>>16,this._buf[this._offset++]=t>>8,this._buf[this._offset++]=t;else throw ya("Length too long (> 4 bytes)")};mr.prototype.startSequence=function(t){typeof t!="number"&&(t=qn.Sequence|qn.Constructor),this.writeByte(t),this._seq.push(this._offset),this._ensure(3),this._offset+=3};mr.prototype.endSequence=function(){var t=this._seq.pop(),e=t+3,r=this._offset-e;if(r<=127)this._shift(e,r,-2),this._buf[t]=r;else if(r<=255)this._shift(e,r,-1),this._buf[t]=129,this._buf[t+1]=r;else if(r<=65535)this._buf[t]=130,this._buf[t+1]=r>>8,this._buf[t+2]=r;else if(r<=16777215)this._shift(e,r,1),this._buf[t]=131,this._buf[t+1]=r>>16,this._buf[t+2]=r>>8,this._buf[t+3]=r;else throw ya("Sequence too long")};mr.prototype._shift=function(t,e,r){jn.ok(t!==void 0),jn.ok(e!==void 0),jn.ok(r),this._buf.copy(this._buf,t+r,t,t+e),this._offset+=r};mr.prototype._ensure=function(t){if(jn.ok(t),this._size-this._offset<t){var e=this._size*this._options.growthFactor;e-this._offset<t&&(e+=t);var r=Ea.alloc(e);this._buf.copy(r,0,0,this._offset),this._buf=r,this._size=e}};var Kv=mr;(function(t){var e=Mu,r=Fu,n=Hv,i=Kv;t.exports={Reader:n,Writer:i};for(var s in r)r.hasOwnProperty(s)&&(t.exports[s]=r[s]);for(var o in e)e.hasOwnProperty(o)&&(t.exports[o]=e[o])})(a0);var Wv=a0.exports,ja=Wv,Aa={Ber:ja,BerReader:ja.Reader,BerWriter:ja.Writer};function Gv(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var u0={exports:{}};(function(t){(function(e){var r=function($){var k,N=new Float64Array(16);if($)for(k=0;k<$.length;k++)N[k]=$[k];return N},n=function(){throw new Error("no PRNG")},i=new Uint8Array(16),s=new Uint8Array(32);s[0]=9;var o=r(),a=r([1]),c=r([56129,1]),f=r([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=r([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=r([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),h=r([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),d=r([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function m($,k,N,p){$[k]=N>>24&255,$[k+1]=N>>16&255,$[k+2]=N>>8&255,$[k+3]=N&255,$[k+4]=p>>24&255,$[k+5]=p>>16&255,$[k+6]=p>>8&255,$[k+7]=p&255}function _($,k,N,p,L){var re,fe=0;for(re=0;re<L;re++)fe|=$[k+re]^N[p+re];return(1&fe-1>>>8)-1}function y($,k,N,p){return _($,k,N,p,16)}function E($,k,N,p){return _($,k,N,p,32)}function I($,k,N,p){for(var L=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,re=N[0]&255|(N[1]&255)<<8|(N[2]&255)<<16|(N[3]&255)<<24,fe=N[4]&255|(N[5]&255)<<8|(N[6]&255)<<16|(N[7]&255)<<24,Ee=N[8]&255|(N[9]&255)<<8|(N[10]&255)<<16|(N[11]&255)<<24,we=N[12]&255|(N[13]&255)<<8|(N[14]&255)<<16|(N[15]&255)<<24,Pe=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,$e=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,bt=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,ke=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,We=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,Ve=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,tt=N[16]&255|(N[17]&255)<<8|(N[18]&255)<<16|(N[19]&255)<<24,Ze=N[20]&255|(N[21]&255)<<8|(N[22]&255)<<16|(N[23]&255)<<24,Ye=N[24]&255|(N[25]&255)<<8|(N[26]&255)<<16|(N[27]&255)<<24,Xe=N[28]&255|(N[29]&255)<<8|(N[30]&255)<<16|(N[31]&255)<<24,ze=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,Te=L,De=re,Ce=fe,Be=Ee,Oe=we,ve=Pe,de=$e,he=bt,Ae=ke,_e=We,ye=Ve,be=tt,He=Ze,rt=Ye,st=Xe,nt=ze,W,lt=0;lt<20;lt+=2)W=Te+He|0,Oe^=W<<7|W>>>25,W=Oe+Te|0,Ae^=W<<9|W>>>23,W=Ae+Oe|0,He^=W<<13|W>>>19,W=He+Ae|0,Te^=W<<18|W>>>14,W=ve+De|0,_e^=W<<7|W>>>25,W=_e+ve|0,rt^=W<<9|W>>>23,W=rt+_e|0,De^=W<<13|W>>>19,W=De+rt|0,ve^=W<<18|W>>>14,W=ye+de|0,st^=W<<7|W>>>25,W=st+ye|0,Ce^=W<<9|W>>>23,W=Ce+st|0,de^=W<<13|W>>>19,W=de+Ce|0,ye^=W<<18|W>>>14,W=nt+be|0,Be^=W<<7|W>>>25,W=Be+nt|0,he^=W<<9|W>>>23,W=he+Be|0,be^=W<<13|W>>>19,W=be+he|0,nt^=W<<18|W>>>14,W=Te+Be|0,De^=W<<7|W>>>25,W=De+Te|0,Ce^=W<<9|W>>>23,W=Ce+De|0,Be^=W<<13|W>>>19,W=Be+Ce|0,Te^=W<<18|W>>>14,W=ve+Oe|0,de^=W<<7|W>>>25,W=de+ve|0,he^=W<<9|W>>>23,W=he+de|0,Oe^=W<<13|W>>>19,W=Oe+he|0,ve^=W<<18|W>>>14,W=ye+_e|0,be^=W<<7|W>>>25,W=be+ye|0,Ae^=W<<9|W>>>23,W=Ae+be|0,_e^=W<<13|W>>>19,W=_e+Ae|0,ye^=W<<18|W>>>14,W=nt+st|0,He^=W<<7|W>>>25,W=He+nt|0,rt^=W<<9|W>>>23,W=rt+He|0,st^=W<<13|W>>>19,W=st+rt|0,nt^=W<<18|W>>>14;Te=Te+L|0,De=De+re|0,Ce=Ce+fe|0,Be=Be+Ee|0,Oe=Oe+we|0,ve=ve+Pe|0,de=de+$e|0,he=he+bt|0,Ae=Ae+ke|0,_e=_e+We|0,ye=ye+Ve|0,be=be+tt|0,He=He+Ze|0,rt=rt+Ye|0,st=st+Xe|0,nt=nt+ze|0,$[0]=Te>>>0&255,$[1]=Te>>>8&255,$[2]=Te>>>16&255,$[3]=Te>>>24&255,$[4]=De>>>0&255,$[5]=De>>>8&255,$[6]=De>>>16&255,$[7]=De>>>24&255,$[8]=Ce>>>0&255,$[9]=Ce>>>8&255,$[10]=Ce>>>16&255,$[11]=Ce>>>24&255,$[12]=Be>>>0&255,$[13]=Be>>>8&255,$[14]=Be>>>16&255,$[15]=Be>>>24&255,$[16]=Oe>>>0&255,$[17]=Oe>>>8&255,$[18]=Oe>>>16&255,$[19]=Oe>>>24&255,$[20]=ve>>>0&255,$[21]=ve>>>8&255,$[22]=ve>>>16&255,$[23]=ve>>>24&255,$[24]=de>>>0&255,$[25]=de>>>8&255,$[26]=de>>>16&255,$[27]=de>>>24&255,$[28]=he>>>0&255,$[29]=he>>>8&255,$[30]=he>>>16&255,$[31]=he>>>24&255,$[32]=Ae>>>0&255,$[33]=Ae>>>8&255,$[34]=Ae>>>16&255,$[35]=Ae>>>24&255,$[36]=_e>>>0&255,$[37]=_e>>>8&255,$[38]=_e>>>16&255,$[39]=_e>>>24&255,$[40]=ye>>>0&255,$[41]=ye>>>8&255,$[42]=ye>>>16&255,$[43]=ye>>>24&255,$[44]=be>>>0&255,$[45]=be>>>8&255,$[46]=be>>>16&255,$[47]=be>>>24&255,$[48]=He>>>0&255,$[49]=He>>>8&255,$[50]=He>>>16&255,$[51]=He>>>24&255,$[52]=rt>>>0&255,$[53]=rt>>>8&255,$[54]=rt>>>16&255,$[55]=rt>>>24&255,$[56]=st>>>0&255,$[57]=st>>>8&255,$[58]=st>>>16&255,$[59]=st>>>24&255,$[60]=nt>>>0&255,$[61]=nt>>>8&255,$[62]=nt>>>16&255,$[63]=nt>>>24&255}function R($,k,N,p){for(var L=p[0]&255|(p[1]&255)<<8|(p[2]&255)<<16|(p[3]&255)<<24,re=N[0]&255|(N[1]&255)<<8|(N[2]&255)<<16|(N[3]&255)<<24,fe=N[4]&255|(N[5]&255)<<8|(N[6]&255)<<16|(N[7]&255)<<24,Ee=N[8]&255|(N[9]&255)<<8|(N[10]&255)<<16|(N[11]&255)<<24,we=N[12]&255|(N[13]&255)<<8|(N[14]&255)<<16|(N[15]&255)<<24,Pe=p[4]&255|(p[5]&255)<<8|(p[6]&255)<<16|(p[7]&255)<<24,$e=k[0]&255|(k[1]&255)<<8|(k[2]&255)<<16|(k[3]&255)<<24,bt=k[4]&255|(k[5]&255)<<8|(k[6]&255)<<16|(k[7]&255)<<24,ke=k[8]&255|(k[9]&255)<<8|(k[10]&255)<<16|(k[11]&255)<<24,We=k[12]&255|(k[13]&255)<<8|(k[14]&255)<<16|(k[15]&255)<<24,Ve=p[8]&255|(p[9]&255)<<8|(p[10]&255)<<16|(p[11]&255)<<24,tt=N[16]&255|(N[17]&255)<<8|(N[18]&255)<<16|(N[19]&255)<<24,Ze=N[20]&255|(N[21]&255)<<8|(N[22]&255)<<16|(N[23]&255)<<24,Ye=N[24]&255|(N[25]&255)<<8|(N[26]&255)<<16|(N[27]&255)<<24,Xe=N[28]&255|(N[29]&255)<<8|(N[30]&255)<<16|(N[31]&255)<<24,ze=p[12]&255|(p[13]&255)<<8|(p[14]&255)<<16|(p[15]&255)<<24,Te=L,De=re,Ce=fe,Be=Ee,Oe=we,ve=Pe,de=$e,he=bt,Ae=ke,_e=We,ye=Ve,be=tt,He=Ze,rt=Ye,st=Xe,nt=ze,W,lt=0;lt<20;lt+=2)W=Te+He|0,Oe^=W<<7|W>>>25,W=Oe+Te|0,Ae^=W<<9|W>>>23,W=Ae+Oe|0,He^=W<<13|W>>>19,W=He+Ae|0,Te^=W<<18|W>>>14,W=ve+De|0,_e^=W<<7|W>>>25,W=_e+ve|0,rt^=W<<9|W>>>23,W=rt+_e|0,De^=W<<13|W>>>19,W=De+rt|0,ve^=W<<18|W>>>14,W=ye+de|0,st^=W<<7|W>>>25,W=st+ye|0,Ce^=W<<9|W>>>23,W=Ce+st|0,de^=W<<13|W>>>19,W=de+Ce|0,ye^=W<<18|W>>>14,W=nt+be|0,Be^=W<<7|W>>>25,W=Be+nt|0,he^=W<<9|W>>>23,W=he+Be|0,be^=W<<13|W>>>19,W=be+he|0,nt^=W<<18|W>>>14,W=Te+Be|0,De^=W<<7|W>>>25,W=De+Te|0,Ce^=W<<9|W>>>23,W=Ce+De|0,Be^=W<<13|W>>>19,W=Be+Ce|0,Te^=W<<18|W>>>14,W=ve+Oe|0,de^=W<<7|W>>>25,W=de+ve|0,he^=W<<9|W>>>23,W=he+de|0,Oe^=W<<13|W>>>19,W=Oe+he|0,ve^=W<<18|W>>>14,W=ye+_e|0,be^=W<<7|W>>>25,W=be+ye|0,Ae^=W<<9|W>>>23,W=Ae+be|0,_e^=W<<13|W>>>19,W=_e+Ae|0,ye^=W<<18|W>>>14,W=nt+st|0,He^=W<<7|W>>>25,W=He+nt|0,rt^=W<<9|W>>>23,W=rt+He|0,st^=W<<13|W>>>19,W=st+rt|0,nt^=W<<18|W>>>14;$[0]=Te>>>0&255,$[1]=Te>>>8&255,$[2]=Te>>>16&255,$[3]=Te>>>24&255,$[4]=ve>>>0&255,$[5]=ve>>>8&255,$[6]=ve>>>16&255,$[7]=ve>>>24&255,$[8]=ye>>>0&255,$[9]=ye>>>8&255,$[10]=ye>>>16&255,$[11]=ye>>>24&255,$[12]=nt>>>0&255,$[13]=nt>>>8&255,$[14]=nt>>>16&255,$[15]=nt>>>24&255,$[16]=de>>>0&255,$[17]=de>>>8&255,$[18]=de>>>16&255,$[19]=de>>>24&255,$[20]=he>>>0&255,$[21]=he>>>8&255,$[22]=he>>>16&255,$[23]=he>>>24&255,$[24]=Ae>>>0&255,$[25]=Ae>>>8&255,$[26]=Ae>>>16&255,$[27]=Ae>>>24&255,$[28]=_e>>>0&255,$[29]=_e>>>8&255,$[30]=_e>>>16&255,$[31]=_e>>>24&255}function P($,k,N,p){I($,k,N,p)}function Q($,k,N,p){R($,k,N,p)}var z=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function X($,k,N,p,L,re,fe){var Ee=new Uint8Array(16),we=new Uint8Array(64),Pe,$e;for($e=0;$e<16;$e++)Ee[$e]=0;for($e=0;$e<8;$e++)Ee[$e]=re[$e];for(;L>=64;){for(P(we,Ee,fe,z),$e=0;$e<64;$e++)$[k+$e]=N[p+$e]^we[$e];for(Pe=1,$e=8;$e<16;$e++)Pe=Pe+(Ee[$e]&255)|0,Ee[$e]=Pe&255,Pe>>>=8;L-=64,k+=64,p+=64}if(L>0)for(P(we,Ee,fe,z),$e=0;$e<L;$e++)$[k+$e]=N[p+$e]^we[$e];return 0}function M($,k,N,p,L){var re=new Uint8Array(16),fe=new Uint8Array(64),Ee,we;for(we=0;we<16;we++)re[we]=0;for(we=0;we<8;we++)re[we]=p[we];for(;N>=64;){for(P(fe,re,L,z),we=0;we<64;we++)$[k+we]=fe[we];for(Ee=1,we=8;we<16;we++)Ee=Ee+(re[we]&255)|0,re[we]=Ee&255,Ee>>>=8;N-=64,k+=64}if(N>0)for(P(fe,re,L,z),we=0;we<N;we++)$[k+we]=fe[we];return 0}function F($,k,N,p,L){var re=new Uint8Array(32);Q(re,p,L,z);for(var fe=new Uint8Array(8),Ee=0;Ee<8;Ee++)fe[Ee]=p[Ee+16];return M($,k,N,fe,re)}function K($,k,N,p,L,re,fe){var Ee=new Uint8Array(32);Q(Ee,re,fe,z);for(var we=new Uint8Array(8),Pe=0;Pe<8;Pe++)we[Pe]=re[Pe+16];return X($,k,N,p,L,we,Ee)}var se=function($){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var k,N,p,L,re,fe,Ee,we;k=$[0]&255|($[1]&255)<<8,this.r[0]=k&8191,N=$[2]&255|($[3]&255)<<8,this.r[1]=(k>>>13|N<<3)&8191,p=$[4]&255|($[5]&255)<<8,this.r[2]=(N>>>10|p<<6)&7939,L=$[6]&255|($[7]&255)<<8,this.r[3]=(p>>>7|L<<9)&8191,re=$[8]&255|($[9]&255)<<8,this.r[4]=(L>>>4|re<<12)&255,this.r[5]=re>>>1&8190,fe=$[10]&255|($[11]&255)<<8,this.r[6]=(re>>>14|fe<<2)&8191,Ee=$[12]&255|($[13]&255)<<8,this.r[7]=(fe>>>11|Ee<<5)&8065,we=$[14]&255|($[15]&255)<<8,this.r[8]=(Ee>>>8|we<<8)&8191,this.r[9]=we>>>5&127,this.pad[0]=$[16]&255|($[17]&255)<<8,this.pad[1]=$[18]&255|($[19]&255)<<8,this.pad[2]=$[20]&255|($[21]&255)<<8,this.pad[3]=$[22]&255|($[23]&255)<<8,this.pad[4]=$[24]&255|($[25]&255)<<8,this.pad[5]=$[26]&255|($[27]&255)<<8,this.pad[6]=$[28]&255|($[29]&255)<<8,this.pad[7]=$[30]&255|($[31]&255)<<8};se.prototype.blocks=function($,k,N){for(var p=this.fin?0:2048,L,re,fe,Ee,we,Pe,$e,bt,ke,We,Ve,tt,Ze,Ye,Xe,ze,Te,De,Ce,Be=this.h[0],Oe=this.h[1],ve=this.h[2],de=this.h[3],he=this.h[4],Ae=this.h[5],_e=this.h[6],ye=this.h[7],be=this.h[8],He=this.h[9],rt=this.r[0],st=this.r[1],nt=this.r[2],W=this.r[3],lt=this.r[4],wt=this.r[5],St=this.r[6],ct=this.r[7],Et=this.r[8],yt=this.r[9];N>=16;)L=$[k+0]&255|($[k+1]&255)<<8,Be+=L&8191,re=$[k+2]&255|($[k+3]&255)<<8,Oe+=(L>>>13|re<<3)&8191,fe=$[k+4]&255|($[k+5]&255)<<8,ve+=(re>>>10|fe<<6)&8191,Ee=$[k+6]&255|($[k+7]&255)<<8,de+=(fe>>>7|Ee<<9)&8191,we=$[k+8]&255|($[k+9]&255)<<8,he+=(Ee>>>4|we<<12)&8191,Ae+=we>>>1&8191,Pe=$[k+10]&255|($[k+11]&255)<<8,_e+=(we>>>14|Pe<<2)&8191,$e=$[k+12]&255|($[k+13]&255)<<8,ye+=(Pe>>>11|$e<<5)&8191,bt=$[k+14]&255|($[k+15]&255)<<8,be+=($e>>>8|bt<<8)&8191,He+=bt>>>5|p,ke=0,We=ke,We+=Be*rt,We+=Oe*(5*yt),We+=ve*(5*Et),We+=de*(5*ct),We+=he*(5*St),ke=We>>>13,We&=8191,We+=Ae*(5*wt),We+=_e*(5*lt),We+=ye*(5*W),We+=be*(5*nt),We+=He*(5*st),ke+=We>>>13,We&=8191,Ve=ke,Ve+=Be*st,Ve+=Oe*rt,Ve+=ve*(5*yt),Ve+=de*(5*Et),Ve+=he*(5*ct),ke=Ve>>>13,Ve&=8191,Ve+=Ae*(5*St),Ve+=_e*(5*wt),Ve+=ye*(5*lt),Ve+=be*(5*W),Ve+=He*(5*nt),ke+=Ve>>>13,Ve&=8191,tt=ke,tt+=Be*nt,tt+=Oe*st,tt+=ve*rt,tt+=de*(5*yt),tt+=he*(5*Et),ke=tt>>>13,tt&=8191,tt+=Ae*(5*ct),tt+=_e*(5*St),tt+=ye*(5*wt),tt+=be*(5*lt),tt+=He*(5*W),ke+=tt>>>13,tt&=8191,Ze=ke,Ze+=Be*W,Ze+=Oe*nt,Ze+=ve*st,Ze+=de*rt,Ze+=he*(5*yt),ke=Ze>>>13,Ze&=8191,Ze+=Ae*(5*Et),Ze+=_e*(5*ct),Ze+=ye*(5*St),Ze+=be*(5*wt),Ze+=He*(5*lt),ke+=Ze>>>13,Ze&=8191,Ye=ke,Ye+=Be*lt,Ye+=Oe*W,Ye+=ve*nt,Ye+=de*st,Ye+=he*rt,ke=Ye>>>13,Ye&=8191,Ye+=Ae*(5*yt),Ye+=_e*(5*Et),Ye+=ye*(5*ct),Ye+=be*(5*St),Ye+=He*(5*wt),ke+=Ye>>>13,Ye&=8191,Xe=ke,Xe+=Be*wt,Xe+=Oe*lt,Xe+=ve*W,Xe+=de*nt,Xe+=he*st,ke=Xe>>>13,Xe&=8191,Xe+=Ae*rt,Xe+=_e*(5*yt),Xe+=ye*(5*Et),Xe+=be*(5*ct),Xe+=He*(5*St),ke+=Xe>>>13,Xe&=8191,ze=ke,ze+=Be*St,ze+=Oe*wt,ze+=ve*lt,ze+=de*W,ze+=he*nt,ke=ze>>>13,ze&=8191,ze+=Ae*st,ze+=_e*rt,ze+=ye*(5*yt),ze+=be*(5*Et),ze+=He*(5*ct),ke+=ze>>>13,ze&=8191,Te=ke,Te+=Be*ct,Te+=Oe*St,Te+=ve*wt,Te+=de*lt,Te+=he*W,ke=Te>>>13,Te&=8191,Te+=Ae*nt,Te+=_e*st,Te+=ye*rt,Te+=be*(5*yt),Te+=He*(5*Et),ke+=Te>>>13,Te&=8191,De=ke,De+=Be*Et,De+=Oe*ct,De+=ve*St,De+=de*wt,De+=he*lt,ke=De>>>13,De&=8191,De+=Ae*W,De+=_e*nt,De+=ye*st,De+=be*rt,De+=He*(5*yt),ke+=De>>>13,De&=8191,Ce=ke,Ce+=Be*yt,Ce+=Oe*Et,Ce+=ve*ct,Ce+=de*St,Ce+=he*wt,ke=Ce>>>13,Ce&=8191,Ce+=Ae*lt,Ce+=_e*W,Ce+=ye*nt,Ce+=be*st,Ce+=He*rt,ke+=Ce>>>13,Ce&=8191,ke=(ke<<2)+ke|0,ke=ke+We|0,We=ke&8191,ke=ke>>>13,Ve+=ke,Be=We,Oe=Ve,ve=tt,de=Ze,he=Ye,Ae=Xe,_e=ze,ye=Te,be=De,He=Ce,k+=16,N-=16;this.h[0]=Be,this.h[1]=Oe,this.h[2]=ve,this.h[3]=de,this.h[4]=he,this.h[5]=Ae,this.h[6]=_e,this.h[7]=ye,this.h[8]=be,this.h[9]=He},se.prototype.finish=function($,k){var N=new Uint16Array(10),p,L,re,fe;if(this.leftover){for(fe=this.leftover,this.buffer[fe++]=1;fe<16;fe++)this.buffer[fe]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(p=this.h[1]>>>13,this.h[1]&=8191,fe=2;fe<10;fe++)this.h[fe]+=p,p=this.h[fe]>>>13,this.h[fe]&=8191;for(this.h[0]+=p*5,p=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=p,p=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=p,N[0]=this.h[0]+5,p=N[0]>>>13,N[0]&=8191,fe=1;fe<10;fe++)N[fe]=this.h[fe]+p,p=N[fe]>>>13,N[fe]&=8191;for(N[9]-=8192,L=(p^1)-1,fe=0;fe<10;fe++)N[fe]&=L;for(L=~L,fe=0;fe<10;fe++)this.h[fe]=this.h[fe]&L|N[fe];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,re=this.h[0]+this.pad[0],this.h[0]=re&65535,fe=1;fe<8;fe++)re=(this.h[fe]+this.pad[fe]|0)+(re>>>16)|0,this.h[fe]=re&65535;$[k+0]=this.h[0]>>>0&255,$[k+1]=this.h[0]>>>8&255,$[k+2]=this.h[1]>>>0&255,$[k+3]=this.h[1]>>>8&255,$[k+4]=this.h[2]>>>0&255,$[k+5]=this.h[2]>>>8&255,$[k+6]=this.h[3]>>>0&255,$[k+7]=this.h[3]>>>8&255,$[k+8]=this.h[4]>>>0&255,$[k+9]=this.h[4]>>>8&255,$[k+10]=this.h[5]>>>0&255,$[k+11]=this.h[5]>>>8&255,$[k+12]=this.h[6]>>>0&255,$[k+13]=this.h[6]>>>8&255,$[k+14]=this.h[7]>>>0&255,$[k+15]=this.h[7]>>>8&255},se.prototype.update=function($,k,N){var p,L;if(this.leftover){for(L=16-this.leftover,L>N&&(L=N),p=0;p<L;p++)this.buffer[this.leftover+p]=$[k+p];if(N-=L,k+=L,this.leftover+=L,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(N>=16&&(L=N-N%16,this.blocks($,k,L),k+=L,N-=L),N){for(p=0;p<N;p++)this.buffer[this.leftover+p]=$[k+p];this.leftover+=N}};function J($,k,N,p,L,re){var fe=new se(re);return fe.update(N,p,L),fe.finish($,k),0}function ue($,k,N,p,L,re){var fe=new Uint8Array(16);return J(fe,0,N,p,L,re),y($,k,fe,0)}function Y($,k,N,p,L){var re;if(N<32)return-1;for(K($,0,k,0,N,p,L),J($,16,$,32,N-32,$),re=0;re<16;re++)$[re]=0;return 0}function Z($,k,N,p,L){var re,fe=new Uint8Array(32);if(N<32||(F(fe,0,32,p,L),ue(k,16,k,32,N-32,fe)!==0))return-1;for(K($,0,k,0,N,p,L),re=0;re<32;re++)$[re]=0;return 0}function ie($,k){var N;for(N=0;N<16;N++)$[N]=k[N]|0}function oe($){var k,N,p=1;for(k=0;k<16;k++)N=$[k]+p+65535,p=Math.floor(N/65536),$[k]=N-p*65536;$[0]+=p-1+37*(p-1)}function O($,k,N){for(var p,L=~(N-1),re=0;re<16;re++)p=L&($[re]^k[re]),$[re]^=p,k[re]^=p}function j($,k){var N,p,L,re=r(),fe=r();for(N=0;N<16;N++)fe[N]=k[N];for(oe(fe),oe(fe),oe(fe),p=0;p<2;p++){for(re[0]=fe[0]-65517,N=1;N<15;N++)re[N]=fe[N]-65535-(re[N-1]>>16&1),re[N-1]&=65535;re[15]=fe[15]-32767-(re[14]>>16&1),L=re[15]>>16&1,re[14]&=65535,O(fe,re,1-L)}for(N=0;N<16;N++)$[2*N]=fe[N]&255,$[2*N+1]=fe[N]>>8}function C($,k){var N=new Uint8Array(32),p=new Uint8Array(32);return j(N,$),j(p,k),E(N,0,p,0)}function v($){var k=new Uint8Array(32);return j(k,$),k[0]&1}function B($,k){var N;for(N=0;N<16;N++)$[N]=k[2*N]+(k[2*N+1]<<8);$[15]&=32767}function x($,k,N){for(var p=0;p<16;p++)$[p]=k[p]+N[p]}function g($,k,N){for(var p=0;p<16;p++)$[p]=k[p]-N[p]}function S($,k,N){var p,L,re=0,fe=0,Ee=0,we=0,Pe=0,$e=0,bt=0,ke=0,We=0,Ve=0,tt=0,Ze=0,Ye=0,Xe=0,ze=0,Te=0,De=0,Ce=0,Be=0,Oe=0,ve=0,de=0,he=0,Ae=0,_e=0,ye=0,be=0,He=0,rt=0,st=0,nt=0,W=N[0],lt=N[1],wt=N[2],St=N[3],ct=N[4],Et=N[5],yt=N[6],Gt=N[7],xt=N[8],Qt=N[9],qt=N[10],Kt=N[11],Xt=N[12],fr=N[13],ur=N[14],lr=N[15];p=k[0],re+=p*W,fe+=p*lt,Ee+=p*wt,we+=p*St,Pe+=p*ct,$e+=p*Et,bt+=p*yt,ke+=p*Gt,We+=p*xt,Ve+=p*Qt,tt+=p*qt,Ze+=p*Kt,Ye+=p*Xt,Xe+=p*fr,ze+=p*ur,Te+=p*lr,p=k[1],fe+=p*W,Ee+=p*lt,we+=p*wt,Pe+=p*St,$e+=p*ct,bt+=p*Et,ke+=p*yt,We+=p*Gt,Ve+=p*xt,tt+=p*Qt,Ze+=p*qt,Ye+=p*Kt,Xe+=p*Xt,ze+=p*fr,Te+=p*ur,De+=p*lr,p=k[2],Ee+=p*W,we+=p*lt,Pe+=p*wt,$e+=p*St,bt+=p*ct,ke+=p*Et,We+=p*yt,Ve+=p*Gt,tt+=p*xt,Ze+=p*Qt,Ye+=p*qt,Xe+=p*Kt,ze+=p*Xt,Te+=p*fr,De+=p*ur,Ce+=p*lr,p=k[3],we+=p*W,Pe+=p*lt,$e+=p*wt,bt+=p*St,ke+=p*ct,We+=p*Et,Ve+=p*yt,tt+=p*Gt,Ze+=p*xt,Ye+=p*Qt,Xe+=p*qt,ze+=p*Kt,Te+=p*Xt,De+=p*fr,Ce+=p*ur,Be+=p*lr,p=k[4],Pe+=p*W,$e+=p*lt,bt+=p*wt,ke+=p*St,We+=p*ct,Ve+=p*Et,tt+=p*yt,Ze+=p*Gt,Ye+=p*xt,Xe+=p*Qt,ze+=p*qt,Te+=p*Kt,De+=p*Xt,Ce+=p*fr,Be+=p*ur,Oe+=p*lr,p=k[5],$e+=p*W,bt+=p*lt,ke+=p*wt,We+=p*St,Ve+=p*ct,tt+=p*Et,Ze+=p*yt,Ye+=p*Gt,Xe+=p*xt,ze+=p*Qt,Te+=p*qt,De+=p*Kt,Ce+=p*Xt,Be+=p*fr,Oe+=p*ur,ve+=p*lr,p=k[6],bt+=p*W,ke+=p*lt,We+=p*wt,Ve+=p*St,tt+=p*ct,Ze+=p*Et,Ye+=p*yt,Xe+=p*Gt,ze+=p*xt,Te+=p*Qt,De+=p*qt,Ce+=p*Kt,Be+=p*Xt,Oe+=p*fr,ve+=p*ur,de+=p*lr,p=k[7],ke+=p*W,We+=p*lt,Ve+=p*wt,tt+=p*St,Ze+=p*ct,Ye+=p*Et,Xe+=p*yt,ze+=p*Gt,Te+=p*xt,De+=p*Qt,Ce+=p*qt,Be+=p*Kt,Oe+=p*Xt,ve+=p*fr,de+=p*ur,he+=p*lr,p=k[8],We+=p*W,Ve+=p*lt,tt+=p*wt,Ze+=p*St,Ye+=p*ct,Xe+=p*Et,ze+=p*yt,Te+=p*Gt,De+=p*xt,Ce+=p*Qt,Be+=p*qt,Oe+=p*Kt,ve+=p*Xt,de+=p*fr,he+=p*ur,Ae+=p*lr,p=k[9],Ve+=p*W,tt+=p*lt,Ze+=p*wt,Ye+=p*St,Xe+=p*ct,ze+=p*Et,Te+=p*yt,De+=p*Gt,Ce+=p*xt,Be+=p*Qt,Oe+=p*qt,ve+=p*Kt,de+=p*Xt,he+=p*fr,Ae+=p*ur,_e+=p*lr,p=k[10],tt+=p*W,Ze+=p*lt,Ye+=p*wt,Xe+=p*St,ze+=p*ct,Te+=p*Et,De+=p*yt,Ce+=p*Gt,Be+=p*xt,Oe+=p*Qt,ve+=p*qt,de+=p*Kt,he+=p*Xt,Ae+=p*fr,_e+=p*ur,ye+=p*lr,p=k[11],Ze+=p*W,Ye+=p*lt,Xe+=p*wt,ze+=p*St,Te+=p*ct,De+=p*Et,Ce+=p*yt,Be+=p*Gt,Oe+=p*xt,ve+=p*Qt,de+=p*qt,he+=p*Kt,Ae+=p*Xt,_e+=p*fr,ye+=p*ur,be+=p*lr,p=k[12],Ye+=p*W,Xe+=p*lt,ze+=p*wt,Te+=p*St,De+=p*ct,Ce+=p*Et,Be+=p*yt,Oe+=p*Gt,ve+=p*xt,de+=p*Qt,he+=p*qt,Ae+=p*Kt,_e+=p*Xt,ye+=p*fr,be+=p*ur,He+=p*lr,p=k[13],Xe+=p*W,ze+=p*lt,Te+=p*wt,De+=p*St,Ce+=p*ct,Be+=p*Et,Oe+=p*yt,ve+=p*Gt,de+=p*xt,he+=p*Qt,Ae+=p*qt,_e+=p*Kt,ye+=p*Xt,be+=p*fr,He+=p*ur,rt+=p*lr,p=k[14],ze+=p*W,Te+=p*lt,De+=p*wt,Ce+=p*St,Be+=p*ct,Oe+=p*Et,ve+=p*yt,de+=p*Gt,he+=p*xt,Ae+=p*Qt,_e+=p*qt,ye+=p*Kt,be+=p*Xt,He+=p*fr,rt+=p*ur,st+=p*lr,p=k[15],Te+=p*W,De+=p*lt,Ce+=p*wt,Be+=p*St,Oe+=p*ct,ve+=p*Et,de+=p*yt,he+=p*Gt,Ae+=p*xt,_e+=p*Qt,ye+=p*qt,be+=p*Kt,He+=p*Xt,rt+=p*fr,st+=p*ur,nt+=p*lr,re+=38*De,fe+=38*Ce,Ee+=38*Be,we+=38*Oe,Pe+=38*ve,$e+=38*de,bt+=38*he,ke+=38*Ae,We+=38*_e,Ve+=38*ye,tt+=38*be,Ze+=38*He,Ye+=38*rt,Xe+=38*st,ze+=38*nt,L=1,p=re+L+65535,L=Math.floor(p/65536),re=p-L*65536,p=fe+L+65535,L=Math.floor(p/65536),fe=p-L*65536,p=Ee+L+65535,L=Math.floor(p/65536),Ee=p-L*65536,p=we+L+65535,L=Math.floor(p/65536),we=p-L*65536,p=Pe+L+65535,L=Math.floor(p/65536),Pe=p-L*65536,p=$e+L+65535,L=Math.floor(p/65536),$e=p-L*65536,p=bt+L+65535,L=Math.floor(p/65536),bt=p-L*65536,p=ke+L+65535,L=Math.floor(p/65536),ke=p-L*65536,p=We+L+65535,L=Math.floor(p/65536),We=p-L*65536,p=Ve+L+65535,L=Math.floor(p/65536),Ve=p-L*65536,p=tt+L+65535,L=Math.floor(p/65536),tt=p-L*65536,p=Ze+L+65535,L=Math.floor(p/65536),Ze=p-L*65536,p=Ye+L+65535,L=Math.floor(p/65536),Ye=p-L*65536,p=Xe+L+65535,L=Math.floor(p/65536),Xe=p-L*65536,p=ze+L+65535,L=Math.floor(p/65536),ze=p-L*65536,p=Te+L+65535,L=Math.floor(p/65536),Te=p-L*65536,re+=L-1+37*(L-1),L=1,p=re+L+65535,L=Math.floor(p/65536),re=p-L*65536,p=fe+L+65535,L=Math.floor(p/65536),fe=p-L*65536,p=Ee+L+65535,L=Math.floor(p/65536),Ee=p-L*65536,p=we+L+65535,L=Math.floor(p/65536),we=p-L*65536,p=Pe+L+65535,L=Math.floor(p/65536),Pe=p-L*65536,p=$e+L+65535,L=Math.floor(p/65536),$e=p-L*65536,p=bt+L+65535,L=Math.floor(p/65536),bt=p-L*65536,p=ke+L+65535,L=Math.floor(p/65536),ke=p-L*65536,p=We+L+65535,L=Math.floor(p/65536),We=p-L*65536,p=Ve+L+65535,L=Math.floor(p/65536),Ve=p-L*65536,p=tt+L+65535,L=Math.floor(p/65536),tt=p-L*65536,p=Ze+L+65535,L=Math.floor(p/65536),Ze=p-L*65536,p=Ye+L+65535,L=Math.floor(p/65536),Ye=p-L*65536,p=Xe+L+65535,L=Math.floor(p/65536),Xe=p-L*65536,p=ze+L+65535,L=Math.floor(p/65536),ze=p-L*65536,p=Te+L+65535,L=Math.floor(p/65536),Te=p-L*65536,re+=L-1+37*(L-1),$[0]=re,$[1]=fe,$[2]=Ee,$[3]=we,$[4]=Pe,$[5]=$e,$[6]=bt,$[7]=ke,$[8]=We,$[9]=Ve,$[10]=tt,$[11]=Ze,$[12]=Ye,$[13]=Xe,$[14]=ze,$[15]=Te}function U($,k){S($,k,k)}function pe($,k){var N=r(),p;for(p=0;p<16;p++)N[p]=k[p];for(p=253;p>=0;p--)U(N,N),p!==2&&p!==4&&S(N,N,k);for(p=0;p<16;p++)$[p]=N[p]}function me($,k){var N=r(),p;for(p=0;p<16;p++)N[p]=k[p];for(p=250;p>=0;p--)U(N,N),p!==1&&S(N,N,k);for(p=0;p<16;p++)$[p]=N[p]}function Ie($,k,N){var p=new Uint8Array(32),L=new Float64Array(80),re,fe,Ee=r(),we=r(),Pe=r(),$e=r(),bt=r(),ke=r();for(fe=0;fe<31;fe++)p[fe]=k[fe];for(p[31]=k[31]&127|64,p[0]&=248,B(L,N),fe=0;fe<16;fe++)we[fe]=L[fe],$e[fe]=Ee[fe]=Pe[fe]=0;for(Ee[0]=$e[0]=1,fe=254;fe>=0;--fe)re=p[fe>>>3]>>>(fe&7)&1,O(Ee,we,re),O(Pe,$e,re),x(bt,Ee,Pe),g(Ee,Ee,Pe),x(Pe,we,$e),g(we,we,$e),U($e,bt),U(ke,Ee),S(Ee,Pe,Ee),S(Pe,we,bt),x(bt,Ee,Pe),g(Ee,Ee,Pe),U(we,Ee),g(Pe,$e,ke),S(Ee,Pe,c),x(Ee,Ee,$e),S(Pe,Pe,Ee),S(Ee,$e,ke),S($e,we,L),U(we,bt),O(Ee,we,re),O(Pe,$e,re);for(fe=0;fe<16;fe++)L[fe+16]=Ee[fe],L[fe+32]=Pe[fe],L[fe+48]=we[fe],L[fe+64]=$e[fe];var We=L.subarray(32),Ve=L.subarray(16);return pe(We,We),S(Ve,Ve,We),j($,Ve),0}function Se($,k){return Ie($,k,s)}function w($,k){return n(k,32),Se($,k)}function b($,k,N){var p=new Uint8Array(32);return Ie(p,N,k),Q($,i,p,z)}var A=Y,T=Z;function V($,k,N,p,L,re){var fe=new Uint8Array(32);return b(fe,L,re),A($,k,N,p,fe)}function G($,k,N,p,L,re){var fe=new Uint8Array(32);return b(fe,L,re),T($,k,N,p,fe)}var H=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function q($,k,N,p){for(var L=new Int32Array(16),re=new Int32Array(16),fe,Ee,we,Pe,$e,bt,ke,We,Ve,tt,Ze,Ye,Xe,ze,Te,De,Ce,Be,Oe,ve,de,he,Ae,_e,ye,be,He=$[0],rt=$[1],st=$[2],nt=$[3],W=$[4],lt=$[5],wt=$[6],St=$[7],ct=k[0],Et=k[1],yt=k[2],Gt=k[3],xt=k[4],Qt=k[5],qt=k[6],Kt=k[7],Xt=0;p>=128;){for(Oe=0;Oe<16;Oe++)ve=8*Oe+Xt,L[Oe]=N[ve+0]<<24|N[ve+1]<<16|N[ve+2]<<8|N[ve+3],re[Oe]=N[ve+4]<<24|N[ve+5]<<16|N[ve+6]<<8|N[ve+7];for(Oe=0;Oe<80;Oe++)if(fe=He,Ee=rt,we=st,Pe=nt,$e=W,bt=lt,ke=wt,We=St,Ve=ct,tt=Et,Ze=yt,Ye=Gt,Xe=xt,ze=Qt,Te=qt,De=Kt,de=St,he=Kt,Ae=he&65535,_e=he>>>16,ye=de&65535,be=de>>>16,de=(W>>>14|xt<<18)^(W>>>18|xt<<14)^(xt>>>9|W<<23),he=(xt>>>14|W<<18)^(xt>>>18|W<<14)^(W>>>9|xt<<23),Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,de=W&lt^~W&wt,he=xt&Qt^~xt&qt,Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,de=H[Oe*2],he=H[Oe*2+1],Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,de=L[Oe%16],he=re[Oe%16],Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,_e+=Ae>>>16,ye+=_e>>>16,be+=ye>>>16,Ce=ye&65535|be<<16,Be=Ae&65535|_e<<16,de=Ce,he=Be,Ae=he&65535,_e=he>>>16,ye=de&65535,be=de>>>16,de=(He>>>28|ct<<4)^(ct>>>2|He<<30)^(ct>>>7|He<<25),he=(ct>>>28|He<<4)^(He>>>2|ct<<30)^(He>>>7|ct<<25),Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,de=He&rt^He&st^rt&st,he=ct&Et^ct&yt^Et&yt,Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,_e+=Ae>>>16,ye+=_e>>>16,be+=ye>>>16,We=ye&65535|be<<16,De=Ae&65535|_e<<16,de=Pe,he=Ye,Ae=he&65535,_e=he>>>16,ye=de&65535,be=de>>>16,de=Ce,he=Be,Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,_e+=Ae>>>16,ye+=_e>>>16,be+=ye>>>16,Pe=ye&65535|be<<16,Ye=Ae&65535|_e<<16,rt=fe,st=Ee,nt=we,W=Pe,lt=$e,wt=bt,St=ke,He=We,Et=Ve,yt=tt,Gt=Ze,xt=Ye,Qt=Xe,qt=ze,Kt=Te,ct=De,Oe%16===15)for(ve=0;ve<16;ve++)de=L[ve],he=re[ve],Ae=he&65535,_e=he>>>16,ye=de&65535,be=de>>>16,de=L[(ve+9)%16],he=re[(ve+9)%16],Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,Ce=L[(ve+1)%16],Be=re[(ve+1)%16],de=(Ce>>>1|Be<<31)^(Ce>>>8|Be<<24)^Ce>>>7,he=(Be>>>1|Ce<<31)^(Be>>>8|Ce<<24)^(Be>>>7|Ce<<25),Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,Ce=L[(ve+14)%16],Be=re[(ve+14)%16],de=(Ce>>>19|Be<<13)^(Be>>>29|Ce<<3)^Ce>>>6,he=(Be>>>19|Ce<<13)^(Ce>>>29|Be<<3)^(Be>>>6|Ce<<26),Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,_e+=Ae>>>16,ye+=_e>>>16,be+=ye>>>16,L[ve]=ye&65535|be<<16,re[ve]=Ae&65535|_e<<16;de=He,he=ct,Ae=he&65535,_e=he>>>16,ye=de&65535,be=de>>>16,de=$[0],he=k[0],Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,_e+=Ae>>>16,ye+=_e>>>16,be+=ye>>>16,$[0]=He=ye&65535|be<<16,k[0]=ct=Ae&65535|_e<<16,de=rt,he=Et,Ae=he&65535,_e=he>>>16,ye=de&65535,be=de>>>16,de=$[1],he=k[1],Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,_e+=Ae>>>16,ye+=_e>>>16,be+=ye>>>16,$[1]=rt=ye&65535|be<<16,k[1]=Et=Ae&65535|_e<<16,de=st,he=yt,Ae=he&65535,_e=he>>>16,ye=de&65535,be=de>>>16,de=$[2],he=k[2],Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,_e+=Ae>>>16,ye+=_e>>>16,be+=ye>>>16,$[2]=st=ye&65535|be<<16,k[2]=yt=Ae&65535|_e<<16,de=nt,he=Gt,Ae=he&65535,_e=he>>>16,ye=de&65535,be=de>>>16,de=$[3],he=k[3],Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,_e+=Ae>>>16,ye+=_e>>>16,be+=ye>>>16,$[3]=nt=ye&65535|be<<16,k[3]=Gt=Ae&65535|_e<<16,de=W,he=xt,Ae=he&65535,_e=he>>>16,ye=de&65535,be=de>>>16,de=$[4],he=k[4],Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,_e+=Ae>>>16,ye+=_e>>>16,be+=ye>>>16,$[4]=W=ye&65535|be<<16,k[4]=xt=Ae&65535|_e<<16,de=lt,he=Qt,Ae=he&65535,_e=he>>>16,ye=de&65535,be=de>>>16,de=$[5],he=k[5],Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,_e+=Ae>>>16,ye+=_e>>>16,be+=ye>>>16,$[5]=lt=ye&65535|be<<16,k[5]=Qt=Ae&65535|_e<<16,de=wt,he=qt,Ae=he&65535,_e=he>>>16,ye=de&65535,be=de>>>16,de=$[6],he=k[6],Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,_e+=Ae>>>16,ye+=_e>>>16,be+=ye>>>16,$[6]=wt=ye&65535|be<<16,k[6]=qt=Ae&65535|_e<<16,de=St,he=Kt,Ae=he&65535,_e=he>>>16,ye=de&65535,be=de>>>16,de=$[7],he=k[7],Ae+=he&65535,_e+=he>>>16,ye+=de&65535,be+=de>>>16,_e+=Ae>>>16,ye+=_e>>>16,be+=ye>>>16,$[7]=St=ye&65535|be<<16,k[7]=Kt=Ae&65535|_e<<16,Xt+=128,p-=128}return p}function D($,k,N){var p=new Int32Array(8),L=new Int32Array(8),re=new Uint8Array(256),fe,Ee=N;for(p[0]=1779033703,p[1]=3144134277,p[2]=1013904242,p[3]=2773480762,p[4]=1359893119,p[5]=2600822924,p[6]=528734635,p[7]=1541459225,L[0]=4089235720,L[1]=2227873595,L[2]=4271175723,L[3]=1595750129,L[4]=2917565137,L[5]=725511199,L[6]=4215389547,L[7]=327033209,q(p,L,k,N),N%=128,fe=0;fe<N;fe++)re[fe]=k[Ee-N+fe];for(re[N]=128,N=256-128*(N<112?1:0),re[N-9]=0,m(re,N-8,Ee/536870912|0,Ee<<3),q(p,L,re,N),fe=0;fe<8;fe++)m($,8*fe,p[fe],L[fe]);return 0}function ee($,k){var N=r(),p=r(),L=r(),re=r(),fe=r(),Ee=r(),we=r(),Pe=r(),$e=r();g(N,$[1],$[0]),g($e,k[1],k[0]),S(N,N,$e),x(p,$[0],$[1]),x($e,k[0],k[1]),S(p,p,$e),S(L,$[3],k[3]),S(L,L,u),S(re,$[2],k[2]),x(re,re,re),g(fe,p,N),g(Ee,re,L),x(we,re,L),x(Pe,p,N),S($[0],fe,Ee),S($[1],Pe,we),S($[2],we,Ee),S($[3],fe,Pe)}function ce($,k,N){var p;for(p=0;p<4;p++)O($[p],k[p],N)}function le($,k){var N=r(),p=r(),L=r();pe(L,k[2]),S(N,k[0],L),S(p,k[1],L),j($,p),$[31]^=v(N)<<7}function xe($,k,N){var p,L;for(ie($[0],o),ie($[1],a),ie($[2],a),ie($[3],o),L=255;L>=0;--L)p=N[L/8|0]>>(L&7)&1,ce($,k,p),ee(k,$),ee($,$),ce($,k,p)}function Je($,k){var N=[r(),r(),r(),r()];ie(N[0],l),ie(N[1],h),ie(N[2],a),S(N[3],l,h),xe($,N,k)}function Ct($,k,N){var p=new Uint8Array(64),L=[r(),r(),r(),r()],re;for(N||n(k,32),D(p,k,32),p[0]&=248,p[31]&=127,p[31]|=64,Je(L,p),le($,L),re=0;re<32;re++)k[re+32]=$[re];return 0}var Le=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function mt($,k){var N,p,L,re;for(p=63;p>=32;--p){for(N=0,L=p-32,re=p-12;L<re;++L)k[L]+=N-16*k[p]*Le[L-(p-32)],N=k[L]+128>>8,k[L]-=N*256;k[L]+=N,k[p]=0}for(N=0,L=0;L<32;L++)k[L]+=N-(k[31]>>4)*Le[L],N=k[L]>>8,k[L]&=255;for(L=0;L<32;L++)k[L]-=N*Le[L];for(p=0;p<32;p++)k[p+1]+=k[p]>>8,$[p]=k[p]&255}function _t($){var k=new Float64Array(64),N;for(N=0;N<64;N++)k[N]=$[N];for(N=0;N<64;N++)$[N]=0;mt($,k)}function pt($,k,N,p){var L=new Uint8Array(64),re=new Uint8Array(64),fe=new Uint8Array(64),Ee,we,Pe=new Float64Array(64),$e=[r(),r(),r(),r()];D(L,p,32),L[0]&=248,L[31]&=127,L[31]|=64;var bt=N+64;for(Ee=0;Ee<N;Ee++)$[64+Ee]=k[Ee];for(Ee=0;Ee<32;Ee++)$[32+Ee]=L[32+Ee];for(D(fe,$.subarray(32),N+32),_t(fe),Je($e,fe),le($,$e),Ee=32;Ee<64;Ee++)$[Ee]=p[Ee];for(D(re,$,N+64),_t(re),Ee=0;Ee<64;Ee++)Pe[Ee]=0;for(Ee=0;Ee<32;Ee++)Pe[Ee]=fe[Ee];for(Ee=0;Ee<32;Ee++)for(we=0;we<32;we++)Pe[Ee+we]+=re[Ee]*L[we];return mt($.subarray(32),Pe),bt}function Ge($,k){var N=r(),p=r(),L=r(),re=r(),fe=r(),Ee=r(),we=r();return ie($[2],a),B($[1],k),U(L,$[1]),S(re,L,f),g(L,L,$[2]),x(re,$[2],re),U(fe,re),U(Ee,fe),S(we,Ee,fe),S(N,we,L),S(N,N,re),me(N,N),S(N,N,L),S(N,N,re),S(N,N,re),S($[0],N,re),U(p,$[0]),S(p,p,re),C(p,L)&&S($[0],$[0],d),U(p,$[0]),S(p,p,re),C(p,L)?-1:(v($[0])===k[31]>>7&&g($[0],o,$[0]),S($[3],$[0],$[1]),0)}function et($,k,N,p){var L,re,fe=new Uint8Array(32),Ee=new Uint8Array(64),we=[r(),r(),r(),r()],Pe=[r(),r(),r(),r()];if(re=-1,N<64||Ge(Pe,p))return-1;for(L=0;L<N;L++)$[L]=k[L];for(L=0;L<32;L++)$[L+32]=p[L];if(D(Ee,$,N),_t(Ee),xe(we,Pe,Ee),Je(Pe,k.subarray(32)),ee(we,Pe),le(fe,we),N-=64,E(k,0,fe,0)){for(L=0;L<N;L++)$[L]=0;return-1}for(L=0;L<N;L++)$[L]=k[L+64];return re=N,re}var it=32,er=24,_r=32,Ht=16,jt=32,Sr=32,hn=32,nn=32,Gn=32,zi=er,cr=_r,Xi=Ht,pn=64,Vn=32,gi=64,Ia=32,va=64;e.lowlevel={crypto_core_hsalsa20:Q,crypto_stream_xor:K,crypto_stream:F,crypto_stream_salsa20_xor:X,crypto_stream_salsa20:M,crypto_onetimeauth:J,crypto_onetimeauth_verify:ue,crypto_verify_16:y,crypto_verify_32:E,crypto_secretbox:Y,crypto_secretbox_open:Z,crypto_scalarmult:Ie,crypto_scalarmult_base:Se,crypto_box_beforenm:b,crypto_box_afternm:A,crypto_box:V,crypto_box_open:G,crypto_box_keypair:w,crypto_hash:D,crypto_sign:pt,crypto_sign_keypair:Ct,crypto_sign_open:et,crypto_secretbox_KEYBYTES:it,crypto_secretbox_NONCEBYTES:er,crypto_secretbox_ZEROBYTES:_r,crypto_secretbox_BOXZEROBYTES:Ht,crypto_scalarmult_BYTES:jt,crypto_scalarmult_SCALARBYTES:Sr,crypto_box_PUBLICKEYBYTES:hn,crypto_box_SECRETKEYBYTES:nn,crypto_box_BEFORENMBYTES:Gn,crypto_box_NONCEBYTES:zi,crypto_box_ZEROBYTES:cr,crypto_box_BOXZEROBYTES:Xi,crypto_sign_BYTES:pn,crypto_sign_PUBLICKEYBYTES:Vn,crypto_sign_SECRETKEYBYTES:gi,crypto_sign_SEEDBYTES:Ia,crypto_hash_BYTES:va};function tl($,k){if($.length!==it)throw new Error("bad key size");if(k.length!==er)throw new Error("bad nonce size")}function sg($,k){if($.length!==hn)throw new Error("bad public key size");if(k.length!==nn)throw new Error("bad secret key size")}function Pr(){var $,k;for(k=0;k<arguments.length;k++)if(($=Object.prototype.toString.call(arguments[k]))!=="[object Uint8Array]")throw new TypeError("unexpected type "+$+", use Uint8Array")}function rl($){for(var k=0;k<$.length;k++)$[k]=0}e.util||(e.util={},e.util.decodeUTF8=e.util.encodeUTF8=e.util.encodeBase64=e.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),e.randomBytes=function($){var k=new Uint8Array($);return n(k,$),k},e.secretbox=function($,k,N){Pr($,k,N),tl(N,k);for(var p=new Uint8Array(_r+$.length),L=new Uint8Array(p.length),re=0;re<$.length;re++)p[re+_r]=$[re];return Y(L,p,p.length,k,N),L.subarray(Ht)},e.secretbox.open=function($,k,N){Pr($,k,N),tl(N,k);for(var p=new Uint8Array(Ht+$.length),L=new Uint8Array(p.length),re=0;re<$.length;re++)p[re+Ht]=$[re];return p.length<32||Z(L,p,p.length,k,N)!==0?!1:L.subarray(_r)},e.secretbox.keyLength=it,e.secretbox.nonceLength=er,e.secretbox.overheadLength=Ht,e.scalarMult=function($,k){if(Pr($,k),$.length!==Sr)throw new Error("bad n size");if(k.length!==jt)throw new Error("bad p size");var N=new Uint8Array(jt);return Ie(N,$,k),N},e.scalarMult.base=function($){if(Pr($),$.length!==Sr)throw new Error("bad n size");var k=new Uint8Array(jt);return Se(k,$),k},e.scalarMult.scalarLength=Sr,e.scalarMult.groupElementLength=jt,e.box=function($,k,N,p){var L=e.box.before(N,p);return e.secretbox($,k,L)},e.box.before=function($,k){Pr($,k),sg($,k);var N=new Uint8Array(Gn);return b(N,$,k),N},e.box.after=e.secretbox,e.box.open=function($,k,N,p){var L=e.box.before(N,p);return e.secretbox.open($,k,L)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var $=new Uint8Array(hn),k=new Uint8Array(nn);return w($,k),{publicKey:$,secretKey:k}},e.box.keyPair.fromSecretKey=function($){if(Pr($),$.length!==nn)throw new Error("bad secret key size");var k=new Uint8Array(hn);return Se(k,$),{publicKey:k,secretKey:new Uint8Array($)}},e.box.publicKeyLength=hn,e.box.secretKeyLength=nn,e.box.sharedKeyLength=Gn,e.box.nonceLength=zi,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function($,k){if(Pr($,k),k.length!==gi)throw new Error("bad secret key size");var N=new Uint8Array(pn+$.length);return pt(N,$,$.length,k),N},e.sign.open=function($,k){if(arguments.length!==2)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(Pr($,k),k.length!==Vn)throw new Error("bad public key size");var N=new Uint8Array($.length),p=et(N,$,$.length,k);if(p<0)return null;for(var L=new Uint8Array(p),re=0;re<L.length;re++)L[re]=N[re];return L},e.sign.detached=function($,k){for(var N=e.sign($,k),p=new Uint8Array(pn),L=0;L<p.length;L++)p[L]=N[L];return p},e.sign.detached.verify=function($,k,N){if(Pr($,k,N),k.length!==pn)throw new Error("bad signature size");if(N.length!==Vn)throw new Error("bad public key size");var p=new Uint8Array(pn+$.length),L=new Uint8Array(pn+$.length),re;for(re=0;re<pn;re++)p[re]=k[re];for(re=0;re<$.length;re++)p[re+pn]=$[re];return et(L,p,p.length,N)>=0},e.sign.keyPair=function(){var $=new Uint8Array(Vn),k=new Uint8Array(gi);return Ct($,k),{publicKey:$,secretKey:k}},e.sign.keyPair.fromSecretKey=function($){if(Pr($),$.length!==gi)throw new Error("bad secret key size");for(var k=new Uint8Array(Vn),N=0;N<k.length;N++)k[N]=$[32+N];return{publicKey:k,secretKey:new Uint8Array($)}},e.sign.keyPair.fromSeed=function($){if(Pr($),$.length!==Ia)throw new Error("bad seed size");for(var k=new Uint8Array(Vn),N=new Uint8Array(gi),p=0;p<32;p++)N[p]=$[p];return Ct(k,N,!0),{publicKey:k,secretKey:N}},e.sign.publicKeyLength=Vn,e.sign.secretKeyLength=gi,e.sign.seedLength=Ia,e.sign.signatureLength=pn,e.hash=function($){Pr($);var k=new Uint8Array(va);return D(k,$,$.length),k},e.hash.hashLength=va,e.verify=function($,k){return Pr($,k),$.length===0||k.length===0||$.length!==k.length?!1:_($,0,k,0,$.length)===0},e.setPRNG=function($){n=$},function(){var $=typeof self<"u"?self.crypto||self.msCrypto:null;if($&&$.getRandomValues){var k=65536;e.setPRNG(function(N,p){var L,re=new Uint8Array(p);for(L=0;L<p;L+=k)$.getRandomValues(re.subarray(L,L+Math.min(p-L,k)));for(L=0;L<p;L++)N[L]=re[L];rl(re)})}else typeof Gv<"u"&&($=Kn,$&&$.randomBytes&&e.setPRNG(function(N,p){var L,re=$.randomBytes(p);for(L=0;L<p;L++)N[L]=re[L];rl(re)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(u0);var Vv=u0.exports,Qa=Vv.lowlevel.crypto_hash,wn=0,di=function(){this.S=[new Uint32Array([3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946]),new Uint32Array([1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055]),new Uint32Array([3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504]),new Uint32Array([976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462])],this.P=new Uint32Array([608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731])};function Fo(t,e,r){return(t[0][e[r+3]]+t[1][e[r+2]]^t[2][e[r+1]])+t[3][e[r]]}di.prototype.encipher=function(t,e){e===void 0&&(e=new Uint8Array(t.buffer),t.byteOffset!==0&&(e=e.subarray(t.byteOffset))),t[0]^=this.P[0];for(var r=1;r<16;r+=2)t[1]^=Fo(this.S,e,0)^this.P[r],t[0]^=Fo(this.S,e,4)^this.P[r+1];var n=t[0];t[0]=t[1]^this.P[17],t[1]=n};di.prototype.decipher=function(t){var e=new Uint8Array(t.buffer);t.byteOffset!==0&&(e=e.subarray(t.byteOffset)),t[0]^=this.P[17];for(var r=16;r>0;r-=2)t[1]^=Fo(this.S,e,0)^this.P[r],t[0]^=Fo(this.S,e,4)^this.P[r-1];var n=t[0];t[0]=t[1]^this.P[0],t[1]=n};function si(t,e){var r,n=0;for(r=0;r<4;r++,wn++)wn>=e&&(wn=0),n=n<<8|t[wn];return n}di.prototype.expand0state=function(t,e){var r=new Uint32Array(2),n,i,s=new Uint8Array(r.buffer);for(n=0,wn=0;n<18;n++)this.P[n]^=si(t,e);for(wn=0,n=0;n<18;n+=2)this.encipher(r,s),this.P[n]=r[0],this.P[n+1]=r[1];for(n=0;n<4;n++)for(i=0;i<256;i+=2)this.encipher(r,s),this.S[n][i]=r[0],this.S[n][i+1]=r[1]};di.prototype.expandstate=function(t,e,r,n){var i=new Uint32Array(2),s,o;for(s=0,wn=0;s<18;s++)this.P[s]^=si(r,n);for(s=0,wn=0;s<18;s+=2)i[0]^=si(t,e),i[1]^=si(t,e),this.encipher(i),this.P[s]=i[0],this.P[s+1]=i[1];for(s=0;s<4;s++)for(o=0;o<256;o+=2)i[0]^=si(t,e),i[1]^=si(t,e),this.encipher(i),this.S[s][o]=i[0],this.S[s][o+1]=i[1];wn=0};di.prototype.enc=function(t,e){for(var r=0;r<e;r++)this.encipher(t.subarray(r*2))};di.prototype.dec=function(t,e){for(var r=0;r<e;r++)this.decipher(t.subarray(r*2))};var qa=8,Sd=32;function Id(t,e,r){var n=new di,i=new Uint32Array(qa),s,o=new Uint8Array([79,120,121,99,104,114,111,109,97,116,105,99,66,108,111,119,102,105,115,104,83,119,97,116,68,121,110,97,109,105,116,101]);for(n.expandstate(e,64,t,64),s=0;s<64;s++)n.expand0state(e,64),n.expand0state(t,64);for(s=0;s<qa;s++)i[s]=si(o,o.byteLength);for(s=0;s<64;s++)n.enc(i,i.byteLength/8);for(s=0;s<qa;s++)r[4*s+3]=i[s]>>>24,r[4*s+2]=i[s]>>>16,r[4*s+1]=i[s]>>>8,r[4*s+0]=i[s]}function Yv(t,e,r,n,i,s,o){var a=new Uint8Array(64),c=new Uint8Array(64),f=new Uint8Array(Sd),u=new Uint8Array(Sd),l=new Uint8Array(n+4),h,d,m,_,y,E,I=s;if(o<1||e===0||n===0||s===0||s>f.byteLength*f.byteLength||n>1<<20)return-1;for(_=Math.floor((s+f.byteLength-1)/f.byteLength),m=Math.floor((s+_-1)/_),h=0;h<n;h++)l[h]=r[h];for(Qa(a,t,e),E=1;s>0;E++){for(l[n+0]=E>>>24,l[n+1]=E>>>16,l[n+2]=E>>>8,l[n+3]=E,Qa(c,l,n+4),Id(a,c,u),h=f.byteLength;h--;)f[h]=u[h];for(h=1;h<o;h++)for(Qa(c,u,u.byteLength),Id(a,c,u),d=0;d<f.byteLength;d++)f[d]^=u[d];for(m=Math.min(m,s),h=0;h<m&&(y=h*_+(E-1),!(y>=I));h++)i[y]=f[h];s-=h}return 0}var l0={pbkdf:Yv},Ka={exports:{}},vd;function Wn(){return vd||(vd=1,function(t){const e=Kn;let r;try{r=require("cpu-features")()}catch{}const{bindingAvailable:n,CIPHER_INFO:i,MAC_INFO:s}=hi(),o=(()=>{if(typeof e.sign=="function"&&typeof e.verify=="function"){const Q=`-----BEGIN PRIVATE KEY-----\r
MC4CAQAwBQYDK2VwBCIEIHKj+sVa9WcD/q2DJUJaf43Kptc8xYuUQA4bOFj9vC8T\r
-----END PRIVATE KEY-----`,z=Buffer.from("a");let X,M;try{X=e.sign(null,z,Q),M=e.verify(null,z,Q,X)}catch{}return Buffer.isBuffer(X)&&X.length===64&&M===!0}return!1})(),a=typeof e.diffieHellman=="function"&&typeof e.generateKeyPairSync=="function"&&typeof e.createPublicKey=="function",c=["ecdh-sha2-nistp256","ecdh-sha2-nistp384","ecdh-sha2-nistp521","diffie-hellman-group-exchange-sha256","diffie-hellman-group14-sha256","diffie-hellman-group15-sha512","diffie-hellman-group16-sha512","diffie-hellman-group17-sha512","diffie-hellman-group18-sha512"];a&&(c.unshift("curve25519-sha256"),c.unshift("curve25519-sha256@libssh.org"));const f=c.concat(["diffie-hellman-group-exchange-sha1","diffie-hellman-group14-sha1","diffie-hellman-group1-sha1"]),u=["ecdsa-sha2-nistp256","ecdsa-sha2-nistp384","ecdsa-sha2-nistp521","rsa-sha2-512","rsa-sha2-256","ssh-rsa"];o&&u.unshift("ssh-ed25519");const l=u.concat(["ssh-dss"]),h=(()=>{const Q=e.getCiphers();return z=>Q.includes(i[z].sslName)})();let d=["aes128-gcm@openssh.com","aes256-gcm@openssh.com","aes128-ctr","aes192-ctr","aes256-ctr"];r&&r.flags&&!r.flags.aes?n?d.unshift("chacha20-poly1305@openssh.com"):d.push("chacha20-poly1305@openssh.com"):n&&r&&r.arch==="x86"?d.splice(4,0,"chacha20-poly1305@openssh.com"):d.push("chacha20-poly1305@openssh.com"),d=d.filter(h);const m=d.concat(["aes256-cbc","aes192-cbc","aes128-cbc","blowfish-cbc","3des-cbc","aes128-gcm","aes256-gcm","arcfour256","arcfour128","cast128-cbc","arcfour"].filter(h)),_=(()=>{const Q=e.getHashes();return z=>Q.includes(s[z].sslName)})(),y=["hmac-sha2-256-etm@openssh.com","hmac-sha2-512-etm@openssh.com","hmac-sha1-etm@openssh.com","hmac-sha2-256","hmac-sha2-512","hmac-sha1"].filter(_),E=y.concat(["hmac-md5","hmac-sha2-256-96","hmac-sha2-512-96","hmac-ripemd160","hmac-sha1-96","hmac-md5-96"].filter(_)),I=["none","zlib@openssh.com","zlib"],R=I.concat([]),P={BAD_DHGEX:1,OLD_EXIT:2,DYN_RPORT_BUG:4,BUG_DHGEX_LARGE:8,IMPLY_RSA_SHA2_SIGALGS:16};t.exports={MESSAGE:{DISCONNECT:1,IGNORE:2,UNIMPLEMENTED:3,DEBUG:4,SERVICE_REQUEST:5,SERVICE_ACCEPT:6,EXT_INFO:7,KEXINIT:20,NEWKEYS:21,KEXDH_INIT:30,KEXDH_REPLY:31,KEXDH_GEX_GROUP:31,KEXDH_GEX_INIT:32,KEXDH_GEX_REPLY:33,KEXDH_GEX_REQUEST:34,KEXECDH_INIT:30,KEXECDH_REPLY:31,USERAUTH_REQUEST:50,USERAUTH_FAILURE:51,USERAUTH_SUCCESS:52,USERAUTH_BANNER:53,USERAUTH_PASSWD_CHANGEREQ:60,USERAUTH_PK_OK:60,USERAUTH_INFO_REQUEST:60,USERAUTH_INFO_RESPONSE:61,GLOBAL_REQUEST:80,REQUEST_SUCCESS:81,REQUEST_FAILURE:82,CHANNEL_OPEN:90,CHANNEL_OPEN_CONFIRMATION:91,CHANNEL_OPEN_FAILURE:92,CHANNEL_WINDOW_ADJUST:93,CHANNEL_DATA:94,CHANNEL_EXTENDED_DATA:95,CHANNEL_EOF:96,CHANNEL_CLOSE:97,CHANNEL_REQUEST:98,CHANNEL_SUCCESS:99,CHANNEL_FAILURE:100},DISCONNECT_REASON:{HOST_NOT_ALLOWED_TO_CONNECT:1,PROTOCOL_ERROR:2,KEY_EXCHANGE_FAILED:3,RESERVED:4,MAC_ERROR:5,COMPRESSION_ERROR:6,SERVICE_NOT_AVAILABLE:7,PROTOCOL_VERSION_NOT_SUPPORTED:8,HOST_KEY_NOT_VERIFIABLE:9,CONNECTION_LOST:10,BY_APPLICATION:11,TOO_MANY_CONNECTIONS:12,AUTH_CANCELED_BY_USER:13,NO_MORE_AUTH_METHODS_AVAILABLE:14,ILLEGAL_USER_NAME:15},DISCONNECT_REASON_STR:void 0,CHANNEL_OPEN_FAILURE:{ADMINISTRATIVELY_PROHIBITED:1,CONNECT_FAILED:2,UNKNOWN_CHANNEL_TYPE:3,RESOURCE_SHORTAGE:4},TERMINAL_MODE:{TTY_OP_END:0,VINTR:1,VQUIT:2,VERASE:3,VKILL:4,VEOF:5,VEOL:6,VEOL2:7,VSTART:8,VSTOP:9,VSUSP:10,VDSUSP:11,VREPRINT:12,VWERASE:13,VLNEXT:14,VFLUSH:15,VSWTCH:16,VSTATUS:17,VDISCARD:18,IGNPAR:30,PARMRK:31,INPCK:32,ISTRIP:33,INLCR:34,IGNCR:35,ICRNL:36,IUCLC:37,IXON:38,IXANY:39,IXOFF:40,IMAXBEL:41,ISIG:50,ICANON:51,XCASE:52,ECHO:53,ECHOE:54,ECHOK:55,ECHONL:56,NOFLSH:57,TOSTOP:58,IEXTEN:59,ECHOCTL:60,ECHOKE:61,PENDIN:62,OPOST:70,OLCUC:71,ONLCR:72,OCRNL:73,ONOCR:74,ONLRET:75,CS7:90,CS8:91,PARENB:92,PARODD:93,TTY_OP_ISPEED:128,TTY_OP_OSPEED:129},CHANNEL_EXTENDED_DATATYPE:{STDERR:1},SIGNALS:["ABRT","ALRM","FPE","HUP","ILL","INT","QUIT","SEGV","TERM","USR1","USR2","KILL","PIPE"].reduce((Q,z)=>({...Q,[z]:1}),{}),COMPAT:P,COMPAT_CHECKS:[["Cisco-1.25",P.BAD_DHGEX],[/^Cisco-1[.]/,P.BUG_DHGEX_LARGE],[/^[0-9.]+$/,P.OLD_EXIT],[/^OpenSSH_5[.][0-9]+/,P.DYN_RPORT_BUG],[/^OpenSSH_7[.]4/,P.IMPLY_RSA_SHA2_SIGALGS]],DEFAULT_KEX:c,SUPPORTED_KEX:f,DEFAULT_SERVER_HOST_KEY:u,SUPPORTED_SERVER_HOST_KEY:l,DEFAULT_CIPHER:d,SUPPORTED_CIPHER:m,DEFAULT_MAC:y,SUPPORTED_MAC:E,DEFAULT_COMPRESSION:I,SUPPORTED_COMPRESSION:R,curve25519Supported:a,eddsaSupported:o},t.exports.DISCONNECT_REASON_BY_VALUE=Array.from(Object.entries(t.exports.DISCONNECT_REASON)).reduce((Q,[z,X])=>({...Q,[X]:z}),{})}(Ka)),Ka.exports}var Wa,$d;function dn(){if($d)return Wa;$d=1;const t=Aa.Ber;let e;const r=Buffer[Symbol.species],n=Object.getPrototypeOf(Uint8Array.prototype).fill;function i(l,h){return l[h++]*16777216+l[h++]*65536+l[h++]*256+l[h]}function s(l,h,d,m,_){_||(_=0),m>l.length&&(m=l.length);let y=m-d;const E=h.length-_;return y>E&&(y=E),h.set(new Uint8Array(l.buffer,l.byteOffset+d,y),_),y}function o(l,h,d){return d===void 0&&(d=l.length),new r(l.buffer,l.byteOffset+h,d-h)}function a(){let l=0,h;const d={init:(m,_)=>{h=m,l=typeof _=="number"?_:0},pos:()=>l,length:()=>h?h.length:0,avail:()=>h&&l<h.length?h.length-l:0,clear:()=>{h=void 0},readUInt32BE:()=>{if(!(!h||l+3>=h.length))return h[l++]*16777216+h[l++]*65536+h[l++]*256+h[l++]},readUInt64BE:m=>{if(!(!h||l+7>=h.length))switch(m){case"always":return BigInt(`0x${h.hexSlice(l,l+=8)}`);case"maybe":if(h[l]>31)return BigInt(`0x${h.hexSlice(l,l+=8)}`);default:return h[l++]*72057594037927940+h[l++]*281474976710656+h[l++]*1099511627776+h[l++]*4294967296+h[l++]*16777216+h[l++]*65536+h[l++]*256+h[l++]}},skip:m=>{h&&m>0&&(l+=m)},skipString:()=>{const m=d.readUInt32BE();if(m!==void 0)return l+=m,l<=h.length?m:void 0},readByte:()=>{if(h&&l<h.length)return h[l++]},readBool:()=>{if(h&&l<h.length)return!!h[l++]},readList:()=>{const m=d.readString(!0);if(m!==void 0)return m?m.split(","):[]},readString:(m,_)=>{typeof m=="number"&&(_=m,m=void 0);const y=d.readUInt32BE();if(y!==void 0&&!(h.length-l<y||typeof _=="number"&&y>_))return m?Buffer.isBuffer(m)?s(h,m,l,l+=y):h.utf8Slice(l,l+=y):o(h,l,l+=y)},readRaw:m=>{if(h){if(typeof m!="number")return o(h,l,l+=h.length-l);if(h.length-l>=m)return o(h,l,l+=m)}}};return d}function c(l,h,d){const m=new Error(l);return typeof h=="boolean"?(d=h,m.level="protocol"):m.level=h||"protocol",m.fatal=!!d,m}function f(l,h,d){return l[d++]=h>>>24,l[d++]=h>>>16,l[d++]=h>>>8,l[d++]=h,d}const u=a();return Wa={bufferCopy:s,bufferSlice:o,FastBuffer:r,bufferFill:(l,h,d,m)=>n.call(l,h,d,m),makeError:c,doFatalError:(l,h,d,m)=>{let _;return e===void 0&&({DISCONNECT_REASON:e}=Wn()),h instanceof Error?(_=h,typeof d!="number"?m=e.PROTOCOL_ERROR:m=d):_=c(h,d,!0),typeof m!="number"&&(m=e.PROTOCOL_ERROR),l.disconnect(m),l._destruct(),l._onError(_),1/0},readUInt32BE:i,writeUInt32BE:f,writeUInt32LE:(l,h,d)=>(l[d++]=h,l[d++]=h>>>8,l[d++]=h>>>16,l[d++]=h>>>24,d),makeBufferParser:a,bufferParser:a(),readString:(l,h,d,m)=>{typeof d=="number"&&(m=d,d=void 0),h===void 0&&(h=0);const _=l.length-h;if(h<0||h>=l.length||_<4)return;const y=i(l,h);if(_<4+y||typeof m=="number"&&y>m)return;h+=4;const E=h+y;return l._pos=E,d?Buffer.isBuffer(d)?s(l,d,h,E):l.utf8Slice(h,E):o(l,h,E)},sigSSHToASN1:(l,h)=>{switch(h){case"ssh-dss":{if(l.length>40)return l;const d=new t.Writer;d.startSequence();let m=l.slice(0,20),_=l.slice(20);if(m[0]&128){const y=Buffer.allocUnsafe(21);y[0]=0,m.copy(y,1),m=y}else m[0]===0&&!(m[1]&128)&&(m=m.slice(1));if(_[0]&128){const y=Buffer.allocUnsafe(21);y[0]=0,_.copy(y,1),_=y}else _[0]===0&&!(_[1]&128)&&(_=_.slice(1));return d.writeBuffer(m,t.Integer),d.writeBuffer(_,t.Integer),d.endSequence(),d.buffer}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{u.init(l,0);const d=u.readString(),m=u.readString();if(u.clear(),d===void 0||m===void 0)return;const _=new t.Writer;return _.startSequence(),_.writeBuffer(d,t.Integer),_.writeBuffer(m,t.Integer),_.endSequence(),_.buffer}default:return l}},convertSignature:(l,h)=>{switch(h){case"ssh-dss":{if(l.length<=40)return l;const d=new t.Reader(l);d.readSequence();let m=d.readString(t.Integer,!0),_=d.readString(t.Integer,!0),y=0,E=0;if(m.length<20){const R=Buffer.allocUnsafe(20);R.set(m,1),m=R,m[0]=0}if(_.length<20){const R=Buffer.allocUnsafe(20);R.set(_,1),_=R,_[0]=0}m.length>20&&m[0]===0&&(y=1),_.length>20&&_[0]===0&&(E=1);const I=Buffer.allocUnsafe(m.length-y+(_.length-E));return s(m,I,y,m.length,0),s(_,I,E,_.length,m.length-y),I}case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":{if(l[0]===0)return l;const d=new t.Reader(l);d.readSequence();const m=d.readString(t.Integer,!0),_=d.readString(t.Integer,!0);if(m===null||_===null)return;const y=Buffer.allocUnsafe(4+m.length+4+_.length);return f(y,m.length,0),y.set(m,4),f(y,_.length,4+m.length),y.set(_,8+m.length),y}}return l},sendPacket:(l,h,d)=>!d&&l._kexinit!==void 0?(l._queue===void 0&&(l._queue=[]),l._queue.push(h),l._debug&&l._debug("Outbound: ... packet queued"),!1):(l._cipher.encrypt(h),!0)},Wa}var Ga={exports:{}},Cd;function zv(){return Cd||(Cd=1,function(t,e){var r=function(){var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(i){i=i||{};var s;s||(s=typeof i<"u"?i:{});var o,a;s.ready=new Promise(function(H,q){o=H,a=q});var c={},f;for(f in s)s.hasOwnProperty(f)&&(c[f]=s[f]);var u=typeof window=="object",l=typeof importScripts=="function",h=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",d="",m,_,y,E,I;h?(d=l?Jr.dirname(d)+"/":__dirname+"/",m=function(H,q){var D=Se(H);return D?q?D:D.toString():(E||(E=ai),I||(I=Jr),H=I.normalize(H),E.readFileSync(H,q?null:"utf8"))},y=function(H){return H=m(H,!0),H.buffer||(H=new Uint8Array(H)),X(H.buffer),H},_=function(H,q,D){var ee=Se(H);ee&&q(ee),E||(E=ai),I||(I=Jr),H=I.normalize(H),E.readFile(H,function(ce,le){ce?D(ce):q(le.buffer)})},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),s.inspect=function(){return"[Emscripten Module object]"}):(u||l)&&(l?d=self.location.href:typeof document<"u"&&document.currentScript&&(d=document.currentScript.src),n&&(d=n),d.indexOf("blob:")!==0?d=d.substr(0,d.lastIndexOf("/")+1):d="",m=function(H){try{var q=new XMLHttpRequest;return q.open("GET",H,!1),q.send(null),q.responseText}catch(ce){if(H=Se(H)){q=[];for(var D=0;D<H.length;D++){var ee=H[D];255<ee&&(ee&=255),q.push(String.fromCharCode(ee))}return q.join("")}throw ce}},l&&(y=function(H){try{var q=new XMLHttpRequest;return q.open("GET",H,!1),q.responseType="arraybuffer",q.send(null),new Uint8Array(q.response)}catch(D){if(H=Se(H))return H;throw D}}),_=function(H,q,D){var ee=new XMLHttpRequest;ee.open("GET",H,!0),ee.responseType="arraybuffer",ee.onload=function(){if(ee.status==200||ee.status==0&&ee.response)q(ee.response);else{var ce=Se(H);ce?q(ce.buffer):D()}},ee.onerror=D,ee.send(null)}),s.print||console.log.bind(console);var R=s.printErr||console.warn.bind(console);for(f in c)c.hasOwnProperty(f)&&(s[f]=c[f]);c=null;var P;s.wasmBinary&&(P=s.wasmBinary),s.noExitRuntime,typeof WebAssembly!="object"&&B("no native wasm support detected");var Q,z=!1;function X(H,q){H||B("Assertion failed: "+q)}function M(H){var q=s["_"+H];return X(q,"Cannot call unknown function "+H+", make sure it is exported"),q}function F(H,q,D,ee){var ce={string:function(Le){var mt=0;if(Le!=null&&Le!==0){var _t=(Le.length<<2)+1;mt=T(_t);var pt=mt,Ge=ue;if(0<_t){_t=pt+_t-1;for(var et=0;et<Le.length;++et){var it=Le.charCodeAt(et);if(55296<=it&&57343>=it){var er=Le.charCodeAt(++et);it=65536+((it&1023)<<10)|er&1023}if(127>=it){if(pt>=_t)break;Ge[pt++]=it}else{if(2047>=it){if(pt+1>=_t)break;Ge[pt++]=192|it>>6}else{if(65535>=it){if(pt+2>=_t)break;Ge[pt++]=224|it>>12}else{if(pt+3>=_t)break;Ge[pt++]=240|it>>18,Ge[pt++]=128|it>>12&63}Ge[pt++]=128|it>>6&63}Ge[pt++]=128|it&63}}Ge[pt]=0}}return mt},array:function(Le){var mt=T(Le.length);return J.set(Le,mt),mt}},le=M(H),xe=[];if(H=0,ee)for(var Je=0;Je<ee.length;Je++){var Ct=ce[D[Je]];Ct?(H===0&&(H=b()),xe[Je]=Ct(ee[Je])):xe[Je]=ee[Je]}return D=le.apply(null,xe),D=function(Le){if(q==="string")if(Le){for(var mt=ue,_t=Le+NaN,pt=Le;mt[pt]&&!(pt>=_t);)++pt;if(16<pt-Le&&mt.subarray&&K)Le=K.decode(mt.subarray(Le,pt));else{for(_t="";Le<pt;){var Ge=mt[Le++];if(Ge&128){var et=mt[Le++]&63;if((Ge&224)==192)_t+=String.fromCharCode((Ge&31)<<6|et);else{var it=mt[Le++]&63;Ge=(Ge&240)==224?(Ge&15)<<12|et<<6|it:(Ge&7)<<18|et<<12|it<<6|mt[Le++]&63,65536>Ge?_t+=String.fromCharCode(Ge):(Ge-=65536,_t+=String.fromCharCode(55296|Ge>>10,56320|Ge&1023))}}else _t+=String.fromCharCode(Ge)}Le=_t}}else Le="";else Le=q==="boolean"?!!Le:Le;return Le}(D),H!==0&&A(H),D}var K=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,se,J,ue;function Y(){var H=Q.buffer;se=H,s.HEAP8=J=new Int8Array(H),s.HEAP16=new Int16Array(H),s.HEAP32=new Int32Array(H),s.HEAPU8=ue=new Uint8Array(H),s.HEAPU16=new Uint16Array(H),s.HEAPU32=new Uint32Array(H),s.HEAPF32=new Float32Array(H),s.HEAPF64=new Float64Array(H)}var Z,ie=[],oe=[],O=[];function j(){var H=s.preRun.shift();ie.unshift(H)}var C=0,v=null;s.preloadedImages={},s.preloadedAudios={};function B(H){throw s.onAbort&&s.onAbort(H),R(H),z=!0,H=new WebAssembly.RuntimeError("abort("+H+"). Build with -s ASSERTIONS=1 for more info."),a(H),H}var x="data:application/octet-stream;base64,",g;if(g="data:application/octet-stream;base64,AGFzbQEAAAABIAZgAX8Bf2ADf39/AGABfwBgAABgAAF/YAZ/f39/f38AAgcBAWEBYQAAAwsKAAEDAQAAAgQFAgQFAXABAQEFBwEBgAKAgAIGCQF/AUGAjMACCwclCQFiAgABYwADAWQACQFlAAgBZgAHAWcABgFoAAUBaQAKAWoBAAqGTQpPAQJ/QYAIKAIAIgEgAEEDakF8cSICaiEAAkAgAkEAIAAgAU0bDQAgAD8AQRB0SwRAIAAQAEUNAQtBgAggADYCACABDwtBhAhBMDYCAEF/C4wFAg5+Cn8gACgCJCEUIAAoAiAhFSAAKAIcIREgACgCGCESIAAoAhQhEyACQRBPBEAgAC0ATEVBGHQhFyAAKAIEIhZBBWytIQ8gACgCCCIYQQVsrSENIAAoAgwiGUEFbK0hCyAAKAIQIhpBBWytIQkgADUCACEIIBqtIRAgGa0hDiAYrSEMIBatIQoDQCASIAEtAAMiEiABLQAEQQh0ciABLQAFQRB0ciABLQAGIhZBGHRyQQJ2Qf///x9xaq0iAyAOfiABLwAAIAEtAAJBEHRyIBNqIBJBGHRBgICAGHFqrSIEIBB+fCARIAEtAAdBCHQgFnIgAS0ACEEQdHIgAS0ACSIRQRh0ckEEdkH///8fcWqtIgUgDH58IAEtAApBCHQgEXIgAS0AC0EQdHIgAS0ADEEYdHJBBnYgFWqtIgYgCn58IBQgF2ogAS8ADSABLQAPQRB0cmqtIgcgCH58IAMgDH4gBCAOfnwgBSAKfnwgBiAIfnwgByAJfnwgAyAKfiAEIAx+fCAFIAh+fCAGIAl+fCAHIAt+fCADIAh+IAQgCn58IAUgCX58IAYgC358IAcgDX58IAMgCX4gBCAIfnwgBSALfnwgBiANfnwgByAPfnwiA0IaiEL/////D4N8IgRCGohC/////w+DfCIFQhqIQv////8Pg3wiBkIaiEL/////D4N8IgdCGoinQQVsIAOnQf///x9xaiITQRp2IASnQf///x9xaiESIAWnQf///x9xIREgBqdB////H3EhFSAHp0H///8fcSEUIBNB////H3EhEyABQRBqIQEgAkEQayICQQ9LDQALCyAAIBQ2AiQgACAVNgIgIAAgETYCHCAAIBI2AhggACATNgIUCwMAAQu2BAEGfwJAIAAoAjgiBARAIABBPGohBQJAIAJBECAEayIDIAIgA0kbIgZFDQAgBkEDcSEHAkAgBkEBa0EDSQRAQQAhAwwBCyAGQXxxIQhBACEDA0AgBSADIARqaiABIANqLQAAOgAAIAUgA0EBciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0ECciIEIAAoAjhqaiABIARqLQAAOgAAIAUgA0EDciIEIAAoAjhqaiABIARqLQAAOgAAIANBBGohAyAAKAI4IQQgCEEEayIIDQALCyAHRQ0AA0AgBSADIARqaiABIANqLQAAOgAAIANBAWohAyAAKAI4IQQgB0EBayIHDQALCyAAIAQgBmoiAzYCOCADQRBJDQEgACAFQRAQAiAAQQA2AjggAiAGayECIAEgBmohAQsgAkEQTwRAIAAgASACQXBxIgMQAiACQQ9xIQIgASADaiEBCyACRQ0AIAJBA3EhBCAAQTxqIQVBACEDIAJBAWtBA08EQCACQXxxIQcDQCAFIAAoAjggA2pqIAEgA2otAAA6AAAgBSADQQFyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQJyIgYgACgCOGpqIAEgBmotAAA6AAAgBSADQQNyIgYgACgCOGpqIAEgBmotAAA6AAAgA0EEaiEDIAdBBGsiBw0ACwsgBARAA0AgBSAAKAI4IANqaiABIANqLQAAOgAAIANBAWohAyAEQQFrIgQNAAsLIAAgACgCOCACajYCOAsLoS0BDH8jAEEQayIMJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAEH0AU0EQEGICCgCACIFQRAgAEELakF4cSAAQQtJGyIIQQN2IgJ2IgFBA3EEQCABQX9zQQFxIAJqIgNBA3QiAUG4CGooAgAiBEEIaiEAAkAgBCgCCCICIAFBsAhqIgFGBEBBiAggBUF+IAN3cTYCAAwBCyACIAE2AgwgASACNgIICyAEIANBA3QiAUEDcjYCBCABIARqIgEgASgCBEEBcjYCBAwNCyAIQZAIKAIAIgpNDQEgAQRAAkBBAiACdCIAQQAgAGtyIAEgAnRxIgBBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2aiIDQQN0IgBBuAhqKAIAIgQoAggiASAAQbAIaiIARgRAQYgIIAVBfiADd3EiBTYCAAwBCyABIAA2AgwgACABNgIICyAEQQhqIQAgBCAIQQNyNgIEIAQgCGoiAiADQQN0IgEgCGsiA0EBcjYCBCABIARqIAM2AgAgCgRAIApBA3YiAUEDdEGwCGohB0GcCCgCACEEAn8gBUEBIAF0IgFxRQRAQYgIIAEgBXI2AgAgBwwBCyAHKAIICyEBIAcgBDYCCCABIAQ2AgwgBCAHNgIMIAQgATYCCAtBnAggAjYCAEGQCCADNgIADA0LQYwIKAIAIgZFDQEgBkEAIAZrcUEBayIAIABBDHZBEHEiAnYiAUEFdkEIcSIAIAJyIAEgAHYiAUECdkEEcSIAciABIAB2IgFBAXZBAnEiAHIgASAAdiIBQQF2QQFxIgByIAEgAHZqQQJ0QbgKaigCACIBKAIEQXhxIAhrIQMgASECA0ACQCACKAIQIgBFBEAgAigCFCIARQ0BCyAAKAIEQXhxIAhrIgIgAyACIANJIgIbIQMgACABIAIbIQEgACECDAELCyABIAhqIgkgAU0NAiABKAIYIQsgASABKAIMIgRHBEAgASgCCCIAQZgIKAIASRogACAENgIMIAQgADYCCAwMCyABQRRqIgIoAgAiAEUEQCABKAIQIgBFDQQgAUEQaiECCwNAIAIhByAAIgRBFGoiAigCACIADQAgBEEQaiECIAQoAhAiAA0ACyAHQQA2AgAMCwtBfyEIIABBv39LDQAgAEELaiIAQXhxIQhBjAgoAgAiCUUNAEEAIAhrIQMCQAJAAkACf0EAIAhBgAJJDQAaQR8gCEH///8HSw0AGiAAQQh2IgAgAEGA/j9qQRB2QQhxIgJ0IgAgAEGA4B9qQRB2QQRxIgF0IgAgAEGAgA9qQRB2QQJxIgB0QQ92IAEgAnIgAHJrIgBBAXQgCCAAQRVqdkEBcXJBHGoLIgVBAnRBuApqKAIAIgJFBEBBACEADAELQQAhACAIQQBBGSAFQQF2ayAFQR9GG3QhAQNAAkAgAigCBEF4cSAIayIHIANPDQAgAiEEIAciAw0AQQAhAyACIQAMAwsgACACKAIUIgcgByACIAFBHXZBBHFqKAIQIgJGGyAAIAcbIQAgAUEBdCEBIAINAAsLIAAgBHJFBEBBACEEQQIgBXQiAEEAIABrciAJcSIARQ0DIABBACAAa3FBAWsiACAAQQx2QRBxIgJ2IgFBBXZBCHEiACACciABIAB2IgFBAnZBBHEiAHIgASAAdiIBQQF2QQJxIgByIAEgAHYiAUEBdkEBcSIAciABIAB2akECdEG4CmooAgAhAAsgAEUNAQsDQCAAKAIEQXhxIAhrIgEgA0khAiABIAMgAhshAyAAIAQgAhshBCAAKAIQIgEEfyABBSAAKAIUCyIADQALCyAERQ0AIANBkAgoAgAgCGtPDQAgBCAIaiIGIARNDQEgBCgCGCEFIAQgBCgCDCIBRwRAIAQoAggiAEGYCCgCAEkaIAAgATYCDCABIAA2AggMCgsgBEEUaiICKAIAIgBFBEAgBCgCECIARQ0EIARBEGohAgsDQCACIQcgACIBQRRqIgIoAgAiAA0AIAFBEGohAiABKAIQIgANAAsgB0EANgIADAkLIAhBkAgoAgAiAk0EQEGcCCgCACEDAkAgAiAIayIBQRBPBEBBkAggATYCAEGcCCADIAhqIgA2AgAgACABQQFyNgIEIAIgA2ogATYCACADIAhBA3I2AgQMAQtBnAhBADYCAEGQCEEANgIAIAMgAkEDcjYCBCACIANqIgAgACgCBEEBcjYCBAsgA0EIaiEADAsLIAhBlAgoAgAiBkkEQEGUCCAGIAhrIgE2AgBBoAhBoAgoAgAiAiAIaiIANgIAIAAgAUEBcjYCBCACIAhBA3I2AgQgAkEIaiEADAsLQQAhACAIQS9qIgkCf0HgCygCAARAQegLKAIADAELQewLQn83AgBB5AtCgKCAgICABDcCAEHgCyAMQQxqQXBxQdiq1aoFczYCAEH0C0EANgIAQcQLQQA2AgBBgCALIgFqIgVBACABayIHcSICIAhNDQpBwAsoAgAiBARAQbgLKAIAIgMgAmoiASADTQ0LIAEgBEsNCwtBxAstAABBBHENBQJAAkBBoAgoAgAiAwRAQcgLIQADQCADIAAoAgAiAU8EQCABIAAoAgRqIANLDQMLIAAoAggiAA0ACwtBABABIgFBf0YNBiACIQVB5AsoAgAiA0EBayIAIAFxBEAgAiABayAAIAFqQQAgA2txaiEFCyAFIAhNDQYgBUH+////B0sNBkHACygCACIEBEBBuAsoAgAiAyAFaiIAIANNDQcgACAESw0HCyAFEAEiACABRw0BDAgLIAUgBmsgB3EiBUH+////B0sNBSAFEAEiASAAKAIAIAAoAgRqRg0EIAEhAAsCQCAAQX9GDQAgCEEwaiAFTQ0AQegLKAIAIgEgCSAFa2pBACABa3EiAUH+////B0sEQCAAIQEMCAsgARABQX9HBEAgASAFaiEFIAAhAQwIC0EAIAVrEAEaDAULIAAiAUF/Rw0GDAQLAAtBACEEDAcLQQAhAQwFCyABQX9HDQILQcQLQcQLKAIAQQRyNgIACyACQf7///8HSw0BIAIQASEBQQAQASEAIAFBf0YNASAAQX9GDQEgACABTQ0BIAAgAWsiBSAIQShqTQ0BC0G4C0G4CygCACAFaiIANgIAQbwLKAIAIABJBEBBvAsgADYCAAsCQAJAAkBBoAgoAgAiBwRAQcgLIQADQCABIAAoAgAiAyAAKAIEIgJqRg0CIAAoAggiAA0ACwwCC0GYCCgCACIAQQAgACABTRtFBEBBmAggATYCAAtBACEAQcwLIAU2AgBByAsgATYCAEGoCEF/NgIAQawIQeALKAIANgIAQdQLQQA2AgADQCAAQQN0IgNBuAhqIANBsAhqIgI2AgAgA0G8CGogAjYCACAAQQFqIgBBIEcNAAtBlAggBUEoayIDQXggAWtBB3FBACABQQhqQQdxGyIAayICNgIAQaAIIAAgAWoiADYCACAAIAJBAXI2AgQgASADakEoNgIEQaQIQfALKAIANgIADAILIAAtAAxBCHENACADIAdLDQAgASAHTQ0AIAAgAiAFajYCBEGgCCAHQXggB2tBB3FBACAHQQhqQQdxGyIAaiICNgIAQZQIQZQIKAIAIAVqIgEgAGsiADYCACACIABBAXI2AgQgASAHakEoNgIEQaQIQfALKAIANgIADAELQZgIKAIAIAFLBEBBmAggATYCAAsgASAFaiECQcgLIQACQAJAAkACQAJAAkADQCACIAAoAgBHBEAgACgCCCIADQEMAgsLIAAtAAxBCHFFDQELQcgLIQADQCAHIAAoAgAiAk8EQCACIAAoAgRqIgQgB0sNAwsgACgCCCEADAALAAsgACABNgIAIAAgACgCBCAFajYCBCABQXggAWtBB3FBACABQQhqQQdxG2oiCSAIQQNyNgIEIAJBeCACa0EHcUEAIAJBCGpBB3EbaiIFIAggCWoiBmshAiAFIAdGBEBBoAggBjYCAEGUCEGUCCgCACACaiIANgIAIAYgAEEBcjYCBAwDCyAFQZwIKAIARgRAQZwIIAY2AgBBkAhBkAgoAgAgAmoiADYCACAGIABBAXI2AgQgACAGaiAANgIADAMLIAUoAgQiAEEDcUEBRgRAIABBeHEhBwJAIABB/wFNBEAgBSgCCCIDIABBA3YiAEEDdEGwCGpGGiADIAUoAgwiAUYEQEGICEGICCgCAEF+IAB3cTYCAAwCCyADIAE2AgwgASADNgIIDAELIAUoAhghCAJAIAUgBSgCDCIBRwRAIAUoAggiACABNgIMIAEgADYCCAwBCwJAIAVBFGoiACgCACIDDQAgBUEQaiIAKAIAIgMNAEEAIQEMAQsDQCAAIQQgAyIBQRRqIgAoAgAiAw0AIAFBEGohACABKAIQIgMNAAsgBEEANgIACyAIRQ0AAkAgBSAFKAIcIgNBAnRBuApqIgAoAgBGBEAgACABNgIAIAENAUGMCEGMCCgCAEF+IAN3cTYCAAwCCyAIQRBBFCAIKAIQIAVGG2ogATYCACABRQ0BCyABIAg2AhggBSgCECIABEAgASAANgIQIAAgATYCGAsgBSgCFCIARQ0AIAEgADYCFCAAIAE2AhgLIAUgB2ohBSACIAdqIQILIAUgBSgCBEF+cTYCBCAGIAJBAXI2AgQgAiAGaiACNgIAIAJB/wFNBEAgAkEDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwDC0EfIQAgAkH///8HTQRAIAJBCHYiACAAQYD+P2pBEHZBCHEiA3QiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASADciAAcmsiAEEBdCACIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQQCQEGMCCgCACIDQQEgAHQiAXFFBEBBjAggASADcjYCACAEIAY2AgAgBiAENgIYDAELIAJBAEEZIABBAXZrIABBH0YbdCEAIAQoAgAhAQNAIAEiAygCBEF4cSACRg0DIABBHXYhASAAQQF0IQAgAyABQQRxaiIEKAIQIgENAAsgBCAGNgIQIAYgAzYCGAsgBiAGNgIMIAYgBjYCCAwCC0GUCCAFQShrIgNBeCABa0EHcUEAIAFBCGpBB3EbIgBrIgI2AgBBoAggACABaiIANgIAIAAgAkEBcjYCBCABIANqQSg2AgRBpAhB8AsoAgA2AgAgByAEQScgBGtBB3FBACAEQSdrQQdxG2pBL2siACAAIAdBEGpJGyICQRs2AgQgAkHQCykCADcCECACQcgLKQIANwIIQdALIAJBCGo2AgBBzAsgBTYCAEHICyABNgIAQdQLQQA2AgAgAkEYaiEAA0AgAEEHNgIEIABBCGohASAAQQRqIQAgASAESQ0ACyACIAdGDQMgAiACKAIEQX5xNgIEIAcgAiAHayIEQQFyNgIEIAIgBDYCACAEQf8BTQRAIARBA3YiAEEDdEGwCGohAgJ/QYgIKAIAIgFBASAAdCIAcUUEQEGICCAAIAFyNgIAIAIMAQsgAigCCAshACACIAc2AgggACAHNgIMIAcgAjYCDCAHIAA2AggMBAtBHyEAIAdCADcCECAEQf///wdNBEAgBEEIdiIAIABBgP4/akEQdkEIcSICdCIAIABBgOAfakEQdkEEcSIBdCIAIABBgIAPakEQdkECcSIAdEEPdiABIAJyIAByayIAQQF0IAQgAEEVanZBAXFyQRxqIQALIAcgADYCHCAAQQJ0QbgKaiEDAkBBjAgoAgAiAkEBIAB0IgFxRQRAQYwIIAEgAnI2AgAgAyAHNgIAIAcgAzYCGAwBCyAEQQBBGSAAQQF2ayAAQR9GG3QhACADKAIAIQEDQCABIgIoAgRBeHEgBEYNBCAAQR12IQEgAEEBdCEAIAIgAUEEcWoiAygCECIBDQALIAMgBzYCECAHIAI2AhgLIAcgBzYCDCAHIAc2AggMAwsgAygCCCIAIAY2AgwgAyAGNgIIIAZBADYCGCAGIAM2AgwgBiAANgIICyAJQQhqIQAMBQsgAigCCCIAIAc2AgwgAiAHNgIIIAdBADYCGCAHIAI2AgwgByAANgIIC0GUCCgCACIAIAhNDQBBlAggACAIayIBNgIAQaAIQaAIKAIAIgIgCGoiADYCACAAIAFBAXI2AgQgAiAIQQNyNgIEIAJBCGohAAwDC0GECEEwNgIAQQAhAAwCCwJAIAVFDQACQCAEKAIcIgJBAnRBuApqIgAoAgAgBEYEQCAAIAE2AgAgAQ0BQYwIIAlBfiACd3EiCTYCAAwCCyAFQRBBFCAFKAIQIARGG2ogATYCACABRQ0BCyABIAU2AhggBCgCECIABEAgASAANgIQIAAgATYCGAsgBCgCFCIARQ0AIAEgADYCFCAAIAE2AhgLAkAgA0EPTQRAIAQgAyAIaiIAQQNyNgIEIAAgBGoiACAAKAIEQQFyNgIEDAELIAQgCEEDcjYCBCAGIANBAXI2AgQgAyAGaiADNgIAIANB/wFNBEAgA0EDdiIAQQN0QbAIaiECAn9BiAgoAgAiAUEBIAB0IgBxRQRAQYgIIAAgAXI2AgAgAgwBCyACKAIICyEAIAIgBjYCCCAAIAY2AgwgBiACNgIMIAYgADYCCAwBC0EfIQAgA0H///8HTQRAIANBCHYiACAAQYD+P2pBEHZBCHEiAnQiACAAQYDgH2pBEHZBBHEiAXQiACAAQYCAD2pBEHZBAnEiAHRBD3YgASACciAAcmsiAEEBdCADIABBFWp2QQFxckEcaiEACyAGIAA2AhwgBkIANwIQIABBAnRBuApqIQICQAJAIAlBASAAdCIBcUUEQEGMCCABIAlyNgIAIAIgBjYCACAGIAI2AhgMAQsgA0EAQRkgAEEBdmsgAEEfRht0IQAgAigCACEIA0AgCCIBKAIEQXhxIANGDQIgAEEddiECIABBAXQhACABIAJBBHFqIgIoAhAiCA0ACyACIAY2AhAgBiABNgIYCyAGIAY2AgwgBiAGNgIIDAELIAEoAggiACAGNgIMIAEgBjYCCCAGQQA2AhggBiABNgIMIAYgADYCCAsgBEEIaiEADAELAkAgC0UNAAJAIAEoAhwiAkECdEG4CmoiACgCACABRgRAIAAgBDYCACAEDQFBjAggBkF+IAJ3cTYCAAwCCyALQRBBFCALKAIQIAFGG2ogBDYCACAERQ0BCyAEIAs2AhggASgCECIABEAgBCAANgIQIAAgBDYCGAsgASgCFCIARQ0AIAQgADYCFCAAIAQ2AhgLAkAgA0EPTQRAIAEgAyAIaiIAQQNyNgIEIAAgAWoiACAAKAIEQQFyNgIEDAELIAEgCEEDcjYCBCAJIANBAXI2AgQgAyAJaiADNgIAIAoEQCAKQQN2IgBBA3RBsAhqIQRBnAgoAgAhAgJ/QQEgAHQiACAFcUUEQEGICCAAIAVyNgIAIAQMAQsgBCgCCAshACAEIAI2AgggACACNgIMIAIgBDYCDCACIAA2AggLQZwIIAk2AgBBkAggAzYCAAsgAUEIaiEACyAMQRBqJAAgAAsQACMAIABrQXBxIgAkACAACwYAIAAkAAsEACMAC4AJAgh/BH4jAEGQAWsiBiQAIAYgBS0AA0EYdEGAgIAYcSAFLwAAIAUtAAJBEHRycjYCACAGIAUoAANBAnZBg/7/H3E2AgQgBiAFKAAGQQR2Qf+B/x9xNgIIIAYgBSgACUEGdkH//8AfcTYCDCAFLwANIQggBS0ADyEJIAZCADcCFCAGQgA3AhwgBkEANgIkIAYgCCAJQRB0QYCAPHFyNgIQIAYgBSgAEDYCKCAGIAUoABQ2AiwgBiAFKAAYNgIwIAUoABwhBSAGQQA6AEwgBkEANgI4IAYgBTYCNCAGIAEgAhAEIAQEQCAGIAMgBBAECyAGKAI4IgEEQCAGQTxqIgIgAWpBAToAACABQQFqQQ9NBEAgASAGakE9aiEEAkBBDyABayIDRQ0AIAMgBGoiAUEBa0EAOgAAIARBADoAACADQQNJDQAgAUECa0EAOgAAIARBADoAASABQQNrQQA6AAAgBEEAOgACIANBB0kNACABQQRrQQA6AAAgBEEAOgADIANBCUkNACAEQQAgBGtBA3EiAWoiBEEANgIAIAQgAyABa0F8cSIBaiIDQQRrQQA2AgAgAUEJSQ0AIARBADYCCCAEQQA2AgQgA0EIa0EANgIAIANBDGtBADYCACABQRlJDQAgBEEANgIYIARBADYCFCAEQQA2AhAgBEEANgIMIANBEGtBADYCACADQRRrQQA2AgAgA0EYa0EANgIAIANBHGtBADYCACABIARBBHFBGHIiAWsiA0EgSQ0AIAEgBGohAQNAIAFCADcDGCABQgA3AxAgAUIANwMIIAFCADcDACABQSBqIQEgA0EgayIDQR9LDQALCwsgBkEBOgBMIAYgAkEQEAILIAY1AjQhECAGNQIwIREgBjUCLCEOIAAgBjUCKCAGKAIkIAYoAiAgBigCHCAGKAIYIgNBGnZqIgJBGnZqIgFBGnZqIgtBgICAYHIgAUH///8fcSINIAJB////H3EiCCAGKAIUIAtBGnZBBWxqIgFB////H3EiCUEFaiIFQRp2IANB////H3EgAUEadmoiA2oiAUEadmoiAkEadmoiBEEadmoiDEEfdSIHIANxIAEgDEEfdkEBayIDQf///x9xIgpxciIBQRp0IAUgCnEgByAJcXJyrXwiDzwAACAAIA9CGIg8AAMgACAPQhCIPAACIAAgD0IIiDwAASAAIA4gByAIcSACIApxciICQRR0IAFBBnZyrXwgD0IgiHwiDjwABCAAIA5CGIg8AAcgACAOQhCIPAAGIAAgDkIIiDwABSAAIBEgByANcSAEIApxciIBQQ50IAJBDHZyrXwgDkIgiHwiDjwACCAAIA5CGIg8AAsgACAOQhCIPAAKIAAgDkIIiDwACSAAIBAgAyAMcSAHIAtxckEIdCABQRJ2cq18IA5CIIh8Ig48AAwgACAOQhiIPAAPIAAgDkIQiDwADiAAIA5CCIg8AA0gBkIANwIwIAZCADcCKCAGQgA3AiAgBkIANwIYIAZCADcCECAGQgA3AgggBkIANwIAIAZBkAFqJAALpwwBB38CQCAARQ0AIABBCGsiAyAAQQRrKAIAIgFBeHEiAGohBQJAIAFBAXENACABQQNxRQ0BIAMgAygCACIBayIDQZgIKAIASQ0BIAAgAWohACADQZwIKAIARwRAIAFB/wFNBEAgAygCCCICIAFBA3YiBEEDdEGwCGpGGiACIAMoAgwiAUYEQEGICEGICCgCAEF+IAR3cTYCAAwDCyACIAE2AgwgASACNgIIDAILIAMoAhghBgJAIAMgAygCDCIBRwRAIAMoAggiAiABNgIMIAEgAjYCCAwBCwJAIANBFGoiAigCACIEDQAgA0EQaiICKAIAIgQNAEEAIQEMAQsDQCACIQcgBCIBQRRqIgIoAgAiBA0AIAFBEGohAiABKAIQIgQNAAsgB0EANgIACyAGRQ0BAkAgAyADKAIcIgJBAnRBuApqIgQoAgBGBEAgBCABNgIAIAENAUGMCEGMCCgCAEF+IAJ3cTYCAAwDCyAGQRBBFCAGKAIQIANGG2ogATYCACABRQ0CCyABIAY2AhggAygCECICBEAgASACNgIQIAIgATYCGAsgAygCFCICRQ0BIAEgAjYCFCACIAE2AhgMAQsgBSgCBCIBQQNxQQNHDQBBkAggADYCACAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAA8LIAMgBU8NACAFKAIEIgFBAXFFDQACQCABQQJxRQRAIAVBoAgoAgBGBEBBoAggAzYCAEGUCEGUCCgCACAAaiIANgIAIAMgAEEBcjYCBCADQZwIKAIARw0DQZAIQQA2AgBBnAhBADYCAA8LIAVBnAgoAgBGBEBBnAggAzYCAEGQCEGQCCgCACAAaiIANgIAIAMgAEEBcjYCBCAAIANqIAA2AgAPCyABQXhxIABqIQACQCABQf8BTQRAIAUoAggiAiABQQN2IgRBA3RBsAhqRhogAiAFKAIMIgFGBEBBiAhBiAgoAgBBfiAEd3E2AgAMAgsgAiABNgIMIAEgAjYCCAwBCyAFKAIYIQYCQCAFIAUoAgwiAUcEQCAFKAIIIgJBmAgoAgBJGiACIAE2AgwgASACNgIIDAELAkAgBUEUaiICKAIAIgQNACAFQRBqIgIoAgAiBA0AQQAhAQwBCwNAIAIhByAEIgFBFGoiAigCACIEDQAgAUEQaiECIAEoAhAiBA0ACyAHQQA2AgALIAZFDQACQCAFIAUoAhwiAkECdEG4CmoiBCgCAEYEQCAEIAE2AgAgAQ0BQYwIQYwIKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiABNgIAIAFFDQELIAEgBjYCGCAFKAIQIgIEQCABIAI2AhAgAiABNgIYCyAFKAIUIgJFDQAgASACNgIUIAIgATYCGAsgAyAAQQFyNgIEIAAgA2ogADYCACADQZwIKAIARw0BQZAIIAA2AgAPCyAFIAFBfnE2AgQgAyAAQQFyNgIEIAAgA2ogADYCAAsgAEH/AU0EQCAAQQN2IgFBA3RBsAhqIQACf0GICCgCACICQQEgAXQiAXFFBEBBiAggASACcjYCACAADAELIAAoAggLIQIgACADNgIIIAIgAzYCDCADIAA2AgwgAyACNgIIDwtBHyECIANCADcCECAAQf///wdNBEAgAEEIdiIBIAFBgP4/akEQdkEIcSIBdCICIAJBgOAfakEQdkEEcSICdCIEIARBgIAPakEQdkECcSIEdEEPdiABIAJyIARyayIBQQF0IAAgAUEVanZBAXFyQRxqIQILIAMgAjYCHCACQQJ0QbgKaiEBAkACQAJAQYwIKAIAIgRBASACdCIHcUUEQEGMCCAEIAdyNgIAIAEgAzYCACADIAE2AhgMAQsgAEEAQRkgAkEBdmsgAkEfRht0IQIgASgCACEBA0AgASIEKAIEQXhxIABGDQIgAkEddiEBIAJBAXQhAiAEIAFBBHFqIgdBEGooAgAiAQ0ACyAHIAM2AhAgAyAENgIYCyADIAM2AgwgAyADNgIIDAELIAQoAggiACADNgIMIAQgAzYCCCADQQA2AhggAyAENgIMIAMgADYCCAtBqAhBqAgoAgBBAWsiAEF/IAAbNgIACwsLCQEAQYEICwIGUA==",!g.startsWith(x)){var S=g;g=s.locateFile?s.locateFile(S,d):d+S}function U(){var H=g;try{if(H==g&&P)return new Uint8Array(P);var q=Se(H);if(q)return q;if(y)return y(H);throw"both async and sync fetching of the wasm failed"}catch(D){B(D)}}function pe(){if(!P&&(u||l)){if(typeof fetch=="function"&&!g.startsWith("file://"))return fetch(g,{credentials:"same-origin"}).then(function(H){if(!H.ok)throw"failed to load wasm binary file at '"+g+"'";return H.arrayBuffer()}).catch(function(){return U()});if(_)return new Promise(function(H,q){_(g,function(D){H(new Uint8Array(D))},q)})}return Promise.resolve().then(function(){return U()})}function me(H){for(;0<H.length;){var q=H.shift();if(typeof q=="function")q(s);else{var D=q.m;typeof D=="number"?q.l===void 0?Z.get(D)():Z.get(D)(q.l):D(q.l===void 0?null:q.l)}}}var Ie=typeof atob=="function"?atob:function(H){var q="",D=0;H=H.replace(/[^A-Za-z0-9\+\/=]/g,"");do{var ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(H.charAt(D++)),ce="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(H.charAt(D++)),le="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(H.charAt(D++)),xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(H.charAt(D++));ee=ee<<2|ce>>4,ce=(ce&15)<<4|le>>2;var Je=(le&3)<<6|xe;q+=String.fromCharCode(ee),le!==64&&(q+=String.fromCharCode(ce)),xe!==64&&(q+=String.fromCharCode(Je))}while(D<H.length);return q};function Se(H){if(H.startsWith(x)){if(H=H.slice(x.length),typeof h=="boolean"&&h){var q=Buffer.from(H,"base64");q=new Uint8Array(q.buffer,q.byteOffset,q.byteLength)}else try{var D=Ie(H),ee=new Uint8Array(D.length);for(H=0;H<D.length;++H)ee[H]=D.charCodeAt(H);q=ee}catch{throw Error("Converting base64 string to bytes failed.")}return q}}var w={a:function(H){var q=ue.length;if(H>>>=0,2147483648<H)return!1;for(var D=1;4>=D;D*=2){var ee=q*(1+.2/D);ee=Math.min(ee,H+100663296),ee=Math.max(H,ee),0<ee%65536&&(ee+=65536-ee%65536);e:{try{Q.grow(Math.min(2147483648,ee)-se.byteLength+65535>>>16),Y();var ce=1;break e}catch{}ce=void 0}if(ce)return!0}return!1}};(function(){function H(ce){s.asm=ce.exports,Q=s.asm.b,Y(),Z=s.asm.j,oe.unshift(s.asm.c),C--,s.monitorRunDependencies&&s.monitorRunDependencies(C),C==0&&v&&(ce=v,v=null,ce())}function q(ce){H(ce.instance)}function D(ce){return pe().then(function(le){return WebAssembly.instantiate(le,ee)}).then(ce,function(le){R("failed to asynchronously prepare wasm: "+le),B(le)})}var ee={a:w};if(C++,s.monitorRunDependencies&&s.monitorRunDependencies(C),s.instantiateWasm)try{return s.instantiateWasm(ee,H)}catch(ce){return R("Module.instantiateWasm callback failed with error: "+ce),!1}return function(){return P||typeof WebAssembly.instantiateStreaming!="function"||g.startsWith(x)||g.startsWith("file://")||typeof fetch!="function"?D(q):fetch(g,{credentials:"same-origin"}).then(function(ce){return WebAssembly.instantiateStreaming(ce,ee).then(q,function(le){return R("wasm streaming compile failed: "+le),R("falling back to ArrayBuffer instantiation"),D(q)})})}().catch(a),{}})(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm.c).apply(null,arguments)},s._poly1305_auth=function(){return(s._poly1305_auth=s.asm.d).apply(null,arguments)};var b=s.stackSave=function(){return(b=s.stackSave=s.asm.e).apply(null,arguments)},A=s.stackRestore=function(){return(A=s.stackRestore=s.asm.f).apply(null,arguments)},T=s.stackAlloc=function(){return(T=s.stackAlloc=s.asm.g).apply(null,arguments)};s._malloc=function(){return(s._malloc=s.asm.h).apply(null,arguments)},s._free=function(){return(s._free=s.asm.i).apply(null,arguments)},s.cwrap=function(H,q,D,ee){D=D||[];var ce=D.every(function(le){return le==="number"});return q!=="string"&&ce&&!ee?M(H):function(){return F(H,q,D,arguments)}};var V;v=function H(){V||G(),V||(v=H)};function G(){function H(){if(!V&&(V=!0,s.calledRun=!0,!z)){if(me(oe),o(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),s.postRun)for(typeof s.postRun=="function"&&(s.postRun=[s.postRun]);s.postRun.length;){var q=s.postRun.shift();O.unshift(q)}me(O)}}if(!(0<C)){if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)j();me(ie),0<C||(s.setStatus?(s.setStatus("Running..."),setTimeout(function(){setTimeout(function(){s.setStatus("")},1),H()},1)):H())}}if(s.run=G,s.preInit)for(typeof s.preInit=="function"&&(s.preInit=[s.preInit]);0<s.preInit.length;)s.preInit.pop()();return G(),i.ready}}();t.exports=r}(Ga)),Ga.exports}var Va,xd;function hi(){if(xd)return Va;xd=1;const{createCipheriv:t,createDecipheriv:e,createHmac:r,randomFillSync:n,timingSafeEqual:i}=Kn,{readUInt32BE:s,writeUInt32BE:o}=dn(),a=Buffer[Symbol.species],c=2**32-1,f=Buffer.alloc(0),u=Buffer.alloc(4),l=new Map,h=35e3;let d,m,_,y,E,I,R;try{d=require("./crypto/build/Release/sshcrypto.node"),{AESGCMCipher:m,ChaChaPolyCipher:_,GenericCipher:y,AESGCMDecipher:E,ChaChaPolyDecipher:I,GenericDecipher:R}=d}catch{}const P=1,Q=(()=>{function w(b,A,T,V,G,H,q){return{sslName:b,blockLen:A,keyLen:T,ivLen:V!==0||q&P?V:A,authLen:G,discardLen:H,stream:!!(q&P)}}return{"chacha20-poly1305@openssh.com":w("chacha20",8,64,0,16,0,P),"aes128-gcm":w("aes-128-gcm",16,16,12,16,0,P),"aes256-gcm":w("aes-256-gcm",16,32,12,16,0,P),"aes128-gcm@openssh.com":w("aes-128-gcm",16,16,12,16,0,P),"aes256-gcm@openssh.com":w("aes-256-gcm",16,32,12,16,0,P),"aes128-cbc":w("aes-128-cbc",16,16,0,0,0,0),"aes192-cbc":w("aes-192-cbc",16,24,0,0,0,0),"aes256-cbc":w("aes-256-cbc",16,32,0,0,0,0),"rijndael-cbc@lysator.liu.se":w("aes-256-cbc",16,32,0,0,0,0),"3des-cbc":w("des-ede3-cbc",8,24,0,0,0,0),"blowfish-cbc":w("bf-cbc",8,16,0,0,0,0),"idea-cbc":w("idea-cbc",8,16,0,0,0,0),"cast128-cbc":w("cast-cbc",8,16,0,0,0,0),"aes128-ctr":w("aes-128-ctr",16,16,16,0,0,P),"aes192-ctr":w("aes-192-ctr",16,24,16,0,0,P),"aes256-ctr":w("aes-256-ctr",16,32,16,0,0,P),"3des-ctr":w("des-ede3",8,24,8,0,0,P),"blowfish-ctr":w("bf-ecb",8,16,8,0,0,P),"cast128-ctr":w("cast5-ecb",8,16,8,0,0,P),arcfour:w("rc4",8,16,0,0,1536,P),arcfour128:w("rc4",8,16,0,0,1536,P),arcfour256:w("rc4",8,32,0,0,1536,P),arcfour512:w("rc4",8,64,0,0,1536,P)}})(),z=(()=>{function w(b,A,T,V){return{sslName:b,len:A,actualLen:T,isETM:V}}return{"hmac-md5":w("md5",16,16,!1),"hmac-md5-96":w("md5",16,12,!1),"hmac-ripemd160":w("ripemd160",20,20,!1),"hmac-sha1":w("sha1",20,20,!1),"hmac-sha1-etm@openssh.com":w("sha1",20,20,!0),"hmac-sha1-96":w("sha1",20,12,!1),"hmac-sha2-256":w("sha256",32,32,!1),"hmac-sha2-256-etm@openssh.com":w("sha256",32,32,!0),"hmac-sha2-256-96":w("sha256",32,12,!1),"hmac-sha2-512":w("sha512",64,64,!1),"hmac-sha2-512-etm@openssh.com":w("sha512",64,64,!0),"hmac-sha2-512-96":w("sha512",64,12,!1)}})();class X{constructor(b,A){this.outSeqno=b,this._onWrite=A,this._dead=!1}free(){this._dead=!0}allocPacket(b){let A=5+b,T=8-(A&7);T<4&&(T+=8),A+=T;const V=Buffer.allocUnsafe(A);return o(V,A-4,0),V[4]=T,n(V,5+b,T),V}encrypt(b){this._dead||(this._onWrite(b),this.outSeqno=this.outSeqno+1>>>0)}}const M=Buffer.alloc(32),F=Buffer.alloc(16);let K,se,J;class ue{constructor(b){const A=b.outbound;this.outSeqno=A.seqno,this._onWrite=A.onWrite,this._encKeyMain=A.cipherKey.slice(0,32),this._encKeyPktLen=A.cipherKey.slice(32),this._dead=!1}free(){this._dead=!0}allocPacket(b){let A=5+b,T=8-(A-4&7);T<4&&(T+=8),A+=T;const V=Buffer.allocUnsafe(A);return o(V,A-4,0),V[4]=T,n(V,5+b,T),V}encrypt(b){if(this._dead)return;F[0]=0,o(F,this.outSeqno,12);const A=t("chacha20",this._encKeyMain,F).update(M),T=t("chacha20",this._encKeyPktLen,F).update(b.slice(0,4));this._onWrite(T),F[0]=1;const V=t("chacha20",this._encKeyMain,F).update(b.slice(4));this._onWrite(V),J(se,T,T.length,V,V.length,A);const G=Buffer.allocUnsafe(16);G.set(new Uint8Array(K.HEAPU8.buffer,se,16),0),this._onWrite(G),this.outSeqno=this.outSeqno+1>>>0}}class Y{constructor(b){const A=b.outbound;this.outSeqno=A.seqno,this._onWrite=A.onWrite,this._instance=new _(A.cipherKey),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(b){let A=5+b,T=8-(A-4&7);T<4&&(T+=8),A+=T;const V=Buffer.allocUnsafe(A+16);return o(V,A-4,0),V[4]=T,n(V,5+b,T),V}encrypt(b){this._dead||(this._instance.encrypt(b,this.outSeqno),this._onWrite(b),this.outSeqno=this.outSeqno+1>>>0)}}class Z{constructor(b){const A=b.outbound;this.outSeqno=A.seqno,this._onWrite=A.onWrite,this._encSSLName=A.cipherInfo.sslName,this._encKey=A.cipherKey,this._encIV=A.cipherIV,this._dead=!1}free(){this._dead=!0}allocPacket(b){let A=5+b,T=16-(A-4&15);T<4&&(T+=16),A+=T;const V=Buffer.allocUnsafe(A);return o(V,A-4,0),V[4]=T,n(V,5+b,T),V}encrypt(b){if(this._dead)return;const A=t(this._encSSLName,this._encKey,this._encIV);A.setAutoPadding(!1);const T=b.slice(0,4);A.setAAD(T),this._onWrite(T);const V=A.update(b.slice(4));this._onWrite(V);const G=A.final();G.length&&this._onWrite(G);const H=A.getAuthTag();this._onWrite(H),U(this._encIV),this.outSeqno=this.outSeqno+1>>>0}}class ie{constructor(b){const A=b.outbound;this.outSeqno=A.seqno,this._onWrite=A.onWrite,this._instance=new m(A.cipherInfo.sslName,A.cipherKey,A.cipherIV),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(b){let A=5+b,T=16-(A-4&15);T<4&&(T+=16),A+=T;const V=Buffer.allocUnsafe(A+16);return o(V,A-4,0),V[4]=T,n(V,5+b,T),V}encrypt(b){this._dead||(this._instance.encrypt(b),this._onWrite(b),this.outSeqno=this.outSeqno+1>>>0)}}class oe{constructor(b){const A=b.outbound;this.outSeqno=A.seqno,this._onWrite=A.onWrite,this._encBlockLen=A.cipherInfo.blockLen,this._cipherInstance=t(A.cipherInfo.sslName,A.cipherKey,A.cipherIV),this._macSSLName=A.macInfo.sslName,this._macKey=A.macKey,this._macActualLen=A.macInfo.actualLen,this._macETM=A.macInfo.isETM,this._aadLen=this._macETM?4:0,this._dead=!1;const T=A.cipherInfo.discardLen;if(T){let V=l.get(T);V===void 0&&(V=Buffer.alloc(T),l.set(T,V)),this._cipherInstance.update(V)}}free(){this._dead=!0}allocPacket(b){const A=this._encBlockLen;let T=5+b,V=A-(T-this._aadLen&A-1);V<4&&(V+=A),T+=V;const G=Buffer.allocUnsafe(T);return o(G,T-4,0),G[4]=V,n(G,5+b,V),G}encrypt(b){if(this._dead)return;let A;if(this._macETM){const V=new Uint8Array(b.buffer,b.byteOffset,4),G=this._cipherInstance.update(new Uint8Array(b.buffer,b.byteOffset+4,b.length-4));this._onWrite(V),this._onWrite(G),A=r(this._macSSLName,this._macKey),o(u,this.outSeqno,0),A.update(u),A.update(V),A.update(G)}else{const V=this._cipherInstance.update(b);this._onWrite(V),A=r(this._macSSLName,this._macKey),o(u,this.outSeqno,0),A.update(u),A.update(b)}let T=A.digest();T.length>this._macActualLen&&(T=T.slice(0,this._macActualLen)),this._onWrite(T),this.outSeqno=this.outSeqno+1>>>0}}class O{constructor(b){const A=b.outbound;this.outSeqno=A.seqno,this._onWrite=A.onWrite,this._encBlockLen=A.cipherInfo.blockLen,this._macLen=A.macInfo.len,this._macActualLen=A.macInfo.actualLen,this._aadLen=A.macInfo.isETM?4:0,this._instance=new y(A.cipherInfo.sslName,A.cipherKey,A.cipherIV,A.macInfo.sslName,A.macKey,A.macInfo.isETM),this._dead=!1}free(){this._dead=!0,this._instance.free()}allocPacket(b){const A=this._encBlockLen;let T=5+b,V=A-(T-this._aadLen&A-1);V<4&&(V+=A),T+=V;const G=Buffer.allocUnsafe(T+this._macLen);return o(G,T-4,0),G[4]=V,n(G,5+b,V),G}encrypt(b){this._dead||(this._instance.encrypt(b,this.outSeqno),this._macActualLen<this._macLen&&(b=new a(b.buffer,b.byteOffset,b.length-(this._macLen-this._macActualLen))),this._onWrite(b),this.outSeqno=this.outSeqno+1>>>0)}}class j{constructor(b,A){this.inSeqno=b,this._onPayload=A,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0}free(){}decrypt(b,A,T){for(;A<T;){if(this._lenBytes<4){let G=Math.min(4-this._lenBytes,T-A);for(this._lenBytes+=G;G--;)this._len=(this._len<<8)+b[A++];if(this._lenBytes<4)return;if(this._len>h||this._len<8||4+this._len&7)throw new Error("Bad packet length");if(A>=T)return}if(this._packetPos<this._len){const G=Math.min(this._len-this._packetPos,T-A);let H;if(A!==0||G!==T?H=new Uint8Array(b.buffer,b.byteOffset+A,G):H=b,G===this._len?this._packet=H:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(H,this._packetPos)),A+=G,this._packetPos+=G,this._packetPos<this._len)return}const V=this._packet?new a(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1):f;this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0;{const G=this._onPayload(V);if(G!==void 0)return G===!1?A:G}}}}class C{constructor(b){const A=b.inbound;this.inSeqno=A.seqno,this._onPayload=A.onPayload,this._decKeyMain=A.decipherKey.slice(0,32),this._decKeyPktLen=A.decipherKey.slice(32),this._len=0,this._lenBuf=Buffer.alloc(4),this._lenPos=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(16),this._calcMac=Buffer.allocUnsafe(16),this._macPos=0}free(){}decrypt(b,A,T){for(;A<T;){if(this._lenPos<4){let q=Math.min(4-this._lenPos,T-A);for(;q--;)this._lenBuf[this._lenPos++]=b[A++];if(this._lenPos<4)return;F[0]=0,o(F,this.inSeqno,12);const D=e("chacha20",this._decKeyPktLen,F).update(this._lenBuf);if(this._len=s(D,0),this._len>h||this._len<8||this._len&7)throw new Error("Bad packet length")}if(this._pktLen<this._len){if(A>=T)return;const q=Math.min(this._len-this._pktLen,T-A);let D;if(A!==0||q!==T?D=new Uint8Array(b.buffer,b.byteOffset+A,q):D=b,q===this._len?this._packet=D:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(D,this._pktLen)),A+=q,this._pktLen+=q,this._pktLen<this._len||A>=T)return}{const q=Math.min(16-this._macPos,T-A);if(A!==0||q!==T?this._mac.set(new Uint8Array(b.buffer,b.byteOffset+A,q),this._macPos):this._mac.set(b,this._macPos),A+=q,this._macPos+=q,this._macPos<16)return}F[0]=0,o(F,this.inSeqno,12);const V=t("chacha20",this._decKeyMain,F).update(M);if(J(se,this._lenBuf,4,this._packet,this._packet.length,V),this._calcMac.set(new Uint8Array(K.HEAPU8.buffer,se,16),0),!i(this._calcMac,this._mac))throw new Error("Invalid MAC");F[0]=1;const G=e("chacha20",this._decKeyMain,F).update(this._packet),H=new a(G.buffer,G.byteOffset+1,G.length-G[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenPos=0,this._packet=null,this._pktLen=0,this._macPos=0;{const q=this._onPayload(H);if(q!==void 0)return q===!1?A:q}}}}class v{constructor(b){const A=b.inbound;this.inSeqno=A.seqno,this._onPayload=A.onPayload,this._instance=new I(A.decipherKey),this._len=0,this._lenBuf=Buffer.alloc(4),this._lenPos=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(16),this._macPos=0}free(){this._instance.free()}decrypt(b,A,T){for(;A<T;){if(this._lenPos<4){let G=Math.min(4-this._lenPos,T-A);for(;G--;)this._lenBuf[this._lenPos++]=b[A++];if(this._lenPos<4)return;if(this._len=this._instance.decryptLen(this._lenBuf,this.inSeqno),this._len>h||this._len<8||this._len&7)throw new Error("Bad packet length");if(A>=T)return}if(this._pktLen<this._len){const G=Math.min(this._len-this._pktLen,T-A);let H;if(A!==0||G!==T?H=new Uint8Array(b.buffer,b.byteOffset+A,G):H=b,G===this._len?this._packet=H:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(H,this._pktLen)),A+=G,this._pktLen+=G,this._pktLen<this._len||A>=T)return}{const G=Math.min(16-this._macPos,T-A);if(A!==0||G!==T?this._mac.set(new Uint8Array(b.buffer,b.byteOffset+A,G),this._macPos):this._mac.set(b,this._macPos),A+=G,this._macPos+=G,this._macPos<16)return}this._instance.decrypt(this._packet,this._mac,this.inSeqno);const V=new a(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenPos=0,this._packet=null,this._pktLen=0,this._macPos=0;{const G=this._onPayload(V);if(G!==void 0)return G===!1?A:G}}}}class B{constructor(b){const A=b.inbound;this.inSeqno=A.seqno,this._onPayload=A.onPayload,this._decipherInstance=null,this._decipherSSLName=A.decipherInfo.sslName,this._decipherKey=A.decipherKey,this._decipherIV=A.decipherIV,this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._tag=Buffer.allocUnsafe(16),this._tagPos=0}free(){}decrypt(b,A,T){for(;A<T;){if(this._lenBytes<4){let G=Math.min(4-this._lenBytes,T-A);for(this._lenBytes+=G;G--;)this._len=(this._len<<8)+b[A++];if(this._lenBytes<4)return;if(this._len+20>h||this._len<16||this._len&15)throw new Error("Bad packet length");this._decipherInstance=e(this._decipherSSLName,this._decipherKey,this._decipherIV),this._decipherInstance.setAutoPadding(!1),this._decipherInstance.setAAD(pe(this._len))}if(this._pktLen<this._len){if(A>=T)return;const G=Math.min(this._len-this._pktLen,T-A);let H;if(A!==0||G!==T?H=this._decipherInstance.update(new Uint8Array(b.buffer,b.byteOffset+A,G)):H=this._decipherInstance.update(b),H.length&&(G===this._len?this._packet=H:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(H,this._packetPos)),this._packetPos+=H.length),A+=G,this._pktLen+=G,this._pktLen<this._len||A>=T)return}{const G=Math.min(16-this._tagPos,T-A);if(A!==0||G!==T?this._tag.set(new Uint8Array(b.buffer,b.byteOffset+A,G),this._tagPos):this._tag.set(b,this._tagPos),A+=G,this._tagPos+=G,this._tagPos<16)return}{this._decipherInstance.setAuthTag(this._tag);const G=this._decipherInstance.final();G.length&&(this._packet?this._packet.set(G,this._packetPos):this._packet=G)}const V=this._packet?new a(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1):f;this.inSeqno=this.inSeqno+1>>>0,U(this._decipherIV),this._len=0,this._lenBytes=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._tagPos=0;{const G=this._onPayload(V);if(G!==void 0)return G===!1?A:G}}}}class x{constructor(b){const A=b.inbound;this.inSeqno=A.seqno,this._onPayload=A.onPayload,this._instance=new E(A.decipherInfo.sslName,A.decipherKey,A.decipherIV),this._len=0,this._lenBytes=0,this._packet=null,this._pktLen=0,this._tag=Buffer.allocUnsafe(16),this._tagPos=0}free(){}decrypt(b,A,T){for(;A<T;){if(this._lenBytes<4){let G=Math.min(4-this._lenBytes,T-A);for(this._lenBytes+=G;G--;)this._len=(this._len<<8)+b[A++];if(this._lenBytes<4)return;if(this._len+20>h||this._len<16||this._len&15)throw new Error(`Bad packet length: ${this._len}`)}if(this._pktLen<this._len){if(A>=T)return;const G=Math.min(this._len-this._pktLen,T-A);let H;if(A!==0||G!==T?H=new Uint8Array(b.buffer,b.byteOffset+A,G):H=b,G===this._len?this._packet=H:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(H,this._pktLen)),A+=G,this._pktLen+=G,this._pktLen<this._len||A>=T)return}{const G=Math.min(16-this._tagPos,T-A);if(A!==0||G!==T?this._tag.set(new Uint8Array(b.buffer,b.byteOffset+A,G),this._tagPos):this._tag.set(b,this._tagPos),A+=G,this._tagPos+=G,this._tagPos<16)return}this._instance.decrypt(this._packet,this._len,this._tag);const V=new a(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._len=0,this._lenBytes=0,this._packet=null,this._pktLen=0,this._tagPos=0;{const G=this._onPayload(V);if(G!==void 0)return G===!1?A:G}}}}class g{constructor(b){const A=b.inbound;this.inSeqno=A.seqno,this._onPayload=A.onPayload,this._decipherInstance=e(A.decipherInfo.sslName,A.decipherKey,A.decipherIV),this._decipherInstance.setAutoPadding(!1),this._block=Buffer.allocUnsafe(A.macInfo.isETM?4:A.decipherInfo.blockLen),this._blockSize=A.decipherInfo.blockLen,this._blockPos=0,this._len=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._mac=Buffer.allocUnsafe(A.macInfo.actualLen),this._macPos=0,this._macSSLName=A.macInfo.sslName,this._macKey=A.macKey,this._macActualLen=A.macInfo.actualLen,this._macETM=A.macInfo.isETM,this._macInstance=null;const T=A.decipherInfo.discardLen;if(T){let V=l.get(T);V===void 0&&(V=Buffer.alloc(T),l.set(T,V)),this._decipherInstance.update(V)}}free(){}decrypt(b,A,T){for(;A<T;){if(this._blockPos<this._block.length){const H=Math.min(this._block.length-this._blockPos,T-A);if(A!==0||H!==T||H<b.length?this._block.set(new Uint8Array(b.buffer,b.byteOffset+A,H),this._blockPos):this._block.set(b,this._blockPos),A+=H,this._blockPos+=H,this._blockPos<this._block.length)return;let q,D;if(this._macETM?this._len=D=s(this._block,0):(q=this._decipherInstance.update(this._block),this._len=s(q,0),D=4+this._len-this._blockSize),this._len>h||this._len<5||D&this._blockSize-1)throw new Error("Bad packet length");if(this._macInstance=r(this._macSSLName,this._macKey),o(u,this.inSeqno,0),this._macInstance.update(u),this._macETM?this._macInstance.update(this._block):(this._macInstance.update(new Uint8Array(q.buffer,q.byteOffset,4)),this._pktLen=q.length-4,this._packetPos=this._pktLen,this._packet=Buffer.allocUnsafe(this._len),this._packet.set(new Uint8Array(q.buffer,q.byteOffset+4,this._packetPos),0)),A>=T)return}if(this._pktLen<this._len){const H=Math.min(this._len-this._pktLen,T-A);let q;A!==0||H!==T?q=new Uint8Array(b.buffer,b.byteOffset+A,H):q=b,this._macETM&&this._macInstance.update(q);const D=this._decipherInstance.update(q);if(D.length&&(H===this._len?this._packet=D:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(D,this._packetPos)),this._packetPos+=D.length),A+=H,this._pktLen+=H,this._pktLen<this._len||A>=T)return}{const H=Math.min(this._macActualLen-this._macPos,T-A);if(A!==0||H!==T?this._mac.set(new Uint8Array(b.buffer,b.byteOffset+A,H),this._macPos):this._mac.set(b,this._macPos),A+=H,this._macPos+=H,this._macPos<this._macActualLen)return}this._macETM||this._macInstance.update(this._packet);let V=this._macInstance.digest();if(this._macActualLen<V.length&&(V=new Uint8Array(V.buffer,V.byteOffset,this._macActualLen)),!me(V,this._mac))throw new Error("Invalid MAC");const G=new a(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._blockPos=0,this._len=0,this._packet=null,this._packetPos=0,this._pktLen=0,this._macPos=0,this._macInstance=null;{const H=this._onPayload(G);if(H!==void 0)return H===!1?A:H}}}}class S{constructor(b){const A=b.inbound;this.inSeqno=A.seqno,this._onPayload=A.onPayload,this._instance=new R(A.decipherInfo.sslName,A.decipherKey,A.decipherIV,A.macInfo.sslName,A.macKey,A.macInfo.isETM,A.macInfo.actualLen),this._block=Buffer.allocUnsafe(A.macInfo.isETM||A.decipherInfo.stream?4:A.decipherInfo.blockLen),this._blockPos=0,this._len=0,this._packet=null,this._pktLen=0,this._mac=Buffer.allocUnsafe(A.macInfo.actualLen),this._macPos=0,this._macActualLen=A.macInfo.actualLen,this._macETM=A.macInfo.isETM}free(){this._instance.free()}decrypt(b,A,T){for(;A<T;){if(this._blockPos<this._block.length){const G=Math.min(this._block.length-this._blockPos,T-A);if(A!==0||G!==T||G<b.length?this._block.set(new Uint8Array(b.buffer,b.byteOffset+A,G),this._blockPos):this._block.set(b,this._blockPos),A+=G,this._blockPos+=G,this._blockPos<this._block.length)return;let H;if(this._macETM?this._len=H=s(this._block,0):(this._instance.decryptBlock(this._block),this._len=s(this._block,0),H=4+this._len-this._block.length),this._len>h||this._len<5||H&this._block.length-1)throw new Error("Bad packet length");if(this._macETM||(this._pktLen=this._block.length-4,this._pktLen&&(this._packet=Buffer.allocUnsafe(this._len),this._packet.set(new Uint8Array(this._block.buffer,this._block.byteOffset+4,this._pktLen),0))),A>=T)return}if(this._pktLen<this._len){const G=Math.min(this._len-this._pktLen,T-A);let H;if(A!==0||G!==T?H=new Uint8Array(b.buffer,b.byteOffset+A,G):H=b,G===this._len?this._packet=H:(this._packet||(this._packet=Buffer.allocUnsafe(this._len)),this._packet.set(H,this._pktLen)),A+=G,this._pktLen+=G,this._pktLen<this._len||A>=T)return}{const G=Math.min(this._macActualLen-this._macPos,T-A);if(A!==0||G!==T?this._mac.set(new Uint8Array(b.buffer,b.byteOffset+A,G),this._macPos):this._mac.set(b,this._macPos),A+=G,this._macPos+=G,this._macPos<this._macActualLen)return}this._instance.decrypt(this._packet,this.inSeqno,this._block,this._mac);const V=new a(this._packet.buffer,this._packet.byteOffset+1,this._packet.length-this._packet[0]-1);this.inSeqno=this.inSeqno+1>>>0,this._blockPos=0,this._len=0,this._packet=null,this._pktLen=0,this._macPos=0,this._macInstance=null;{const G=this._onPayload(V);if(G!==void 0)return G===!1?A:G}}}}function U(w){++w[11]>>>8&&++w[10]>>>8&&++w[9]>>>8&&++w[8]>>>8&&++w[7]>>>8&&++w[6]>>>8&&++w[5]>>>8&&++w[4]>>>8}const pe=(()=>{const w=Buffer.alloc(4);return b=>(w[0]=b>>>24,w[1]=b>>>16,w[2]=b>>>8,w[3]=b,w)})();function me(w,b){return w.length!==b.length?(i(w,w),!1):i(w,b)}function Ie(w){if(typeof w!="object"||w===null)throw new Error("Invalid config");if(typeof w.outbound!="object"||w.outbound===null)throw new Error("Invalid outbound");const b=w.outbound;if(typeof b.onWrite!="function")throw new Error("Invalid outbound.onWrite");if(typeof b.cipherInfo!="object"||b.cipherInfo===null)throw new Error("Invalid outbound.cipherInfo");if(!Buffer.isBuffer(b.cipherKey)||b.cipherKey.length!==b.cipherInfo.keyLen)throw new Error("Invalid outbound.cipherKey");if(b.cipherInfo.ivLen&&(!Buffer.isBuffer(b.cipherIV)||b.cipherIV.length!==b.cipherInfo.ivLen))throw new Error("Invalid outbound.cipherIV");if(typeof b.seqno!="number"||b.seqno<0||b.seqno>c)throw new Error("Invalid outbound.seqno");const A=!!b.forceNative;switch(b.cipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return m&&!A?new ie(w):new Z(w);case"chacha20":return _&&!A?new Y(w):new ue(w);default:{if(typeof b.macInfo!="object"||b.macInfo===null)throw new Error("Invalid outbound.macInfo");if(!Buffer.isBuffer(b.macKey)||b.macKey.length!==b.macInfo.len)throw new Error("Invalid outbound.macKey");return y&&!A?new O(w):new oe(w)}}}function Se(w){if(typeof w!="object"||w===null)throw new Error("Invalid config");if(typeof w.inbound!="object"||w.inbound===null)throw new Error("Invalid inbound");const b=w.inbound;if(typeof b.onPayload!="function")throw new Error("Invalid inbound.onPayload");if(typeof b.decipherInfo!="object"||b.decipherInfo===null)throw new Error("Invalid inbound.decipherInfo");if(!Buffer.isBuffer(b.decipherKey)||b.decipherKey.length!==b.decipherInfo.keyLen)throw new Error("Invalid inbound.decipherKey");if(b.decipherInfo.ivLen&&(!Buffer.isBuffer(b.decipherIV)||b.decipherIV.length!==b.decipherInfo.ivLen))throw new Error("Invalid inbound.decipherIV");if(typeof b.seqno!="number"||b.seqno<0||b.seqno>c)throw new Error("Invalid inbound.seqno");const A=!!b.forceNative;switch(b.decipherInfo.sslName){case"aes-128-gcm":case"aes-256-gcm":return E&&!A?new x(w):new B(w);case"chacha20":return I&&!A?new v(w):new C(w);default:{if(typeof b.macInfo!="object"||b.macInfo===null)throw new Error("Invalid inbound.macInfo");if(!Buffer.isBuffer(b.macKey)||b.macKey.length!==b.macInfo.len)throw new Error("Invalid inbound.macKey");return R&&!A?new S(w):new g(w)}}}return Va={CIPHER_INFO:Q,MAC_INFO:z,bindingAvailable:!!d,init:new Promise(async(w,b)=>{try{K=await zv()(),se=K._malloc(16),J=K.cwrap("poly1305_auth",null,["number","array","number","array","number","array"])}catch(A){return b(A)}w()}),NullCipher:X,createCipher:Ie,NullDecipher:j,createDecipher:Se},Va}const{createDecipheriv:Hu,createECDH:Xv,createHash:ws,createHmac:Jv,createSign:Zv,createVerify:e$,getCiphers:t$,sign:Rd,verify:Nd}=Kn,r$=t$(),{Ber:Ke}=Aa,n$=l0.pbkdf,{CIPHER_INFO:Ss}=hi(),{eddsaSupported:ju,SUPPORTED_CIPHER:i$}=Wn(),{bufferSlice:oi,makeBufferParser:s$,readString:Qe,readUInt32BE:ls,writeUInt32BE:rr}=dn(),Sn=Symbol("Hash Algorithm"),Yr=Symbol("Private key PEM"),an=Symbol("Public key PEM"),Qn=Symbol("Public key SSH"),Yi=Symbol("Decrypted Key"),Nc=Object.create(null);{const t=Object.keys(Ss);for(let e=0;e<t.length;++e){const r=Ss[t[e]].sslName;!r||Nc[r]||(Nc[r]=Ss[t[e]])}}const lo=s$();function Zr(t,e){e=e.base64Slice(0,e.length);let r=e.replace(/.{64}/g,`$&
`);return e.length&63&&(r+=`
`),`-----BEGIN ${t} KEY-----
${r}-----END ${t} KEY-----`}function Cs(t,e){const r=Buffer.allocUnsafe(t.length+e.length);return r.set(t,0),r.set(e,t.length),r}function Qu(t,e){const r=t.length;let n=t._pos||0;for(let i=0;i<e;++i){const s=r-n;if(n>=r||s<4)return!1;const o=ls(t,n);if(s<4+o)return!1;n+=4+o}return t._pos=n,!0}function Bs(t,e){const r=new Ke.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.113549.1.1.1"),r.writeNull(),r.endSequence(),r.startSequence(Ke.BitString),r.writeByte(0),r.startSequence(),r.writeBuffer(t,Ke.Integer),r.writeBuffer(e,Ke.Integer),r.endSequence(),r.endSequence(),r.endSequence(),Zr("PUBLIC",r.buffer)}function Os(t,e){const r=Buffer.allocUnsafe(15+e.length+4+t.length);rr(r,7,0),r.utf8Write("ssh-rsa",4,7);let n=11;return rr(r,e.length,n),r.set(e,n+=4),rr(r,t.length,n+=e.length),r.set(t,n+4),r}const d0=(()=>{function t(n,i,s,o,a,c,f,u){const l=new Ke.Writer;return l.startSequence(),l.writeInt(0,Ke.Integer),l.writeBuffer(n,Ke.Integer),l.writeBuffer(i,Ke.Integer),l.writeBuffer(s,Ke.Integer),l.writeBuffer(o,Ke.Integer),l.writeBuffer(a,Ke.Integer),l.writeBuffer(c,Ke.Integer),l.writeBuffer(f,Ke.Integer),l.writeBuffer(u,Ke.Integer),l.endSequence(),l.buffer}function e(n){return BigInt(`0x${n.hexSlice(0,n.length)}`)}function r(n){let i=n.toString(16);if(i.length&1)i=`0${i}`;else{const s=i.charCodeAt(0);(s===56||s===57||s>=97&&s<=102)&&(i=`00${i}`)}return Buffer.from(i,"hex")}return function(i,s,o,a,c,f){const u=e(o),l=r(u%(e(c)-1n)),h=r(u%(e(f)-1n));return Zr("RSA PRIVATE",t(i,s,o,c,f,l,h,a))}})();function Ls(t,e,r,n){const i=new Ke.Writer;return i.startSequence(),i.startSequence(),i.writeOID("1.2.840.10040.4.1"),i.startSequence(),i.writeBuffer(t,Ke.Integer),i.writeBuffer(e,Ke.Integer),i.writeBuffer(r,Ke.Integer),i.endSequence(),i.endSequence(),i.startSequence(Ke.BitString),i.writeByte(0),i.writeBuffer(n,Ke.Integer),i.endSequence(),i.endSequence(),Zr("PUBLIC",i.buffer)}function Ds(t,e,r,n){const i=Buffer.allocUnsafe(15+t.length+4+e.length+4+r.length+4+n.length);rr(i,7,0),i.utf8Write("ssh-dss",4,7);let s=11;return rr(i,t.length,s),i.set(t,s+=4),rr(i,e.length,s+=t.length),i.set(e,s+=4),rr(i,r.length,s+=e.length),i.set(r,s+=4),rr(i,n.length,s+=r.length),i.set(n,s+4),i}function h0(t,e,r,n,i){const s=new Ke.Writer;return s.startSequence(),s.writeInt(0,Ke.Integer),s.writeBuffer(t,Ke.Integer),s.writeBuffer(e,Ke.Integer),s.writeBuffer(r,Ke.Integer),s.writeBuffer(n,Ke.Integer),s.writeBuffer(i,Ke.Integer),s.endSequence(),Zr("DSA PRIVATE",s.buffer)}function p0(t){const e=new Ke.Writer;return e.startSequence(),e.startSequence(),e.writeOID("1.3.101.112"),e.endSequence(),e.startSequence(Ke.BitString),e.writeByte(0),e._ensure(t.length),e._buf.set(t,e._offset),e._offset+=t.length,e.endSequence(),e.endSequence(),Zr("PUBLIC",e.buffer)}function g0(t){const e=Buffer.allocUnsafe(19+t.length);return rr(e,11,0),e.utf8Write("ssh-ed25519",4,11),rr(e,t.length,15),e.set(t,19),e}function o$(t){const e=new Ke.Writer;return e.startSequence(),e.writeInt(0,Ke.Integer),e.startSequence(),e.writeOID("1.3.101.112"),e.endSequence(),e.startSequence(Ke.OctetString),e.writeBuffer(t,Ke.OctetString),e.endSequence(),e.endSequence(),Zr("PRIVATE",e.buffer)}function qu(t,e){const r=new Ke.Writer;return r.startSequence(),r.startSequence(),r.writeOID("1.2.840.10045.2.1"),r.writeOID(t),r.endSequence(),r.startSequence(Ke.BitString),r.writeByte(0),r._ensure(e.length),r._buf.set(e,r._offset),r._offset+=e.length,r.endSequence(),r.endSequence(),Zr("PUBLIC",r.buffer)}function Ku(t,e){let r;switch(t){case"1.2.840.10045.3.1.7":r="nistp256";break;case"1.3.132.0.34":r="nistp384";break;case"1.3.132.0.35":r="nistp521";break;default:return}const n=Buffer.allocUnsafe(39+e.length);return rr(n,19,0),n.utf8Write(`ecdsa-sha2-${r}`,4,19),rr(n,8,23),n.utf8Write(r,27,8),rr(n,e.length,35),n.set(e,39),n}function a$(t,e,r){const n=new Ke.Writer;return n.startSequence(),n.writeInt(1,Ke.Integer),n.writeBuffer(r,Ke.OctetString),n.startSequence(160),n.writeOID(t),n.endSequence(),n.startSequence(161),n.startSequence(Ke.BitString),n.writeByte(0),n._ensure(e.length),n._buf.set(e,n._offset),n._offset+=e.length,n.endSequence(),n.endSequence(),n.endSequence(),Zr("EC PRIVATE",n.buffer)}function c$(t,e){const r=Xv(t);return r.setPrivateKey(e),r.getPublicKey()}const Us={sign:typeof Rd=="function"?function(e,r){const n=this[Yr];if(n===null)return new Error("No private key available");(!r||typeof r!="string")&&(r=this[Sn]);try{return Rd(r,e,n)}catch(i){return i}}:function(e,r){const n=this[Yr];if(n===null)return new Error("No private key available");(!r||typeof r!="string")&&(r=this[Sn]);const i=Zv(r);i.update(e);try{return i.sign(n)}catch(s){return s}},verify:typeof Nd=="function"?function(e,r,n){const i=this[an];if(i===null)return new Error("No public key available");(!n||typeof n!="string")&&(n=this[Sn]);try{return Nd(n,e,i,r)}catch(s){return s}}:function(e,r,n){const i=this[an];if(i===null)return new Error("No public key available");(!n||typeof n!="string")&&(n=this[Sn]);const s=e$(n);s.update(e);try{return s.verify(i,r)}catch(o){return o}},isPrivateKey:function(){return this[Yr]!==null},getPrivatePEM:function(){return this[Yr]},getPublicPEM:function(){return this[an]},getPublicSSH:function(){return this[Qn]},equals:function(e){const r=_0(e);return r instanceof Error?!1:this.type===r.type&&this[Yr]===r[Yr]&&this[an]===r[an]&&this[Qn].equals(r[Qn])}};function Ho(t,e,r,n,i,s,o){this.type=t,this.comment=e,this[Yr]=r,this[an]=n,this[Qn]=i,this[Sn]=s,this[Yi]=o}Ho.prototype=Us;{let e=function(r,n,i){const s=[];if(r.length<8)return new Error("Malformed OpenSSH private key");const o=ls(r,0),a=ls(r,4);if(o!==a)return i?new Error("OpenSSH key integrity check failed -- bad passphrase?"):new Error("OpenSSH key integrity check failed");r._pos=8;let c,f;for(c=0;c<n;++c){let l,h,d,m;const _=Qe(r,r._pos,!0);if(_===void 0)return new Error("Malformed OpenSSH private key");switch(_){case"ssh-rsa":{const E=Qe(r,r._pos);if(E===void 0)return new Error("Malformed OpenSSH private key");const I=Qe(r,r._pos);if(I===void 0)return new Error("Malformed OpenSSH private key");const R=Qe(r,r._pos);if(R===void 0)return new Error("Malformed OpenSSH private key");const P=Qe(r,r._pos);if(P===void 0)return new Error("Malformed OpenSSH private key");const Q=Qe(r,r._pos);if(Q===void 0)return new Error("Malformed OpenSSH private key");const z=Qe(r,r._pos);if(z===void 0)return new Error("Malformed OpenSSH private key");d=Bs(E,I),m=Os(E,I),h=d0(E,I,R,P,Q,z),l="sha1";break}case"ssh-dss":{const E=Qe(r,r._pos);if(E===void 0)return new Error("Malformed OpenSSH private key");const I=Qe(r,r._pos);if(I===void 0)return new Error("Malformed OpenSSH private key");const R=Qe(r,r._pos);if(R===void 0)return new Error("Malformed OpenSSH private key");const P=Qe(r,r._pos);if(P===void 0)return new Error("Malformed OpenSSH private key");const Q=Qe(r,r._pos);if(Q===void 0)return new Error("Malformed OpenSSH private key");d=Ls(E,I,R,P),m=Ds(E,I,R,P),h=h0(E,I,R,P,Q),l="sha1";break}case"ssh-ed25519":{if(!ju)return new Error(`Unsupported OpenSSH private key type: ${_}`);const E=Qe(r,r._pos);if(E===void 0||E.length!==32)return new Error("Malformed OpenSSH private key");const I=Qe(r,r._pos);if(I===void 0||I.length!==64)return new Error("Malformed OpenSSH private key");d=p0(E),m=g0(E),h=o$(oi(I,0,32)),l=null;break}case"ecdsa-sha2-nistp256":l="sha256",f="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":l===void 0&&(l="sha384",f="1.3.132.0.34");case"ecdsa-sha2-nistp521":{if(l===void 0&&(l="sha512",f="1.3.132.0.35"),!Qu(r,1))return new Error("Malformed OpenSSH private key");const E=Qe(r,r._pos);if(E===void 0)return new Error("Malformed OpenSSH private key");const I=Qe(r,r._pos);if(I===void 0)return new Error("Malformed OpenSSH private key");d=qu(f,E),m=Ku(f,E),h=a$(f,E,I);break}default:return new Error(`Unsupported OpenSSH private key type: ${_}`)}const y=Qe(r,r._pos,!0);if(y===void 0)return new Error("Malformed OpenSSH private key");s.push(new Ho(_,y,h,d,m,l,i))}let u=0;for(c=r._pos;c<r.length;++c)if(r[c]!==++u%255)return new Error("Malformed OpenSSH private key");return s};const t=/^-----BEGIN OPENSSH PRIVATE KEY-----(?:\r\n|\n)([\s\S]+)(?:\r\n|\n)-----END OPENSSH PRIVATE KEY-----$/;Ho.parse=(r,n)=>{const i=t.exec(r);if(i===null)return null;let s;const o=Buffer.from(i[1],"base64");if(o.length<31)return new Error("Malformed OpenSSH private key");const a=o.utf8Slice(0,15);if(a!=="openssh-key-v1\0")return new Error(`Unsupported OpenSSH key magic: ${a}`);const c=Qe(o,15,!0);if(c===void 0)return new Error("Malformed OpenSSH private key");if(c!=="none"&&i$.indexOf(c)===-1)return new Error(`Unsupported cipher for OpenSSH key: ${c}`);const f=Qe(o,o._pos,!0);if(f===void 0)return new Error("Malformed OpenSSH private key");if(f!=="none"){if(c==="none")return new Error("Malformed OpenSSH private key");if(f!=="bcrypt")return new Error(`Unsupported kdf name for OpenSSH key: ${f}`);if(!n)return new Error("Encrypted private OpenSSH key detected, but no passphrase given")}else if(c!=="none")return new Error("Malformed OpenSSH private key");let u,l,h;c!=="none"&&(u=Ss[c]);const d=Qe(o,o._pos);if(d===void 0)return new Error("Malformed OpenSSH private key");if(d.length)switch(f){case"none":return new Error("Malformed OpenSSH private key");case"bcrypt":{const _=Qe(d,0);if(_===void 0||d._pos+4>d.length)return new Error("Malformed OpenSSH private key");const y=ls(d,d._pos),E=Buffer.allocUnsafe(u.keyLen+u.ivLen);if(n$(n,n.length,_,_.length,E,E.length,y)!==0)return new Error("Failed to generate information to decrypt key");l=oi(E,0,u.keyLen),h=oi(E,u.keyLen,E.length);break}}else if(f!=="none")return new Error("Malformed OpenSSH private key");if(o._pos+3>=o.length)return new Error("Malformed OpenSSH private key");const m=ls(o,o._pos);if(o._pos+=4,m>0){for(let y=0;y<m;++y){const E=Qe(o,o._pos);if(E===void 0)return new Error("Malformed OpenSSH private key");if(Qe(E,0,!0)===void 0)return new Error("Malformed OpenSSH private key")}let _=Qe(o,o._pos);if(_===void 0)return new Error("Malformed OpenSSH private key");if(l!==void 0){if(_.length<u.blockLen||_.length%u.blockLen!==0)return new Error("Malformed OpenSSH private key");try{const y={authTagLength:u.authLen},E=Hu(u.sslName,l,h,y);if(E.setAutoPadding(!1),u.authLen>0){if(o.length-o._pos<u.authLen)return new Error("Malformed OpenSSH private key");E.setAuthTag(oi(o,o._pos,o._pos+=u.authLen))}_=Cs(E.update(_),E.final())}catch(y){return y}}if(o._pos!==o.length)return new Error("Malformed OpenSSH private key");s=e(_,m,l!==void 0)}else s=[];return s instanceof Error?s:s[0]}}function jo(t,e,r,n,i,s,o){this.type=t,this.comment=e,this[Yr]=r,this[an]=n,this[Qn]=i,this[Sn]=s,this[Yi]=o}jo.prototype=Us;{const t=/^-----BEGIN (RSA|DSA|EC) PRIVATE KEY-----(?:\r\n|\n)((?:[^:]+:\s*[\S].*(?:\r\n|\n))*)([\s\S]+)(?:\r\n|\n)-----END (RSA|DSA|EC) PRIVATE KEY-----$/;jo.parse=(e,r)=>{const n=t.exec(e);if(n===null)return null;let i=Buffer.from(n[3],"base64"),s=n[2],o=!1;if(s!==void 0){s=s.split(/\r\n|\n/g);for(let m=0;m<s.length;++m){const _=s[m];let y=_.indexOf(":");if(_.slice(0,y)==="DEK-Info"){const E=_.slice(y+2);if(y=E.indexOf(","),y===-1)continue;const I=E.slice(0,y).toLowerCase();if(r$.indexOf(I)===-1)return new Error(`Cipher (${I}) not supported for encrypted OpenSSH private key`);const R=Nc[I];if(!R)return new Error(`Cipher (${I}) not supported for encrypted OpenSSH private key`);const P=Buffer.from(E.slice(y+1),"hex");if(P.length!==R.ivLen)return new Error("Malformed encrypted OpenSSH private key");if(!r)return new Error("Encrypted OpenSSH private key detected, but no passphrase given");const Q=oi(P,0,8);let z=ws("md5").update(r).update(Q).digest();for(;z.length<R.keyLen;)z=Cs(z,ws("md5").update(z).update(r).update(Q).digest());z.length>R.keyLen&&(z=oi(z,0,R.keyLen));try{const X=Hu(I,z,P);X.setAutoPadding(!1),i=Cs(X.update(i),X.final()),o=!0}catch(X){return X}}}}let a,c,f,u,l,h,d="Malformed OpenSSH private key";switch(o&&(d+=". Bad passphrase?"),n[1]){case"RSA":a="ssh-rsa",c=Zr("RSA PRIVATE",i);try{h=new Ke.Reader(i),h.readSequence(),h.readInt();const m=h.readString(Ke.Integer,!0);if(m===null)return new Error(d);const _=h.readString(Ke.Integer,!0);if(_===null)return new Error(d);f=Bs(m,_),u=Os(m,_)}catch{return new Error(d)}l="sha1";break;case"DSA":a="ssh-dss",c=Zr("DSA PRIVATE",i);try{h=new Ke.Reader(i),h.readSequence(),h.readInt();const m=h.readString(Ke.Integer,!0);if(m===null)return new Error(d);const _=h.readString(Ke.Integer,!0);if(_===null)return new Error(d);const y=h.readString(Ke.Integer,!0);if(y===null)return new Error(d);const E=h.readString(Ke.Integer,!0);if(E===null)return new Error(d);f=Ls(m,_,y,E),u=Ds(m,_,y,E)}catch{return new Error(d)}l="sha1";break;case"EC":{let m,_,y;try{h=new Ke.Reader(i),h.readSequence(),h.readInt(),_=h.readString(Ke.OctetString,!0),h.readByte();const I=h.readLength();if(I!==null){if(h._offset=I,y=h.readOID(),y===null)return new Error(d);switch(y){case"1.2.840.10045.3.1.7":m="prime256v1",a="ecdsa-sha2-nistp256",l="sha256";break;case"1.3.132.0.34":m="secp384r1",a="ecdsa-sha2-nistp384",l="sha384";break;case"1.3.132.0.35":m="secp521r1",a="ecdsa-sha2-nistp521",l="sha512";break;default:return new Error(`Unsupported private key EC OID: ${y}`)}}else return new Error(d)}catch{return new Error(d)}c=Zr("EC PRIVATE",i);const E=c$(m,_);f=qu(y,E),u=Ku(y,E);break}}return new jo(a,"",c,f,u,l,o)}}function Qo(t,e,r,n,i,s,o){this.type=t,this.comment=e,this[Yr]=r,this[an]=n,this[Qn]=i,this[Sn]=s,this[Yi]=o}Qo.prototype=Us;{const t=Buffer.alloc(0),e=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),r=Buffer.from([0,0,0,0]),n=Buffer.from([0,0,0,1]),i=/^PuTTY-User-Key-File-2: (ssh-(?:rsa|dss))\r?\nEncryption: (aes256-cbc|none)\r?\nComment: ([^\r\n]*)\r?\nPublic-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-Lines: \d+\r?\n([\s\S]+?)\r?\nPrivate-MAC: ([^\r\n]+)/;Qo.parse=(s,o)=>{const a=i.exec(s);if(a===null)return null;const c=a[2],f=c!=="none";if(f&&!o)return new Error("Encrypted PPK private key detected, but no passphrase given");let u=Buffer.from(a[5],"base64");if(f){const K=Ss[c];let se=Cs(ws("sha1").update(r).update(o).digest(),ws("sha1").update(n).update(o).digest());se.length>K.keyLen&&(se=oi(se,0,K.keyLen));try{const J=Hu(K.sslName,se,e);J.setAutoPadding(!1),u=Cs(J.update(u),J.final())}catch(J){return J}}const l=a[1],h=a[3],d=Buffer.from(a[4],"base64"),m=a[6],_=l.length,y=c.length,E=Buffer.byteLength(h),I=d.length,R=u.length,P=Buffer.allocUnsafe(4+_+4+y+4+E+4+I+4+R);let Q=0;if(rr(P,_,Q),P.utf8Write(l,Q+=4,_),rr(P,y,Q+=_),P.utf8Write(c,Q+=4,y),rr(P,E,Q+=y),P.utf8Write(h,Q+=4,E),rr(P,I,Q+=E),P.set(d,Q+=4),rr(P,R,Q+=I),P.set(u,Q+4),o||(o=t),Jv("sha1",ws("sha1").update("putty-private-key-file-mac-key").update(o).digest()).update(P).digest("hex")!==m)return f?new Error("PPK private key integrity check failed -- bad passphrase?"):new Error("PPK private key integrity check failed");let X,M,F;switch(d._pos=0,Qu(d,1),l){case"ssh-rsa":{const K=Qe(d,d._pos);if(K===void 0)return new Error("Malformed PPK public key");const se=Qe(d,d._pos);if(se===void 0)return new Error("Malformed PPK public key");const J=Qe(u,0);if(J===void 0)return new Error("Malformed PPK private key");const ue=Qe(u,u._pos);if(ue===void 0)return new Error("Malformed PPK private key");const Y=Qe(u,u._pos);if(Y===void 0)return new Error("Malformed PPK private key");const Z=Qe(u,u._pos);if(Z===void 0)return new Error("Malformed PPK private key");X=Bs(se,K),M=Os(se,K),F=d0(se,K,J,Z,ue,Y);break}case"ssh-dss":{const K=Qe(d,d._pos);if(K===void 0)return new Error("Malformed PPK public key");const se=Qe(d,d._pos);if(se===void 0)return new Error("Malformed PPK public key");const J=Qe(d,d._pos);if(J===void 0)return new Error("Malformed PPK public key");const ue=Qe(d,d._pos);if(ue===void 0)return new Error("Malformed PPK public key");const Y=Qe(u,0);if(Y===void 0)return new Error("Malformed PPK private key");X=Ls(K,se,J,ue),M=Ds(K,se,J,ue),F=h0(K,se,J,ue,Y);break}}return new Qo(l,h,F,X,M,"sha1",f)}}function ba(t,e,r,n,i){this.type=t,this.comment=e,this[Yr]=null,this[an]=r,this[Qn]=n,this[Sn]=i,this[Yi]=!1}ba.prototype=Us;{let t;ju?t=/^(((?:ssh-(?:rsa|dss|ed25519))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/:t=/^(((?:ssh-(?:rsa|dss))|ecdsa-sha2-nistp(?:256|384|521))(?:-cert-v0[01]@openssh.com)?) ([A-Z0-9a-z/+=]+)(?:$|\s+([\S].*)?)$/,ba.parse=e=>{const r=t.exec(e);if(r===null)return null;const n=r[1],i=r[2],s=Buffer.from(r[3],"base64"),o=r[4]||"",a=Qe(s,s._pos,!0);return a===void 0||a.indexOf(i)!==0?new Error("Malformed OpenSSH public key"):Wu(s,i,o,n)}}function qo(t,e,r,n,i){this.type=t,this.comment=e,this[Yr]=null,this[an]=r,this[Qn]=n,this[Sn]=i,this[Yi]=!1}qo.prototype=Us;{const t=/^---- BEGIN SSH2 PUBLIC KEY ----(?:\r?\n)((?:.{0,72}\r?\n)+)---- END SSH2 PUBLIC KEY ----$/,e=/^[A-Z0-9a-z/+=\r\n]+$/,r=/^([\x21-\x39\x3B-\x7E]{1,64}): ((?:[^\\]*\\\r?\n)*[^\r\n]+)\r?\n/gm,n=/\\\r?\n/g;qo.parse=i=>{let s=t.exec(i);if(s===null)return null;const o=s[1];let a=0,c="";for(;s=r.exec(o);){const d=s[1],m=s[2].replace(n,"");if(m.length>1024)return r.lastIndex=0,new Error("Malformed RFC4716 public key");a=r.lastIndex,d.toLowerCase()==="comment"&&(c=m,c.length>1&&c.charCodeAt(0)===34&&c.charCodeAt(c.length-1)===34&&(c=c.slice(1,-1)))}let f=o.slice(a);if(!e.test(f))return new Error("Malformed RFC4716 public key");f=Buffer.from(f,"base64");const u=Qe(f,0,!0);if(u===void 0)return new Error("Malformed RFC4716 public key");let l=null,h=null;switch(u){case"ssh-rsa":{const d=Qe(f,f._pos);if(d===void 0)return new Error("Malformed RFC4716 public key");const m=Qe(f,f._pos);if(m===void 0)return new Error("Malformed RFC4716 public key");l=Bs(m,d),h=Os(m,d);break}case"ssh-dss":{const d=Qe(f,f._pos);if(d===void 0)return new Error("Malformed RFC4716 public key");const m=Qe(f,f._pos);if(m===void 0)return new Error("Malformed RFC4716 public key");const _=Qe(f,f._pos);if(_===void 0)return new Error("Malformed RFC4716 public key");const y=Qe(f,f._pos);if(y===void 0)return new Error("Malformed RFC4716 public key");l=Ls(d,m,_,y),h=Ds(d,m,_,y);break}default:return new Error("Malformed RFC4716 public key")}return new qo(u,c,l,h,"sha1")}}function Wu(t,e,r,n){if(!f$(e))return new Error(`Unsupported OpenSSH public key type: ${e}`);let i,s,o=null,a=null;switch(e){case"ssh-rsa":{const c=Qe(t,t._pos||0);if(c===void 0)return new Error("Malformed OpenSSH public key");const f=Qe(t,t._pos);if(f===void 0)return new Error("Malformed OpenSSH public key");o=Bs(f,c),a=Os(f,c),i="sha1";break}case"ssh-dss":{const c=Qe(t,t._pos||0);if(c===void 0)return new Error("Malformed OpenSSH public key");const f=Qe(t,t._pos);if(f===void 0)return new Error("Malformed OpenSSH public key");const u=Qe(t,t._pos);if(u===void 0)return new Error("Malformed OpenSSH public key");const l=Qe(t,t._pos);if(l===void 0)return new Error("Malformed OpenSSH public key");o=Ls(c,f,u,l),a=Ds(c,f,u,l),i="sha1";break}case"ssh-ed25519":{const c=Qe(t,t._pos||0);if(c===void 0||c.length!==32)return new Error("Malformed OpenSSH public key");o=p0(c),a=g0(c),i=null;break}case"ecdsa-sha2-nistp256":i="sha256",s="1.2.840.10045.3.1.7";case"ecdsa-sha2-nistp384":i===void 0&&(i="sha384",s="1.3.132.0.34");case"ecdsa-sha2-nistp521":{if(i===void 0&&(i="sha512",s="1.3.132.0.35"),!Qu(t,1))return new Error("Malformed OpenSSH public key");const c=Qe(t,t._pos||0);if(c===void 0)return new Error("Malformed OpenSSH public key");o=qu(s,c),a=Ku(s,c);break}default:return new Error(`Unsupported OpenSSH public key type: ${e}`)}return new ba(n,r,o,a,i)}function f$(t){switch(t){case"ssh-rsa":case"ssh-dss":case"ecdsa-sha2-nistp256":case"ecdsa-sha2-nistp384":case"ecdsa-sha2-nistp521":return!0;case"ssh-ed25519":if(ju)return!0;default:return!1}}function m0(t){return t?typeof t[Yi]=="boolean":!1}function _0(t,e){if(m0(t))return t;let r;if(Buffer.isBuffer(t))r=t,t=t.utf8Slice(0,t.length).trim();else if(typeof t=="string")t=t.trim();else return new Error("Key data must be a Buffer or string");if(e!=null){if(typeof e=="string")e=Buffer.from(e);else if(!Buffer.isBuffer(e))return new Error("Passphrase must be a string or Buffer when supplied")}let n;if((n=Ho.parse(t,e))!==null||(n=jo.parse(t,e))!==null||(n=Qo.parse(t,e))!==null||(n=ba.parse(t))!==null||(n=qo.parse(t))!==null)return n;if(r){lo.init(r,0);const i=lo.readString(!0);i!==void 0&&(t=lo.readRaw(),t!==void 0&&(n=Wu(t,i,"",i),n instanceof Error&&(n=null))),lo.clear()}return n||new Error("Unsupported key format")}var pi={isParsedKey:m0,parseDERKey:(t,e)=>Wu(t,e,"",e),parseKey:_0};const{Socket:E0}=Hc,{Duplex:y0}=jc,{resolve:u$}=Jr,{readFile:kd}=ai,{execFile:l$,spawn:d$}=hg,{isParsedKey:Pd,parseKey:ds}=pi,{makeBufferParser:h$,readUInt32BE:Gu,writeUInt32BE:vr,writeUInt32LE:Td}=dn();function Is(t){let e=!1;return(...r)=>{e||(e=!0,t(...r))}}function p$(t,e){const r=Buffer.allocUnsafe(t.length+e.length);return t.copy(r,0),e.copy(r,t.length),r}function kc(){}const g$=Buffer.alloc(0),Mt=h$();let Vu=class{getIdentities(e){e(new Error("Missing getIdentities() implementation"))}sign(e,r,n,i){typeof n=="function"&&(i=n),i(new Error("Missing sign() implementation"))}},wa=class extends Vu{constructor(e){super(),this.socketPath=e}getStream(e){e=Is(e);const r=new E0;r.on("connect",()=>{e(null,r)}),r.on("close",n).on("end",n).on("error",n),r.connect(this.socketPath);function n(){try{r.destroy()}catch{}e(new Error("Failed to connect to agent"))}}getIdentities(e){e=Is(e),this.getStream((r,n)=>{function i(o){if(n)try{n.destroy()}catch{}o||(o=new Error("Failed to retrieve identities from agent")),e(o)}if(r)return i(r);const s=new Pc(!0);s.on("error",i),s.pipe(n).pipe(s),n.on("close",i).on("end",i).on("error",i),s.getIdentities((o,a)=>{if(o)return i(o);try{n.destroy()}catch{}e(null,a)})})}sign(e,r,n,i){typeof n=="function"?(i=n,n=void 0):(typeof n!="object"||n===null)&&(n=void 0),i=Is(i),this.getStream((s,o)=>{function a(f){if(o)try{o.destroy()}catch{}f||(f=new Error("Failed to sign data with agent")),i(f)}if(s)return a(s);const c=new Pc(!0);c.on("error",a),c.pipe(o).pipe(c),o.on("close",a).on("end",a).on("error",a),c.sign(e,r,n,(f,u)=>{if(f)return a(f);try{o.destroy()}catch{}i(null,u)})})}};const A0=(()=>{const o=u$(__dirname,"..","util/pagent.exe"),a={10:new Error("Invalid pagent.exe arguments"),11:new Error("Pageant is not running"),12:new Error("pagent.exe could not create an mmap"),13:new Error("pagent.exe could not set mode for stdin"),14:new Error("pagent.exe could not set mode for stdout"),15:new Error("pagent.exe did not get expected input payload")};function c(u){u.buffer=null,u.proc&&(u.proc.kill(),u.proc=void 0)}class f extends y0{constructor(){super(),this.proc=void 0,this.buffer=null}_read(l){}_write(l,h,d){if(this.buffer===null)this.buffer=l;else{const E=Buffer.allocUnsafe(this.buffer.length+l.length);this.buffer.copy(E,0),l.copy(E,this.buffer.length),this.buffer=E}if(this.buffer.length<4)return d();const m=Gu(this.buffer,0);if(this.buffer.length-4<m)return d();if(l=this.buffer.slice(0,4+m),this.buffer.length>4+m)return d(new Error("Unexpected multiple agent requests"));this.buffer=null;let _;const y=this.proc=d$(o,[l.length]);y.stdout.on("data",E=>{this.push(E)}),y.on("error",E=>{_=E,d(_)}),y.on("close",E=>{if(this.proc=void 0,!_){if(_=a[E])return d(_);d()}}),y.stdin.end(l)}_final(l){c(this),l()}_destroy(l,h){c(this),h()}}return class extends wa{getStream(l){l(null,new f)}}})(),b0=(()=>{const t=/^!<socket >(\d+) s ([A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8}-[A-Z0-9]{8})/;return class extends wa{getStream(r){r=Is(r);let n=this.socketPath,i=!1;kd(n,function s(o,a){if(o){if(i)return r(new Error("Invalid cygwin unix socket path"));l$("cygpath",["-w",n],(z,X,M)=>{if(z||X.length===0)return r(new Error("Invalid cygwin unix socket path"));i=!0,n=X.toString().replace(/[\r\n]/g,""),kd(n,s)});return}const c=t.exec(a.toString("ascii"));if(!c)return r(new Error("Malformed cygwin unix socket file"));let f,u=0,l=!1;const h=[];let d,m=Buffer.alloc(12);const _=parseInt(c[1],10),y=c[2].replace(/-/g,""),E=Buffer.allocUnsafe(16);for(let z=0,X=0;X<32;++z,X+=2)E[z]=parseInt(y.substring(X,X+2),16);for(let z=0;z<16;z+=4)Td(E,Gu(E,z),z);Q();function I(){u=0,f="secret",d.write(E)}function R(z){if(u+=z.length,f==="secret"){u===16&&(u=0,f="creds",d.write(m));return}if(f==="creds"&&(l||h.push(z),u===12)){if(d.removeListener("connect",I),d.removeListener("data",R),d.removeListener("error",P),d.removeListener("end",P),d.removeListener("close",P),l)return r(null,d);l=!0,m=Buffer.concat(h),Td(m,process.pid,0),d.on("error",()=>{}),d.destroy(),Q()}}function P(){r(new Error("Problem negotiating cygwin unix socket security"))}function Q(){d=new E0,d.on("connect",I),d.on("data",R),d.on("error",P),d.on("end",P),d.on("close",P),d.connect(_)}})}}})(),m$=/^[/\\][/\\]\.[/\\]pipe[/\\].+/;function w0(t){return process.platform==="win32"&&!m$.test(t)?t==="pageant"?new A0:new b0(t):new wa(t)}const Pc=(()=>{function f(M){let F;for(;M[I].length;){const K=M[I][0][l];if(K===void 0)break;M[I].shift(),F=M.push(K)}return F}const u=Symbol("Inbound Request Type"),l=Symbol("Inbound Request Response"),h=Symbol("Inbound Request Context");class d{constructor(F,K){this[u]=F,this[l]=void 0,this[h]=K}hasResponded(){return this[l]!==void 0}getType(){return this[u]}getContext(){return this[h]}}function m(M,F,K){return F[l]=K,f(M)}function _(M){if(M[P]=null,M[R]===0){const F=M[I];if(F&&F.length){M[I]=[];for(const K of F)K.cb(new Error("No reply from server"))}}try{M.end()}catch{}setImmediate(()=>{M[X]||M.emit("end"),M[z]||M.emit("close")})}function y(){this[z]=!0}function E(){this[X]=!0}const I=Symbol("Requests"),R=Symbol("Agent Protocol Role"),P=Symbol("Agent Protocol Buffer"),Q=Symbol("Agent Protocol Current Message Length"),z=Symbol("Agent Protocol Closed"),X=Symbol("Agent Protocol Ended");return class extends y0{constructor(F){super({autoDestroy:!0,emitClose:!1}),this[R]=F?0:1,this[I]=[],this[P]=null,this[Q]=-1,this.once("end",E),this.once("close",y)}_read(F){}_write(F,K,se){this[P]===null?this[P]=F:this[P]=p$(this[P],F);let J=this[P],ue=J.length,Y=0;for(;Y<ue&&!(ue<5||(this[Q]===-1&&(this[Q]=Gu(J,Y)),ue<4+this[Q]));){const Z=J[Y+=4];if(++Y,this[R]===0){if(this[I].length===0)return se(new Error("Received unexpected message from server"));const ie=this[I].shift();switch(Z){case 5:ie.cb(new Error("Agent responded with failure"));break;case 12:{if(ie.type!==11)return se(new Error("Agent responded with wrong message type"));Mt.init(J,Y);const oe=Mt.readUInt32BE();if(oe===void 0)return Mt.clear(),se(new Error("Malformed agent response"));const O=[];for(let j=0;j<oe;++j){let C=Mt.readString();if(C===void 0)return Mt.clear(),se(new Error("Malformed agent response"));const v=Mt.readString(!0);if(v===void 0)return Mt.clear(),se(new Error("Malformed agent response"));C=ds(C),!(C instanceof Error)&&(C.comment=C.comment||v,O.push(C))}Y=Mt.pos(),Mt.clear(),ie.cb(null,O);break}case 14:{if(ie.type!==13)return se(new Error("Agent responded with wrong message type"));Mt.init(J,Y);let oe=Mt.readString();if(Y=Mt.pos(),Mt.clear(),oe===void 0)return se(new Error("Malformed agent response"));if(Mt.init(oe,0),Mt.readString(!0),oe=Mt.readString(),Mt.clear(),oe===void 0)return se(new Error("Malformed OpenSSH signature format"));ie.cb(null,oe);break}default:return se(new Error("Agent responded with unsupported message type"))}}else switch(Z){case 11:{const ie=new d(Z);this[I].push(ie),this.emit("identities",ie);break}case 13:{Mt.init(J,Y);let ie=Mt.readString();const oe=Mt.readString(),O=Mt.readUInt32BE();if(Y=Mt.pos(),Mt.clear(),O===void 0){const B=new d(Z);return this[I].push(B),this.failureReply(B)}if(ie=ds(ie),ie instanceof Error){const B=new d(Z);return this[I].push(B),this.failureReply(B)}const j={hash:void 0};let C;ie.type==="ssh-rsa"&&(O&2?(C="rsa-sha2-256",j.hash="sha256"):O&4&&(C="rsa-sha2-512",j.hash="sha512")),C===void 0&&(C=ie.type);const v=new d(Z,C);this[I].push(v),this.emit("sign",v,ie,oe,j);break}default:{const ie=new d(Z);this[I].push(ie),this.failureReply(ie)}}if(this[Q]=-1,Y===ue){this[P]=null;break}else this[P]=J=J.slice(Y),ue=J.length,Y=0}se()}_destroy(F,K){_(this),K()}_final(F){_(this),F()}sign(F,K,se,J){if(this[R]!==0)throw new Error("Client-only method called with server role");typeof se=="function"?(J=se,se=void 0):(typeof se!="object"||se===null)&&(se=void 0);let ue=0;if(F=ds(F),F instanceof Error)throw new Error("Invalid public key argument");if(F.type==="ssh-rsa"&&se)switch(se.hash){case"sha256":ue=2;break;case"sha512":ue=4;break}F=F.getPublicSSH();const Y=13,Z=F.length,ie=K.length;let oe=0;const O=Buffer.allocUnsafe(9+Z+4+ie+4);return vr(O,O.length-4,oe),O[oe+=4]=Y,vr(O,Z,++oe),F.copy(O,oe+=4),vr(O,ie,oe+=Z),K.copy(O,oe+=4),vr(O,ue,oe+=ie),typeof J!="function"&&(J=kc),this[I].push({type:Y,cb:J}),this.push(O)}getIdentities(F){if(this[R]!==0)throw new Error("Client-only method called with server role");const K=11;let se=0;const J=Buffer.allocUnsafe(5);return vr(J,J.length-4,se),J[se+=4]=K,typeof F!="function"&&(F=kc),this[I].push({type:K,cb:F}),this.push(J)}failureReply(F){if(this[R]!==1)throw new Error("Server-only method called with client role");if(!(F instanceof d))throw new Error("Wrong request argument");if(F.hasResponded())return!0;let K=0;const se=Buffer.allocUnsafe(5);return vr(se,se.length-4,K),se[K+=4]=5,m(this,F,se)}getIdentitiesReply(F,K){if(this[R]!==1)throw new Error("Server-only method called with client role");if(!(F instanceof d))throw new Error("Wrong request argument");if(F.hasResponded())return!0;if(F.getType()!==11)throw new Error("Invalid response to request");if(!Array.isArray(K))throw new Error("Keys argument must be an array");let se=4;const J=[];for(let Z=0;Z<K.length;++Z){const ie=K[Z];if(typeof ie!="object"||ie===null)throw new Error(`Invalid key entry: ${ie}`);let oe,O;if(Pd(ie))oe=ie;else if(Pd(ie.pubKey))oe=ie.pubKey;else if(typeof ie.pubKey!="object"||ie.pubKey===null||({pubKey:oe,comment:O}=ie.pubKey,oe=ds(oe),oe instanceof Error))continue;O=oe.comment||O,oe=oe.getPublicSSH(),se+=4+oe.length,O&&typeof O=="string"?O=Buffer.from(O):Buffer.isBuffer(O)||(O=g$),se+=4+O.length,J.push({pubKey:oe,comment:O})}let ue=0;const Y=Buffer.allocUnsafe(5+se);vr(Y,Y.length-4,ue),Y[ue+=4]=12,vr(Y,J.length,++ue),ue+=4;for(let Z=0;Z<J.length;++Z){const{pubKey:ie,comment:oe}=J[Z];vr(Y,ie.length,ue),ie.copy(Y,ue+=4),vr(Y,oe.length,ue+=ie.length),ue+=4,oe.length&&(oe.copy(Y,ue),ue+=oe.length)}return m(this,F,Y)}signReply(F,K){if(this[R]!==1)throw new Error("Server-only method called with client role");if(!(F instanceof d))throw new Error("Wrong request argument");if(F.hasResponded())return!0;if(F.getType()!==13)throw new Error("Invalid response to request");if(!Buffer.isBuffer(K))throw new Error("Signature argument must be a Buffer");if(K.length===0)throw new Error("Signature argument must be non-empty");let se=0;const J=F.getContext(),ue=Buffer.byteLength(J),Y=Buffer.allocUnsafe(13+ue+4+K.length);return vr(Y,Y.length-4,se),Y[se+=4]=14,vr(Y,4+ue+4+K.length,++se),vr(Y,ue,se+=4),Y.utf8Write(J,se+=4,ue),vr(Y,K.length,se+=ue),K.copy(Y,se+=4),m(this,F,Y)}}})(),Ya=Symbol("Agent"),Kr=Symbol("Agent Keys"),An=Symbol("Agent Keys Index"),Ei=Symbol("Agent Init Callbacks");let _$=class{constructor(e){if(typeof e=="string")e=w0(e);else if(!S0(e))throw new Error("Invalid agent argument");this[Ya]=e,this[Kr]=null,this[An]=-1,this[Ei]=null}init(e){if(typeof e!="function"&&(e=kc),this[Kr]===null)if(this[Ei]===null){this[Ei]=[e];const r=(...n)=>{process.nextTick(()=>{const i=this[Ei];this[Ei]=null;for(const s of i)s(...n)})};this[Ya].getIdentities(Is((n,i)=>{if(n)return r(n);if(!Array.isArray(i))return r(new Error("Agent implementation failed to provide keys"));const s=[];for(let o of i)o=ds(o),!(o instanceof Error)&&s.push(o);this[Kr]=s,this[An]=-1,r()}))}else this[Ei].push(e);else process.nextTick(e)}nextKey(){return this[Kr]===null||++this[An]>=this[Kr].length?!1:this[Kr][this[An]]}currentKey(){return this[Kr]===null||this[An]>=this[Kr].length?null:this[Kr][this[An]]}pos(){return this[Kr]===null||this[An]>=this[Kr].length?-1:this[An]}reset(){this[An]=-1}sign(...e){this[Ya].sign(...e)}};function S0(t){return t instanceof Vu}var I0={AgentContext:_$,AgentProtocol:Pc,BaseAgent:Vu,createAgent:w0,CygwinAgent:b0,isAgent:S0,OpenSSHAgent:wa,PageantAgent:A0},v0={};const{kMaxLength:E$}=wh,{createInflate:y$,constants:{DEFLATE:A$,INFLATE:b$,Z_DEFAULT_CHUNK:w$,Z_DEFAULT_COMPRESSION:S$,Z_DEFAULT_MEMLEVEL:I$,Z_DEFAULT_STRATEGY:v$,Z_DEFAULT_WINDOWBITS:$$,Z_PARTIAL_FLUSH:C$}}=Eg,x$=y$()._handle.constructor;function R$(){throw new Error("Should not get here")}function N$(t,e,r){const n=this._owner,i=new Error(t);i.errno=e,i.code=r,n._err=i}function Yu(t){t._handle&&(t._handle.close(),t._handle=null)}class $0{constructor(e){const r=$$,n=S$,i=I$,s=v$,o=void 0;this._err=void 0,this._writeState=new Uint32Array(2),this._chunkSize=w$,this._maxOutputLength=E$,this._outBuffer=Buffer.allocUnsafe(this._chunkSize),this._outOffset=0,this._handle=new x$(e),this._handle._owner=this,this._handle.onerror=N$,this._handle.init(r,n,i,s,this._writeState,R$,o)}writeSync(e,r){const n=this._handle;if(!n)throw new Error("Invalid Zlib instance");let i=e.length,s=this._chunkSize-this._outOffset,o=0,a,c,f,u=0;const l=this._writeState;let h=this._outBuffer,d=this._outOffset;const m=this._chunkSize;for(;;){if(n.writeSync(C$,e,o,i,h,d,s),this._err)throw this._err;a=l[0],c=l[1];const y=i-c,E=s-a;if(E>0){const I=d===0&&E===h.length?h:h.slice(d,d+E);if(d+=E,f?f.push===void 0?f=[f,I]:f.push(I):f=I,u+=I.byteLength,u>this._maxOutputLength)throw Yu(this),new Error(`Output length exceeded maximum of ${this._maxOutputLength}`)}else if(E!==0)throw new Error("have should not go down");if((a===0||d>=m)&&(s=m,d=0,h=Buffer.allocUnsafe(m)),a===0)o+=y,i=c;else break}if(this._outBuffer=h,this._outOffset=d,u===0&&(f=Buffer.alloc(0)),r)return f.totalLen=u,f;if(f.push===void 0)return f;const _=Buffer.allocUnsafe(u);for(let y=0,E=0;y<f.length;++y){const I=f[y];_.set(I,E),E+=I.length}return _}}let k$=class{constructor(e){this.allocStart=0,this.allocStartKEX=0,this._protocol=e,this._zlib=new $0(A$)}cleanup(){this._zlib&&Yu(this._zlib)}alloc(e,r){return Buffer.allocUnsafe(e)}finalize(e,r){if(this._protocol._kexinit===void 0||r){const n=this._zlib.writeSync(e,!0),i=this._protocol._cipher.allocPacket(n.totalLen);if(n.push===void 0)i.set(n,5);else for(let s=0,o=5;s<n.length;++s){const a=n[s];i.set(a,o),o+=a.length}return i}return e}},P$=class{constructor(e){this.allocStart=5,this.allocStartKEX=5,this._protocol=e}cleanup(){}alloc(e,r){return this._protocol._kexinit===void 0||r?this._protocol._cipher.allocPacket(e):Buffer.allocUnsafe(e)}finalize(e,r){return e}},T$=class{constructor(){this._zlib=new $0(b$)}cleanup(){this._zlib&&Yu(this._zlib)}read(e){return this._zlib.writeSync(e,!1)}},B$=class{cleanup(){}read(e){return e}};var C0={PacketReader:B$,PacketWriter:P$,ZlibPacketReader:T$,ZlibPacketWriter:k$};const{bufferSlice:za,bufferParser:ne,doFatalError:Bt,sigSSHToASN1:Bd,writeUInt32BE:Od}=dn(),{CHANNEL_OPEN_FAILURE:O$,COMPAT:L$,MESSAGE:Lt,TERMINAL_MODE:x0}=Wn(),{parseKey:D$}=pi,U$=Array.from(Object.entries(x0)).reduce((t,[e,r])=>({...t,[e]:r}),{});var M$={[Lt.DISCONNECT]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE(),n=ne.readString(!0),i=ne.readString();if(ne.clear(),i===void 0)return Bt(t,"Inbound: Malformed DISCONNECT packet");t._debug&&t._debug(`Inbound: Received DISCONNECT (${r}, "${n}")`);const s=t._handlers.DISCONNECT;s&&s(t,r,n)},[Lt.IGNORE]:(t,e)=>{t._debug&&t._debug("Inbound: Received IGNORE")},[Lt.UNIMPLEMENTED]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE();if(ne.clear(),r===void 0)return Bt(t,"Inbound: Malformed UNIMPLEMENTED packet");t._debug&&t._debug(`Inbound: Received UNIMPLEMENTED (seqno ${r})`)},[Lt.DEBUG]:(t,e)=>{ne.init(e,1);const r=ne.readBool(),n=ne.readString(!0),i=ne.readString();if(ne.clear(),i===void 0)return Bt(t,"Inbound: Malformed DEBUG packet");t._debug&&t._debug("Inbound: Received DEBUG");const s=t._handlers.DEBUG;s&&s(t,r,n)},[Lt.SERVICE_REQUEST]:(t,e)=>{ne.init(e,1);const r=ne.readString(!0);if(ne.clear(),r===void 0)return Bt(t,"Inbound: Malformed SERVICE_REQUEST packet");t._debug&&t._debug(`Inbound: Received SERVICE_REQUEST (${r})`);const n=t._handlers.SERVICE_REQUEST;n&&n(t,r)},[Lt.SERVICE_ACCEPT]:(t,e)=>{ne.init(e,1);const r=ne.readString(!0);if(ne.clear(),r===void 0)return Bt(t,"Inbound: Malformed SERVICE_ACCEPT packet");t._debug&&t._debug(`Inbound: Received SERVICE_ACCEPT (${r})`);const n=t._handlers.SERVICE_ACCEPT;n&&n(t,r)},[Lt.EXT_INFO]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE();let n;if(r!==void 0){n=[];for(let s=0;s<r;++s){const o=ne.readString(!0),a=ne.readString();if(a!==void 0)switch(o){case"server-sig-algs":{const c=a.latin1Slice(0,a.length).split(",");n.push({name:o,algs:c});continue}default:continue}n=void 0;break}}if(ne.clear(),n===void 0)return Bt(t,"Inbound: Malformed EXT_INFO packet");t._debug&&t._debug("Inbound: Received EXT_INFO");const i=t._handlers.EXT_INFO;i&&i(t,n)},[Lt.USERAUTH_REQUEST]:(t,e)=>{ne.init(e,1);const r=ne.readString(!0),n=ne.readString(!0),i=ne.readString(!0);let s,o;switch(i){case"none":s=null;break;case"password":{const c=ne.readBool();if(c!==void 0&&(s=ne.readString(!0),s!==void 0&&c)){const f=ne.readString(!0);f!==void 0?s={oldPassword:s,newPassword:f}:s=void 0}break}case"publickey":{const c=ne.readBool();if(c!==void 0){const f=ne.readString(!0);let u=f;const l=ne.readString();let h;switch(f){case"rsa-sha2-256":u="ssh-rsa",h="sha256";break;case"rsa-sha2-512":u="ssh-rsa",h="sha512";break}if(c){const d=ne.pos();let m=ne.readString();if(m!==void 0&&(m.length>4+f.length+4&&m.utf8Slice(4,4+f.length)===f&&(m=za(m,4+f.length+4)),m=Bd(m,u),m)){const _=t._kex.sessionID,y=Buffer.allocUnsafe(4+_.length+d);Od(y,_.length,0),y.set(_,4),y.set(new Uint8Array(e.buffer,e.byteOffset,d),4+_.length),s={keyAlgo:u,key:l,signature:m,blob:y,hashAlgo:h}}}else s={keyAlgo:u,key:l,hashAlgo:h},o="publickey -- check"}break}case"hostbased":{const c=ne.readString(!0);let f=c;const u=ne.readString(),l=ne.readString(!0),h=ne.readString(!0);let d;switch(c){case"rsa-sha2-256":f="ssh-rsa",d="sha256";break;case"rsa-sha2-512":f="ssh-rsa",d="sha512";break}const m=ne.pos();let _=ne.readString();if(_!==void 0&&(_.length>4+c.length+4&&_.utf8Slice(4,4+c.length)===c&&(_=za(_,4+c.length+4)),_=Bd(_,f),_!==void 0)){const y=t._kex.sessionID,E=Buffer.allocUnsafe(4+y.length+m);Od(E,y.length,0),E.set(y,4),E.set(new Uint8Array(e.buffer,e.byteOffset,m),4+y.length),s={keyAlgo:f,key:u,signature:_,blob:E,localHostname:l,localUsername:h,hashAlgo:d}}break}case"keyboard-interactive":ne.skipString(),s=ne.readList();break;default:i!==void 0&&(s=ne.readRaw())}if(ne.clear(),s===void 0)return Bt(t,"Inbound: Malformed USERAUTH_REQUEST packet");o===void 0&&(o=i),t._authsQueue.push(i),t._debug&&t._debug(`Inbound: Received USERAUTH_REQUEST (${o})`);const a=t._handlers.USERAUTH_REQUEST;a&&a(t,r,n,i,s)},[Lt.USERAUTH_FAILURE]:(t,e)=>{ne.init(e,1);const r=ne.readList(),n=ne.readBool();if(ne.clear(),n===void 0)return Bt(t,"Inbound: Malformed USERAUTH_FAILURE packet");t._debug&&t._debug(`Inbound: Received USERAUTH_FAILURE (${r})`),t._authsQueue.shift();const i=t._handlers.USERAUTH_FAILURE;i&&i(t,r,n)},[Lt.USERAUTH_SUCCESS]:(t,e)=>{t._debug&&t._debug("Inbound: Received USERAUTH_SUCCESS"),t._authsQueue.shift();const r=t._handlers.USERAUTH_SUCCESS;r&&r(t)},[Lt.USERAUTH_BANNER]:(t,e)=>{ne.init(e,1);const r=ne.readString(!0),n=ne.readString();if(ne.clear(),n===void 0)return Bt(t,"Inbound: Malformed USERAUTH_BANNER packet");t._debug&&t._debug("Inbound: Received USERAUTH_BANNER");const i=t._handlers.USERAUTH_BANNER;i&&i(t,r)},60:(t,e)=>{if(!t._authsQueue.length){t._debug&&t._debug("Inbound: Received payload type 60 without auth");return}switch(t._authsQueue[0]){case"password":{ne.init(e,1);const r=ne.readString(!0),n=ne.readString();if(ne.clear(),n===void 0)return Bt(t,"Inbound: Malformed USERAUTH_PASSWD_CHANGEREQ packet");t._debug&&t._debug("Inbound: Received USERAUTH_PASSWD_CHANGEREQ");const i=t._handlers.USERAUTH_PASSWD_CHANGEREQ;i&&i(t,r);break}case"publickey":{ne.init(e,1);const r=ne.readString(!0),n=ne.readString();if(ne.clear(),n===void 0)return Bt(t,"Inbound: Malformed USERAUTH_PK_OK packet");t._debug&&t._debug("Inbound: Received USERAUTH_PK_OK"),t._authsQueue.shift();const i=t._handlers.USERAUTH_PK_OK;i&&i(t,r,n);break}case"keyboard-interactive":{ne.init(e,1);const r=ne.readString(!0),n=ne.readString(!0);ne.readString();const i=ne.readUInt32BE();let s;if(i!==void 0){s=new Array(i);let a;for(a=0;a<i;++a){const c=ne.readString(!0),f=ne.readBool();if(f===void 0)break;s[a]={prompt:c,echo:f}}a!==i&&(s=void 0)}if(ne.clear(),s===void 0)return Bt(t,"Inbound: Malformed USERAUTH_INFO_REQUEST packet");t._debug&&t._debug("Inbound: Received USERAUTH_INFO_REQUEST");const o=t._handlers.USERAUTH_INFO_REQUEST;o&&o(t,r,n,s);break}default:t._debug&&t._debug("Inbound: Received unexpected payload type 60")}},61:(t,e)=>{if(!t._authsQueue.length){t._debug&&t._debug("Inbound: Received payload type 61 without auth");return}if(t._authsQueue[0]!=="keyboard-interactive")return Bt(t,"Inbound: Received unexpected payload type 61");ne.init(e,1);const r=ne.readUInt32BE();let n;if(r!==void 0){n=new Array(r);let s;for(s=0;s<r;++s){const o=ne.readString(!0);if(o===void 0)break;n[s]=o}s!==r&&(n=void 0)}if(ne.clear(),n===void 0)return Bt(t,"Inbound: Malformed USERAUTH_INFO_RESPONSE packet");t._debug&&t._debug("Inbound: Received USERAUTH_INFO_RESPONSE");const i=t._handlers.USERAUTH_INFO_RESPONSE;i&&i(t,n)},[Lt.GLOBAL_REQUEST]:(t,e)=>{ne.init(e,1);const r=ne.readString(!0),n=ne.readBool();let i;if(n!==void 0)switch(r){case"tcpip-forward":case"cancel-tcpip-forward":{const o=ne.readString(!0),a=ne.readUInt32BE();a!==void 0&&(i={bindAddr:o,bindPort:a});break}case"streamlocal-forward@openssh.com":case"cancel-streamlocal-forward@openssh.com":{const o=ne.readString(!0);o!==void 0&&(i={socketPath:o});break}case"no-more-sessions@openssh.com":i=null;break;case"hostkeys-00@openssh.com":{for(i=[];ne.avail()>0;){const o=ne.readString();if(o===void 0){i=void 0;break}const a=D$(o);a instanceof Error||i.push(a)}break}default:i=ne.readRaw()}if(ne.clear(),i===void 0)return Bt(t,"Inbound: Malformed GLOBAL_REQUEST packet");t._debug&&t._debug(`Inbound: GLOBAL_REQUEST (${r})`);const s=t._handlers.GLOBAL_REQUEST;s?s(t,r,n,i):t.requestFailure()},[Lt.REQUEST_SUCCESS]:(t,e)=>{const r=e.length>1?za(e,1):null;t._debug&&t._debug("Inbound: REQUEST_SUCCESS");const n=t._handlers.REQUEST_SUCCESS;n&&n(t,r)},[Lt.REQUEST_FAILURE]:(t,e)=>{t._debug&&t._debug("Inbound: Received REQUEST_FAILURE");const r=t._handlers.REQUEST_FAILURE;r&&r(t)},[Lt.CHANNEL_OPEN]:(t,e)=>{ne.init(e,1);const r=ne.readString(!0),n=ne.readUInt32BE(),i=ne.readUInt32BE(),s=ne.readUInt32BE();let o;switch(r){case"forwarded-tcpip":case"direct-tcpip":{const c=ne.readString(!0),f=ne.readUInt32BE(),u=ne.readString(!0),l=ne.readUInt32BE();l!==void 0&&(o={type:r,sender:n,window:i,packetSize:s,data:{destIP:c,destPort:f,srcIP:u,srcPort:l}});break}case"forwarded-streamlocal@openssh.com":case"direct-streamlocal@openssh.com":{const c=ne.readString(!0);c!==void 0&&(o={type:r,sender:n,window:i,packetSize:s,data:{socketPath:c}});break}case"x11":{const c=ne.readString(!0),f=ne.readUInt32BE();f!==void 0&&(o={type:r,sender:n,window:i,packetSize:s,data:{srcIP:c,srcPort:f}});break}default:o={type:r,sender:n,window:i,packetSize:s,data:{}}}if(ne.clear(),o===void 0)return Bt(t,"Inbound: Malformed CHANNEL_OPEN packet");t._debug&&t._debug(`Inbound: CHANNEL_OPEN (s:${n}, ${r})`);const a=t._handlers.CHANNEL_OPEN;a?a(t,o):t.channelOpenFail(o.sender,O$.ADMINISTRATIVELY_PROHIBITED,"","")},[Lt.CHANNEL_OPEN_CONFIRMATION]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE(),n=ne.readUInt32BE(),i=ne.readUInt32BE(),s=ne.readUInt32BE(),o=ne.avail()?ne.readRaw():void 0;if(ne.clear(),s===void 0)return Bt(t,"Inbound: Malformed CHANNEL_OPEN_CONFIRMATION packet");t._debug&&t._debug(`Inbound: CHANNEL_OPEN_CONFIRMATION (r:${r}, s:${n})`);const a=t._handlers.CHANNEL_OPEN_CONFIRMATION;a&&a(t,{recipient:r,sender:n,window:i,packetSize:s,data:o})},[Lt.CHANNEL_OPEN_FAILURE]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE(),n=ne.readUInt32BE(),i=ne.readString(!0),s=ne.readString();if(ne.clear(),s===void 0)return Bt(t,"Inbound: Malformed CHANNEL_OPEN_FAILURE packet");t._debug&&t._debug(`Inbound: CHANNEL_OPEN_FAILURE (r:${r})`);const o=t._handlers.CHANNEL_OPEN_FAILURE;o&&o(t,r,n,i)},[Lt.CHANNEL_WINDOW_ADJUST]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE(),n=ne.readUInt32BE();if(ne.clear(),n===void 0)return Bt(t,"Inbound: Malformed CHANNEL_WINDOW_ADJUST packet");t._debug&&t._debug(`Inbound: CHANNEL_WINDOW_ADJUST (r:${r}, ${n})`);const i=t._handlers.CHANNEL_WINDOW_ADJUST;i&&i(t,r,n)},[Lt.CHANNEL_DATA]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE(),n=ne.readString();if(ne.clear(),n===void 0)return Bt(t,"Inbound: Malformed CHANNEL_DATA packet");t._debug&&t._debug(`Inbound: CHANNEL_DATA (r:${r}, ${n.length})`);const i=t._handlers.CHANNEL_DATA;i&&i(t,r,n)},[Lt.CHANNEL_EXTENDED_DATA]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE(),n=ne.readUInt32BE(),i=ne.readString();if(ne.clear(),i===void 0)return Bt(t,"Inbound: Malformed CHANNEL_EXTENDED_DATA packet");t._debug&&t._debug(`Inbound: CHANNEL_EXTENDED_DATA (r:${r}, ${i.length})`);const s=t._handlers.CHANNEL_EXTENDED_DATA;s&&s(t,r,i,n)},[Lt.CHANNEL_EOF]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE();if(ne.clear(),r===void 0)return Bt(t,"Inbound: Malformed CHANNEL_EOF packet");t._debug&&t._debug(`Inbound: CHANNEL_EOF (r:${r})`);const n=t._handlers.CHANNEL_EOF;n&&n(t,r)},[Lt.CHANNEL_CLOSE]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE();if(ne.clear(),r===void 0)return Bt(t,"Inbound: Malformed CHANNEL_CLOSE packet");t._debug&&t._debug(`Inbound: CHANNEL_CLOSE (r:${r})`);const n=t._handlers.CHANNEL_CLOSE;n&&n(t,r)},[Lt.CHANNEL_REQUEST]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE(),n=ne.readString(!0),i=ne.readBool();let s;if(i!==void 0)switch(n){case"exit-status":s=ne.readUInt32BE(),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${s})`);break;case"exit-signal":{let a,c;if(t._compatFlags&L$.OLD_EXIT){const u=ne.readUInt32BE();switch(u){case 1:a="HUP";break;case 2:a="INT";break;case 3:a="QUIT";break;case 6:a="ABRT";break;case 9:a="KILL";break;case 14:a="ALRM";break;case 15:a="TERM";break;default:u!==void 0&&(a=`UNKNOWN (${u})`)}c=!1}else a=ne.readString(!0),c=ne.readBool(),c===void 0&&(a=void 0);const f=ne.readString(!0);ne.skipString()!==void 0&&(s={signal:a,coreDumped:c,errorMessage:f}),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a})`);break}case"pty-req":{const a=ne.readString(!0),c=ne.readUInt32BE(),f=ne.readUInt32BE(),u=ne.readUInt32BE(),l=ne.readUInt32BE(),h=ne.readString();if(h!==void 0){ne.init(h,1);let d={};for(;ne.avail();){const m=ne.readByte();if(m===x0.TTY_OP_END)break;const _=U$[m],y=ne.readUInt32BE();if(m===void 0||_===void 0||y===void 0){d=void 0;break}d[_]=y}d!==void 0&&(s={term:a,cols:c,rows:f,width:u,height:l,modes:d})}t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"window-change":{const a=ne.readUInt32BE(),c=ne.readUInt32BE(),f=ne.readUInt32BE(),u=ne.readUInt32BE();u!==void 0&&(s={cols:a,rows:c,width:f,height:u}),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"x11-req":{const a=ne.readBool(),c=ne.readString(!0),f=ne.readString(),u=ne.readUInt32BE();u!==void 0&&(s={single:a,protocol:c,cookie:f,screen:u}),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break}case"env":{const a=ne.readString(!0),c=ne.readString(!0);c!==void 0&&(s={name:a,value:c}),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${a}=${c})`);break}case"shell":s=null,t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break;case"exec":s=ne.readString(!0),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${s})`);break;case"subsystem":s=ne.readString(!0),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${s})`);break;case"signal":s=ne.readString(!0),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${s})`);break;case"xon-xoff":s=ne.readBool(),t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n}: ${s})`);break;case"auth-agent-req@openssh.com":s=null,t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`);break;default:s=ne.avail()?ne.readRaw():null,t._debug&&t._debug(`Inbound: CHANNEL_REQUEST (r:${r}, ${n})`)}if(ne.clear(),s===void 0)return Bt(t,"Inbound: Malformed CHANNEL_REQUEST packet");const o=t._handlers.CHANNEL_REQUEST;o&&o(t,r,n,i,s)},[Lt.CHANNEL_SUCCESS]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE();if(ne.clear(),r===void 0)return Bt(t,"Inbound: Malformed CHANNEL_SUCCESS packet");t._debug&&t._debug(`Inbound: CHANNEL_SUCCESS (r:${r})`);const n=t._handlers.CHANNEL_SUCCESS;n&&n(t,r)},[Lt.CHANNEL_FAILURE]:(t,e)=>{ne.init(e,1);const r=ne.readUInt32BE();if(ne.clear(),r===void 0)return Bt(t,"Inbound: Malformed CHANNEL_FAILURE packet");t._debug&&t._debug(`Inbound: CHANNEL_FAILURE (r:${r})`);const n=t._handlers.CHANNEL_FAILURE;n&&n(t,r)}},Xa,Ld;function Tc(){if(Ld)return Xa;Ld=1;const t=new Array(256);return[zu().HANDLERS,M$].forEach(e=>{for(let[r,n]of Object.entries(e))r=+r,isFinite(r)&&r>=0&&r<t.length&&(t[r]=n)}),Xa=t,Xa}var Ja,Dd;function zu(){if(Dd)return Ja;Dd=1;const{createDiffieHellman:t,createDiffieHellmanGroup:e,createECDH:r,createHash:n,createPublicKey:i,diffieHellman:s,generateKeyPairSync:o,randomFillSync:a}=Kn,{Ber:c}=Aa,{COMPAT:f,curve25519Supported:u,DEFAULT_KEX:l,DEFAULT_SERVER_HOST_KEY:h,DEFAULT_CIPHER:d,DEFAULT_MAC:m,DEFAULT_COMPRESSION:_,DISCONNECT_REASON:y,MESSAGE:E}=Wn(),{CIPHER_INFO:I,createCipher:R,createDecipher:P,MAC_INFO:Q}=hi(),{parseDERKey:z}=pi,{bufferFill:X,bufferParser:M,convertSignature:F,doFatalError:K,FastBuffer:se,sigSSHToASN1:J,writeUInt32BE:ue}=dn(),{PacketReader:Y,PacketWriter:Z,ZlibPacketReader:ie,ZlibPacketWriter:oe}=C0;let O;const j=2048,C=8192,v=Buffer.alloc(0);function B(w){let b;if(w._compatFlags&f.BAD_DHGEX){const A=w._offer.lists.kex;let T=A.array,V=!1;for(let G=0;G<T.length;++G)T[G].includes("group-exchange")&&(V||(V=!0,T=T.slice()),T.splice(G--,1));if(V){let G=17+w._offer.totalSize+1+4;const H=Buffer.from(T.join(","));G-=A.buffer.length-H.length;const q=w._offer.lists.all,D=new Uint8Array(q.buffer,q.byteOffset+4+A.buffer.length,q.length-(4+A.buffer.length));b=Buffer.allocUnsafe(G),ue(b,H.length,17),b.set(H,21),b.set(D,21+H.length)}}b===void 0&&(b=Buffer.allocUnsafe(17+w._offer.totalSize+1+4),w._offer.copyAllTo(b,17)),w._debug&&w._debug("Outbound: Sending KEXINIT"),b[0]=E.KEXINIT,a(b,1,16),X(b,0,b.length-5),w._kexinit=b,w._packetRW.write.allocStart=0;{const A=w._packetRW.write.allocStartKEX,T=w._packetRW.write.alloc(b.length,!0);T.set(b,A),w._cipher.encrypt(w._packetRW.write.finalize(T,!0))}}function x(w,b){const A={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},sc:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0}};if(M.init(b,17),(A.kex=M.readList())===void 0||(A.serverHostKey=M.readList())===void 0||(A.cs.cipher=M.readList())===void 0||(A.sc.cipher=M.readList())===void 0||(A.cs.mac=M.readList())===void 0||(A.sc.mac=M.readList())===void 0||(A.cs.compress=M.readList())===void 0||(A.sc.compress=M.readList())===void 0||(A.cs.lang=M.readList())===void 0||(A.sc.lang=M.readList())===void 0)return M.clear(),K(w,"Received malformed KEXINIT","handshake",y.KEY_EXCHANGE_FAILED);const T=M.pos(),V=T<b.length&&b[T]===1;M.clear();const G=w._offer,H=A;let q=G.lists.kex.array;if(w._compatFlags&f.BAD_DHGEX){let et=!1;for(let it=0;it<q.length;++it)q[it].indexOf("group-exchange")!==-1&&(et||(et=!0,q=q.slice()),q.splice(it--,1))}let D,ee,ce;const le=w._debug;le&&le("Inbound: Handshake in progress"),le&&le(`Handshake: (local) KEX method: ${q}`),le&&le(`Handshake: (remote) KEX method: ${H.kex}`);let xe;if(w._server?(ee=q,D=H.kex,xe=D.indexOf("ext-info-c")!==-1):(ee=H.kex,D=q,xe=ee.indexOf("ext-info-s")!==-1),w._strictMode===void 0&&(w._server?w._strictMode=D.indexOf("kex-strict-c-v00@openssh.com")!==-1:w._strictMode=ee.indexOf("kex-strict-s-v00@openssh.com")!==-1,w._strictMode&&(le&&le("Handshake: strict KEX mode enabled"),w._decipher.inSeqno!==1)))return le&&le("Handshake: KEXINIT not first packet in strict KEX mode"),K(w,"Handshake failed: KEXINIT not first packet in strict KEX mode","handshake",y.KEY_EXCHANGE_FAILED);for(ce=0;ce<D.length&&ee.indexOf(D[ce])===-1;++ce);if(ce===D.length)return le&&le("Handshake: no matching key exchange algorithm"),K(w,"Handshake failed: no matching key exchange algorithm","handshake",y.KEY_EXCHANGE_FAILED);A.kex=D[ce],le&&le(`Handshake: KEX algorithm: ${D[ce]}`),V&&(!H.kex.length||D[ce]!==H.kex[0])&&(w._skipNextInboundPacket=!0);const Je=G.lists.serverHostKey.array;for(le&&le(`Handshake: (local) Host key format: ${Je}`),le&&le(`Handshake: (remote) Host key format: ${H.serverHostKey}`),w._server?(ee=Je,D=H.serverHostKey):(ee=H.serverHostKey,D=Je),ce=0;ce<D.length&&ee.indexOf(D[ce])===-1;++ce);if(ce===D.length)return le&&le("Handshake: No matching host key format"),K(w,"Handshake failed: no matching host key format","handshake",y.KEY_EXCHANGE_FAILED);A.serverHostKey=D[ce],le&&le(`Handshake: Host key format: ${D[ce]}`);const Ct=G.lists.cs.cipher.array;for(le&&le(`Handshake: (local) C->S cipher: ${Ct}`),le&&le(`Handshake: (remote) C->S cipher: ${H.cs.cipher}`),w._server?(ee=Ct,D=H.cs.cipher):(ee=H.cs.cipher,D=Ct),ce=0;ce<D.length&&ee.indexOf(D[ce])===-1;++ce);if(ce===D.length)return le&&le("Handshake: No matching C->S cipher"),K(w,"Handshake failed: no matching C->S cipher","handshake",y.KEY_EXCHANGE_FAILED);A.cs.cipher=D[ce],le&&le(`Handshake: C->S Cipher: ${D[ce]}`);const Le=G.lists.sc.cipher.array;for(le&&le(`Handshake: (local) S->C cipher: ${Le}`),le&&le(`Handshake: (remote) S->C cipher: ${H.sc.cipher}`),w._server?(ee=Le,D=H.sc.cipher):(ee=H.sc.cipher,D=Le),ce=0;ce<D.length&&ee.indexOf(D[ce])===-1;++ce);if(ce===D.length)return le&&le("Handshake: No matching S->C cipher"),K(w,"Handshake failed: no matching S->C cipher","handshake",y.KEY_EXCHANGE_FAILED);A.sc.cipher=D[ce],le&&le(`Handshake: S->C cipher: ${D[ce]}`);const mt=G.lists.cs.mac.array;if(le&&le(`Handshake: (local) C->S MAC: ${mt}`),le&&le(`Handshake: (remote) C->S MAC: ${H.cs.mac}`),I[A.cs.cipher].authLen>0)A.cs.mac="",le&&le("Handshake: C->S MAC: <implicit>");else{for(w._server?(ee=mt,D=H.cs.mac):(ee=H.cs.mac,D=mt),ce=0;ce<D.length&&ee.indexOf(D[ce])===-1;++ce);if(ce===D.length)return le&&le("Handshake: No matching C->S MAC"),K(w,"Handshake failed: no matching C->S MAC","handshake",y.KEY_EXCHANGE_FAILED);A.cs.mac=D[ce],le&&le(`Handshake: C->S MAC: ${D[ce]}`)}const _t=G.lists.sc.mac.array;if(le&&le(`Handshake: (local) S->C MAC: ${_t}`),le&&le(`Handshake: (remote) S->C MAC: ${H.sc.mac}`),I[A.sc.cipher].authLen>0)A.sc.mac="",le&&le("Handshake: S->C MAC: <implicit>");else{for(w._server?(ee=_t,D=H.sc.mac):(ee=H.sc.mac,D=_t),ce=0;ce<D.length&&ee.indexOf(D[ce])===-1;++ce);if(ce===D.length)return le&&le("Handshake: No matching S->C MAC"),K(w,"Handshake failed: no matching S->C MAC","handshake",y.KEY_EXCHANGE_FAILED);A.sc.mac=D[ce],le&&le(`Handshake: S->C MAC: ${D[ce]}`)}const pt=G.lists.cs.compress.array;for(le&&le(`Handshake: (local) C->S compression: ${pt}`),le&&le(`Handshake: (remote) C->S compression: ${H.cs.compress}`),w._server?(ee=pt,D=H.cs.compress):(ee=H.cs.compress,D=pt),ce=0;ce<D.length&&ee.indexOf(D[ce])===-1;++ce);if(ce===D.length)return le&&le("Handshake: No matching C->S compression"),K(w,"Handshake failed: no matching C->S compression","handshake",y.KEY_EXCHANGE_FAILED);A.cs.compress=D[ce],le&&le(`Handshake: C->S compression: ${D[ce]}`);const Ge=G.lists.sc.compress.array;for(le&&le(`Handshake: (local) S->C compression: ${Ge}`),le&&le(`Handshake: (remote) S->C compression: ${H.sc.compress}`),w._server?(ee=Ge,D=H.sc.compress):(ee=H.sc.compress,D=Ge),ce=0;ce<D.length&&ee.indexOf(D[ce])===-1;++ce);if(ce===D.length)return le&&le("Handshake: No matching S->C compression"),K(w,"Handshake failed: no matching S->C compression","handshake",y.KEY_EXCHANGE_FAILED);A.sc.compress=D[ce],le&&le(`Handshake: S->C compression: ${D[ce]}`),A.cs.lang="",A.sc.lang="",w._kex&&(w._kexinit||B(w),w._decipher._onPayload=me.bind(w,{firstPacket:!1})),w._kex=g(A,w,b),w._kex.remoteExtInfoEnabled=xe,w._kex.start()}const g=(()=>{function w(H){let q=0,D=H.length;for(;H[q]===0;)++q,--D;let ee;return H[q]&128?(ee=Buffer.allocUnsafe(1+D),ee[0]=0,H.copy(ee,1,q),H=ee):D!==H.length&&(ee=Buffer.allocUnsafe(D),H.copy(ee,0,q),H=ee),H}class b{constructor(q,D,ee){this._protocol=D,this.sessionID=D._kex?D._kex.sessionID:void 0,this.negotiated=q,this.remoteExtInfoEnabled=!1,this._step=1,this._public=null,this._dh=null,this._sentNEWKEYS=!1,this._receivedNEWKEYS=!1,this._finished=!1,this._hostVerified=!1,this._kexinit=D._kexinit,this._remoteKexinit=ee,this._identRaw=D._identRaw,this._remoteIdentRaw=D._remoteIdentRaw,this._hostKey=void 0,this._dhData=void 0,this._sig=void 0}finish(q){if(this._finished)return!1;this._finished=!0;const D=this._protocol._server,ee=this.negotiated,ce=this.convertPublicKey(this._dhData);let le=this.computeSecret(this._dhData);if(le instanceof Error)return le.message=`Error while computing DH secret (${this.type}): ${le.message}`,le.level="handshake",K(this._protocol,le,y.KEY_EXCHANGE_FAILED);const xe=n(this.hashName);U(xe,D?this._remoteIdentRaw:this._identRaw),U(xe,D?this._identRaw:this._remoteIdentRaw),U(xe,D?this._remoteKexinit:this._kexinit),U(xe,D?this._kexinit:this._remoteKexinit);const Je=D?this._hostKey.getPublicSSH():this._hostKey;if(U(xe,Je),this.type==="groupex"){const Ge=this.getDHParams(),et=Buffer.allocUnsafe(4);ue(et,this._minBits,0),xe.update(et),ue(et,this._prefBits,0),xe.update(et),ue(et,this._maxBits,0),xe.update(et),U(xe,Ge.prime),U(xe,Ge.generator)}U(xe,D?ce:this.getPublicKey());const Ct=D?this.getPublicKey():ce;U(xe,Ct),U(xe,le);const Le=xe.digest();if(D){let Ge;switch(this.negotiated.serverHostKey){case"rsa-sha2-256":Ge="sha256";break;case"rsa-sha2-512":Ge="sha512";break}this._protocol._debug&&this._protocol._debug("Generating signature ...");let et=this._hostKey.sign(Le,Ge);if(et instanceof Error)return K(this._protocol,`Handshake failed: signature generation failed for ${this._hostKey.type} host key: ${et.message}`,"handshake",y.KEY_EXCHANGE_FAILED);if(et=F(et,this._hostKey.type),et===!1)return K(this._protocol,`Handshake failed: signature conversion failed for ${this._hostKey.type} host key`,"handshake",y.KEY_EXCHANGE_FAILED);const it=this.negotiated.serverHostKey,er=Buffer.byteLength(it),_r=4+er+4+et.length;let Ht=this._protocol._packetRW.write.allocStartKEX;const jt=this._protocol._packetRW.write.alloc(5+Je.length+4+Ct.length+4+_r,!0);if(jt[Ht]=E.KEXDH_REPLY,ue(jt,Je.length,++Ht),jt.set(Je,Ht+=4),ue(jt,Ct.length,Ht+=Je.length),jt.set(Ct,Ht+=4),ue(jt,_r,Ht+=Ct.length),ue(jt,er,Ht+=4),jt.utf8Write(it,Ht+=4,er),ue(jt,et.length,Ht+=er),jt.set(et,Ht+=4),this._protocol._debug){let Sr;switch(this.type){case"group":Sr="KEXDH_REPLY";break;case"groupex":Sr="KEXDH_GEX_REPLY";break;default:Sr="KEXECDH_REPLY"}this._protocol._debug(`Outbound: Sending ${Sr}`)}this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(jt,!0))}else{M.init(this._sig,0);const Ge=M.readString(!0);if(!Ge)return K(this._protocol,"Malformed packet while reading signature","handshake",y.KEY_EXCHANGE_FAILED);if(Ge!==ee.serverHostKey)return K(this._protocol,`Wrong signature type: ${Ge}, expected: ${ee.serverHostKey}`,"handshake",y.KEY_EXCHANGE_FAILED);let et=M.readString();if(M.clear(),et===void 0)return K(this._protocol,"Malformed packet while reading signature","handshake",y.KEY_EXCHANGE_FAILED);if(!(et=J(et,Ge)))return K(this._protocol,"Malformed signature","handshake",y.KEY_EXCHANGE_FAILED);let it;{M.init(this._hostKey,0);const Ht=M.readString(!0),jt=this._hostKey.slice(M.pos());if(M.clear(),it=z(jt,Ht),it instanceof Error)return it.level="handshake",K(this._protocol,it,y.KEY_EXCHANGE_FAILED)}let er;switch(this.negotiated.serverHostKey){case"rsa-sha2-256":er="sha256";break;case"rsa-sha2-512":er="sha512";break}this._protocol._debug&&this._protocol._debug("Verifying signature ...");const _r=it.verify(Le,et,er);if(_r!==!0)return _r instanceof Error?this._protocol._debug&&this._protocol._debug(`Signature verification failed: ${_r.stack}`):this._protocol._debug&&this._protocol._debug("Signature verification failed"),K(this._protocol,"Handshake failed: signature verification failed","handshake",y.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Verified signature")}(D||!q)&&Se(this);let mt,_t;const pt=Ge=>{if(mt)return Se(this),mt.outbound.seqno=this._protocol._cipher.outSeqno,this._protocol._cipher.free(),this._protocol._cipher=R(mt),this._protocol._packetRW.write=_t,mt=void 0,_t=void 0,this._protocol._onHandshakeComplete(ee),!1;this.sessionID||(this.sessionID=Le);{const Xi=Buffer.allocUnsafe(4+le.length);ue(Xi,le.length,0),Xi.set(le,4),le=Xi}const et=I[ee.cs.cipher],it=I[ee.sc.cipher],er=pe(et.ivLen,this.hashName,le,Le,this.sessionID,"A"),_r=pe(it.ivLen,this.hashName,le,Le,this.sessionID,"B"),Ht=pe(et.keyLen,this.hashName,le,Le,this.sessionID,"C"),jt=pe(it.keyLen,this.hashName,le,Le,this.sessionID,"D");let Sr,hn;et.authLen||(Sr=Q[ee.cs.mac],hn=pe(Sr.len,this.hashName,le,Le,this.sessionID,"E"));let nn,Gn;it.authLen||(nn=Q[ee.sc.mac],Gn=pe(nn.len,this.hashName,le,Le,this.sessionID,"F"));const zi={inbound:{onPayload:this._protocol._onPayload,seqno:this._protocol._decipher.inSeqno,decipherInfo:D?et:it,decipherIV:D?er:_r,decipherKey:D?Ht:jt,macInfo:D?Sr:nn,macKey:D?hn:Gn},outbound:{onWrite:this._protocol._onWrite,seqno:this._protocol._cipher.outSeqno,cipherInfo:D?it:et,cipherIV:D?_r:er,cipherKey:D?jt:Ht,macInfo:D?nn:Sr,macKey:D?Gn:hn}};this._protocol._decipher.free(),mt=zi,this._protocol._decipher=P(zi);const cr={read:void 0,write:void 0};switch(ee.cs.compress){case"zlib":D?cr.read=new ie:cr.write=new oe(this._protocol);break;case"zlib@openssh.com":if(this._protocol._authenticated){D?cr.read=new ie:cr.write=new oe(this._protocol);break}default:D?cr.read=new Y:cr.write=new Z(this._protocol)}switch(ee.sc.compress){case"zlib":D?cr.write=new oe(this._protocol):cr.read=new ie;break;case"zlib@openssh.com":if(this._protocol._authenticated){D?cr.write=new oe(this._protocol):cr.read=new ie;break}default:D?cr.write=new Z(this._protocol):cr.read=new Y}return this._protocol._packetRW.read.cleanup(),this._protocol._packetRW.write.cleanup(),this._protocol._packetRW.read=cr.read,_t=cr.write,this._public=null,this._dh=null,this._kexinit=this._protocol._kexinit=void 0,this._remoteKexinit=void 0,this._identRaw=void 0,this._remoteIdentRaw=void 0,this._hostKey=void 0,this._dhData=void 0,this._sig=void 0,Ge?!1:pt()};if((D||q)&&(this.finish=pt),!D)return pt(q)}start(){if(!this._protocol._server){if(this._protocol._debug){let ce;switch(this.type){case"group":ce="KEXDH_INIT";break;default:ce="KEXECDH_INIT"}this._protocol._debug(`Outbound: Sending ${ce}`)}const q=this.getPublicKey();let D=this._protocol._packetRW.write.allocStartKEX;const ee=this._protocol._packetRW.write.alloc(5+q.length,!0);ee[D]=E.KEXDH_INIT,ue(ee,q.length,++D),ee.set(q,D+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(ee,!0))}}getPublicKey(){this.generateKeys();const q=this._public;if(q)return this.convertPublicKey(q)}convertPublicKey(q){let D,ee=0,ce=q.length;for(;q[ee]===0;)++ee,--ce;return q[ee]&128?(D=Buffer.allocUnsafe(1+ce),D[0]=0,q.copy(D,1,ee),D):(ce!==q.length&&(D=Buffer.allocUnsafe(ce),q.copy(D,0,ee),q=D),q)}computeSecret(q){this.generateKeys();try{return w(this._dh.computeSecret(q))}catch(D){return D}}parse(q){const D=q[0];switch(this._step){case 1:if(this._protocol._server){if(D!==E.KEXDH_INIT)return K(this._protocol,`Received packet ${D} instead of ${E.KEXDH_INIT}`,"handshake",y.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH Init"),M.init(q,1);const ee=M.readString();if(M.clear(),ee===void 0)return K(this._protocol,"Received malformed KEX*_INIT","handshake",y.KEY_EXCHANGE_FAILED);this._dhData=ee;let ce=this._protocol._hostKeys[this.negotiated.serverHostKey];Array.isArray(ce)&&(ce=ce[0]),this._hostKey=ce,this.finish()}else{if(D!==E.KEXDH_REPLY)return K(this._protocol,`Received packet ${D} instead of ${E.KEXDH_REPLY}`,"handshake",y.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH Reply"),M.init(q,1);let ee,ce,le;if((ee=M.readString())===void 0||(ce=M.readString())===void 0||(le=M.readString())===void 0)return M.clear(),K(this._protocol,"Received malformed KEX*_REPLY","handshake",y.KEY_EXCHANGE_FAILED);M.clear(),M.init(ee,0);const xe=M.readString(!0);if(M.clear(),xe===void 0)return K(this._protocol,"Received malformed host public key","handshake",y.KEY_EXCHANGE_FAILED);if(xe!==this.negotiated.serverHostKey)switch(this.negotiated.serverHostKey){case"rsa-sha2-256":case"rsa-sha2-512":if(xe==="ssh-rsa")break;default:return K(this._protocol,"Host key does not match negotiated type","handshake",y.KEY_EXCHANGE_FAILED)}this._hostKey=ee,this._dhData=ce,this._sig=le;let Je=!1,Ct;if(this._protocol._hostVerifier===void 0?(Ct=!0,this._protocol._debug&&this._protocol._debug("Host accepted by default (no verification)")):Ct=this._protocol._hostVerifier(ee,Le=>{if(!Je){if(Je=!0,Le===!1)return this._protocol._debug&&this._protocol._debug("Host denied (verification failed)"),K(this._protocol,"Host denied (verification failed)","handshake",y.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Host accepted (verified)"),this._hostVerified=!0,this._receivedNEWKEYS?this.finish():Se(this)}}),Ct===void 0){++this._step;return}if(Je=!0,Ct===!1)return this._protocol._debug&&this._protocol._debug("Host denied (verification failed)"),K(this._protocol,"Host denied (verification failed)","handshake",y.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Host accepted (verified)"),this._hostVerified=!0,Se(this)}++this._step;break;case 2:return D!==E.NEWKEYS?K(this._protocol,`Received packet ${D} instead of ${E.NEWKEYS}`,"handshake",y.KEY_EXCHANGE_FAILED):(this._protocol._debug&&this._protocol._debug("Inbound: NEWKEYS"),this._receivedNEWKEYS=!0,this._protocol._strictMode&&(this._protocol._decipher.inSeqno=0),++this._step,this.finish(!this._protocol._server&&!this._hostVerified));default:return K(this._protocol,`Received unexpected packet ${D} after NEWKEYS`,"handshake",y.KEY_EXCHANGE_FAILED)}}}class A extends b{constructor(q,...D){super(...D),this.type="25519",this.hashName=q,this._keys=null}generateKeys(){this._keys||(this._keys=o("x25519"))}getPublicKey(){return this.generateKeys(),this._keys.publicKey.export({type:"spki",format:"der"}).slice(-32)}convertPublicKey(q){let D,ee=0,ce=q.length;for(;q[ee]===0;)++ee,--ce;return q.length===32||ce!==q.length&&(D=Buffer.allocUnsafe(ce),q.copy(D,0,ee),q=D),q}computeSecret(q){this.generateKeys();try{const D=new c.Writer;return D.startSequence(),D.startSequence(),D.writeOID("1.3.101.110"),D.endSequence(),D.startSequence(c.BitString),D.writeByte(0),D._ensure(q.length),q.copy(D._buf,D._offset,0,q.length),D._offset+=q.length,D.endSequence(),D.endSequence(),w(s({privateKey:this._keys.privateKey,publicKey:i({key:D.buffer,type:"spki",format:"der"})}))}catch(D){return D}}}class T extends b{constructor(q,D,...ee){super(...ee),this.type="ecdh",this.curveName=q,this.hashName=D}generateKeys(){this._dh||(this._dh=r(this.curveName),this._public=this._dh.generateKeys())}}class V extends b{constructor(q,...D){super(...D),this.type="groupex",this.hashName=q,this._prime=null,this._generator=null,this._minBits=j,this._prefBits=Ie(this.negotiated),this._protocol._compatFlags&f.BUG_DHGEX_LARGE&&(this._prefBits=Math.min(this._prefBits,4096)),this._maxBits=C}start(){if(this._protocol._server)return;this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_REQUEST");let q=this._protocol._packetRW.write.allocStartKEX;const D=this._protocol._packetRW.write.alloc(13,!0);D[q]=E.KEXDH_GEX_REQUEST,ue(D,this._minBits,++q),ue(D,this._prefBits,q+=4),ue(D,this._maxBits,q+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(D,!0))}generateKeys(){!this._dh&&this._prime&&this._generator&&(this._dh=t(this._prime,this._generator),this._public=this._dh.generateKeys())}setDHParams(q,D){if(!Buffer.isBuffer(q))throw new Error("Invalid prime value");if(!Buffer.isBuffer(D))throw new Error("Invalid generator value");this._prime=q,this._generator=D}getDHParams(){if(this._dh)return{prime:w(this._dh.getPrime()),generator:w(this._dh.getGenerator())}}parse(q){const D=q[0];switch(this._step){case 1:{if(this._protocol._server)return D!==E.KEXDH_GEX_REQUEST?K(this._protocol,`Received packet ${D} instead of `+E.KEXDH_GEX_REQUEST,"handshake",y.KEY_EXCHANGE_FAILED):K(this._protocol,"Group exchange not implemented for server","handshake",y.KEY_EXCHANGE_FAILED);if(D!==E.KEXDH_GEX_GROUP)return K(this._protocol,`Received packet ${D} instead of ${E.KEXDH_GEX_GROUP}`,"handshake",y.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH GEX Group"),M.init(q,1);let ee,ce;if((ee=M.readString())===void 0||(ce=M.readString())===void 0)return M.clear(),K(this._protocol,"Received malformed KEXDH_GEX_GROUP","handshake",y.KEY_EXCHANGE_FAILED);M.clear(),this.setDHParams(ee,ce),this.generateKeys();const le=this.getPublicKey();this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_GEX_INIT");let xe=this._protocol._packetRW.write.allocStartKEX;const Je=this._protocol._packetRW.write.alloc(5+le.length,!0);Je[xe]=E.KEXDH_GEX_INIT,ue(Je,le.length,++xe),Je.set(le,xe+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(Je,!0)),++this._step;break}case 2:if(this._protocol._server)return D!==E.KEXDH_GEX_INIT?K(this._protocol,`Received packet ${D} instead of ${E.KEXDH_GEX_INIT}`,"handshake",y.KEY_EXCHANGE_FAILED):(this._protocol._debug&&this._protocol._debug("Received DH GEX Init"),K(this._protocol,"Group exchange not implemented for server","handshake",y.KEY_EXCHANGE_FAILED));if(D!==E.KEXDH_GEX_REPLY)return K(this._protocol,`Received packet ${D} instead of ${E.KEXDH_GEX_REPLY}`,"handshake",y.KEY_EXCHANGE_FAILED);this._protocol._debug&&this._protocol._debug("Received DH GEX Reply"),this._step=1,q[0]=E.KEXDH_REPLY,this.parse=b.prototype.parse,this.parse(q)}}}class G extends b{constructor(q,D,...ee){super(...ee),this.type="group",this.groupName=q,this.hashName=D}start(){if(!this._protocol._server){this._protocol._debug&&this._protocol._debug("Outbound: Sending KEXDH_INIT");const q=this.getPublicKey();let D=this._protocol._packetRW.write.allocStartKEX;const ee=this._protocol._packetRW.write.alloc(5+q.length,!0);ee[D]=E.KEXDH_INIT,ue(ee,q.length,++D),ee.set(q,D+=4),this._protocol._cipher.encrypt(this._protocol._packetRW.write.finalize(ee,!0))}}generateKeys(){this._dh||(this._dh=e(this.groupName),this._public=this._dh.generateKeys())}getDHParams(){if(this._dh)return{prime:w(this._dh.getPrime()),generator:w(this._dh.getGenerator())}}}return(H,...q)=>{if(typeof H!="object"||H===null)throw new Error("Invalid negotiated argument");const D=H.kex;if(typeof D=="string"){switch(q=[H,...q],D){case"curve25519-sha256":case"curve25519-sha256@libssh.org":if(!u)break;return new A("sha256",...q);case"ecdh-sha2-nistp256":return new T("prime256v1","sha256",...q);case"ecdh-sha2-nistp384":return new T("secp384r1","sha384",...q);case"ecdh-sha2-nistp521":return new T("secp521r1","sha512",...q);case"diffie-hellman-group1-sha1":return new G("modp2","sha1",...q);case"diffie-hellman-group14-sha1":return new G("modp14","sha1",...q);case"diffie-hellman-group14-sha256":return new G("modp14","sha256",...q);case"diffie-hellman-group15-sha512":return new G("modp15","sha512",...q);case"diffie-hellman-group16-sha512":return new G("modp16","sha512",...q);case"diffie-hellman-group17-sha512":return new G("modp17","sha512",...q);case"diffie-hellman-group18-sha512":return new G("modp18","sha512",...q);case"diffie-hellman-group-exchange-sha1":return new V("sha1",...q);case"diffie-hellman-group-exchange-sha256":return new V("sha256",...q)}throw new Error(`Unsupported key exchange algorithm: ${D}`)}throw new Error(`Invalid key exchange type: ${D}`)}})(),S=(()=>{const w=["kex","serverHostKey",["cs","cipher"],["sc","cipher"],["cs","mac"],["sc","mac"],["cs","compress"],["sc","compress"],["cs","lang"],["sc","lang"]];return class{constructor(A){if(typeof A!="object"||A===null)throw new TypeError("Argument must be an object");const T={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},sc:{cipher:void 0,mac:void 0,compress:void 0,lang:void 0},all:void 0};let V=0;for(const q of w){let D,ee,ce,le;if(typeof q=="string")D=T,ee=A[q],ce=le=q;else{const Je=q[0];D=T[Je],le=q[1],ee=A[Je][le],ce=`${Je}.${le}`}const xe={array:void 0,buffer:void 0};if(Buffer.isBuffer(ee))xe.array=(""+ee).split(","),xe.buffer=ee,V+=4+ee.length;else{if(typeof ee=="string"&&(ee=ee.split(",")),Array.isArray(ee))xe.array=ee,xe.buffer=Buffer.from(ee.join(","));else throw new TypeError(`Invalid \`${ce}\` type: ${typeof ee}`);V+=4+xe.buffer.length}D[le]=xe}const G=Buffer.allocUnsafe(V);T.all=G;let H=0;for(const q of w){let D;typeof q=="string"?D=T[q].buffer:D=T[q[0]][q[1]].buffer,H=ue(G,D.length,H),G.set(D,H),H+=D.length}this.totalSize=V,this.lists=T}copyAllTo(A,T){const V=this.lists.all;if(typeof T!="number")throw new TypeError(`Invalid offset value: ${typeof T}`);if(A.length-T<V.length)throw new Error("Insufficient space to copy list");return A.set(V,T),V.length}}})(),U=(()=>{const w=Buffer.allocUnsafe(4);return(b,A)=>{ue(w,A.length,0),b.update(w),b.update(A)}})();function pe(w,b,A,T,V,G){let H;if(w){let q=n(b).update(A).update(T).update(G).update(V).digest();for(;q.length<w;){const D=n(b).update(A).update(T).update(q).digest(),ee=Buffer.allocUnsafe(q.length+D.length);ee.set(q,0),ee.set(D,q.length),q=ee}q.length===w?H=q:H=new se(q.buffer,q.byteOffset,w)}else H=v;return H}function me(w,b){if(b.length===0){this._debug&&this._debug("Inbound: Skipping empty packet payload");return}if(this._skipNextInboundPacket){this._skipNextInboundPacket=!1;return}b=this._packetRW.read.read(b);const A=b[0];if(!this._strictMode)switch(A){case E.IGNORE:case E.UNIMPLEMENTED:case E.DEBUG:return O||(O=Tc()),O[A](this,b)}switch(A){case E.DISCONNECT:return O||(O=Tc()),O[A](this,b);case E.KEXINIT:return w.firstPacket?(w.firstPacket=!1,x(this,b)):K(this,"Received extra KEXINIT during handshake","handshake",y.KEY_EXCHANGE_FAILED);default:if(A<20||A>49)return K(this,`Received unexpected packet type ${A}`,"handshake",y.KEY_EXCHANGE_FAILED)}return this._kex.parse(b)}function Ie(w){const b=I[w.cs.cipher],A=I[w.sc.cipher],T=Math.max(0,b.sslName==="des-ede3-cbc"?14:b.keyLen,b.blockLen,b.ivLen,A.sslName==="des-ede3-cbc"?14:A.keyLen,A.blockLen,A.ivLen)*8;return T<=112?2048:T<=128?3072:T<=192?7680:8192}function Se(w){if(!w._sentNEWKEYS){w._protocol._debug&&w._protocol._debug("Outbound: Sending NEWKEYS");const b=w._protocol._packetRW.write.allocStartKEX,A=w._protocol._packetRW.write.alloc(1,!0);A[b]=E.NEWKEYS,w._protocol._cipher.encrypt(w._protocol._packetRW.write.finalize(A,!0)),w._sentNEWKEYS=!0,w._protocol._strictMode&&(w._protocol._cipher.outSeqno=0)}}return Ja={KexInit:S,kexinit:B,onKEXPayload:me,DEFAULT_KEXINIT_CLIENT:new S({kex:l.concat(["ext-info-c","kex-strict-c-v00@openssh.com"]),serverHostKey:h,cs:{cipher:d,mac:m,compress:_,lang:[]},sc:{cipher:d,mac:m,compress:_,lang:[]}}),DEFAULT_KEXINIT_SERVER:new S({kex:l.concat(["kex-strict-s-v00@openssh.com"]),serverHostKey:h,cs:{cipher:d,mac:m,compress:_,lang:[]},sc:{cipher:d,mac:m,compress:_,lang:[]}}),HANDLERS:{[E.KEXINIT]:x}},Ja}const F$="1.17.0",H$={version:F$},{inspect:R0}=xs,{bindingAvailable:j$,NullCipher:Q$,NullDecipher:q$}=hi(),{COMPAT_CHECKS:K$,DISCONNECT_REASON:N0,eddsaSupported:W$,MESSAGE:Ue,SIGNALS:Ud,TERMINAL_MODE:Bc}=Wn(),{DEFAULT_KEXINIT_CLIENT:G$,DEFAULT_KEXINIT_SERVER:V$,KexInit:Md,kexinit:k0,onKEXPayload:Y$}=zu(),{parseKey:Fd}=pi,z$=Tc(),{bufferCopy:ho,bufferFill:X$,bufferSlice:P0,convertSignature:Hd,sendPacket:Me,writeUInt32BE:te}=dn(),{PacketReader:J$,PacketWriter:Z$,ZlibPacketReader:T0,ZlibPacketWriter:B0}=C0,eC=H$.version,tC=new Map(Object.values(N0).map(t=>[t,1])),O0=Buffer.from(`SSH-2.0-ssh2js${eC}`),rC=Buffer.from(`${O0}\r
`),nC=8192,iC=1024,jd=Buffer.from([Ue.GLOBAL_REQUEST,0,0,0,21,107,101,101,112,97,108,105,118,101,64,111,112,101,110,115,115,104,46,99,111,109,1]),sC=Buffer.from([Bc.TTY_OP_END]);function Za(){}let oC=class{constructor(e){const r=e.onWrite;if(typeof r!="function")throw new Error("Missing onWrite function");this._onWrite=d=>{r(d)};const n=e.onError;if(typeof n!="function")throw new Error("Missing onError function");this._onError=d=>{n(d)};const i=e.debug;this._debug=typeof i=="function"?d=>{i(d)}:void 0;const s=e.onHeader;this._onHeader=typeof s=="function"?(...d)=>{s(...d)}:Za;const o=e.onPacket;this._onPacket=typeof o=="function"?()=>{o()}:Za;let a=e.onHandshakeComplete;typeof a!="function"&&(a=Za);let c;this._onHandshakeComplete=(...d)=>{this._debug&&this._debug("Handshake completed"),c===void 0?c=!0:c=!1;const m=this._queue;if(m){this._queue=void 0,this._debug&&this._debug(`Draining outbound queue (${m.length}) ...`);for(let _=0;_<m.length;++_){const y=m[_];let E=this._packetRW.write.finalize(y);if(E===y){const I=this._cipher.allocPacket(y.length);I.set(y,5),E=I}Me(this,E)}this._debug&&this._debug("... finished draining outbound queue")}c&&this._server&&this._kex.remoteExtInfoEnabled&&hC(this),a(...d)},this._queue=void 0;const f=e.messageHandlers;typeof f=="object"&&f!==null?this._handlers=f:this._handlers={},this._onPayload=uC.bind(this),this._server=!!e.server,this._banner=void 0;let u;if(this._server){if(typeof e.hostKeys!="object"||e.hostKeys===null)throw new Error("Missing server host key(s)");this._hostKeys=e.hostKeys,typeof e.greeting=="string"&&e.greeting.length&&(u=e.greeting.slice(-2)===`\r
`?e.greeting:`${e.greeting}\r
`),typeof e.banner=="string"&&e.banner.length&&(this._banner=e.banner.slice(-2)===`\r
`?e.banner:`${e.banner}\r
`)}else this._hostKeys=void 0;let l=e.offer;typeof l!="object"||l===null?l=this._server?V$:G$:l.constructor!==Md&&(this._server?l.kex=l.kex.concat(["kex-strict-s-v00@openssh.com"]):l.kex=l.kex.concat(["ext-info-c","kex-strict-c-v00@openssh.com"]),l=new Md(l)),this._kex=void 0,this._strictMode=void 0,this._kexinit=void 0,this._offer=l,this._cipher=new Q$(0,this._onWrite),this._decipher=void 0,this._skipNextInboundPacket=!1,this._packetRW={read:new J$,write:new Z$(this)},this._hostVerifier=!this._server&&typeof e.hostVerifier=="function"?e.hostVerifier:void 0,this._parse=cC,this._buffer=void 0,this._authsQueue=[],this._authenticated=!1,this._remoteIdentRaw=void 0;let h;if(typeof e.ident=="string")this._identRaw=Buffer.from(`SSH-2.0-${e.ident}`),h=Buffer.allocUnsafe(this._identRaw.length+2),h.set(this._identRaw,0),h[h.length-2]=13,h[h.length-1]=10;else if(Buffer.isBuffer(e.ident)){const d=Buffer.allocUnsafe(8+e.ident.length);d.latin1Write("SSH-2.0-",0,8),d.set(e.ident,8),this._identRaw=d,h=Buffer.allocUnsafe(d.length+2),h.set(d,0),h[h.length-2]=13,h[h.length-1]=10}else this._identRaw=O0,h=rC;this._compatFlags=0,this._debug&&(j$?this._debug("Custom crypto binding available"):this._debug("Custom crypto binding not available")),this._debug&&this._debug(`Local ident: ${R0(this._identRaw.toString())}`),this.start=()=>{this.start=void 0,u&&this._onWrite(u),this._onWrite(h)}}_destruct(e){this._packetRW.read.cleanup(),this._packetRW.write.cleanup(),this._cipher&&this._cipher.free(),this._decipher&&this._decipher.free(),(typeof e!="string"||e.length===0)&&(e="fatal error"),this.parse=()=>{throw new Error(`Instance unusable after ${e}`)},this._onWrite=()=>{throw new Error(`Instance unusable after ${e}`)},this._destruct=void 0}cleanup(){this._destruct&&this._destruct()}parse(e,r,n){for(;r<n;)r=this._parse(e,r,n)}disconnect(e){let n=this._packetRW.write.allocStartKEX;const i=this._packetRW.write.alloc(13,!0),s=n+13;tC.has(e)||(e=N0.PROTOCOL_ERROR),i[n]=Ue.DISCONNECT,te(i,e,++n),i.fill(0,n+=4,s),this._debug&&this._debug(`Outbound: Sending DISCONNECT (${e})`),Me(this,this._packetRW.write.finalize(i,!0),!0)}ping(){const e=this._packetRW.write.allocStart,r=this._packetRW.write.alloc(jd.length);r.set(jd,e),this._debug&&this._debug("Outbound: Sending ping (GLOBAL_REQUEST: keepalive@openssh.com)"),Me(this,this._packetRW.write.finalize(r))}rekey(){this._kexinit===void 0?(this._debug&&this._debug("Outbound: Initiated explicit rekey"),this._queue=[],k0(this)):this._debug&&this._debug("Outbound: Ignoring rekey during handshake")}requestSuccess(e){let r=this._packetRW.write.allocStart,n;Buffer.isBuffer(e)?(n=this._packetRW.write.alloc(1+e.length),n[r]=Ue.REQUEST_SUCCESS,n.set(e,++r)):(n=this._packetRW.write.alloc(1),n[r]=Ue.REQUEST_SUCCESS),this._debug&&this._debug("Outbound: Sending REQUEST_SUCCESS"),Me(this,this._packetRW.write.finalize(n))}requestFailure(){const e=this._packetRW.write.allocStart,r=this._packetRW.write.alloc(1);r[e]=Ue.REQUEST_FAILURE,this._debug&&this._debug("Outbound: Sending REQUEST_FAILURE"),Me(this,this._packetRW.write.finalize(r))}channelSuccess(e){let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5);n[r]=Ue.CHANNEL_SUCCESS,te(n,e,++r),this._debug&&this._debug(`Outbound: Sending CHANNEL_SUCCESS (r:${e})`),Me(this,this._packetRW.write.finalize(n))}channelFailure(e){let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5);n[r]=Ue.CHANNEL_FAILURE,te(n,e,++r),this._debug&&this._debug(`Outbound: Sending CHANNEL_FAILURE (r:${e})`),Me(this,this._packetRW.write.finalize(n))}channelEOF(e){let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5);n[r]=Ue.CHANNEL_EOF,te(n,e,++r),this._debug&&this._debug(`Outbound: Sending CHANNEL_EOF (r:${e})`),Me(this,this._packetRW.write.finalize(n))}channelClose(e){let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(5);n[r]=Ue.CHANNEL_CLOSE,te(n,e,++r),this._debug&&this._debug(`Outbound: Sending CHANNEL_CLOSE (r:${e})`),Me(this,this._packetRW.write.finalize(n))}channelWindowAdjust(e,r){let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(9);i[n]=Ue.CHANNEL_WINDOW_ADJUST,te(i,e,++n),te(i,r,n+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_WINDOW_ADJUST (r:${e}, ${r})`),Me(this,this._packetRW.write.finalize(i))}channelData(e,r){const n=Buffer.isBuffer(r),i=n?r.length:Buffer.byteLength(r);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(9+i);o[s]=Ue.CHANNEL_DATA,te(o,e,++s),te(o,i,s+=4),n?o.set(r,s+=4):o.utf8Write(r,s+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_DATA (r:${e}, ${i})`),Me(this,this._packetRW.write.finalize(o))}channelExtData(e,r,n){const i=Buffer.isBuffer(r),s=i?r.length:Buffer.byteLength(r);let o=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(13+s);a[o]=Ue.CHANNEL_EXTENDED_DATA,te(a,e,++o),te(a,n,o+=4),te(a,s,o+=4),i?a.set(r,o+=4):a.utf8Write(r,o+=4,s),this._debug&&this._debug(`Outbound: Sending CHANNEL_EXTENDED_DATA (r:${e})`),Me(this,this._packetRW.write.finalize(a))}channelOpenConfirm(e,r,n,i){let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(17);o[s]=Ue.CHANNEL_OPEN_CONFIRMATION,te(o,e,++s),te(o,r,s+=4),te(o,n,s+=4),te(o,i,s+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_CONFIRMATION (r:${e}, l:${r})`),Me(this,this._packetRW.write.finalize(o))}channelOpenFail(e,r,n){typeof n!="string"&&(n="");const i=Buffer.byteLength(n);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(13+i+4);o[s]=Ue.CHANNEL_OPEN_FAILURE,te(o,e,++s),te(o,r,s+=4),te(o,i,s+=4),s+=4,i&&(o.utf8Write(n,s,i),s+=i),te(o,0,s),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN_FAILURE (r:${e})`),Me(this,this._packetRW.write.finalize(o))}service(e){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+r);i[n]=Ue.SERVICE_REQUEST,te(i,r,++n),i.utf8Write(e,n+=4,r),this._debug&&this._debug(`Outbound: Sending SERVICE_REQUEST (${e})`),Me(this,this._packetRW.write.finalize(i))}authPassword(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(e),s=Buffer.byteLength(r),o=n?Buffer.byteLength(n):0;let a=this._packetRW.write.allocStart;const c=this._packetRW.write.alloc(5+i+4+14+4+8+1+4+s+(n?4+o:0));c[a]=Ue.USERAUTH_REQUEST,te(c,i,++a),c.utf8Write(e,a+=4,i),te(c,14,a+=i),c.utf8Write("ssh-connection",a+=4,14),te(c,8,a+=14),c.utf8Write("password",a+=4,8),c[a+=8]=n?1:0,te(c,s,++a),Buffer.isBuffer(r)?ho(r,c,0,s,a+=4):c.utf8Write(r,a+=4,s),n?(te(c,o,a+=s),Buffer.isBuffer(n)?ho(n,c,0,o,a+=4):c.utf8Write(n,a+=4,o),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (changed password)")):this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (password)"),this._authsQueue.push("password"),Me(this,this._packetRW.write.finalize(c))}authPK(e,r,n,i){if(this._server)throw new Error("Client-only method called in server mode");if(r=Fd(r),r instanceof Error)throw new Error("Invalid key");const s=r.type;r=r.getPublicSSH(),typeof n=="function"&&(i=n,n=void 0),n||(n=s);const o=Buffer.byteLength(e),a=Buffer.byteLength(n),c=r.length,f=this._kex.sessionID,u=f.length,l=(i?4+u:0)+1+4+o+4+14+4+9+1+4+a+4+c;let h,d;if(i?(h=Buffer.allocUnsafe(l),d=0,te(h,u,d),h.set(f,d+=4),d+=u):(h=this._packetRW.write.alloc(l),d=this._packetRW.write.allocStart),h[d]=Ue.USERAUTH_REQUEST,te(h,o,++d),h.utf8Write(e,d+=4,o),te(h,14,d+=o),h.utf8Write("ssh-connection",d+=4,14),te(h,9,d+=14),h.utf8Write("publickey",d+=4,9),h[d+=9]=i?1:0,te(h,a,++d),h.utf8Write(n,d+=4,a),te(h,c,d+=a),h.set(r,d+=4),!i){this._authsQueue.push("publickey"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey -- check)"),Me(this,this._packetRW.write.finalize(h));return}i(h,m=>{if(m=Hd(m,s),m===!1)throw new Error("Error while converting handshake signature");const _=m.length;d=this._packetRW.write.allocStart,h=this._packetRW.write.alloc(5+o+4+14+4+9+1+4+a+4+c+4+4+a+4+_),h[d]=Ue.USERAUTH_REQUEST,te(h,o,++d),h.utf8Write(e,d+=4,o),te(h,14,d+=o),h.utf8Write("ssh-connection",d+=4,14),te(h,9,d+=14),h.utf8Write("publickey",d+=4,9),h[d+=9]=1,te(h,a,++d),h.utf8Write(n,d+=4,a),te(h,c,d+=a),h.set(r,d+=4),te(h,4+a+4+_,d+=c),te(h,a,d+=4),h.utf8Write(n,d+=4,a),te(h,_,d+=a),h.set(m,d+=4),this._authsQueue.push("publickey"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (publickey)"),Me(this,this._packetRW.write.finalize(h))})}authHostbased(e,r,n,i,s,o){if(this._server)throw new Error("Client-only method called in server mode");if(r=Fd(r),r instanceof Error)throw new Error("Invalid key");const a=r.type;r=r.getPublicSSH(),typeof s=="function"&&(o=s,s=void 0),s||(s=a);const c=Buffer.byteLength(e),f=Buffer.byteLength(s),u=r.length,l=this._kex.sessionID,h=l.length,d=Buffer.byteLength(n),m=Buffer.byteLength(i),_=Buffer.allocUnsafe(4+h+1+4+c+4+14+4+9+4+f+4+u+4+d+4+m);let y=0;te(_,h,y),_.set(l,y+=4),_[y+=h]=Ue.USERAUTH_REQUEST,te(_,c,++y),_.utf8Write(e,y+=4,c),te(_,14,y+=c),_.utf8Write("ssh-connection",y+=4,14),te(_,9,y+=14),_.utf8Write("hostbased",y+=4,9),te(_,f,y+=9),_.utf8Write(s,y+=4,f),te(_,u,y+=f),_.set(r,y+=4),te(_,d,y+=u),_.utf8Write(n,y+=4,d),te(_,m,y+=d),_.utf8Write(i,y+=4,m),o(_,E=>{if(E=Hd(E,a),!E)throw new Error("Error while converting handshake signature");const I=E.length,R=_.length-h-4;y=this._packetRW.write.allocStart;const P=this._packetRW.write.alloc(R+4+4+f+4+I);ho(_,P,4+h,_.length,y),te(P,4+f+4+I,y+=R),te(P,f,y+=4),P.utf8Write(s,y+=4,f),te(P,I,y+=f),P.set(E,y+=4),this._authsQueue.push("hostbased"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (hostbased)"),Me(this,this._packetRW.write.finalize(P))})}authKeyboard(e){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+r+4+14+4+20+4+4);i[n]=Ue.USERAUTH_REQUEST,te(i,r,++n),i.utf8Write(e,n+=4,r),te(i,14,n+=r),i.utf8Write("ssh-connection",n+=4,14),te(i,20,n+=14),i.utf8Write("keyboard-interactive",n+=4,20),te(i,0,n+=20),te(i,0,n+=4),this._authsQueue.push("keyboard-interactive"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (keyboard-interactive)"),Me(this,this._packetRW.write.finalize(i))}authNone(e){if(this._server)throw new Error("Client-only method called in server mode");const r=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+r+4+14+4+4);i[n]=Ue.USERAUTH_REQUEST,te(i,r,++n),i.utf8Write(e,n+=4,r),te(i,14,n+=r),i.utf8Write("ssh-connection",n+=4,14),te(i,4,n+=14),i.utf8Write("none",n+=4,4),this._authsQueue.push("none"),this._debug&&this._debug("Outbound: Sending USERAUTH_REQUEST (none)"),Me(this,this._packetRW.write.finalize(i))}authInfoRes(e){if(this._server)throw new Error("Client-only method called in server mode");let r=0,n;if(e){n=new Array(e.length);for(let o=0;o<e.length;++o){const a=Buffer.byteLength(e[o]);n[o]=a,r+=4+a}}let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(5+r);if(s[i]=Ue.USERAUTH_INFO_RESPONSE,e){te(s,e.length,++i),i+=4;for(let o=0;o<e.length;++o){const a=n[o];te(s,a,i),i+=4,a&&(s.utf8Write(e[o],i,a),i+=a)}}else te(s,0,++i);this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_RESPONSE"),Me(this,this._packetRW.write.finalize(s))}tcpipForward(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(e);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(23+i+4);o[s]=Ue.GLOBAL_REQUEST,te(o,13,++s),o.utf8Write("tcpip-forward",s+=4,13),o[s+=13]=n===void 0||n===!0?1:0,te(o,i,++s),o.utf8Write(e,s+=4,i),te(o,r,s+=i),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (tcpip-forward)"),Me(this,this._packetRW.write.finalize(o))}cancelTcpipForward(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(e);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(30+i+4);o[s]=Ue.GLOBAL_REQUEST,te(o,20,++s),o.utf8Write("cancel-tcpip-forward",s+=4,20),o[s+=20]=n===void 0||n===!0?1:0,te(o,i,++s),o.utf8Write(e,s+=4,i),te(o,r,s+=i),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-tcpip-forward)"),Me(this,this._packetRW.write.finalize(o))}openssh_streamLocalForward(e,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(41+n);s[i]=Ue.GLOBAL_REQUEST,te(s,31,++i),s.utf8Write("streamlocal-forward@openssh.com",i+=4,31),s[i+=31]=r===void 0||r===!0?1:0,te(s,n,++i),s.utf8Write(e,i+=4,n),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (streamlocal-forward@openssh.com)"),Me(this,this._packetRW.write.finalize(s))}openssh_cancelStreamLocalForward(e,r){if(this._server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(48+n);s[i]=Ue.GLOBAL_REQUEST,te(s,38,++i),s.utf8Write("cancel-streamlocal-forward@openssh.com",i+=4,38),s[i+=38]=r===void 0||r===!0?1:0,te(s,n,++i),s.utf8Write(e,i+=4,n),this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (cancel-streamlocal-forward@openssh.com)"),Me(this,this._packetRW.write.finalize(s))}directTcpip(e,r,n,i){if(this._server)throw new Error("Client-only method called in server mode");const s=Buffer.byteLength(i.srcIP),o=Buffer.byteLength(i.dstIP);let a=this._packetRW.write.allocStart;const c=this._packetRW.write.alloc(33+s+4+4+o+4);c[a]=Ue.CHANNEL_OPEN,te(c,12,++a),c.utf8Write("direct-tcpip",a+=4,12),te(c,e,a+=12),te(c,r,a+=4),te(c,n,a+=4),te(c,o,a+=4),c.utf8Write(i.dstIP,a+=4,o),te(c,i.dstPort,a+=o),te(c,s,a+=4),c.utf8Write(i.srcIP,a+=4,s),te(c,i.srcPort,a+=s),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, direct-tcpip)`),Me(this,this._packetRW.write.finalize(c))}openssh_directStreamLocal(e,r,n,i){if(this._server)throw new Error("Client-only method called in server mode");const s=Buffer.byteLength(i.socketPath);let o=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(51+s+4+4);a[o]=Ue.CHANNEL_OPEN,te(a,30,++o),a.utf8Write("direct-streamlocal@openssh.com",o+=4,30),te(a,e,o+=30),te(a,r,o+=4),te(a,n,o+=4),te(a,s,o+=4),a.utf8Write(i.socketPath,o+=4,s),X$(a,0,o+=s,o+8),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, direct-streamlocal@openssh.com)`),Me(this,this._packetRW.write.finalize(a))}openssh_noMoreSessions(e){if(this._server)throw new Error("Client-only method called in server mode");let r=this._packetRW.write.allocStart;const n=this._packetRW.write.alloc(34);n[r]=Ue.GLOBAL_REQUEST,te(n,28,++r),n.utf8Write("no-more-sessions@openssh.com",r+=4,28),n[r+=28]=e===void 0||e===!0?1:0,this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (no-more-sessions@openssh.com)"),Me(this,this._packetRW.write.finalize(n))}session(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(24);s[i]=Ue.CHANNEL_OPEN,te(s,7,++i),s.utf8Write("session",i+=4,7),te(s,e,i+=7),te(s,r,i+=4),te(s,n,i+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, session)`),Me(this,this._packetRW.write.finalize(s))}windowChange(e,r,n,i,s){if(this._server)throw new Error("Client-only method called in server mode");let o=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(39);a[o]=Ue.CHANNEL_REQUEST,te(a,e,++o),te(a,13,o+=4),a.utf8Write("window-change",o+=4,13),a[o+=13]=0,te(a,n,++o),te(a,r,o+=4),te(a,s,o+=4),te(a,i,o+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, window-change)`),Me(this,this._packetRW.write.finalize(a))}pty(e,r,n,i,s,o,a,c){if(this._server)throw new Error("Client-only method called in server mode");(!o||!o.length)&&(o="vt100"),a&&!Buffer.isBuffer(a)&&!Array.isArray(a)&&typeof a=="object"&&a!==null&&(a=dC(a)),(!a||!a.length)&&(a=sC);const f=o.length,u=a.length;let l=this._packetRW.write.allocStart;const h=this._packetRW.write.alloc(21+f+4+4+4+4+4+u);if(h[l]=Ue.CHANNEL_REQUEST,te(h,e,++l),te(h,7,l+=4),h.utf8Write("pty-req",l+=4,7),h[l+=7]=c===void 0||c===!0?1:0,te(h,f,++l),h.utf8Write(o,l+=4,f),te(h,n,l+=f),te(h,r,l+=4),te(h,s,l+=4),te(h,i,l+=4),te(h,u,l+=4),l+=4,Array.isArray(a))for(let d=0;d<u;++d)h[l++]=a[d];else Buffer.isBuffer(a)&&h.set(a,l);this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, pty-req)`),Me(this,this._packetRW.write.finalize(h))}shell(e,r){if(this._server)throw new Error("Client-only method called in server mode");let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(15);i[n]=Ue.CHANNEL_REQUEST,te(i,e,++n),te(i,5,n+=4),i.utf8Write("shell",n+=4,5),i[n+=5]=r===void 0||r===!0?1:0,this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, shell)`),Me(this,this._packetRW.write.finalize(i))}exec(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.isBuffer(r),s=i?r.length:Buffer.byteLength(r);let o=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(18+s);a[o]=Ue.CHANNEL_REQUEST,te(a,e,++o),te(a,4,o+=4),a.utf8Write("exec",o+=4,4),a[o+=4]=n===void 0||n===!0?1:0,te(a,s,++o),i?a.set(r,o+=4):a.utf8Write(r,o+=4,s),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exec: ${r})`),Me(this,this._packetRW.write.finalize(a))}signal(e,r){if(this._server)throw new Error("Client-only method called in server mode");const n=r;if(r=r.toUpperCase(),r.slice(0,3)==="SIG"&&(r=r.slice(3)),Ud[r]!==1)throw new Error(`Invalid signal: ${n}`);const i=r.length;let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(20+i);o[s]=Ue.CHANNEL_REQUEST,te(o,e,++s),te(o,6,s+=4),o.utf8Write("signal",s+=4,6),o[s+=6]=0,te(o,i,++s),o.utf8Write(r,s+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, signal: ${r})`),Me(this,this._packetRW.write.finalize(o))}env(e,r,n,i){if(this._server)throw new Error("Client-only method called in server mode");const s=Buffer.byteLength(r),o=Buffer.isBuffer(n),a=o?n.length:Buffer.byteLength(n);let c=this._packetRW.write.allocStart;const f=this._packetRW.write.alloc(17+s+4+a);f[c]=Ue.CHANNEL_REQUEST,te(f,e,++c),te(f,3,c+=4),f.utf8Write("env",c+=4,3),f[c+=3]=i===void 0||i===!0?1:0,te(f,s,++c),f.utf8Write(r,c+=4,s),te(f,a,c+=s),o?f.set(n,c+=4):f.utf8Write(n,c+=4,a),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, env: ${r}=${n})`),Me(this,this._packetRW.write.finalize(f))}x11Forward(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=r.protocol,s=r.cookie,o=Buffer.isBuffer(i),a=o?i.length:Buffer.byteLength(i),c=Buffer.isBuffer(s),f=c?s.length:Buffer.byteLength(s);let u=this._packetRW.write.allocStart;const l=this._packetRW.write.alloc(22+a+4+f+4);l[u]=Ue.CHANNEL_REQUEST,te(l,e,++u),te(l,7,u+=4),l.utf8Write("x11-req",u+=4,7),l[u+=7]=n===void 0||n===!0?1:0,l[++u]=r.single?1:0,te(l,a,++u),o?l.set(i,u+=4):l.utf8Write(i,u+=4,a),te(l,f,u+=a),c?l.set(s,u+=4):l.latin1Write(s,u+=4,f),te(l,r.screen||0,u+=f),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, x11-req)`),Me(this,this._packetRW.write.finalize(l))}subsystem(e,r,n){if(this._server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(r);let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(23+i);o[s]=Ue.CHANNEL_REQUEST,te(o,e,++s),te(o,9,s+=4),o.utf8Write("subsystem",s+=4,9),o[s+=9]=n===void 0||n===!0?1:0,te(o,i,++s),o.utf8Write(r,s+=4,i),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, subsystem: ${r})`),Me(this,this._packetRW.write.finalize(o))}openssh_agentForward(e,r){if(this._server)throw new Error("Client-only method called in server mode");let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(36);i[n]=Ue.CHANNEL_REQUEST,te(i,e,++n),te(i,26,n+=4),i.utf8Write("auth-agent-req@openssh.com",n+=4,26),i[n+=26]=r===void 0||r===!0?1:0,this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, auth-agent-req@openssh.com)`),Me(this,this._packetRW.write.finalize(i))}openssh_hostKeysProve(e){if(this._server)throw new Error("Client-only method called in server mode");let r=0;const n=[];for(const o of e){const a=o.getPublicSSH();r+=4+a.length,n.push(a)}let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(35+r);s[i]=Ue.GLOBAL_REQUEST,te(s,29,++i),s.utf8Write("hostkeys-prove-00@openssh.com",i+=4,29),s[i+=29]=1,++i;for(const o of n)te(s,o.length,i),ho(o,s,0,o.length,i+=4),i+=o.length;this._debug&&this._debug("Outbound: Sending GLOBAL_REQUEST (hostkeys-prove-00@openssh.com)"),Me(this,this._packetRW.write.finalize(s))}serviceAccept(e){if(!this._server)throw new Error("Server-only method called in client mode");const r=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+r);if(i[n]=Ue.SERVICE_ACCEPT,te(i,r,++n),i.utf8Write(e,n+=4,r),this._debug&&this._debug(`Outbound: Sending SERVICE_ACCEPT (${e})`),Me(this,this._packetRW.write.finalize(i)),this._server&&this._banner&&e==="ssh-userauth"){const s=this._banner;this._banner=void 0;const o=Buffer.byteLength(s);n=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(5+o+4);a[n]=Ue.USERAUTH_BANNER,te(a,o,++n),a.utf8Write(s,n+=4,o),te(a,0,n+=o),this._debug&&this._debug("Outbound: Sending USERAUTH_BANNER"),Me(this,this._packetRW.write.finalize(a))}}forwardedTcpip(e,r,n,i){if(!this._server)throw new Error("Server-only method called in client mode");const s=Buffer.byteLength(i.boundAddr),o=Buffer.byteLength(i.remoteAddr);let a=this._packetRW.write.allocStart;const c=this._packetRW.write.alloc(36+s+4+4+o+4);c[a]=Ue.CHANNEL_OPEN,te(c,15,++a),c.utf8Write("forwarded-tcpip",a+=4,15),te(c,e,a+=15),te(c,r,a+=4),te(c,n,a+=4),te(c,s,a+=4),c.utf8Write(i.boundAddr,a+=4,s),te(c,i.boundPort,a+=s),te(c,o,a+=4),c.utf8Write(i.remoteAddr,a+=4,o),te(c,i.remotePort,a+=o),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, forwarded-tcpip)`),Me(this,this._packetRW.write.finalize(c))}x11(e,r,n,i){if(!this._server)throw new Error("Server-only method called in client mode");const s=Buffer.byteLength(i.originAddr);let o=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(24+s+4);a[o]=Ue.CHANNEL_OPEN,te(a,3,++o),a.utf8Write("x11",o+=4,3),te(a,e,o+=3),te(a,r,o+=4),te(a,n,o+=4),te(a,s,o+=4),a.utf8Write(i.originAddr,o+=4,s),te(a,i.originPort,o+=s),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, x11)`),Me(this,this._packetRW.write.finalize(a))}openssh_authAgent(e,r,n){if(!this._server)throw new Error("Server-only method called in client mode");let i=this._packetRW.write.allocStart;const s=this._packetRW.write.alloc(39);s[i]=Ue.CHANNEL_OPEN,te(s,22,++i),s.utf8Write("auth-agent@openssh.com",i+=4,22),te(s,e,i+=22),te(s,r,i+=4),te(s,n,i+=4),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, auth-agent@openssh.com)`),Me(this,this._packetRW.write.finalize(s))}openssh_forwardedStreamLocal(e,r,n,i){if(!this._server)throw new Error("Server-only method called in client mode");const s=Buffer.byteLength(i.socketPath);let o=this._packetRW.write.allocStart;const a=this._packetRW.write.alloc(54+s+4);a[o]=Ue.CHANNEL_OPEN,te(a,33,++o),a.utf8Write("forwarded-streamlocal@openssh.com",o+=4,33),te(a,e,o+=33),te(a,r,o+=4),te(a,n,o+=4),te(a,s,o+=4),a.utf8Write(i.socketPath,o+=4,s),te(a,0,o+=s),this._debug&&this._debug(`Outbound: Sending CHANNEL_OPEN (r:${e}, forwarded-streamlocal@openssh.com)`),Me(this,this._packetRW.write.finalize(a))}exitStatus(e,r){if(!this._server)throw new Error("Server-only method called in client mode");let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(25);i[n]=Ue.CHANNEL_REQUEST,te(i,e,++n),te(i,11,n+=4),i.utf8Write("exit-status",n+=4,11),i[n+=11]=0,te(i,r,++n),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exit-status: ${r})`),Me(this,this._packetRW.write.finalize(i))}exitSignal(e,r,n,i){if(!this._server)throw new Error("Server-only method called in client mode");const s=r;if(typeof s!="string"||!s)throw new Error(`Invalid signal: ${s}`);let o=r.toUpperCase();if(o.slice(0,3)==="SIG"&&(o=o.slice(3)),Ud[o]!==1)throw new Error(`Invalid signal: ${s}`);const a=Buffer.byteLength(o),c=i?Buffer.byteLength(i):0;let f=this._packetRW.write.allocStart;const u=this._packetRW.write.alloc(25+a+1+4+c+4);u[f]=Ue.CHANNEL_REQUEST,te(u,e,++f),te(u,11,f+=4),u.utf8Write("exit-signal",f+=4,11),u[f+=11]=0,te(u,a,++f),u.utf8Write(o,f+=4,a),u[f+=a]=n?1:0,te(u,c,++f),f+=4,c&&(u.utf8Write(i,f,c),f+=c),te(u,0,f),this._debug&&this._debug(`Outbound: Sending CHANNEL_REQUEST (r:${e}, exit-signal: ${r})`),Me(this,this._packetRW.write.finalize(u))}authFailure(e,r){if(!this._server)throw new Error("Server-only method called in client mode");if(this._authsQueue.length===0)throw new Error("No auth in progress");let n;if(typeof e=="boolean"&&(r=e,e=void 0),e){n=[];for(let a=0;a<e.length;++a)e[a].toLowerCase()!=="none"&&n.push(e[a]);n=n.join(",")}else n="";const i=n.length;let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(5+i+1);o[s]=Ue.USERAUTH_FAILURE,te(o,i,++s),o.utf8Write(n,s+=4,i),o[s+=i]=r===!0?1:0,this._authsQueue.shift(),this._debug&&this._debug("Outbound: Sending USERAUTH_FAILURE"),Me(this,this._packetRW.write.finalize(o))}authSuccess(){if(!this._server)throw new Error("Server-only method called in client mode");if(this._authsQueue.length===0)throw new Error("No auth in progress");const e=this._packetRW.write.allocStart,r=this._packetRW.write.alloc(1);r[e]=Ue.USERAUTH_SUCCESS,this._authsQueue.shift(),this._authenticated=!0,this._debug&&this._debug("Outbound: Sending USERAUTH_SUCCESS"),Me(this,this._packetRW.write.finalize(r)),this._kex.negotiated.cs.compress==="zlib@openssh.com"&&(this._packetRW.read=new T0),this._kex.negotiated.sc.compress==="zlib@openssh.com"&&(this._packetRW.write=new B0(this))}authPKOK(e,r){if(!this._server)throw new Error("Server-only method called in client mode");if(this._authsQueue.length===0||this._authsQueue[0]!=="publickey")throw new Error('"publickey" auth not in progress');const n=Buffer.byteLength(e),i=r.length;let s=this._packetRW.write.allocStart;const o=this._packetRW.write.alloc(5+n+4+i);o[s]=Ue.USERAUTH_PK_OK,te(o,n,++s),o.utf8Write(e,s+=4,n),te(o,i,s+=n),o.set(r,s+=4),this._authsQueue.shift(),this._debug&&this._debug("Outbound: Sending USERAUTH_PK_OK"),Me(this,this._packetRW.write.finalize(o))}authPasswdChg(e){if(!this._server)throw new Error("Server-only method called in client mode");const r=Buffer.byteLength(e);let n=this._packetRW.write.allocStart;const i=this._packetRW.write.alloc(5+r+4);i[n]=Ue.USERAUTH_PASSWD_CHANGEREQ,te(i,r,++n),i.utf8Write(e,n+=4,r),te(i,0,n+=r),this._debug&&this._debug("Outbound: Sending USERAUTH_PASSWD_CHANGEREQ"),Me(this,this._packetRW.write.finalize(i))}authInfoReq(e,r,n){if(!this._server)throw new Error("Server-only method called in client mode");let i=0;const s=e?Buffer.byteLength(e):0,o=r?Buffer.byteLength(r):0;for(let f=0;f<n.length;++f)i+=4+Buffer.byteLength(n[f].prompt)+1;let a=this._packetRW.write.allocStart;const c=this._packetRW.write.alloc(5+s+4+o+4+4+i);c[a]=Ue.USERAUTH_INFO_REQUEST,te(c,s,++a),a+=4,e&&(c.utf8Write(e,a,s),a+=s),te(c,o,a),a+=4,r&&(c.utf8Write(r,a,o),a+=o),te(c,0,a),te(c,n.length,a+=4),a+=4;for(let f=0;f<n.length;++f){const u=n[f],l=Buffer.byteLength(u.prompt);te(c,l,a),a+=4,l&&(c.utf8Write(u.prompt,a,l),a+=l),c[a++]=u.echo?1:0}this._debug&&this._debug("Outbound: Sending USERAUTH_INFO_REQUEST"),Me(this,this._packetRW.write.finalize(c))}};const aC=/^SSH-(2\.0|1\.99)-([^ ]+)(?: (.*))?$/;function cC(t,e,r){let n,i;this._buffer?(n=Buffer.allocUnsafe(this._buffer.length+(r-e)),n.set(this._buffer,0),e===0?n.set(t,this._buffer.length):n.set(new Uint8Array(t.buffer,t.byteOffset+e,r-e),this._buffer.length),i=this._buffer.length,e=0):(n=t,i=0);const s=e;let o=e,a=e,c=!1,f=0,u=0;for(;e<n.length;++e){const l=n[e];if(l===13){c=!0;continue}if(l===10){if(a>o&&a-o>4&&n[o]===83&&n[o+1]===83&&n[o+2]===72&&n[o+3]===45){const h=n.latin1Slice(s,a+1),d=o===s?h:h.slice(o-s),m=aC.exec(d);if(!m)throw new Error("Invalid identification string");const _={greeting:o===s?"":h.slice(0,o-s),identRaw:d,versions:{protocol:m[1],software:m[2]},comments:m[3]};return this._remoteIdentRaw=Buffer.from(d),this._debug&&this._debug(`Remote ident: ${R0(d)}`),this._compatFlags=lC(_),this._buffer=void 0,this._decipher=new q$(0,Y$.bind(this,{firstPacket:!0})),this._parse=fC,this._onHeader(_),this._destruct?(k0(this),e+1-i):r}if(this._server)throw new Error("Greetings from clients not permitted");if(++u>iC)throw new Error("Max greeting lines exceeded");c=!1,o=e+1,f=0}else{if(c)throw new Error("Invalid header: expected newline");if(++f>=nC)throw new Error("Header line too long")}a=e}return this._buffer||(this._buffer=P0(n,s)),e-i}function fC(t,e,r){return this._decipher.decrypt(t,e,r)}function uC(t){if(this._onPacket(),t.length===0){this._debug&&this._debug("Inbound: Skipping empty packet payload");return}t=this._packetRW.read.read(t);const e=t[0];e===Ue.USERAUTH_SUCCESS&&!this._server&&!this._authenticated&&(this._authenticated=!0,this._kex.negotiated.cs.compress==="zlib@openssh.com"&&(this._packetRW.write=new B0(this)),this._kex.negotiated.sc.compress==="zlib@openssh.com"&&(this._packetRW.read=new T0));const r=z$[e];if(r===void 0){this._debug&&this._debug(`Inbound: Unsupported message type: ${e}`);return}return r(this,t)}function lC(t){const e=t.versions.software;let r=0;for(const n of K$)typeof n[0]=="string"?e===n[0]&&(r|=n[1]):n[0].test(e)&&(r|=n[1]);return r}function dC(t){const e=Object.keys(t),r=Buffer.allocUnsafe(5*e.length+1);let n=0;for(let i=0;i<e.length;++i){const s=e[i];if(s==="TTY_OP_END")continue;const o=Bc[s];if(o===void 0)continue;const a=t[s];typeof a=="number"&&isFinite(a)&&(r[n++]=o,r[n++]=a>>>24,r[n++]=a>>>16,r[n++]=a>>>8,r[n++]=a)}return r[n++]=Bc.TTY_OP_END,n<r.length?P0(r,0,n):r}function hC(t){let e="ecdsa-sha2-nistp256,ecdsa-sha2-nistp384,ecdsa-sha2-nistp521rsa-sha2-512,rsa-sha2-256,ssh-rsa,ssh-dss";W$&&(e=`ssh-ed25519,${e}`);const r=Buffer.byteLength(e);let n=t._packetRW.write.allocStart;const i=t._packetRW.write.alloc(28+r);i[n]=Ue.EXT_INFO,te(i,1,++n),te(i,15,n+=4),i.utf8Write("server-sig-algs",n+=4,15),te(i,r,n+=15),i.utf8Write(e,n+=4,r),t._debug&&t._debug("Outbound: Sending EXT_INFO"),Me(t,t._packetRW.write.finalize(i))}var L0=oC,Ms={};const Ko=zo,{inspect:pC}=xs;function Qd(t){let e="",r=t.length;const n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function qd(t,e){if(Ko(typeof e=="string","`thing` has to be of type string"),Array.isArray(t)){const r=t.length;return Ko(r>0,"At least one expected value needs to be specified"),t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}return`of ${e} ${String(t)}`}Ms.ERR_INTERNAL_ASSERTION=class D0 extends Error{constructor(e){super(),Error.captureStackTrace(this,D0);const r=`This is caused by either a bug in ssh2 or incorrect usage of ssh2 internals.
Please open an issue with this stack trace at https://github.com/mscdex/ssh2/issues
`;this.message=e===void 0?r:`${e}
${r}`}};const gC=2**32,Kd=(()=>{try{return new Function("return 2n ** 32n")()}catch{}})();Ms.ERR_OUT_OF_RANGE=class U0 extends RangeError{constructor(e,r,n,i){super(),Error.captureStackTrace(this,U0),Ko(r,'Missing "range" argument');let s=i?e:`The value of "${e}" is out of range.`,o;Number.isInteger(n)&&Math.abs(n)>gC?o=Qd(String(n)):typeof n=="bigint"?(o=String(n),(n>Kd||n<-Kd)&&(o=Qd(o)),o+="n"):o=pC(n),s+=` It must be ${r}. Received ${o}`,this.message=s}};let M0=class F0 extends TypeError{constructor(e,r,n){super(),Error.captureStackTrace(this,F0),Ko(typeof e=="string","'name' must be a string");let i;typeof r=="string"&&r.startsWith("not ")?(i="must not be",r=r.replace(/^not /,"")):i="must be";let s;if(e.endsWith(" argument"))s=`The ${e} ${i} ${qd(r,"type")}`;else{const o=e.includes(".")?"property":"argument";s=`The "${e}" ${o} ${i} ${qd(r,"type")}`}s+=`. Received type ${typeof n}`,this.message=s}};Ms.ERR_INVALID_ARG_TYPE=M0;Ms.validateNumber=function(e,r){if(typeof e!="number")throw new M0(r,"number",e)};const mC=Xo,Dn=ai,{constants:$r}=Dn,{Readable:H0,Writable:Xu}=jc,{inherits:j0,types:{isDate:Oc}}=xs,_C=Buffer[Symbol.species],{bufferCopy:Pn,bufferSlice:Fi,makeBufferParser:EC,writeUInt32BE:ge}=dn(),bn={SIZE:1,UIDGID:2,PERMISSIONS:4,ACMODTIME:8,EXTENDED:2147483648},qe=Buffer.alloc(28),At={OK:0,EOF:1,NO_SUCH_FILE:2,PERMISSION_DENIED:3,FAILURE:4,BAD_MESSAGE:5,NO_CONNECTION:6,CONNECTION_LOST:7,OP_UNSUPPORTED:8},yC=new Map(Object.values(At).map(t=>[t,1])),AC={[At.OK]:"No error",[At.EOF]:"End of file",[At.NO_SUCH_FILE]:"No such file or directory",[At.PERMISSION_DENIED]:"Permission denied",[At.FAILURE]:"Failure",[At.BAD_MESSAGE]:"Bad message",[At.NO_CONNECTION]:"No connection",[At.CONNECTION_LOST]:"Connection lost",[At.OP_UNSUPPORTED]:"Operation unsupported"},je={INIT:1,OPEN:3,CLOSE:4,READ:5,WRITE:6,LSTAT:7,FSTAT:8,SETSTAT:9,FSETSTAT:10,OPENDIR:11,READDIR:12,REMOVE:13,MKDIR:14,RMDIR:15,REALPATH:16,STAT:17,RENAME:18,READLINK:19,SYMLINK:20,EXTENDED:200},Rr={VERSION:2,STATUS:101,HANDLE:102,DATA:103,NAME:104,ATTRS:105,EXTENDED:201},Fe={READ:1,WRITE:2,APPEND:4,CREAT:8,TRUNC:16,EXCL:32},Wd=2*1024,kt=2**32-1,bC=Buffer.from([0,0,0,5,je.INIT,0,0,0,3]),wC=Buffer.from([0,0,0,5,Rr.VERSION,0,0,0,3]),SC=/^SSH-2.0-(?:OpenSSH|dropbear)/,ec=256*1024,ae=EC(),IC={readable:!1,writable:!1,push:t=>{},once:()=>{},on:()=>{},emit:()=>{},end:()=>{}};function Q0(){}let vC=class extends mC{constructor(e,r,n){super(),(typeof n!="object"||!n)&&(n={});const i=e._protocol._remoteIdentRaw;this.server=!!n.server,this._debug=typeof n.debug=="function"?n.debug:void 0,this._isOpenSSH=i&&SC.test(i),this._version=-1,this._extensions={},this._biOpt=n.biOpt,this._pktLenBytes=0,this._pktLen=0,this._pktPos=0,this._pktType=0,this._pktData=void 0,this._writeReqid=-1,this._requests={},this._maxInPktLen=ec,this._maxOutPktLen=34e3,this._maxReadLen=(this._isOpenSSH?ec:34e3)-Wd,this._maxWriteLen=(this._isOpenSSH?ec:34e3)-Wd,this.maxOpenHandles=void 0,this._client=e,this._protocol=e._protocol,this._callbacks=[],this._hasX11=!1,this._exit={code:void 0,signal:void 0,dump:void 0,desc:void 0},this._waitWindow=!1,this._chunkcb=void 0,this._buffer=[],this.type=r.type,this.subtype=void 0,this.incoming=r.incoming,this.outgoing=r.outgoing,this.stderr=IC,this.readable=!0}push(e){if(e===null){if(G0(this),!this.readable)return;this.readable=!1,this.emit("end");return}let r=0;for(;r<e.length;){if(this._pktLenBytes<4){let o=Math.min(4-this._pktLenBytes,e.length-r);for(this._pktLenBytes+=o;o--;)this._pktLen=(this._pktLen<<8)+e[r++];if(this._pktLenBytes<4)return;if(this._pktLen===0)return It(this,"Invalid packet length");if(this._pktLen>this._maxInPktLen){const a=this._maxInPktLen;return It(this,`Packet length ${this._pktLen} exceeds max length of ${a}`)}if(r>=e.length)return}if(this._pktPos<this._pktLen){const o=Math.min(this._pktLen-this._pktPos,e.length-r);if(r!==0||o!==e.length?o===this._pktLen?this._pkt=new _C(e.buffer,e.byteOffset+r,o):(this._pkt||(this._pkt=Buffer.allocUnsafe(this._pktLen)),this._pkt.set(new Uint8Array(e.buffer,e.byteOffset+r,o),this._pktPos)):o===this._pktLen?this._pkt=e:(this._pkt||(this._pkt=Buffer.allocUnsafe(this._pktLen)),this._pkt.set(e,this._pktPos)),r+=o,this._pktPos+=o,this._pktPos<this._pktLen)return}const n=this._pkt[0],i=this._pkt;this._pktLen=0,this._pktLenBytes=0,this._pkt=void 0,this._pktPos=0;const s=this.server?kC[n]:NC[n];if(!s)return It(this,`Unknown packet type ${n}`);if(this._version===-1){if(this.server){if(n!==je.INIT)return It(this,`Expected INIT packet, got ${n}`)}else if(n!==Rr.VERSION)return It(this,`Expected VERSION packet, got ${n}`)}if(s(this,i)===!1)return}}end(){this.destroy()}destroy(){(this.outgoing.state==="open"||this.outgoing.state==="eof")&&(this.outgoing.state="closing",this._protocol.channelClose(this.outgoing.id))}_init(){this._init=Q0,this.server||gt(this,bC)}createReadStream(e,r){if(this.server)throw new Error("Client-only method called in server mode");return new Cn(this,e,r)}createWriteStream(e,r){if(this.server)throw new Error("Client-only method called in server mode");return new Fr(this,e,r)}open(e,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");typeof n=="function"&&(i=n,n=void 0);const s=typeof r=="number"?r:K0(r);if(s===null)throw new Error(`Unknown flags string: ${r}`);let o=0,a=0;(typeof n=="string"||typeof n=="number")&&(n={mode:n}),typeof n=="object"&&n!==null&&(n=ei(n),o=n.flags,a=n.nb);const c=Buffer.byteLength(e);let f=9;const u=Buffer.allocUnsafe(13+c+4+4+a);ge(u,u.length-4,0),u[4]=je.OPEN;const l=this._writeReqid=this._writeReqid+1&kt;ge(u,l,5),ge(u,c,f),u.utf8Write(e,f+=4,c),ge(u,s,f+=c),ge(u,o,f+=4),a&&(f+=4,a===qe.length?u.set(qe,f):Pn(qe,u,0,a,f),f+=a),this._requests[l]={cb:i};const h=gt(this,u);this._debug&&this._debug(`SFTP: Outbound: ${h?"Buffered":"Sending"} OPEN`)}close(e,r){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const n=e.length;let i=9;const s=Buffer.allocUnsafe(13+n);ge(s,s.length-4,0),s[4]=je.CLOSE;const o=this._writeReqid=this._writeReqid+1&kt;ge(s,o,5),ge(s,n,i),s.set(e,i+=4),this._requests[o]={cb:r};const a=gt(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} CLOSE`)}read(e,r,n,i,s,o){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(r))throw new Error("buffer is not a Buffer");if(n>=r.length)throw new Error("offset is out of bounds");if(n+i>r.length)throw new Error("length extends beyond buffer");if(s===null)throw new Error("null position currently unsupported");q0(this,e,r,n,i,s,o)}readData(e,r,n,i,s,o){this.read(e,r,n,i,s,o)}write(e,r,n,i,s,o){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");if(!Buffer.isBuffer(r))throw new Error("buffer is not a Buffer");if(n>r.length)throw new Error("offset is out of bounds");if(n+i>r.length)throw new Error("length extends beyond buffer");if(s===null)throw new Error("null position currently unsupported");if(!i){o&&process.nextTick(o,void 0,0);return}const a=this._maxWriteLen,c=Math.max(i-a,0),f=s;c&&(i=a);const u=e.length;let l=9;const h=Buffer.allocUnsafe(13+u+8+4+i);ge(h,h.length-4,0),h[4]=je.WRITE;const d=this._writeReqid=this._writeReqid+1&kt;ge(h,d,5),ge(h,u,l),h.set(e,l+=4),l+=u;for(let _=7;_>=0;--_)h[l+_]=s&255,s/=256;ge(h,i,l+=8),Pn(r,h,n,n+i,l+=4),this._requests[d]={cb:_=>{_?typeof o=="function"&&o(_):c?this.write(e,r,n+i,c,f+i,o):typeof o=="function"&&o(void 0,n+i)}};const m=gt(this,h);if(this._debug){const _=m?"Sent":"Buffered";this._debug(`SFTP: Outbound: ${_} WRITE (id:${d})`)}}writeData(e,r,n,i,s,o){this.write(e,r,n,i,s,o)}fastGet(e,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");Gd(this,Dn,e,r,n,i)}fastPut(e,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");Gd(Dn,this,e,r,n,i)}readFile(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i;if(typeof n=="function"?i=n:typeof r=="function"&&(i=r,r=void 0),typeof r=="string")r={encoding:r,flag:"r"};else if(!r)r={encoding:null,flag:"r"};else if(typeof r!="object")throw new TypeError("Bad arguments");const s=r.encoding;if(s&&!Buffer.isEncoding(s))throw new Error(`Unknown encoding: ${s}`);let o,a,c,f=0,u,l=0;const h=r.flag||"r",d=()=>{o===0?(a=Buffer.allocUnsafe(8192),this.read(u,a,0,8192,l,m)):this.read(u,a,f,o-f,l,m)},m=(y,E)=>{let I;if(y){if(I=y.code===At.EOF,!I)return this.close(u,()=>i&&i(y))}else I=!1;if(I||o===0&&E===0)return _();l+=E,f+=E,o!==0?f===o?_():d():(c.push(Fi(a,0,E)),d())};m._wantEOFError=!0;const _=()=>{this.close(u,y=>(o===0?a=Buffer.concat(c,f):f<o&&(a=Fi(a,0,f)),s&&(a=a.toString(s)),i&&i(y,a)))};this.open(e,h,438,(y,E)=>{if(y)return i&&i(y);u=E;const I=(R,P)=>{if(R){this.stat(e,(Q,z)=>{if(Q)return this.close(u,()=>{i&&i(R)});I(null,z)});return}if(o=P.size||0,o===0)return c=[],d();a=Buffer.allocUnsafe(o),d()};this.fstat(u,I)})}writeFile(e,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");let s;if(typeof i=="function"?s=i:typeof n=="function"&&(s=n,n=void 0),typeof n=="string")n={encoding:n,mode:438,flag:"w"};else if(!n)n={encoding:"utf8",mode:438,flag:"w"};else if(typeof n!="object")throw new TypeError("Bad arguments");if(n.encoding&&!Buffer.isEncoding(n.encoding))throw new Error(`Unknown encoding: ${n.encoding}`);const o=n.flag||"w";this.open(e,o,n.mode,(a,c)=>{if(a)s&&s(a);else{const f=Buffer.isBuffer(r)?r:Buffer.from(""+r,n.encoding||"utf8"),u=/a/.test(o)?null:0;if(u===null){const l=(h,d)=>{if(h){this.stat(e,(m,_)=>{if(m)return this.close(c,()=>{s&&s(h)});l(null,_)});return}Lc(this,c,f,0,f.length,d.size,s)};this.fstat(c,l);return}Lc(this,c,f,0,f.length,u,s)}})}appendFile(e,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");let s;if(typeof i=="function"?s=i:typeof n=="function"&&(s=n,n=void 0),typeof n=="string")n={encoding:n,mode:438,flag:"a"};else if(!n)n={encoding:"utf8",mode:438,flag:"a"};else if(typeof n!="object")throw new TypeError("Bad arguments");n.flag||(n=Object.assign({flag:"a"},n)),this.writeFile(e,r,n,s)}exists(e,r){if(this.server)throw new Error("Client-only method called in server mode");this.stat(e,n=>{r&&r(!n)})}unlink(e,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=9;const s=Buffer.allocUnsafe(13+n);ge(s,s.length-4,0),s[4]=je.REMOVE;const o=this._writeReqid=this._writeReqid+1&kt;ge(s,o,5),ge(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:r};const a=gt(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} REMOVE`)}rename(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(e),s=Buffer.byteLength(r);let o=9;const a=Buffer.allocUnsafe(13+i+4+s);ge(a,a.length-4,0),a[4]=je.RENAME;const c=this._writeReqid=this._writeReqid+1&kt;ge(a,c,5),ge(a,i,o),a.utf8Write(e,o+=4,i),ge(a,s,o+=i),a.utf8Write(r,o+=4,s),this._requests[c]={cb:n};const f=gt(this,a);this._debug&&this._debug(`SFTP: Outbound: ${f?"Buffered":"Sending"} RENAME`)}mkdir(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i=0,s=0;typeof r=="function"&&(n=r,r=void 0),typeof r=="object"&&r!==null&&(r=ei(r),i=r.flags,s=r.nb);const o=Buffer.byteLength(e);let a=9;const c=Buffer.allocUnsafe(13+o+4+s);ge(c,c.length-4,0),c[4]=je.MKDIR;const f=this._writeReqid=this._writeReqid+1&kt;ge(c,f,5),ge(c,o,a),c.utf8Write(e,a+=4,o),ge(c,i,a+=o),s&&(a+=4,s===qe.length?c.set(qe,a):Pn(qe,c,0,s,a),a+=s),this._requests[f]={cb:n};const u=gt(this,c);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} MKDIR`)}rmdir(e,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=9;const s=Buffer.allocUnsafe(13+n);ge(s,s.length-4,0),s[4]=je.RMDIR;const o=this._writeReqid=this._writeReqid+1&kt;ge(s,o,5),ge(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:r};const a=gt(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} RMDIR`)}readdir(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");typeof r=="function"&&(n=r,r={}),(typeof r!="object"||r===null)&&(r={});const i=!(r&&r.full);if(!Buffer.isBuffer(e)&&typeof e!="string")throw new Error("missing directory handle or path");if(typeof e=="string"){const u=[];let l=0;const h=(d,m)=>{if(d)return n(d);this.readdir(m,r,(_,y)=>{const E=_&&_.code===At.EOF;if(_&&!E)return this.close(m,()=>n(_));if(E)return this.close(m,I=>{if(I)return n(I);n(void 0,u)});for(let I=0;I<y.length;++I,++l)u[l]=y[I];h(void 0,m)})};return this.opendir(e,h)}const s=e.length;let o=9;const a=Buffer.allocUnsafe(13+s);ge(a,a.length-4,0),a[4]=je.READDIR;const c=this._writeReqid=this._writeReqid+1&kt;ge(a,c,5),ge(a,s,o),a.set(e,o+=4),this._requests[c]={cb:i?(u,l)=>{if(typeof n=="function"){if(u)return n(u);for(let h=l.length-1;h>=0;--h)(l[h].filename==="."||l[h].filename==="..")&&l.splice(h,1);n(void 0,l)}}:n};const f=gt(this,a);this._debug&&this._debug(`SFTP: Outbound: ${f?"Buffered":"Sending"} READDIR`)}fstat(e,r){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const n=e.length;let i=9;const s=Buffer.allocUnsafe(13+n);ge(s,s.length-4,0),s[4]=je.FSTAT;const o=this._writeReqid=this._writeReqid+1&kt;ge(s,o,5),ge(s,n,i),s.set(e,i+=4),this._requests[o]={cb:r};const a=gt(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} FSTAT`)}stat(e,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=9;const s=Buffer.allocUnsafe(13+n);ge(s,s.length-4,0),s[4]=je.STAT;const o=this._writeReqid=this._writeReqid+1&kt;ge(s,o,5),ge(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:r};const a=gt(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} STAT`)}lstat(e,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=9;const s=Buffer.allocUnsafe(13+n);ge(s,s.length-4,0),s[4]=je.LSTAT;const o=this._writeReqid=this._writeReqid+1&kt;ge(s,o,5),ge(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:r};const a=gt(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} LSTAT`)}opendir(e,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=9;const s=Buffer.allocUnsafe(13+n);ge(s,s.length-4,0),s[4]=je.OPENDIR;const o=this._writeReqid=this._writeReqid+1&kt;ge(s,o,5),ge(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:r};const a=gt(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} OPENDIR`)}setstat(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");let i=0,s=0;typeof r=="object"&&r!==null?(r=ei(r),i=r.flags,s=r.nb):typeof r=="function"&&(n=r);const o=Buffer.byteLength(e);let a=9;const c=Buffer.allocUnsafe(13+o+4+s);ge(c,c.length-4,0),c[4]=je.SETSTAT;const f=this._writeReqid=this._writeReqid+1&kt;ge(c,f,5),ge(c,o,a),c.utf8Write(e,a+=4,o),ge(c,i,a+=o),s&&(a+=4,s===qe.length?c.set(qe,a):Pn(qe,c,0,s,a),a+=s),this._requests[f]={cb:n};const u=gt(this,c);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} SETSTAT`)}fsetstat(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");let i=0,s=0;typeof r=="object"&&r!==null?(r=ei(r),i=r.flags,s=r.nb):typeof r=="function"&&(n=r);const o=e.length;let a=9;const c=Buffer.allocUnsafe(13+o+4+s);ge(c,c.length-4,0),c[4]=je.FSETSTAT;const f=this._writeReqid=this._writeReqid+1&kt;ge(c,f,5),ge(c,o,a),c.set(e,a+=4),ge(c,i,a+=o),s&&(a+=4,s===qe.length?c.set(qe,a):Pn(qe,c,0,s,a),a+=s),this._requests[f]={cb:n};const u=gt(this,c);this._debug&&this._debug(`SFTP: Outbound: ${u?"Buffered":"Sending"} FSETSTAT`)}futimes(e,r,n,i){return this.fsetstat(e,{atime:$i(r),mtime:$i(n)},i)}utimes(e,r,n,i){return this.setstat(e,{atime:$i(r),mtime:$i(n)},i)}fchown(e,r,n,i){return this.fsetstat(e,{uid:r,gid:n},i)}chown(e,r,n,i){return this.setstat(e,{uid:r,gid:n},i)}fchmod(e,r,n){return this.fsetstat(e,{mode:r},n)}chmod(e,r,n){return this.setstat(e,{mode:r},n)}readlink(e,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=9;const s=Buffer.allocUnsafe(13+n);ge(s,s.length-4,0),s[4]=je.READLINK;const o=this._writeReqid=this._writeReqid+1&kt;ge(s,o,5),ge(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:(c,f)=>{if(typeof r=="function"){if(c)return r(c);if(!f||!f.length)return r(new Error("Response missing link info"));r(void 0,f[0].filename)}}};const a=gt(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} READLINK`)}symlink(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");const i=Buffer.byteLength(r),s=Buffer.byteLength(e);let o=9;const a=Buffer.allocUnsafe(13+i+4+s);ge(a,a.length-4,0),a[4]=je.SYMLINK;const c=this._writeReqid=this._writeReqid+1&kt;ge(a,c,5),this._isOpenSSH?(ge(a,s,o),a.utf8Write(e,o+=4,s),ge(a,i,o+=s),a.utf8Write(r,o+=4,i)):(ge(a,i,o),a.utf8Write(r,o+=4,i),ge(a,s,o+=i),a.utf8Write(e,o+=4,s)),this._requests[c]={cb:n};const f=gt(this,a);this._debug&&this._debug(`SFTP: Outbound: ${f?"Buffered":"Sending"} SYMLINK`)}realpath(e,r){if(this.server)throw new Error("Client-only method called in server mode");const n=Buffer.byteLength(e);let i=9;const s=Buffer.allocUnsafe(13+n);ge(s,s.length-4,0),s[4]=je.REALPATH;const o=this._writeReqid=this._writeReqid+1&kt;ge(s,o,5),ge(s,n,i),s.utf8Write(e,i+=4,n),this._requests[o]={cb:(c,f)=>{if(typeof r=="function"){if(c)return r(c);if(!f||!f.length)return r(new Error("Response missing path info"));r(void 0,f[0].filename)}}};const a=gt(this,s);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} REALPATH`)}ext_openssh_rename(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");const i=this._extensions["posix-rename@openssh.com"];if(!i||i!=="1")throw new Error("Server does not support this extended request");const s=Buffer.byteLength(e),o=Buffer.byteLength(r);let a=9;const c=Buffer.allocUnsafe(41+s+4+o);ge(c,c.length-4,0),c[4]=je.EXTENDED;const f=this._writeReqid=this._writeReqid+1&kt;ge(c,f,5),ge(c,24,a),c.utf8Write("posix-rename@openssh.com",a+=4,24),ge(c,s,a+=24),c.utf8Write(e,a+=4,s),ge(c,o,a+=s),c.utf8Write(r,a+=4,o),this._requests[f]={cb:n};const u=gt(this,c);if(this._debug){const l=u?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${l} posix-rename@openssh.com`)}}ext_openssh_statvfs(e,r){if(this.server)throw new Error("Client-only method called in server mode");const n=this._extensions["statvfs@openssh.com"];if(!n||n!=="2")throw new Error("Server does not support this extended request");const i=Buffer.byteLength(e);let s=9;const o=Buffer.allocUnsafe(36+i);ge(o,o.length-4,0),o[4]=je.EXTENDED;const a=this._writeReqid=this._writeReqid+1&kt;ge(o,a,5),ge(o,19,s),o.utf8Write("statvfs@openssh.com",s+=4,19),ge(o,i,s+=19),o.utf8Write(e,s+=4,i),this._requests[a]={extended:"statvfs@openssh.com",cb:r};const c=gt(this,o);if(this._debug){const f=c?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${f} statvfs@openssh.com`)}}ext_openssh_fstatvfs(e,r){if(this.server)throw new Error("Client-only method called in server mode");const n=this._extensions["fstatvfs@openssh.com"];if(!n||n!=="2")throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const i=e.length;let s=9;const o=Buffer.allocUnsafe(37+i);ge(o,o.length-4,0),o[4]=je.EXTENDED;const a=this._writeReqid=this._writeReqid+1&kt;ge(o,a,5),ge(o,20,s),o.utf8Write("fstatvfs@openssh.com",s+=4,20),ge(o,i,s+=20),o.set(e,s+=4),this._requests[a]={extended:"fstatvfs@openssh.com",cb:r};const c=gt(this,o);if(this._debug){const f=c?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${f} fstatvfs@openssh.com`)}}ext_openssh_hardlink(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["hardlink@openssh.com"]!=="1")throw new Error("Server does not support this extended request");const s=Buffer.byteLength(e),o=Buffer.byteLength(r);let a=9;const c=Buffer.allocUnsafe(37+s+4+o);ge(c,c.length-4,0),c[4]=je.EXTENDED;const f=this._writeReqid=this._writeReqid+1&kt;ge(c,f,5),ge(c,20,a),c.utf8Write("hardlink@openssh.com",a+=4,20),ge(c,s,a+=20),c.utf8Write(e,a+=4,s),ge(c,o,a+=s),c.utf8Write(r,a+=4,o),this._requests[f]={cb:n};const u=gt(this,c);if(this._debug){const l=u?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${l} hardlink@openssh.com`)}}ext_openssh_fsync(e,r){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["fsync@openssh.com"]!=="1")throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("handle is not a Buffer");const i=e.length;let s=9;const o=Buffer.allocUnsafe(34+i);ge(o,o.length-4,0),o[4]=je.EXTENDED;const a=this._writeReqid=this._writeReqid+1&kt;ge(o,a,5),ge(o,17,s),o.utf8Write("fsync@openssh.com",s+=4,17),ge(o,i,s+=17),o.set(e,s+=4),this._requests[a]={cb:r};const c=gt(this,o);this._debug&&this._debug(`SFTP: Outbound: ${c?"Buffered":"Sending"} fsync@openssh.com`)}ext_openssh_lsetstat(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["lsetstat@openssh.com"]!=="1")throw new Error("Server does not support this extended request");let s=0,o=0;typeof r=="object"&&r!==null?(r=ei(r),s=r.flags,o=r.nb):typeof r=="function"&&(n=r);const a=Buffer.byteLength(e);let c=9;const f=Buffer.allocUnsafe(37+a+4+o);ge(f,f.length-4,0),f[4]=je.EXTENDED;const u=this._writeReqid=this._writeReqid+1&kt;ge(f,u,5),ge(f,20,c),f.utf8Write("lsetstat@openssh.com",c+=4,20),ge(f,a,c+=20),f.utf8Write(e,c+=4,a),ge(f,s,c+=a),o&&(c+=4,o===qe.length?f.set(qe,c):Pn(qe,f,0,o,c),c+=o),this._requests[u]={cb:n};const l=gt(this,f);if(this._debug){const h=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${h} lsetstat@openssh.com`)}}ext_openssh_expandPath(e,r){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["expand-path@openssh.com"]!=="1")throw new Error("Server does not support this extended request");const i=Buffer.byteLength(e);let s=9;const o=Buffer.allocUnsafe(40+i);ge(o,o.length-4,0),o[4]=je.EXTENDED;const a=this._writeReqid=this._writeReqid+1&kt;ge(o,a,5),ge(o,23,s),o.utf8Write("expand-path@openssh.com",s+=4,23),ge(o,i,s+=20),o.utf8Write(e,s+=4,i),this._requests[a]={cb:(f,u)=>{if(typeof r=="function"){if(f)return r(f);if(!u||!u.length)return r(new Error("Response missing expanded path"));r(void 0,u[0].filename)}}};const c=gt(this,o);if(this._debug){const f=c?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${f} expand-path@openssh.com`)}}ext_copy_data(e,r,n,i,s,o){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["copy-data"]!=="1")throw new Error("Server does not support this extended request");if(!Buffer.isBuffer(e))throw new Error("Source handle is not a Buffer");if(!Buffer.isBuffer(i))throw new Error("Destination handle is not a Buffer");let c=0;const f=Buffer.allocUnsafe(26+e.length+8+8+4+i.length+8);ge(f,f.length-4,c),c+=4,f[c]=je.EXTENDED,++c;const u=this._writeReqid=this._writeReqid+1&kt;ge(f,u,c),c+=4,ge(f,9,c),c+=4,f.utf8Write("copy-data",c,9),c+=9,ge(f,e.length,c),c+=4,f.set(e,c),c+=e.length;for(let h=7;h>=0;--h)f[c+h]=r&255,r/=256;c+=8;for(let h=7;h>=0;--h)f[c+h]=n&255,n/=256;c+=8,ge(f,i.length,c),c+=4,f.set(i,c),c+=i.length;for(let h=7;h>=0;--h)f[c+h]=s&255,s/=256;this._requests[u]={cb:o};const l=gt(this,f);if(this._debug){const h=l?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${h} copy-data`)}}ext_home_dir(e,r){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["home-directory"]!=="1")throw new Error("Server does not support this extended request");if(typeof e!="string")throw new TypeError("username is not a string");let i=0;const s=Buffer.byteLength(e),o=Buffer.allocUnsafe(31+s);ge(o,o.length-4,i),i+=4,o[i]=je.EXTENDED,++i;const a=this._writeReqid=this._writeReqid+1&kt;ge(o,a,i),i+=4,ge(o,14,i),i+=4,o.utf8Write("home-directory",i,14),i+=14,ge(o,s,i),i+=4,o.utf8Write(e,i,s),i+=s,this._requests[a]={cb:(f,u)=>{if(typeof r=="function"){if(f)return r(f);if(!u||!u.length)return r(new Error("Response missing home directory"));r(void 0,u[0].filename)}}};const c=gt(this,o);if(this._debug){const f=c?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${f} home-directory`)}}ext_users_groups(e,r,n){if(this.server)throw new Error("Client-only method called in server mode");if(this._extensions["users-groups-by-id@openssh.com"]!=="1")throw new Error("Server does not support this extended request");if(!Array.isArray(e))throw new TypeError("uids is not an array");for(const f of e)if(!Number.isInteger(f)||f<0||f>2**32-1)throw new Error("uid values must all be 32-bit unsigned integers");if(!Array.isArray(r))throw new TypeError("gids is not an array");for(const f of r)if(!Number.isInteger(f)||f<0||f>2**32-1)throw new Error("gid values must all be 32-bit unsigned integers");let s=0;const o=Buffer.allocUnsafe(47+4*e.length+4+4*r.length);ge(o,o.length-4,s),s+=4,o[s]=je.EXTENDED,++s;const a=this._writeReqid=this._writeReqid+1&kt;ge(o,a,s),s+=4,ge(o,30,s),s+=4,o.utf8Write("users-groups-by-id@openssh.com",s,30),s+=30,ge(o,4*e.length,s),s+=4;for(const f of e)ge(o,f,s),s+=4;ge(o,4*r.length,s),s+=4;for(const f of r)ge(o,f,s),s+=4;this._requests[a]={extended:"users-groups-by-id@openssh.com",cb:n};const c=gt(this,o);if(this._debug){const f=c?"Buffered":"Sending";this._debug(`SFTP: Outbound: ${f} users-groups-by-id@openssh.com`)}}handle(e,r){if(!this.server)throw new Error("Server-only method called in client mode");if(!Buffer.isBuffer(r))throw new Error("handle is not a Buffer");const n=r.length;if(n>256)throw new Error("handle too large (> 256 bytes)");let i=9;const s=Buffer.allocUnsafe(13+n);ge(s,s.length-4,0),s[4]=Rr.HANDLE,ge(s,e,5),ge(s,n,i),n&&s.set(r,i+=4);const o=gt(this,s);this._debug&&this._debug(`SFTP: Outbound: ${o?"Buffered":"Sending"} HANDLE`)}status(e,r,n){if(!this.server)throw new Error("Server-only method called in client mode");if(!yC.has(r))throw new Error(`Bad status code: ${r}`);n||(n="");const i=Buffer.byteLength(n);let s=9;const o=Buffer.allocUnsafe(17+i+4);ge(o,o.length-4,0),o[4]=Rr.STATUS,ge(o,e,5),ge(o,r,s),ge(o,i,s+=4),s+=4,i&&(o.utf8Write(n,s,i),s+=i),ge(o,0,s);const a=gt(this,o);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} STATUS`)}data(e,r,n){if(!this.server)throw new Error("Server-only method called in client mode");const i=Buffer.isBuffer(r);if(!i&&typeof r!="string")throw new Error("data is not a Buffer or string");let s;!i&&!n&&(n=void 0,s=!0);const o=i?r.length:Buffer.byteLength(r,n);let a=9;const c=Buffer.allocUnsafe(13+o);ge(c,c.length-4,0),c[4]=Rr.DATA,ge(c,e,5),ge(c,o,a),o&&(i?c.set(r,a+=4):s?c.utf8Write(r,a+=4,o):c.write(r,a+=4,o,n));const f=gt(this,c);this._debug&&this._debug(`SFTP: Outbound: ${f?"Buffered":"Sending"} DATA`)}name(e,r){if(!this.server)throw new Error("Server-only method called in client mode");if(!Array.isArray(r)){if(typeof r!="object"||r===null)throw new Error("names is not an object or array");r=[r]}const n=r.length;let i=0,s;const o=[];for(let u=0;u<n;++u){const l=r[u],h=!l||!l.filename||typeof l.filename!="string"?"":l.filename;i+=4+Buffer.byteLength(h);const d=!l||!l.longname||typeof l.longname!="string"?"":l.longname;if(i+=4+Buffer.byteLength(d),typeof l.attrs=="object"&&l.attrs!==null){if(s=ei(l.attrs),i+=4+s.nb,s.nb){let m;s.nb===qe.length?m=new Uint8Array(qe):(m=new Uint8Array(s.nb),Pn(qe,m,0,s.nb,0)),s.bytes=m}o.push(s)}else i+=4,o.push(null)}let a=9;const c=Buffer.allocUnsafe(13+i);ge(c,c.length-4,0),c[4]=Rr.NAME,ge(c,e,5),ge(c,n,a),a+=4;for(let u=0;u<n;++u){const l=r[u];{const d=!l||!l.filename||typeof l.filename!="string"?"":l.filename,m=Buffer.byteLength(d);ge(c,m,a),a+=4,m&&(c.utf8Write(d,a,m),a+=m)}{const d=!l||!l.longname||typeof l.longname!="string"?"":l.longname,m=Buffer.byteLength(d);ge(c,m,a),a+=4,m&&(c.utf8Write(d,a,m),a+=m)}const h=o[u];h?(ge(c,h.flags,a),a+=4,h.flags&&h.bytes&&(c.set(h.bytes,a),a+=h.nb)):(ge(c,0,a),a+=4)}const f=gt(this,c);this._debug&&this._debug(`SFTP: Outbound: ${f?"Buffered":"Sending"} NAME`)}attrs(e,r){if(!this.server)throw new Error("Server-only method called in client mode");if(typeof r!="object"||r===null)throw new Error("attrs is not an object");r=ei(r);const n=r.flags,i=r.nb;let s=9;const o=Buffer.allocUnsafe(13+i);ge(o,o.length-4,0),o[4]=Rr.ATTRS,ge(o,e,5),ge(o,n,s),i&&(s+=4,i===qe.length?o.set(qe,s):Pn(qe,o,0,i,s),s+=i);const a=gt(this,o);this._debug&&this._debug(`SFTP: Outbound: ${a?"Buffered":"Sending"} ATTRS`)}};function $C(t){try{return Buffer.allocUnsafe(t)}catch(e){return e}}function q0(t,e,r,n,i,s,o,a){const c=t._maxReadLen,f=Math.max(i-c,0);f&&(i=c);const u=e.length;let l=9,h=s;const d=Buffer.allocUnsafe(13+u+8+4);ge(d,d.length-4,0),d[4]=je.READ;const m=t._writeReqid=t._writeReqid+1&kt;ge(d,m,5),ge(d,u,l),d.set(e,l+=4),l+=u;for(let E=7;E>=0;--E)d[l+E]=h&255,h/=256;ge(d,i,l+=8),typeof o!="function"&&(o=Q0);const _=a||{nb:0,position:s,off:n,origOff:n,len:void 0,overflow:void 0,cb:(E,I,R)=>{const P=_.len,Q=_.overflow;if(E){if(o._wantEOFError||E.code!==At.EOF)return o(E)}else{if(R>P)return o(new Error("Received more data than requested"));if(R===P&&Q){_.nb+=R,_.position+=R,_.off+=R,q0(t,e,r,_.off,Q,_.position,o,_);return}}R=R||0,_.origOff===0&&r.length===_.nb?I=r:I=Fi(r,_.origOff,_.origOff+_.nb+R),o(void 0,_.nb+R,I,_.position)},buffer:void 0};_.len=i,_.overflow=f,_.buffer=Fi(r,n,n+i),t._requests[m]=_;const y=gt(t,d);t._debug&&t._debug(`SFTP: Outbound: ${y?"Buffered":"Sending"} READ`)}function Gd(t,e,r,n,i,s){let o=64,a=32768,c,f,u;typeof i=="function"?s=i:typeof i=="object"&&i!==null&&(typeof i.concurrency=="number"&&i.concurrency>0&&!isNaN(i.concurrency)&&(o=i.concurrency),typeof i.chunkSize=="number"&&i.chunkSize>0&&!isNaN(i.chunkSize)&&(a=i.chunkSize),typeof i.fileSize=="number"&&i.fileSize>0&&!isNaN(i.fileSize)&&(u=i.fileSize),typeof i.step=="function"&&(c=i.step),(typeof i.mode=="string"||typeof i.mode=="number")&&(f=Ju(i.mode)));let l,h=0,d=0,m=!1,_,y,E,I=a*o;function R(P){if(m)return;m=!0;let Q=0,z;_||y?(z=()=>{--Q===0&&s(P)},_&&(t===Dn||t.outgoing.state==="open")&&++Q,y&&(e===Dn||e.outgoing.state==="open")&&++Q,_&&(t===Dn||t.outgoing.state==="open")&&t.close(_,z),y&&(e===Dn||e.outgoing.state==="open")&&e.close(y,z)):s(P)}t.open(r,"r",(P,Q)=>{if(P)return R(P);_=Q,u===void 0?t.fstat(_,z):z(null,{size:u});function z(X,M){if(X){if(t!==Dn){t.stat(r,(F,K)=>{if(F)return R(X);z(null,K)});return}return R(X)}l=M.size,e.open(n,"w",(F,K)=>{if(F)return R(F);if(y=K,l<=0)return R();for(;I>l;){if(o===1){I=l;break}I-=a,--o}if(E=$C(I),E instanceof Error)return R(E);f!==void 0?e.fchmod(y,f,function Z(ie){if(ie){e.chmod(n,f,oe=>Z());return}Y()}):Y();function se(Z,ie,oe,O,j,C){if(Z)return R(Z);j=j||0,e.write(y,E,j,ie,O,v);function v(B){if(B)return R(B);if(d+=ie,c&&c(d,ie,l),ie<C)return ue(j,O+ie,C-ie);if(d===l){e.close(y,g=>{if(y=void 0,g)return R(g);t.close(_,S=>{if(_=void 0,S)return R(S);s()})});return}if(h>=l)return;const x=h+a>l?l-h:a;ue(j,h,x),h+=x}}function J(Z,ie,oe){return(O,j,C)=>{se(O,j,C,ie,Z,oe)}}function ue(Z,ie,oe){t.read(_,E,Z,oe,ie,J(Z,ie,oe))}function Y(){let Z=0,ie=0;for(;h<l&&Z<o;){const oe=h+a>l?l-h:a;ue(ie,h,oe),ie+=oe,h+=oe,++Z}}})}})}function Lc(t,e,r,n,i,s,o){const a=typeof o=="function"?o:void 0;t.write(e,r,n,i,s,(c,f)=>{if(c)return t.close(e,()=>{a&&a(c)});f===i?t.close(e,a):(n+=f,i-=f,s+=f,Lc(t,e,r,n,i,s,a))})}class CC{constructor(e){this.mode=e&&e.mode,this.uid=e&&e.uid,this.gid=e&&e.gid,this.size=e&&e.size,this.atime=e&&e.atime,this.mtime=e&&e.mtime,this.extended=e&&e.extended}isDirectory(){return(this.mode&$r.S_IFMT)===$r.S_IFDIR}isFile(){return(this.mode&$r.S_IFMT)===$r.S_IFREG}isBlockDevice(){return(this.mode&$r.S_IFMT)===$r.S_IFBLK}isCharacterDevice(){return(this.mode&$r.S_IFMT)===$r.S_IFCHR}isSymbolicLink(){return(this.mode&$r.S_IFMT)===$r.S_IFLNK}isFIFO(){return(this.mode&$r.S_IFMT)===$r.S_IFIFO}isSocket(){return(this.mode&$r.S_IFMT)===$r.S_IFSOCK}}function ei(t){let e=0,r=0;if(typeof t=="object"&&t!==null){if(typeof t.size=="number"){e|=bn.SIZE;const n=t.size;qe[r++]=n/72057594037927940,qe[r++]=n/281474976710656,qe[r++]=n/1099511627776,qe[r++]=n/4294967296,qe[r++]=n/16777216,qe[r++]=n/65536,qe[r++]=n/256,qe[r++]=n}if(typeof t.uid=="number"&&typeof t.gid=="number"){e|=bn.UIDGID;const n=t.uid,i=t.gid;qe[r++]=n>>>24,qe[r++]=n>>>16,qe[r++]=n>>>8,qe[r++]=n,qe[r++]=i>>>24,qe[r++]=i>>>16,qe[r++]=i>>>8,qe[r++]=i}if(typeof t.mode=="number"||typeof t.mode=="string"){const n=Ju(t.mode);e|=bn.PERMISSIONS,qe[r++]=n>>>24,qe[r++]=n>>>16,qe[r++]=n>>>8,qe[r++]=n}if((typeof t.atime=="number"||Oc(t.atime))&&(typeof t.mtime=="number"||Oc(t.mtime))){const n=$i(t.atime),i=$i(t.mtime);e|=bn.ACMODTIME,qe[r++]=n>>>24,qe[r++]=n>>>16,qe[r++]=n>>>8,qe[r++]=n,qe[r++]=i>>>24,qe[r++]=i>>>16,qe[r++]=i>>>8,qe[r++]=i}}return{flags:e,nb:r}}function $i(t){if(typeof t=="number"&&t===t)return t;if(Oc(t))return parseInt(t.getTime()/1e3,10);throw new Error(`Cannot parse time: ${t}`)}function Ju(t){if(typeof t=="number"&&t===t)return t;if(typeof t=="string")return Ju(parseInt(t,8));throw new Error(`Cannot parse mode: ${t}`)}const Dc={r:Fe.READ,"r+":Fe.READ|Fe.WRITE,w:Fe.TRUNC|Fe.CREAT|Fe.WRITE,wx:Fe.TRUNC|Fe.CREAT|Fe.WRITE|Fe.EXCL,xw:Fe.TRUNC|Fe.CREAT|Fe.WRITE|Fe.EXCL,"w+":Fe.TRUNC|Fe.CREAT|Fe.READ|Fe.WRITE,"wx+":Fe.TRUNC|Fe.CREAT|Fe.READ|Fe.WRITE|Fe.EXCL,"xw+":Fe.TRUNC|Fe.CREAT|Fe.READ|Fe.WRITE|Fe.EXCL,a:Fe.APPEND|Fe.CREAT|Fe.WRITE,ax:Fe.APPEND|Fe.CREAT|Fe.WRITE|Fe.EXCL,xa:Fe.APPEND|Fe.CREAT|Fe.WRITE|Fe.EXCL,"a+":Fe.APPEND|Fe.CREAT|Fe.READ|Fe.WRITE,"ax+":Fe.APPEND|Fe.CREAT|Fe.READ|Fe.WRITE|Fe.EXCL,"xa+":Fe.APPEND|Fe.CREAT|Fe.READ|Fe.WRITE|Fe.EXCL};function K0(t){const e=Dc[t];return e!==void 0?e:null}const xC=(()=>{const t=Object.keys(Dc);return e=>{for(let r=0;r<t.length;++r){const n=t[r];if(Dc[n]===e)return n}return null}})();function Ci(t){const e=ae.readUInt32BE();if(e===void 0)return;const r=new CC;if(e&bn.SIZE){const n=ae.readUInt64BE(t);if(n===void 0)return;r.size=n}if(e&bn.UIDGID){const n=ae.readUInt32BE(),i=ae.readUInt32BE();if(i===void 0)return;r.uid=n,r.gid=i}if(e&bn.PERMISSIONS){const n=ae.readUInt32BE();if(n===void 0)return;r.mode=n}if(e&bn.ACMODTIME){const n=ae.readUInt32BE(),i=ae.readUInt32BE();if(i===void 0)return;r.atime=n,r.mtime=i}if(e&bn.EXTENDED){const n=ae.readUInt32BE();if(n===void 0)return;const i={};for(let s=0;s<n;++s){const o=ae.readString(!0),a=ae.readString();if(a===void 0)return;i[o]=a}r.extended=i}return r}function gt(t,e){const r=W0(t,e);return r!==void 0?(t._buffer.push(r),!1):!0}function W0(t,e){const r=t.outgoing;if(r.state!=="open")return;if(r.window===0)return t._waitWindow=!0,t._chunkcb=Vd,e;let n;const i=e.length;let s=0;for(;i-s>0&&r.window>0;){const o=Math.min(i-s,r.window,r.packetSize);r.window-=o,r.window===0&&(t._waitWindow=!0,t._chunkcb=Vd),s===0&&o===i?t._protocol.channelData(t.outgoing.id,e):t._protocol.channelData(t.outgoing.id,Fi(e,s,s+o)),s+=o}return i-s>0&&(s>0?n=Fi(e,s,i):n=e),n}function Vd(){this._chunkcb=void 0;const t=this._buffer;let e=0;for(;e<t.length;){const r=t[e],n=W0(this,r);if(n!==void 0){n!==r&&(t[e]=n),e>0&&(this._buffer=t.slice(e));return}++e}e>0&&(this._buffer=[])}function It(t,e,r){const n=new Error(e);return n.level="sftp-protocol",t._debug&&t._debug(`SFTP: Inbound: ${e}`),t.emit("error",n),t.destroy(),G0(t),!1}function G0(t){const e=Object.keys(t._requests);if(e.length===0)return;const r=t._requests;t._requests={};const n=new Error("No response from server");for(let i=0;i<e.length;++i){const s=r[e[i]];typeof s.cb=="function"&&s.cb(n)}}function RC(t,e){let r=9;const n=Buffer.allocUnsafe(31);ge(n,n.length-4,0),n[4]=je.EXTENDED;const i=t._writeReqid=t._writeReqid+1&kt;ge(n,i,5),ge(n,18,r),n.utf8Write("limits@openssh.com",r+=4,18),t._requests[i]={extended:"limits@openssh.com",cb:e};const s=gt(t,n);if(t._debug){const o=s?"Buffered":"Sending";t._debug(`SFTP: Outbound: ${o} limits@openssh.com`)}}const NC={[Rr.VERSION]:(t,e)=>{if(t._version!==-1)return It(t,"Duplicate VERSION packet");const r={};ae.init(e,1);let n=ae.readUInt32BE();for(;ae.avail();){const i=ae.readString(!0),s=ae.readString(!0);if(s===void 0){n=void 0;break}r[i]=s}if(ae.clear(),n===void 0)return It(t,"Malformed VERSION packet");if(t._debug){const i=Object.keys(r);i.length?t._debug(`SFTP: Inbound: Received VERSION (v${n}, exts:${i})`):t._debug(`SFTP: Inbound: Received VERSION (v${n})`)}if(t._version=n,t._extensions=r,r["limits@openssh.com"]==="1")return RC(t,(i,s)=>{i||(s.maxPktLen>0&&(t._maxOutPktLen=s.maxPktLen),s.maxReadLen>0&&(t._maxReadLen=s.maxReadLen),s.maxWriteLen>0&&(t._maxWriteLen=s.maxWriteLen),t.maxOpenHandles=s.maxOpenHandles>0?s.maxOpenHandles:1/0),t.emit("ready")});t.emit("ready")},[Rr.STATUS]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readUInt32BE(),i=ae.readString(!0);if(ae.clear(),t._debug){const o=JSON.stringify(i);t._debug(`SFTP: Inbound: Received STATUS (id:${r}, ${n}, ${o})`)}const s=t._requests[r];if(delete t._requests[r],s&&typeof s.cb=="function"){if(n===At.OK){s.cb();return}const o=new Error(i||AC[n]||"Unknown status");o.code=n,s.cb(o)}},[Rr.HANDLE]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString();if(ae.clear(),n===void 0)return r!==void 0&&delete t._requests[r],It(t,"Malformed HANDLE packet");t._debug&&t._debug(`SFTP: Inbound: Received HANDLE (id:${r})`);const i=t._requests[r];delete t._requests[r],i&&typeof i.cb=="function"&&i.cb(void 0,n)},[Rr.DATA]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE();let n;if(r!==void 0&&(n=t._requests[r],delete t._requests[r]),n&&typeof n.cb=="function")if(n.buffer){const i=ae.readString(n.buffer);if(ae.clear(),i!==void 0){t._debug&&t._debug(`SFTP: Inbound: Received DATA (id:${r}, ${i})`),n.cb(void 0,n.buffer,i);return}}else{const i=ae.readString();if(ae.clear(),i!==void 0){t._debug&&t._debug(`SFTP: Inbound: Received DATA (id:${r}, ${i.length})`),n.cb(void 0,i);return}}else{const i=ae.skipString();if(ae.clear(),i!==void 0){t._debug&&t._debug(`SFTP: Inbound: Received DATA (id:${r}, ${i})`);return}}return It(t,"Malformed DATA packet")},[Rr.NAME]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE();let n;r!==void 0&&(n=t._requests[r],delete t._requests[r]);const i=ae.readUInt32BE();if(i!==void 0){let s=[];for(let o=0;o<i;++o){const a=ae.readString(!0),c=ae.readString(!0),f=Ci(t._biOpt);if(f===void 0){s=void 0;break}s.push({filename:a,longname:c,attrs:f})}if(s!==void 0){t._debug&&t._debug(`SFTP: Inbound: Received NAME (id:${r}, ${s.length})`),ae.clear(),n&&typeof n.cb=="function"&&n.cb(void 0,s);return}}return ae.clear(),It(t,"Malformed NAME packet")},[Rr.ATTRS]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE();let n;r!==void 0&&(n=t._requests[r],delete t._requests[r]);const i=Ci(t._biOpt);if(ae.clear(),i!==void 0){t._debug&&t._debug(`SFTP: Inbound: Received ATTRS (id:${r})`),n&&typeof n.cb=="function"&&n.cb(void 0,i);return}return It(t,"Malformed ATTRS packet")},[Rr.EXTENDED]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE();if(r!==void 0){const n=t._requests[r];if(n)switch(delete t._requests[r],n.extended){case"statvfs@openssh.com":case"fstatvfs@openssh.com":{const i=t._biOpt,s={f_bsize:ae.readUInt64BE(i),f_frsize:ae.readUInt64BE(i),f_blocks:ae.readUInt64BE(i),f_bfree:ae.readUInt64BE(i),f_bavail:ae.readUInt64BE(i),f_files:ae.readUInt64BE(i),f_ffree:ae.readUInt64BE(i),f_favail:ae.readUInt64BE(i),f_sid:ae.readUInt64BE(i),f_flag:ae.readUInt64BE(i),f_namemax:ae.readUInt64BE(i)};if(s.f_namemax===void 0)break;t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${n.extended})`),ae.clear(),typeof n.cb=="function"&&n.cb(void 0,s);return}case"limits@openssh.com":{const i={maxPktLen:ae.readUInt64BE(),maxReadLen:ae.readUInt64BE(),maxWriteLen:ae.readUInt64BE(),maxOpenHandles:ae.readUInt64BE()};if(i.maxOpenHandles===void 0)break;t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${n.extended})`),ae.clear(),typeof n.cb=="function"&&n.cb(void 0,i);return}case"users-groups-by-id@openssh.com":{const i=ae.readUInt32BE();if(i===void 0)break;const s=new Array(i);for(let c=0;c<s.length;++c)s[c]=ae.readString(!0);const o=ae.readUInt32BE();if(o===void 0)break;const a=new Array(o);for(let c=0;c<a.length;++c)a[c]=ae.readString(!0);if(a.length>0&&a[a.length-1]===void 0)break;t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ${n.extended})`),ae.clear(),typeof n.cb=="function"&&n.cb(void 0,s,a);return}default:t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`),ae.clear(),typeof n.cb=="function"&&n.cb();return}else{t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED_REPLY (id:${r}, ???)`),ae.clear();return}}return ae.clear(),It(t,"Malformed EXTENDED_REPLY packet")}},kC={[je.INIT]:(t,e)=>{if(t._version!==-1)return It(t,"Duplicate INIT packet");const r={};ae.init(e,1);let n=ae.readUInt32BE();for(;ae.avail();){const i=ae.readString(!0),s=ae.readString(!0);if(s===void 0){n=void 0;break}r[i]=s}if(ae.clear(),n===void 0)return It(t,"Malformed INIT packet");if(t._debug){const i=Object.keys(r);i.length?t._debug(`SFTP: Inbound: Received INIT (v${n}, exts:${i})`):t._debug(`SFTP: Inbound: Received INIT (v${n})`)}gt(t,wC),t._version=n,t._extensions=r,t.emit("ready")},[je.OPEN]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0),i=ae.readUInt32BE(),s=Ci(t._biOpt);if(ae.clear(),s===void 0)return It(t,"Malformed OPEN packet");t._debug&&t._debug(`SFTP: Inbound: Received OPEN (id:${r})`),t.emit("OPEN",r,n,i,s)||t.status(r,At.OP_UNSUPPORTED)},[je.CLOSE]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString();if(ae.clear(),n===void 0||n.length>256)return It(t,"Malformed CLOSE packet");t._debug&&t._debug(`SFTP: Inbound: Received CLOSE (id:${r})`),t.emit("CLOSE",r,n)||t.status(r,At.OP_UNSUPPORTED)},[je.READ]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(),i=ae.readUInt64BE(t._biOpt),s=ae.readUInt32BE();if(ae.clear(),s===void 0||n.length>256)return It(t,"Malformed READ packet");t._debug&&t._debug(`SFTP: Inbound: Received READ (id:${r})`),t.emit("READ",r,n,i,s)||t.status(r,At.OP_UNSUPPORTED)},[je.WRITE]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(),i=ae.readUInt64BE(t._biOpt),s=ae.readString();if(ae.clear(),s===void 0||n.length>256)return It(t,"Malformed WRITE packet");t._debug&&t._debug(`SFTP: Inbound: Received WRITE (id:${r})`),t.emit("WRITE",r,n,i,s)||t.status(r,At.OP_UNSUPPORTED)},[je.LSTAT]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0);if(ae.clear(),n===void 0)return It(t,"Malformed LSTAT packet");t._debug&&t._debug(`SFTP: Inbound: Received LSTAT (id:${r})`),t.emit("LSTAT",r,n)||t.status(r,At.OP_UNSUPPORTED)},[je.FSTAT]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString();if(ae.clear(),n===void 0||n.length>256)return It(t,"Malformed FSTAT packet");t._debug&&t._debug(`SFTP: Inbound: Received FSTAT (id:${r})`),t.emit("FSTAT",r,n)||t.status(r,At.OP_UNSUPPORTED)},[je.SETSTAT]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0),i=Ci(t._biOpt);if(ae.clear(),i===void 0)return It(t,"Malformed SETSTAT packet");t._debug&&t._debug(`SFTP: Inbound: Received SETSTAT (id:${r})`),t.emit("SETSTAT",r,n,i)||t.status(r,At.OP_UNSUPPORTED)},[je.FSETSTAT]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(),i=Ci(t._biOpt);if(ae.clear(),i===void 0||n.length>256)return It(t,"Malformed FSETSTAT packet");t._debug&&t._debug(`SFTP: Inbound: Received FSETSTAT (id:${r})`),t.emit("FSETSTAT",r,n,i)||t.status(r,At.OP_UNSUPPORTED)},[je.OPENDIR]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0);if(ae.clear(),n===void 0)return It(t,"Malformed OPENDIR packet");t._debug&&t._debug(`SFTP: Inbound: Received OPENDIR (id:${r})`),t.emit("OPENDIR",r,n)||t.status(r,At.OP_UNSUPPORTED)},[je.READDIR]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString();if(ae.clear(),n===void 0||n.length>256)return It(t,"Malformed READDIR packet");t._debug&&t._debug(`SFTP: Inbound: Received READDIR (id:${r})`),t.emit("READDIR",r,n)||t.status(r,At.OP_UNSUPPORTED)},[je.REMOVE]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0);if(ae.clear(),n===void 0)return It(t,"Malformed REMOVE packet");t._debug&&t._debug(`SFTP: Inbound: Received REMOVE (id:${r})`),t.emit("REMOVE",r,n)||t.status(r,At.OP_UNSUPPORTED)},[je.MKDIR]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0),i=Ci(t._biOpt);if(ae.clear(),i===void 0)return It(t,"Malformed MKDIR packet");t._debug&&t._debug(`SFTP: Inbound: Received MKDIR (id:${r})`),t.emit("MKDIR",r,n,i)||t.status(r,At.OP_UNSUPPORTED)},[je.RMDIR]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0);if(ae.clear(),n===void 0)return It(t,"Malformed RMDIR packet");t._debug&&t._debug(`SFTP: Inbound: Received RMDIR (id:${r})`),t.emit("RMDIR",r,n)||t.status(r,At.OP_UNSUPPORTED)},[je.REALPATH]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0);if(ae.clear(),n===void 0)return It(t,"Malformed REALPATH packet");t._debug&&t._debug(`SFTP: Inbound: Received REALPATH (id:${r})`),t.emit("REALPATH",r,n)||t.status(r,At.OP_UNSUPPORTED)},[je.STAT]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0);if(ae.clear(),n===void 0)return It(t,"Malformed STAT packet");t._debug&&t._debug(`SFTP: Inbound: Received STAT (id:${r})`),t.emit("STAT",r,n)||t.status(r,At.OP_UNSUPPORTED)},[je.RENAME]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0),i=ae.readString(!0);if(ae.clear(),i===void 0)return It(t,"Malformed RENAME packet");t._debug&&t._debug(`SFTP: Inbound: Received RENAME (id:${r})`),t.emit("RENAME",r,n,i)||t.status(r,At.OP_UNSUPPORTED)},[je.READLINK]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0);if(ae.clear(),n===void 0)return It(t,"Malformed READLINK packet");t._debug&&t._debug(`SFTP: Inbound: Received READLINK (id:${r})`),t.emit("READLINK",r,n)||t.status(r,At.OP_UNSUPPORTED)},[je.SYMLINK]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0),i=ae.readString(!0);if(ae.clear(),i===void 0)return It(t,"Malformed SYMLINK packet");t._debug&&t._debug(`SFTP: Inbound: Received SYMLINK (id:${r})`);let s;t._isOpenSSH?s=t.emit("SYMLINK",r,i,n):s=t.emit("SYMLINK",r,n,i),s||t.status(r,At.OP_UNSUPPORTED)},[je.EXTENDED]:(t,e)=>{ae.init(e,1);const r=ae.readUInt32BE(),n=ae.readString(!0);if(n===void 0)return ae.clear(),It(t,"Malformed EXTENDED packet");let i;ae.avail()&&(i=ae.readRaw()),ae.clear(),t._debug&&t._debug(`SFTP: Inbound: Received EXTENDED (id:${r})`),t.emit("EXTENDED",r,n,i)||t.status(r,At.OP_UNSUPPORTED)}},{ERR_INVALID_ARG_TYPE:PC,ERR_OUT_OF_RANGE:xo,validateNumber:TC}=Ms,Yd=128;let Ar;const Uc=[];function BC(t){Uc.length>0?Ar=Uc.pop():Ar=Buffer.allocUnsafe(t),Ar.used=0}function Mc(t,e){if(!Number.isSafeInteger(t))throw TC(t,e),Number.isInteger(t)?new xo(e,">= 0 and <= 2 ** 53 - 1",t):new xo(e,"an integer",t);if(t<0)throw new xo(e,">= 0 and <= 2 ** 53 - 1",t)}function tc(t){return t+7&-8}function Cn(t,e,r){if(r===void 0)r={};else if(typeof r=="string")r={encoding:r};else{if(r===null||typeof r!="object")throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}if(r.highWaterMark===void 0&&(r.highWaterMark=64*1024),r.emitClose=!1,r.autoDestroy=!1,H0.call(this,r),this.path=e,this.flags=r.flags===void 0?"r":r.flags,this.mode=r.mode===void 0?438:r.mode,this.start=r.start,this.end=r.end,this.autoClose=r.autoClose===void 0?!0:r.autoClose,this.pos=0,this.bytesRead=0,this.isClosed=!1,this.handle=r.handle===void 0?null:r.handle,this.sftp=t,this._opening=!1,this.start!==void 0&&(Mc(this.start,"start"),this.pos=this.start),this.end===void 0)this.end=1/0;else if(this.end!==1/0&&(Mc(this.end,"end"),this.start!==void 0&&this.start>this.end))throw new xo("start",`<= "end" (here: ${this.end})`,this.start);this.on("end",function(){this.autoClose&&this.destroy()}),Buffer.isBuffer(this.handle)||this.open()}j0(Cn,H0);Cn.prototype.open=function(){this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,(t,e)=>{if(this._opening=!1,t){this.emit("error",t),this.autoClose&&this.destroy();return}this.handle=e,this.emit("open",e),this.emit("ready"),this.read()}))};Cn.prototype._read=function(t){if(!Buffer.isBuffer(this.handle))return this.once("open",()=>this._read(t));if(this.destroyed)return;(!Ar||Ar.length-Ar.used<Yd)&&BC(this.readableHighWaterMark||this._readableState.highWaterMark);const e=Ar;let r=Math.min(Ar.length-Ar.used,t);const n=Ar.used;if(this.end!==void 0&&(r=Math.min(this.end-this.pos+1,r)),r<=0)return this.push(null);this.sftp.read(this.handle,Ar,Ar.used,r,this.pos,(i,s)=>{if(i){this.emit("error",i),this.autoClose&&this.destroy();return}let o=null;if(n+r===e.used&&e===Ar)e.used=tc(e.used+s-r);else{const a=n+r&-8,c=tc(n+s);a-c>=Yd&&Uc.push(e.slice(c,a))}s>0&&(this.bytesRead+=s,o=e.slice(n,n+s)),this.pos+=s,this.push(o)}),Ar.used=tc(Ar.used+r)};Cn.prototype._destroy=function(t,e){if(this._opening&&!Buffer.isBuffer(this.handle)){this.once("open",zd.bind(null,this,e,t));return}zd(this,e,t),this.handle=null,this._opening=!1};function zd(t,e,r){if(!t.handle)return n();t.sftp.close(t.handle,n);function n(i){i=i||r,e(i),t.isClosed=!0,i||t.emit("close")}}Cn.prototype.close=function(t){this.destroy(null,t)};Object.defineProperty(Cn.prototype,"pending",{get(){return this.handle===null},configurable:!0});function Fr(t,e,r){if(r===void 0)r={};else if(typeof r=="string")r={encoding:r};else{if(r===null||typeof r!="object")throw new TypeError('"options" argument must be a string or an object');r=Object.create(r)}r.emitClose=!1,r.autoDestroy=!1,Xu.call(this,r),this.path=e,this.flags=r.flags===void 0?"w":r.flags,this.mode=r.mode===void 0?438:r.mode,this.start=r.start,this.autoClose=r.autoClose===void 0?!0:r.autoClose,this.pos=0,this.bytesWritten=0,this.isClosed=!1,this.handle=r.handle===void 0?null:r.handle,this.sftp=t,this._opening=!1,this.start!==void 0&&(Mc(this.start,"start"),this.pos=this.start),r.encoding&&this.setDefaultEncoding(r.encoding),this.on("finish",function(){this._writableState.finalCalled||this.autoClose&&this.destroy()}),Buffer.isBuffer(this.handle)||this.open()}j0(Fr,Xu);Fr.prototype._final=function(t){this.autoClose&&this.destroy(),t()};Fr.prototype.open=function(){this._opening||(this._opening=!0,this.sftp.open(this.path,this.flags,this.mode,(t,e)=>{if(this._opening=!1,t){this.emit("error",t),this.autoClose&&this.destroy();return}this.handle=e;const r=n=>{if(n){this.sftp.chmod(this.path,this.mode,i=>r());return}if(this.flags[0]==="a"){const i=(s,o)=>{if(s){this.sftp.stat(this.path,(a,c)=>{if(a){this.destroy(),this.emit("error",s);return}i(null,c)});return}this.pos=o.size,this.emit("open",e),this.emit("ready")};this.sftp.fstat(e,i);return}this.emit("open",e),this.emit("ready")};this.sftp.fchmod(e,this.mode,r)}))};Fr.prototype._write=function(t,e,r){if(!Buffer.isBuffer(t)){const n=new PC("data","Buffer",t);return this.emit("error",n)}if(!Buffer.isBuffer(this.handle))return this.once("open",function(){this._write(t,e,r)});this.sftp.write(this.handle,t,0,t.length,this.pos,(n,i)=>{if(n)return this.autoClose&&this.destroy(),r(n);this.bytesWritten+=i,r()}),this.pos+=t.length};Fr.prototype._writev=function(t,e){if(!Buffer.isBuffer(this.handle))return this.once("open",function(){this._writev(t,e)});const r=this.sftp,n=this.handle;let i=t.length;const s=(o,a)=>{if(o)return this.destroy(),e(o);this.bytesWritten+=a,--i===0&&e()};for(let o=0;o<t.length;++o){const a=t[o].chunk;r.write(n,a,0,a.length,this.pos,s),this.pos+=a.length}};typeof Xu.prototype.destroy!="function"&&(Fr.prototype.destroy=Cn.prototype.destroy);Fr.prototype._destroy=Cn.prototype._destroy;Fr.prototype.close=function(t){if(t){if(this.isClosed){process.nextTick(t);return}this.on("close",t)}this.autoClose||this.on("finish",this.destroy.bind(this)),this.end()};Fr.prototype.destroySoon=Fr.prototype.end;Object.defineProperty(Fr.prototype,"pending",{get(){return this.handle===null},configurable:!0});var Sa={flagsToString:xC,OPEN_MODE:Fe,SFTP:vC,STATUS_CODE:At,stringToFlags:K0};const{Duplex:OC,Readable:LC,Writable:DC}=jc,{CHANNEL_EXTENDED_DATATYPE:{STDERR:Xd}}=Wn(),{bufferSlice:Wo}=dn(),UC=32*1024,Fs=2*1024*1024,Zu=Fs/2;class MC extends LC{constructor(e,r){super(r),this._channel=e}_read(e){this._channel._waitChanDrain&&(this._channel._waitChanDrain=!1,this._channel.incoming.window<=Zu&&el(this._channel))}}class FC extends DC{constructor(e){super({highWaterMark:Fs}),this._channel=e}_write(e,r,n){const i=this._channel,s=i._client._protocol,o=i.outgoing,a=o.packetSize,c=o.id;let f=o.window;const u=e.length;let l=0;if(o.state==="open"){for(;u-l>0&&f>0;){let h=u-l;h>f&&(h=f),h>a&&(h=a),l===0&&h===u?s.channelExtData(c,e,Xd):s.channelExtData(c,Wo(e,l,l+h),Xd),l+=h,f-=h}if(o.window=f,u-l>0){f===0&&(i._waitWindow=!0),l>0?i._chunkErr=Wo(e,l,u):i._chunkErr=e,i._chunkcbErr=n;return}n()}}}let HC=class extends OC{constructor(e,r,n){const i={highWaterMark:Fs,allowHalfOpen:!n||n&&n.allowHalfOpen!==!1,emitClose:!1};super(i),this.allowHalfOpen=i.allowHalfOpen;const s=!!(n&&n.server);this.server=s,this.type=r.type,this.subtype=void 0,this.incoming=r.incoming,this.outgoing=r.outgoing,this._callbacks=[],this._client=e,this._hasX11=!1,this._exit={code:void 0,signal:void 0,dump:void 0,desc:void 0},this.stdin=this.stdout=this,s?this.stderr=new FC(this):this.stderr=new MC(this,i),this._waitWindow=!1,this._waitChanDrain=!1,this._chunk=void 0,this._chunkcb=void 0,this._chunkErr=void 0,this._chunkcbErr=void 0,this.on("finish",Jd).on("prefinish",Jd),this.on("end",Zd).on("close",Zd)}_read(e){this._waitChanDrain&&(this._waitChanDrain=!1,this.incoming.window<=Zu&&el(this))}_write(e,r,n){const i=this._client._protocol,s=this.outgoing,o=s.packetSize,a=s.id;let c=s.window;const f=e.length;let u=0;if(s.state==="open"){for(;f-u>0&&c>0;){let l=f-u;l>c&&(l=c),l>o&&(l=o),u===0&&l===f?i.channelData(a,e):i.channelData(a,Wo(e,u,u+l)),u+=l,c-=l}if(s.window=c,f-u>0){c===0&&(this._waitWindow=!0),u>0?this._chunk=Wo(e,u,f):this._chunk=e,this._chunkcb=n;return}n()}}eof(){this.outgoing.state==="open"&&(this.outgoing.state="eof",this._client._protocol.channelEOF(this.outgoing.id))}close(){(this.outgoing.state==="open"||this.outgoing.state==="eof")&&(this.outgoing.state="closing",this._client._protocol.channelClose(this.outgoing.id))}destroy(){return this.end(),this.close(),this}setWindow(e,r,n,i){if(this.server)throw new Error("Client-only method called in server mode");this.type==="session"&&(this.subtype==="shell"||this.subtype==="exec")&&this.writable&&this.outgoing.state==="open"&&this._client._protocol.windowChange(this.outgoing.id,e,r,n,i)}signal(e){if(this.server)throw new Error("Client-only method called in server mode");this.type==="session"&&this.writable&&this.outgoing.state==="open"&&this._client._protocol.signal(this.outgoing.id,e)}exit(e,r,n){if(!this.server)throw new Error("Server-only method called in client mode");this.type==="session"&&this.writable&&this.outgoing.state==="open"&&(typeof e=="number"?this._client._protocol.exitStatus(this.outgoing.id,e):this._client._protocol.exitSignal(this.outgoing.id,e,r,n))}};function Jd(){this.eof(),(this.server||!this.allowHalfOpen)&&this.close(),this.writable=!1}function Zd(){this.readable=!1}function el(t){if(t.outgoing.state==="closed")return;const e=Fs-t.incoming.window;e<=0||(t.incoming.window+=e,t._client._protocol.channelWindowAdjust(t.outgoing.id,e))}var V0={Channel:HC,MAX_WINDOW:Fs,PACKET_SIZE:UC,windowAdjust:el,WINDOW_THRESHOLD:Zu};const{SFTP:jC}=Sa,ns=2**32-1;function Y0(t,e,r,n){if(t._chanMgr.remove(e),typeof n!="function")return;let i;r instanceof Error?i=r:typeof r=="object"&&r!==null?(i=new Error(`(SSH) Channel open failure: ${r.description}`),i.reason=r.reason):(i=new Error("(SSH) Channel open failure: server closed channel unexpectedly"),i.reason=""),n(i)}function z0(t,e,r,n,i){if(typeof r=="function"){Y0(t,e,n,r);return}if(typeof r!="object"||r===null||r.incoming&&r.incoming.state==="closed"||(t._chanMgr.remove(e),r.server&&r.constructor.name==="Session"))return;r.incoming.state="closed",r.readable&&r.push(null),r.server?r.stderr.writable&&r.stderr.end():r.stderr.readable&&r.stderr.push(null),r.constructor!==jC&&(r.outgoing.state==="open"||r.outgoing.state==="eof")&&!i&&r.close(),r.outgoing.state==="closing"&&(r.outgoing.state="closed");const s=r._readableState,o=r._writableState;o&&!o.ending&&!o.finished&&!i&&r.end();const a=r._callbacks;r._callbacks=[];for(let c=0;c<a.length;++c)a[c](!0);if(r.server)!r.readable||r.destroyed||s&&s.endEmitted?r.emit("close"):r.once("end",()=>r.emit("close"));else{let c;switch(r.type){case"direct-streamlocal@openssh.com":case"direct-tcpip":c=()=>r.emit("close");break;default:{const u=r._exit;c=()=>{u.code===null?r.emit("close",u.code,u.signal,u.dump,u.desc):r.emit("close",u.code)}}}!r.readable||r.destroyed||s&&s.endEmitted?c():r.once("end",c);const f=r.stderr._readableState;!r.stderr.readable||r.stderr.destroyed||f&&f.endEmitted?r.stderr.emit("close"):r.stderr.once("end",()=>r.stderr.emit("close"))}}let QC=class{constructor(e){this._client=e,this._channels={},this._cur=-1,this._count=0}add(e){let r;if(this._cur<ns)r=++this._cur;else if(this._count===0)this._cur=0,r=0;else{const n=this._channels;for(let i=0;i<ns;++i)if(n[i]===void 0){r=i;break}}return r===void 0?-1:(this._channels[r]=e||!0,++this._count,r)}update(e,r){if(typeof e!="number"||e<0||e>=ns||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);r&&this._channels[e]&&(this._channels[e]=r)}get(e){if(typeof e!="number"||e<0||e>=ns||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);return this._channels[e]}remove(e){if(typeof e!="number"||e<0||e>=ns||!isFinite(e))throw new Error(`Invalid channel id: ${e}`);this._channels[e]&&(delete this._channels[e],this._count&&--this._count)}cleanup(e){const r=this._channels;this._channels={},this._cur=-1,this._count=0;const n=Object.keys(r),i=this._client;for(let s=0;s<n.length;++s){const o=+n[s],a=r[o];z0(i,o,a._channel||a,e,!0)}}};const rc=(()=>{const t=Object.prototype.toString;return e=>t.call(e)==="[object RegExp]"})();function qC(t,e,r){if(Array.isArray(t)&&t.length>0){for(let n=0;n<t.length;++n)if(r.indexOf(t[n])===-1)throw new Error(`Unsupported algorithm: ${t[n]}`);return t}if(typeof t=="object"&&t!==null){const n=Object.keys(t);let i=e;for(let s=0;s<n.length;++s){const o=n[s];let a=t[o];switch(o){case"append":if(Array.isArray(a)||(a=[a]),Array.isArray(a))for(let c=0;c<a.length;++c){const f=a[c];if(typeof f=="string"){if(!f||i.indexOf(f)!==-1)continue;if(r.indexOf(f)===-1)throw new Error(`Unsupported algorithm: ${f}`);i===e&&(i=i.slice()),i.push(f)}else if(rc(f))for(let u=0;u<r.length;++u){const l=r[u];if(f.test(l)){if(i.indexOf(l)!==-1)continue;i===e&&(i=i.slice()),i.push(l)}}}break;case"prepend":if(Array.isArray(a)||(a=[a]),Array.isArray(a))for(let c=a.length;c>=0;--c){const f=a[c];if(typeof f=="string"){if(!f||i.indexOf(f)!==-1)continue;if(r.indexOf(f)===-1)throw new Error(`Unsupported algorithm: ${f}`);i===e&&(i=i.slice()),i.unshift(f)}else if(rc(f))for(let u=r.length;u>=0;--u){const l=r[u];if(f.test(l)){if(i.indexOf(l)!==-1)continue;i===e&&(i=i.slice()),i.unshift(l)}}}break;case"remove":if(Array.isArray(a)||(a=[a]),Array.isArray(a))for(let c=0;c<a.length;++c){const f=a[c];if(typeof f=="string"){if(!f)continue;const u=i.indexOf(f);if(u===-1)continue;i===e&&(i=i.slice()),i.splice(u,1)}else if(rc(f))for(let u=0;u<i.length;++u)f.test(i[u])&&(i===e&&(i=i.slice()),i.splice(u,1),--u)}break}}return i}return e}var X0={ChannelManager:QC,generateAlgorithmList:qC,onChannelOpenFailure:Y0,onCHANNEL_CLOSE:z0,isWritable:t=>t&&t.writable&&t._readableState&&t._readableState.ended===!1};const{createHash:KC,getHashes:WC,randomFillSync:GC}=Kn,{Socket:VC}=Hc,{lookup:YC}=_g,zC=Xo,XC=WC(),{COMPAT:J0,CHANNEL_EXTENDED_DATATYPE:{STDERR:JC},CHANNEL_OPEN_FAILURE:is,DEFAULT_CIPHER:eh,DEFAULT_COMPRESSION:th,DEFAULT_KEX:rh,DEFAULT_MAC:nh,DEFAULT_SERVER_HOST_KEY:ih,DISCONNECT_REASON:sh,DISCONNECT_REASON_BY_VALUE:ZC,SUPPORTED_CIPHER:ex,SUPPORTED_COMPRESSION:tx,SUPPORTED_KEX:rx,SUPPORTED_MAC:nx,SUPPORTED_SERVER_HOST_KEY:ix}=Wn(),{init:sx}=hi(),ox=L0,{parseKey:Ro}=pi,{SFTP:ax}=Sa,{bufferCopy:oh,makeBufferParser:Z0,makeError:cx,readUInt32BE:fx,sigSSHToASN1:ux,writeUInt32BE:nc}=dn(),{AgentContext:ah,createAgent:ch,isAgent:fh}=I0,{Channel:eg,MAX_WINDOW:Go,PACKET_SIZE:Vo,windowAdjust:uh,WINDOW_THRESHOLD:lh}=V0,{ChannelManager:lx,generateAlgorithmList:ss,isWritable:zt,onChannelOpenFailure:dx,onCHANNEL_CLOSE:hx}=X0,po=Z0(),go=Z0(),hs=/^OpenSSH_(?:(?![0-4])\d)|(?:\d{2,})/,Fc=t=>{};let px=class extends zC{constructor(){super(),this.config={host:void 0,port:void 0,localAddress:void 0,localPort:void 0,forceIPv4:void 0,forceIPv6:void 0,keepaliveCountMax:void 0,keepaliveInterval:void 0,readyTimeout:void 0,ident:void 0,username:void 0,password:void 0,privateKey:void 0,tryKeyboard:void 0,agent:void 0,allowAgentFwd:void 0,authHandler:void 0,hostHashAlgo:void 0,hostHashCb:void 0,strictVendor:void 0,debug:void 0},this._agent=void 0,this._readyTimeout=void 0,this._chanMgr=void 0,this._callbacks=void 0,this._forwarding=void 0,this._forwardingUnix=void 0,this._acceptX11=void 0,this._agentFwdEnabled=void 0,this._remoteVer=void 0,this._protocol=void 0,this._sock=void 0,this._resetKA=void 0}connect(e){if(this._sock&&zt(this._sock))return this.once("close",()=>{this.connect(e)}),this.end(),this;this.config.host=e.hostname||e.host||"localhost",this.config.port=e.port||22,this.config.localAddress=typeof e.localAddress=="string"?e.localAddress:void 0,this.config.localPort=typeof e.localPort=="string"||typeof e.localPort=="number"?e.localPort:void 0,this.config.forceIPv4=e.forceIPv4||!1,this.config.forceIPv6=e.forceIPv6||!1,this.config.keepaliveCountMax=typeof e.keepaliveCountMax=="number"&&e.keepaliveCountMax>=0?e.keepaliveCountMax:3,this.config.keepaliveInterval=typeof e.keepaliveInterval=="number"&&e.keepaliveInterval>0?e.keepaliveInterval:0,this.config.readyTimeout=typeof e.readyTimeout=="number"&&e.readyTimeout>=0?e.readyTimeout:2e4,this.config.ident=typeof e.ident=="string"||Buffer.isBuffer(e.ident)?e.ident:void 0;const r={kex:void 0,serverHostKey:void 0,cs:{cipher:void 0,mac:void 0,compress:void 0,lang:[]},sc:void 0};let n=!0;if(typeof e.algorithms=="object"&&e.algorithms!==null&&(r.kex=ss(e.algorithms.kex,rh,rx),r.kex!==rh&&(n=!1),r.serverHostKey=ss(e.algorithms.serverHostKey,ih,ix),r.serverHostKey!==ih&&(n=!1),r.cs.cipher=ss(e.algorithms.cipher,eh,ex),r.cs.cipher!==eh&&(n=!1),r.cs.mac=ss(e.algorithms.hmac,nh,nx),r.cs.mac!==nh&&(n=!1),r.cs.compress=ss(e.algorithms.compress,th,tx),r.cs.compress!==th&&(n=!1),n||(r.sc=r.cs)),typeof e.username=="string")this.config.username=e.username;else if(typeof e.user=="string")this.config.username=e.user;else throw new Error("Invalid username");this.config.password=typeof e.password=="string"?e.password:void 0,this.config.privateKey=typeof e.privateKey=="string"||Buffer.isBuffer(e.privateKey)?e.privateKey:void 0,this.config.localHostname=typeof e.localHostname=="string"?e.localHostname:void 0,this.config.localUsername=typeof e.localUsername=="string"?e.localUsername:void 0,this.config.tryKeyboard=e.tryKeyboard===!0,typeof e.agent=="string"&&e.agent.length?this.config.agent=ch(e.agent):fh(e.agent)?this.config.agent=e.agent:this.config.agent=void 0,this.config.allowAgentFwd=e.agentForward===!0&&this.config.agent!==void 0;let i=this.config.authHandler=typeof e.authHandler=="function"||Array.isArray(e.authHandler)?e.authHandler:void 0;this.config.strictVendor=typeof e.strictVendor=="boolean"?e.strictVendor:!0;const s=this.config.debug=typeof e.debug=="function"?e.debug:void 0;if(e.agentForward===!0&&!this.config.allowAgentFwd)throw new Error("You must set a valid agent path to allow agent forwarding");let o=this._callbacks=[];this._chanMgr=new lx(this),this._forwarding={},this._forwardingUnix={},this._acceptX11=0,this._agentFwdEnabled=!1,this._agent=this.config.agent?this.config.agent:void 0,this._remoteVer=void 0;let a;if(this.config.privateKey){if(a=Ro(this.config.privateKey,e.passphrase),a instanceof Error)throw new Error(`Cannot parse privateKey: ${a.message}`);if(Array.isArray(a)&&(a=a[0]),a.getPrivatePEM()===null)throw new Error("privateKey value does not contain a (valid) private key")}let c;if(typeof e.hostVerifier=="function"){const O=e.hostVerifier;let j;XC.indexOf(e.hostHash)!==-1&&(j=e.hostHash),c=(C,v)=>{j&&(C=KC(j).update(C).digest("hex"));const B=O(C,v);B!==void 0&&v(B)}}const f=this._sock=e.sock||new VC;let u=!1,l=!1;this._protocol&&this._protocol.cleanup();const h=s?(O,j,C)=>{s(`Debug output from server: ${JSON.stringify(C)}`)}:void 0;let d;const m=this._protocol=new ox({ident:this.config.ident,offer:n?void 0:r,onWrite:O=>{zt(f)&&f.write(O)},onError:O=>{O.level==="handshake"&&clearTimeout(this._readyTimeout),m._destruct||f.removeAllListeners("data"),this.emit("error",O);try{f.end()}catch{}},onHeader:O=>{l=!0,this._remoteVer=O.versions.software,O.greeting&&this.emit("greeting",O.greeting)},onHandshakeComplete:O=>{this.emit("handshake",O),u||(u=!0,m.service("ssh-userauth"))},debug:s,hostVerifier:c,messageHandlers:{DEBUG:h,DISCONNECT:(O,j,C)=>{if(j!==sh.BY_APPLICATION){C||(C=ZC[j],C===void 0&&(C=`Unexpected disconnection reason: ${j}`));const v=new Error(C);v.code=j,this.emit("error",v)}f.end()},SERVICE_ACCEPT:(O,j)=>{j==="ssh-userauth"&&Z()},EXT_INFO:(O,j)=>{if(d===void 0){for(const C of j)if(C.name==="server-sig-algs"){d=C.algs;return}d=null}},USERAUTH_BANNER:(O,j)=>{this.emit("banner",j)},USERAUTH_SUCCESS:O=>{P(),clearTimeout(this._readyTimeout),this.emit("ready")},USERAUTH_FAILURE:(O,j,C)=>{if(M.keyAlgos){const v=M.keyAlgos[0][0];if(s&&s(`Client: ${M.type} (${v}) auth failed`),M.keyAlgos.shift(),M.keyAlgos.length){const[B,x]=M.keyAlgos[0];switch(M.type){case"agent":m.authPK(M.username,M.agentCtx.currentKey(),B);return;case"publickey":m.authPK(M.username,M.key,B);return;case"hostbased":m.authHostbased(M.username,M.key,M.localHostname,M.localUsername,B,(g,S)=>{const U=M.key.sign(g,x);if(U instanceof Error)return U.message=`Error while signing with key: ${U.message}`,U.level="client-authentication",this.emit("error",U),Z();S(U)});return}}else M.keyAlgos=void 0}if(M.type==="agent"){const v=M.agentCtx.pos();return s&&s(`Client: Agent key #${v+1} failed`),ie()}s&&s(`Client: ${M.type} auth failed`),F=C,K=j,Z()},USERAUTH_PASSWD_CHANGEREQ:(O,j)=>{M.type==="password"&&this.emit("change password",j,C=>{m.authPassword(this.config.username,this.config.password,C)})},USERAUTH_PK_OK:O=>{let j,C;if(M.keyAlgos&&([j,C]=M.keyAlgos[0]),M.type==="agent"){const v=M.agentCtx.currentKey();m.authPK(M.username,v,j,(B,x)=>{const g={hash:C};M.agentCtx.sign(v,B,g,(S,U)=>{if(S)S.level="agent",this.emit("error",S);else return x(U);ie()})})}else M.type==="publickey"&&m.authPK(M.username,M.key,j,(v,B)=>{const x=M.key.sign(v,C);if(x instanceof Error)return x.message=`Error signing data with key: ${x.message}`,x.level="client-authentication",this.emit("error",x),Z();B(x)})},USERAUTH_INFO_REQUEST:(O,j,C,v)=>{if(M.type==="keyboard-interactive"){if((Array.isArray(v)?v.length:0)===0){s&&s("Client: Sending automatic USERAUTH_INFO_RESPONSE"),m.authInfoRes();return}M.prompt(j,C,"",v,x=>{m.authInfoRes(x)})}},REQUEST_SUCCESS:(O,j)=>{o.length&&o.shift()(!1,j)},REQUEST_FAILURE:O=>{o.length&&o.shift()(!0)},GLOBAL_REQUEST:(O,j,C,v)=>{switch(j){case"hostkeys-00@openssh.com":yx(this,v,(B,x)=>{B||this.emit("hostkeys",x)}),C&&m.requestSuccess();break;default:C&&m.requestFailure()}},CHANNEL_OPEN:(O,j)=>{_x(this,j)},CHANNEL_OPEN_CONFIRMATION:(O,j)=>{const C=this._chanMgr.get(j.recipient);if(typeof C!="function")return;const v=C.type==="sftp",x={type:v?"session":C.type,incoming:{id:j.recipient,window:Go,packetSize:Vo,state:"open"},outgoing:{id:j.sender,window:j.window,packetSize:j.packetSize,state:"open"}},g=v?new ax(this,x,{debug:s}):new eg(this,x);this._chanMgr.update(j.recipient,g),C(void 0,g)},CHANNEL_OPEN_FAILURE:(O,j,C,v)=>{const B=this._chanMgr.get(j);if(typeof B!="function")return;dx(this,j,{reason:C,description:v},B)},CHANNEL_DATA:(O,j,C)=>{const v=this._chanMgr.get(j);if(!(typeof v!="object"||v===null)&&v.incoming.window!==0){if(v.incoming.window-=C.length,v.push(C)===!1){v._waitChanDrain=!0;return}v.incoming.window<=lh&&uh(v)}},CHANNEL_EXTENDED_DATA:(O,j,C,v)=>{if(v!==JC)return;const B=this._chanMgr.get(j);if(!(typeof B!="object"||B===null)&&B.incoming.window!==0){if(B.incoming.window-=C.length,!B.stderr.push(C)){B._waitChanDrain=!0;return}B.incoming.window<=lh&&uh(B)}},CHANNEL_WINDOW_ADJUST:(O,j,C)=>{const v=this._chanMgr.get(j);typeof v!="object"||v===null||(v.outgoing.window+=C,v._waitWindow&&(v._waitWindow=!1,v._chunk?v._write(v._chunk,null,v._chunkcb):v._chunkcb?v._chunkcb():v._chunkErr?v.stderr._write(v._chunkErr,null,v._chunkcbErr):v._chunkcbErr&&v._chunkcbErr()))},CHANNEL_SUCCESS:(O,j)=>{const C=this._chanMgr.get(j);typeof C!="object"||C===null||(this._resetKA(),C._callbacks.length&&C._callbacks.shift()(!1))},CHANNEL_FAILURE:(O,j)=>{const C=this._chanMgr.get(j);typeof C!="object"||C===null||(this._resetKA(),C._callbacks.length&&C._callbacks.shift()(!0))},CHANNEL_REQUEST:(O,j,C,v,B)=>{const x=this._chanMgr.get(j);if(typeof x!="object"||x===null)return;const g=x._exit;if(g.code===void 0){switch(C){case"exit-status":x.emit("exit",g.code=B);return;case"exit-signal":x.emit("exit",g.code=null,g.signal=`SIG${B.signal}`,g.dump=B.coreDumped,g.desc=B.errorMessage);return}v&&O.channelFailure(x.outgoing.id)}},CHANNEL_EOF:(O,j)=>{const C=this._chanMgr.get(j);typeof C!="object"||C===null||C.incoming.state==="open"&&(C.incoming.state="eof",C.readable&&C.push(null),C.stderr.readable&&C.stderr.push(null))},CHANNEL_CLOSE:(O,j)=>{hx(this,j,this._chanMgr.get(j))}}});f.pause();const _=this.config.keepaliveInterval,y=this.config.keepaliveCountMax;let E=0,I;const R=()=>{if(++E>y){if(clearInterval(I),f.readable){const O=new Error("Keepalive timeout");O.level="client-timeout",this.emit("error",O),f.destroy()}return}zt(f)?(o.push(P),m.ping()):clearInterval(I)};function P(){_>0&&(E=0,clearInterval(I),zt(f)&&(I=setInterval(R,_)))}this._resetKA=P;const Q=(()=>{let O=!1;return()=>{if(!O&&(O=!0,X&&!l)){const j=cx("Connection lost before handshake","protocol",!0);this.emit("error",j)}}})(),z=(()=>{let O=!1;return()=>{O||(O=!0,X=!0,s&&s("Socket connected"),this.emit("connect"),sx.then(()=>{m.start(),f.on("data",j=>{try{m.parse(j,0,j.length)}catch(C){this.emit("error",C);try{zt(f)&&f.end()}catch{}}}),f.stderr&&typeof f.stderr.resume=="function"&&f.stderr.resume(),f.resume()}).catch(j=>{this.emit("error",j);try{zt(f)&&f.end()}catch{}}))}})();let X=!1;f.on("connect",z).on("timeout",()=>{this.emit("timeout")}).on("error",O=>{s&&s(`Socket error: ${O.message}`),clearTimeout(this._readyTimeout),O.level="client-socket",this.emit("error",O)}).on("end",()=>{s&&s("Socket ended"),Q(),m.cleanup(),clearTimeout(this._readyTimeout),clearInterval(I),this.emit("end")}).on("close",()=>{s&&s("Socket closed"),Q(),m.cleanup(),clearTimeout(this._readyTimeout),clearInterval(I),this.emit("close");const O=o;o=this._callbacks=[];const j=new Error("No response from server");for(let C=0;C<O.length;++C)O[C](j);this._chanMgr.cleanup(j)});let M,F=null,K=null;const se=["none"];this.config.password!==void 0&&se.push("password"),a!==void 0&&se.push("publickey"),this._agent!==void 0&&se.push("agent"),this.config.tryKeyboard&&se.push("keyboard-interactive"),a!==void 0&&this.config.localHostname!==void 0&&this.config.localUsername!==void 0&&se.push("hostbased"),Array.isArray(i)?i=gh(i):typeof i!="function"&&(i=gh(se));let J=!1;const ue=O=>{if(!J){if(J=!0,O===!1){const j=new Error("All configured authentication methods failed");j.level="client-authentication",this.emit("error",j),this.end();return}if(typeof O=="string"){const j=O;if(se.indexOf(j)===-1)return Y(`Authentication method not allowed: ${j}`);const C=this.config.username;switch(j){case"password":O={type:j,username:C,password:this.config.password};break;case"publickey":O={type:j,username:C,key:a};break;case"hostbased":O={type:j,username:C,key:a,localHostname:this.config.localHostname,localUsername:this.config.localUsername};break;case"agent":O={type:j,username:C,agentCtx:new ah(this._agent)};break;case"keyboard-interactive":O={type:j,username:C,prompt:(...v)=>this.emit("keyboard-interactive",...v)};break;case"none":O={type:j,username:C};break;default:return Y(`Skipping unsupported authentication method: ${O}`)}}else{if(typeof O!="object"||O===null)return Y(`Skipping invalid authentication attempt: ${O}`);{const j=O.username;if(typeof j!="string")return Y(`Skipping invalid authentication attempt: ${O}`);const C=O.type;switch(C){case"password":{const{password:v}=O;if(typeof v!="string"&&!Buffer.isBuffer(v))return Y("Skipping invalid password auth attempt");O={type:C,username:j,password:v};break}case"publickey":{const v=Ro(O.key,O.passphrase);if(v instanceof Error)return Y("Skipping invalid key auth attempt");if(!v.isPrivateKey())return Y("Skipping non-private key");O={type:C,username:j,key:v};break}case"hostbased":{const{localHostname:v,localUsername:B}=O,x=Ro(O.key,O.passphrase);if(x instanceof Error||typeof v!="string"||typeof B!="string")return Y("Skipping invalid hostbased auth attempt");if(!x.isPrivateKey())return Y("Skipping non-private key");O={type:C,username:j,key:x,localHostname:v,localUsername:B};break}case"agent":{let v=O.agent;if(typeof v=="string"&&v.length)v=ch(v);else if(!fh(v))return Y(`Skipping invalid agent: ${O.agent}`);O={type:C,username:j,agentCtx:new ah(v)};break}case"keyboard-interactive":{const{prompt:v}=O;if(typeof v!="function")return Y("Skipping invalid keyboard-interactive auth attempt");O={type:C,username:j,prompt:v};break}case"none":O={type:C,username:j};break;default:return Y(`Skipping unsupported authentication method: ${O}`)}}}M=O;try{const j=M.username;switch(M.type){case"password":m.authPassword(j,M.password);break;case"publickey":{let C;if(M.keyAlgos=oc(this,M.key,d),M.keyAlgos)if(M.keyAlgos.length)C=M.keyAlgos[0][0];else return Y("Skipping key authentication (no mutual hash algorithm)");m.authPK(j,M.key,C);break}case"hostbased":{let C,v;if(M.keyAlgos=oc(this,M.key,d),M.keyAlgos)if(M.keyAlgos.length)[C,v]=M.keyAlgos[0];else return Y("Skipping hostbased authentication (no mutual hash algorithm)");m.authHostbased(j,M.key,M.localHostname,M.localUsername,C,(B,x)=>{const g=M.key.sign(B,v);if(g instanceof Error)return g.message=`Error while signing with key: ${g.message}`,g.level="client-authentication",this.emit("error",g),Z();x(g)});break}case"agent":M.agentCtx.init(C=>{if(C)return C.level="agent",this.emit("error",C),Z();ie()});break;case"keyboard-interactive":m.authKeyboard(j);break;case"none":m.authNone(j);break}}finally{J=!1}}};function Y(O){s&&s(O),process.nextTick(Z)}function Z(){J=!1;const O=i(K,F,ue);J||O===void 0||ue(O)}const ie=()=>{if(M.type==="agent"){const O=M.agentCtx.nextKey();if(O===!1)s&&s("Agent: No more keys left to try"),s&&s("Client: agent auth failed"),Z();else{const j=M.agentCtx.pos();let C;if(M.keyAlgos=oc(this,O,d),M.keyAlgos)if(M.keyAlgos.length)C=M.keyAlgos[0][0];else{s&&s(`Agent: Skipping key #${j+1} (no mutual hash algorithm)`),ie();return}s&&s(`Agent: Trying key #${j+1}`),m.authPK(M.username,O,C)}}},oe=()=>{this.config.readyTimeout>0&&(this._readyTimeout=setTimeout(()=>{const O=new Error("Timed out while waiting for handshake");O.level="client-timeout",this.emit("error",O),f.destroy()},this.config.readyTimeout))};if(e.sock)oe(),typeof f.connecting=="boolean"&&f.connecting||z();else{let O=this.config.host;const j=this.config.forceIPv4,C=this.config.forceIPv6;s&&s(`Client: Trying ${O} on port ${this.config.port} ...`);const v=()=>{oe(),f.connect({host:O,port:this.config.port,localAddress:this.config.localAddress,localPort:this.config.localPort}),f.setMaxListeners(0),f.setTimeout(typeof e.timeout=="number"?e.timeout:0)};!j&&!C||j&&C?v():YC(O,j?4:6,(B,x,g)=>{if(B){const S=j?"IPv4":"IPv6",U=new Error(`Error while looking up ${S} address for '${O}': ${B}`);clearTimeout(this._readyTimeout),U.level="client-dns",this.emit("error",U),this.emit("close");return}O=x,v()})}return this}end(){return this._sock&&zt(this._sock)&&(this._protocol.disconnect(sh.BY_APPLICATION),this._sock.end()),this}destroy(){return this._sock&&zt(this._sock)&&this._sock.destroy(),this}exec(e,r,n){if(!this._sock||!zt(this._sock))throw new Error("Not connected");typeof r=="function"&&(n=r,r={});const i={allowHalfOpen:r.allowHalfOpen!==!1};return yi(this,"session",i,(s,o)=>{if(s){n(s);return}const a=[];function c(f){if(f){o.close(),n(f);return}a.length&&a.shift()()}(this.config.allowAgentFwd===!0||r&&r.agentForward===!0&&this._agent!==void 0)&&a.push(()=>ph(o,c)),typeof r=="object"&&r!==null&&(typeof r.env=="object"&&r.env!==null&&ic(o,r.env),(typeof r.pty=="object"&&r.pty!==null||r.pty===!0)&&a.push(()=>hh(o,r.pty,c)),(typeof r.x11=="object"&&r.x11!==null||r.x11==="number"||r.x11===!0)&&a.push(()=>dh(o,r.x11,c))),a.push(()=>mx(o,e,r,n)),a.shift()()}),this}shell(e,r,n){if(!this._sock||!zt(this._sock))throw new Error("Not connected");return typeof e=="function"?(n=e,e=r=void 0):typeof r=="function"&&(n=r,r=void 0),e&&(e.x11!==void 0||e.env!==void 0)&&(r=e,e=void 0),yi(this,"session",(i,s)=>{if(i){n(i);return}const o=[];function a(c){if(c){s.close(),n(c);return}o.length&&o.shift()()}(this.config.allowAgentFwd===!0||r&&r.agentForward===!0&&this._agent!==void 0)&&o.push(()=>ph(s,a)),e!==!1&&o.push(()=>hh(s,e,a)),typeof r=="object"&&r!==null&&(typeof r.env=="object"&&r.env!==null&&ic(s,r.env),(typeof r.x11=="object"&&r.x11!==null||r.x11==="number"||r.x11===!0)&&o.push(()=>dh(s,r.x11,a))),o.push(()=>gx(s,n)),o.shift()()}),this}subsys(e,r){if(!this._sock||!zt(this._sock))throw new Error("Not connected");return yi(this,"session",(n,i)=>{if(n){r(n);return}sc(i,e,(s,o)=>{if(s){r(s);return}r(void 0,o)})}),this}forwardIn(e,r,n){if(!this._sock||!zt(this._sock))throw new Error("Not connected");const i=typeof n=="function";return i&&this._callbacks.push((s,o)=>{if(s){n(s!==!0?s:new Error(`Unable to bind to ${e}:${r}`));return}let a=r;r===0&&o&&o.length>=4&&(a=fx(o,0),this._protocol._compatFlags&J0.DYN_RPORT_BUG||(r=a)),this._forwarding[`${e}:${r}`]=a,n(void 0,a)}),this._protocol.tcpipForward(e,r,i),this}unforwardIn(e,r,n){if(!this._sock||!zt(this._sock))throw new Error("Not connected");const i=typeof n=="function";return i&&this._callbacks.push(s=>{if(s){n(s!==!0?s:new Error(`Unable to unbind from ${e}:${r}`));return}delete this._forwarding[`${e}:${r}`],n()}),this._protocol.cancelTcpipForward(e,r,i),this}forwardOut(e,r,n,i,s){if(!this._sock||!zt(this._sock))throw new Error("Not connected");const o={srcIP:e,srcPort:r,dstIP:n,dstPort:i};return typeof s!="function"&&(s=Fc),yi(this,"direct-tcpip",o,s),this}openssh_noMoreSessions(e){if(!this._sock||!zt(this._sock))throw new Error("Not connected");const r=typeof e=="function";return!this.config.strictVendor||this.config.strictVendor&&hs.test(this._remoteVer)?(r&&this._callbacks.push(n=>{if(n){e(n!==!0?n:new Error("Unable to disable future sessions"));return}e()}),this._protocol.openssh_noMoreSessions(r),this):r?(process.nextTick(e,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_forwardInStreamLocal(e,r){if(!this._sock||!zt(this._sock))throw new Error("Not connected");const n=typeof r=="function";return!this.config.strictVendor||this.config.strictVendor&&hs.test(this._remoteVer)?(n&&this._callbacks.push(i=>{if(i){r(i!==!0?i:new Error(`Unable to bind to ${e}`));return}this._forwardingUnix[e]=!0,r()}),this._protocol.openssh_streamLocalForward(e,n),this):n?(process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_unforwardInStreamLocal(e,r){if(!this._sock||!zt(this._sock))throw new Error("Not connected");const n=typeof r=="function";return!this.config.strictVendor||this.config.strictVendor&&hs.test(this._remoteVer)?(n&&this._callbacks.push(i=>{if(i){r(i!==!0?i:new Error(`Unable to unbind from ${e}`));return}delete this._forwardingUnix[e],r()}),this._protocol.openssh_cancelStreamLocalForward(e,n),this):n?(process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this):this}openssh_forwardOutStreamLocal(e,r){if(!this._sock||!zt(this._sock))throw new Error("Not connected");return typeof r!="function"&&(r=Fc),!this.config.strictVendor||this.config.strictVendor&&hs.test(this._remoteVer)?(yi(this,"direct-streamlocal@openssh.com",{socketPath:e},r),this):(process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version")),this)}sftp(e,r){if(!this._sock||!zt(this._sock))throw new Error("Not connected");return typeof e=="function"&&(r=e,e=void 0),yi(this,"sftp",(n,i)=>{if(n){r(n);return}const s=(o,a)=>{if(o){r(o);return}function c(){i.removeListener("ready",f),i.removeListener("error",u),i.removeListener("exit",l),i.removeListener("close",l)}function f(){c(),r(void 0,i)}function u(h){c(),r(h)}function l(h,d){c();let m;typeof h=="number"?m=`Received exit code ${h} while establishing SFTP session`:d!==void 0?m=`Received signal ${d} while establishing SFTP session`:m="Received unexpected SFTP session termination";const _=new Error(m);_.code=h,_.signal=d,r(_)}i.on("ready",f).on("error",u).on("exit",l).on("close",l),i._init()};typeof e=="object"&&e!==null?ic(i,e,o=>{if(o){r(o);return}sc(i,"sftp",s)}):sc(i,"sftp",s)}),this}setNoDelay(e){return this._sock&&typeof this._sock.setNoDelay=="function"&&this._sock.setNoDelay(e),this}};function yi(t,e,r,n){const i=Go,s=Vo;typeof r=="function"&&(n=r,r={});const o=(c,f)=>{n(c,f)};o.type=e;const a=t._chanMgr.add(o);if(a===-1){n(new Error("No free channels available"));return}switch(e){case"session":case"sftp":t._protocol.session(a,i,s);break;case"direct-tcpip":t._protocol.directTcpip(a,i,s,r);break;case"direct-streamlocal@openssh.com":t._protocol.openssh_directStreamLocal(a,i,s,r);break;default:throw new Error(`Unsupported channel type: ${e}`)}}function dh(t,e,r){const n={single:!1,protocol:"MIT-MAGIC-COOKIE-1",cookie:void 0,screen:0};typeof e=="function"?r=e:typeof e=="object"&&e!==null&&(typeof e.single=="boolean"&&(n.single=e.single),typeof e.screen=="number"&&(n.screen=e.screen),typeof e.protocol=="string"&&(n.protocol=e.protocol),typeof e.cookie=="string"?n.cookie=e.cookie:Buffer.isBuffer(e.cookie)&&(n.cookie=e.cookie.hexSlice(0,e.cookie.length))),n.cookie===void 0&&(n.cookie=Ex());const i=typeof r=="function";if(t.outgoing.state!=="open"){i&&r(new Error("Channel is not open"));return}i&&t._callbacks.push(s=>{if(s){r(s!==!0?s:new Error("Unable to request X11"));return}t._hasX11=!0,++t._client._acceptX11,t.once("close",()=>{t._client._acceptX11&&--t._client._acceptX11}),r()}),t._client._protocol.x11Forward(t.outgoing.id,n,i)}function hh(t,e,r){let n=24,i=80,s=640,o=480,a="vt100",c=null;typeof e=="function"?r=e:typeof e=="object"&&e!==null&&(typeof e.rows=="number"&&(n=e.rows),typeof e.cols=="number"&&(i=e.cols),typeof e.width=="number"&&(s=e.width),typeof e.height=="number"&&(o=e.height),typeof e.term=="string"&&(a=e.term),typeof e.modes=="object"&&(c=e.modes));const f=typeof r=="function";if(t.outgoing.state!=="open"){f&&r(new Error("Channel is not open"));return}f&&t._callbacks.push(u=>{if(u){r(u!==!0?u:new Error("Unable to request a pseudo-terminal"));return}r()}),t._client._protocol.pty(t.outgoing.id,n,i,o,s,a,c,f)}function ph(t,e){const r=typeof e=="function";if(t.outgoing.state!=="open"){r&&e(new Error("Channel is not open"));return}if(t._client._agentFwdEnabled){r&&e(!1);return}t._client._agentFwdEnabled=!0,t._callbacks.push(n=>{if(n){t._client._agentFwdEnabled=!1,r&&e(n!==!0?n:new Error("Unable to request agent forwarding"));return}r&&e()}),t._client._protocol.openssh_agentForward(t.outgoing.id,!0)}function gx(t,e){if(t.outgoing.state!=="open"){e(new Error("Channel is not open"));return}t._callbacks.push(r=>{if(r){e(r!==!0?r:new Error("Unable to open shell"));return}t.subtype="shell",e(void 0,t)}),t._client._protocol.shell(t.outgoing.id,!0)}function mx(t,e,r,n){if(t.outgoing.state!=="open"){n(new Error("Channel is not open"));return}t._callbacks.push(i=>{if(i){n(i!==!0?i:new Error("Unable to exec"));return}t.subtype="exec",t.allowHalfOpen=r.allowHalfOpen!==!1,n(void 0,t)}),t._client._protocol.exec(t.outgoing.id,e,!0)}function ic(t,e,r){const n=typeof r=="function";if(t.outgoing.state!=="open"){n&&r(new Error("Channel is not open"));return}n&&t._callbacks.push(s=>{if(s){r(s!==!0?s:new Error("Unable to set environment"));return}r()});const i=Object.keys(e||{});for(let s=0;s<i.length;++s){const o=i[s],a=e[o];t._client._protocol.env(t.outgoing.id,o,a,n)}}function sc(t,e,r){if(t.outgoing.state!=="open"){r(new Error("Channel is not open"));return}t._callbacks.push(n=>{if(n){r(n!==!0?n:new Error(`Unable to start subsystem: ${e}`));return}t.subtype="subsystem",r(void 0,t)}),t._client._protocol.subsystem(t.outgoing.id,e,!0)}function _x(t,e){let r=-1,n;const i=()=>{const c={type:e.type,incoming:{id:r,window:Go,packetSize:Vo,state:"open"},outgoing:{id:e.sender,window:e.window,packetSize:e.packetSize,state:"open"}},f=new eg(t,c);return t._chanMgr.update(r,f),t._protocol.channelOpenConfirm(e.sender,r,Go,Vo),f},s=()=>{n===void 0&&(r===-1?n=is.RESOURCE_SHORTAGE:n=is.CONNECT_FAILED),r!==-1&&t._chanMgr.remove(r),t._protocol.channelOpenFail(e.sender,n,"")},o=()=>(r=t._chanMgr.add(),r===-1&&(n=is.RESOURCE_SHORTAGE,t.config.debug&&t.config.debug("Client: Automatic rejection of incoming channel open: no channels available")),r!==-1),a=e.data;switch(e.type){case"forwarded-tcpip":{const c=t._forwarding[`${a.destIP}:${a.destPort}`];if(c!==void 0&&o()){a.destPort===0&&(a.destPort=c),t.emit("tcp connection",a,i,s);return}break}case"forwarded-streamlocal@openssh.com":if(t._forwardingUnix[a.socketPath]!==void 0&&o()){t.emit("unix connection",a,i,s);return}break;case"auth-agent@openssh.com":if(t._agentFwdEnabled&&typeof t._agent.getStream=="function"&&o()){t._agent.getStream((c,f)=>{if(c)return s();const u=i();u.pipe(f).pipe(u)});return}break;case"x11":if(t._acceptX11!==0&&o()){t.emit("x11",a,i,s);return}break;default:n=is.UNKNOWN_CHANNEL_TYPE,t.config.debug&&t.config.debug(`Client: Automatic rejection of unsupported incoming channel open type: ${e.type}`)}n===void 0&&(n=is.ADMINISTRATIVELY_PROHIBITED,t.config.debug&&t.config.debug("Client: Automatic rejection of unexpected incoming channel open for: "+e.type)),s()}const Ex=(()=>{const t=Buffer.allocUnsafe(16);return()=>(GC(t,0,16),t.hexSlice(0,16))})();function gh(t){if(!Array.isArray(t))throw new Error("authList must be an array");let e=0;return(r,n,i)=>e===t.length?!1:t[e++]}function yx(t,e,r){if(!t._sock||!zt(t._sock))return;if(typeof r!="function"&&(r=Fc),!Array.isArray(e))throw new TypeError("Invalid keys argument type");const n=[];for(const i of e){const s=Ro(i);if(s instanceof Error)throw s;n.push(s)}if(!t.config.strictVendor||t.config.strictVendor&&hs.test(t._remoteVer)){t._callbacks.push((i,s)=>{if(i){r(i!==!0?i:new Error("Server failed to prove supplied keys"));return}const o=[];let a=0;for(po.init(s,0);po.avail()&&a!==n.length;){const c=n[a++],f=c.getPublicSSH(),u=po.readString();go.init(u,0);const l=go.readString(!0);let h=go.readString(),d;if(l!==c.type)if(c.type==="ssh-rsa")switch(l){case"rsa-sha2-256":d="sha256";break;case"rsa-sha2-512":d="sha512";break;default:continue}else continue;const m=t._protocol._kex.sessionID,_=Buffer.allocUnsafe(37+m.length+4+f.length);let y=0;nc(_,29,y),_.utf8Write("hostkeys-prove-00@openssh.com",y+=4,29),nc(_,m.length,y+=29),oh(m,_,0,m.length,y+=4),nc(_,f.length,y+=m.length),oh(f,_,0,f.length,y+=4),(h=ux(h,l))&&c.verify(_,h,d)===!0&&o.push(c)}go.clear(),po.clear(),r(null,o)}),t._protocol.openssh_hostKeysProve(n);return}process.nextTick(r,new Error("strictVendor enabled and server is not OpenSSH or compatible version"))}function oc(t,e,r){switch(e.type){case"ssh-rsa":if(t._protocol._compatFlags&J0.IMPLY_RSA_SHA2_SIGALGS&&(Array.isArray(r)?r=["rsa-sha2-256","rsa-sha2-512",...r]:r=["rsa-sha2-256","rsa-sha2-512"]),Array.isArray(r)){if(r.indexOf("rsa-sha2-256")!==-1)return[["rsa-sha2-256","sha256"]];if(r.indexOf("rsa-sha2-512")!==-1)return[["rsa-sha2-512","sha512"]];if(r.indexOf("ssh-rsa")===-1)return[]}return[["ssh-rsa","sha1"]]}}var tg=px;(function(t){const{Agent:e}=pg,{Agent:r}=gg,{connect:n}=mg;let i;for(const a of[e,r]){class c extends a{constructor(u,l){super(l),this._connectCfg=u,this._defaultSrcIP=l&&l.srcIP||"localhost"}createConnection(u,l){const h=u&&u.localAddress||this._defaultSrcIP,d=u&&u.localPort||0,m=u.host,_=u.port;i===void 0&&(i=tg);const y=new i;let E=!1;y.on("ready",()=>{y.forwardOut(h,d,m,_,(I,R)=>{if(E=!0,I)return y.end(),l(I);R.once("close",()=>y.end()),l(null,o(R,a,u))})}).on("error",l).on("close",()=>{E||l(new Error("Unexpected connection close"))}).connect(this._connectCfg)}}t[a===e?"SSHTTPAgent":"SSHTTPSAgent"]=c}function s(){}function o(a,c,f){if(c===e)return a.setKeepAlive=s,a.setNoDelay=s,a.setTimeout=s,a.ref=s,a.unref=s,a.destroySoon=a.destroy,a;f.socket=a;const u=n(f),l=(()=>{let h=!1;return()=>{h||(h=!0,a.isPaused()&&a.resume())}})();return u.on("end",l).on("close",l),u}})(v0);var rg={exports:{}};const{Server:Ax}=Hc,Hs=Xo,{listenerCount:pr}=Hs,{CHANNEL_OPEN_FAILURE:Ai,DEFAULT_CIPHER:bx,DEFAULT_COMPRESSION:wx,DEFAULT_KEX:Sx,DEFAULT_MAC:Ix,DEFAULT_SERVER_HOST_KEY:vx,DISCONNECT_REASON:bi,DISCONNECT_REASON_BY_VALUE:$x,SUPPORTED_CIPHER:Cx,SUPPORTED_COMPRESSION:xx,SUPPORTED_KEX:Rx,SUPPORTED_MAC:Nx,SUPPORTED_SERVER_HOST_KEY:kx}=Wn(),{init:Px}=hi(),{KexInit:Tx}=zu(),{parseKey:mh}=pi,Bx=L0,{SFTP:Ox}=Sa,{writeUInt32BE:Lx}=dn(),{Channel:wi,MAX_WINDOW:Bn,PACKET_SIZE:On,windowAdjust:Dx,WINDOW_THRESHOLD:Ux}=V0,{ChannelManager:Mx,generateAlgorithmList:os,isWritable:mo,onChannelOpenFailure:Fx,onCHANNEL_CLOSE:Hx}=X0,jx=10;class Hi extends Hs{constructor(e,r,n,i,s){super(),this.username=this.user=r,this.service=n,this.method=i,this._initialResponse=!1,this._finalResponse=!1,this._multistep=!1,this._cbfinal=(o,a,c)=>{this._finalResponse||(this._finalResponse=!0,s(this,o,a,c))},this._protocol=e}accept(){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!0)}reject(e,r){this._cleanup&&this._cleanup(),this._initialResponse=!0,this._cbfinal(!1,e,r)}}class _h extends Hi{constructor(e,r,n,i,s,o){super(e,r,n,i,o),this._multistep=!0,this._cb=void 0,this._onInfoResponse=a=>{const c=this._cb;c&&(this._cb=void 0,c(a))},this.submethods=s,this.on("abort",()=>{this._cb&&this._cb(new Error("Authentication request aborted"))})}prompt(e,r,n,i){Array.isArray(e)||(e=[e]),typeof r=="function"?(i=r,r=n=void 0):typeof n=="function"?(i=n,n=void 0):typeof i!="function"&&(i=void 0);for(let s=0;s<e.length;++s)typeof e[s]=="string"&&(e[s]={prompt:e[s],echo:!0});this._cb=i,this._initialResponse=!0,this._protocol.authInfoReq(r,n,e)}}class Qx extends Hi{constructor(e,r,n,i,s,o){super(e,r,n,i,o),this.key={algo:s.keyAlgo,data:s.key},this.hashAlgo=s.hashAlgo,this.signature=s.signature,this.blob=s.blob}accept(){this.signature?Hi.prototype.accept.call(this):(this._initialResponse=!0,this._protocol.authPKOK(this.key.algo,this.key.data))}}class qx extends Hi{constructor(e,r,n,i,s,o){super(e,r,n,i,o),this.key={algo:s.keyAlgo,data:s.key},this.hashAlgo=s.hashAlgo,this.signature=s.signature,this.blob=s.blob,this.localHostname=s.localHostname,this.localUsername=s.localUsername}}class Eh extends Hi{constructor(e,r,n,i,s,o){super(e,r,n,i,o),this.password=s,this._changeCb=void 0}requestChange(e,r){if(this._changeCb)throw new Error("Change request already in progress");if(typeof e!="string")throw new Error("prompt argument must be a string");if(typeof r!="function")throw new Error("Callback argument must be a function");this._changeCb=r,this._protocol.authPasswdChg(e)}}class Tn extends Hs{constructor(e,r,n){super(),this.type="session",this.subtype=void 0,this.server=!0,this._ending=!1,this._channel=void 0,this._chanInfo={type:"session",incoming:{id:n,window:Bn,packetSize:On,state:"open"},outgoing:{id:r.sender,window:r.window,packetSize:r.packetSize,state:"open"}}}}class Vr extends Hs{constructor(e,r){if(super(),typeof e!="object"||e===null)throw new Error("Missing configuration object");const n=Object.create(null),i=[],s=e.hostKeys;if(!Array.isArray(s))throw new Error("hostKeys must be an array");const o=typeof e.algorithms=="object"&&e.algorithms!==null?e.algorithms:{},a=os(o.serverHostKey,vx,kx);for(let h=0;h<s.length;++h){let d;if(Buffer.isBuffer(s[h])||typeof s[h]=="string"?d=mh(s[h]):d=mh(s[h].key,s[h].passphrase),d instanceof Error)throw new Error(`Cannot parse privateKey: ${d.message}`);if(Array.isArray(d)&&(d=d[0]),d.getPrivatePEM()===null)throw new Error("privateKey value contains an invalid private key");if(!i.includes(d.type))if(d.type==="ssh-rsa"){let m=a.indexOf("ssh-rsa");const _=a.indexOf("rsa-sha2-256"),y=a.indexOf("rsa-sha2-512");m===-1&&(m=1/0),[m,_,y].sort(Kx).forEach(E=>{if(E===-1)return;let I;switch(E){case m:I="ssh-rsa";break;case _:I="rsa-sha2-256";break;case y:I="rsa-sha2-512";break;default:return}n[I]=d,i.push(I)})}else n[d.type]=d,i.push(d.type)}const c={kex:os(o.kex,Sx,Rx).concat(["kex-strict-s-v00@openssh.com"]),serverHostKey:i,cs:{cipher:os(o.cipher,bx,Cx),mac:os(o.hmac,Ix,Nx),compress:os(o.compress,wx,xx),lang:[]},sc:void 0};c.sc=c.cs,typeof r=="function"&&this.on("connection",r);const f=typeof e.debug=="function"?e.debug:void 0,u=e.ident?Buffer.from(e.ident):void 0,l=new Tx(c);this._srv=new Ax(h=>{if(this._connections>=this.maxConnections){h.destroy();return}++this._connections,h.once("close",()=>{--this._connections});let d;if(f){const m=`[${process.hrtime().join(".")}] `;d=_=>{f(`${m}${_}`)}}new ng(h,n,u,l,d,this,e)}).on("error",h=>{this.emit("error",h)}).on("listening",()=>{this.emit("listening")}).on("close",()=>{this.emit("close")}),this._connections=0,this.maxConnections=1/0}injectSocket(e){this._srv.emit("connection",e)}listen(...e){return this._srv.listen(...e),this}address(){return this._srv.address()}getConnections(e){return this._srv.getConnections(e),this}close(e){return this._srv.close(e),this}ref(){return this._srv.ref(),this}unref(){return this._srv.unref(),this}}Vr.KEEPALIVE_CLIENT_INTERVAL=15e3;Vr.KEEPALIVE_CLIENT_COUNT_MAX=3;class ng extends Hs{constructor(e,r,n,i,s,o,a){super();let c=0,f=!1,u=[],l,h,d;const m=[];this._sock=e,this._chanMgr=new Mx(this),this._debug=s,this.noMoreSessions=!1,this.authenticated=!1;function _(X){}this.on("error",_);const y=s?(X,M,F)=>{s(`Debug output from client: ${JSON.stringify(F)}`)}:void 0,E=typeof a.keepaliveInterval=="number"&&isFinite(a.keepaliveInterval)&&a.keepaliveInterval>0?a.keepaliveInterval:typeof Vr.KEEPALIVE_CLIENT_INTERVAL=="number"&&isFinite(Vr.KEEPALIVE_CLIENT_INTERVAL)&&Vr.KEEPALIVE_CLIENT_INTERVAL>0?Vr.KEEPALIVE_CLIENT_INTERVAL:-1,I=typeof a.keepaliveCountMax=="number"&&isFinite(a.keepaliveCountMax)&&a.keepaliveCountMax>=0?a.keepaliveCountMax:typeof Vr.KEEPALIVE_CLIENT_COUNT_MAX=="number"&&isFinite(Vr.KEEPALIVE_CLIENT_COUNT_MAX)&&Vr.KEEPALIVE_CLIENT_COUNT_MAX>=0?Vr.KEEPALIVE_CLIENT_COUNT_MAX:-1;let R=0;E!==-1&&I!==-1&&(this.once("ready",()=>{const X=()=>{clearInterval(h)};this.on("close",X).on("end",X),h=setInterval(()=>{if(++R>I){clearInterval(h);const M=new Error("Keepalive timeout");M.level="client-timeout",this.emit("error",M),this.end()}else P.ping()},E)}),d=()=>{h&&h.refresh(),R=0});const P=this._protocol=new Bx({server:!0,hostKeys:r,ident:n,offer:i,onPacket:d,greeting:a.greeting,banner:a.banner,onWrite:X=>{mo(e)&&e.write(X)},onError:X=>{P._destruct||e.removeAllListeners("data"),this.emit("error",X);try{e.end()}catch{}},onHeader:X=>{this.removeListener("error",_);const M={ip:e.remoteAddress,family:e.remoteFamily,port:e.remotePort,header:X};if(!o.emit("connection",this,M)){P.disconnect(bi.BY_APPLICATION),e.end();return}X.greeting&&this.emit("greeting",X.greeting)},onHandshakeComplete:X=>{++c>1&&this.emit("rekey"),this.emit("handshake",X)},debug:s,messageHandlers:{DEBUG:y,DISCONNECT:(X,M,F)=>{if(M!==bi.BY_APPLICATION){F||(F=$x[M],F===void 0&&(F=`Unexpected disconnection reason: ${M}`));const K=new Error(F);K.code=M,this.emit("error",K)}e.end()},CHANNEL_OPEN:(X,M)=>{if(M.type==="session"&&this.noMoreSessions||!this.authenticated){const ie=Ai.ADMINISTRATIVELY_PROHIBITED;return P.channelOpenFail(M.sender,ie)}let F=-1,K,se=!1,J;const ue=()=>{se||(se=!0,K===void 0&&(F===-1?K=Ai.RESOURCE_SHORTAGE:K=Ai.CONNECT_FAILED),F!==-1&&this._chanMgr.remove(F),P.channelOpenFail(M.sender,K,""))},Y=()=>(F=this._chanMgr.add(),F===-1&&(K=Ai.RESOURCE_SHORTAGE,s&&s("Automatic rejection of incoming channel open: no channels available")),F!==-1),Z=M.data;switch(M.type){case"session":if(pr(this,"session")&&Y()){J=()=>{if(se)return;se=!0;const ie=new Tn(this,M,F);return this._chanMgr.update(F,ie),P.channelOpenConfirm(M.sender,F,Bn,On),ie},this.emit("session",J,ue);return}break;case"direct-tcpip":if(pr(this,"tcpip")&&Y()){J=()=>{if(se)return;se=!0;const ie={type:void 0,incoming:{id:F,window:Bn,packetSize:On,state:"open"},outgoing:{id:M.sender,window:M.window,packetSize:M.packetSize,state:"open"}},oe=new wi(this,ie,{server:!0});return this._chanMgr.update(F,oe),P.channelOpenConfirm(M.sender,F,Bn,On),oe},this.emit("tcpip",J,ue,Z);return}break;case"direct-streamlocal@openssh.com":if(pr(this,"openssh.streamlocal")&&Y()){J=()=>{if(se)return;se=!0;const ie={type:void 0,incoming:{id:F,window:Bn,packetSize:On,state:"open"},outgoing:{id:M.sender,window:M.window,packetSize:M.packetSize,state:"open"}},oe=new wi(this,ie,{server:!0});return this._chanMgr.update(F,oe),P.channelOpenConfirm(M.sender,F,Bn,On),oe},this.emit("openssh.streamlocal",J,ue,Z);return}break;default:K=Ai.UNKNOWN_CHANNEL_TYPE,s&&s(`Automatic rejection of unsupported incoming channel open type: ${M.type}`)}K===void 0&&(K=Ai.ADMINISTRATIVELY_PROHIBITED,s&&s(`Automatic rejection of unexpected incoming channel open for: ${M.type}`)),ue()},CHANNEL_OPEN_CONFIRMATION:(X,M)=>{const F=this._chanMgr.get(M.recipient);if(typeof F!="function")return;const K={type:F.type,incoming:{id:M.recipient,window:Bn,packetSize:On,state:"open"},outgoing:{id:M.sender,window:M.window,packetSize:M.packetSize,state:"open"}},se=new wi(this,K,{server:!0});this._chanMgr.update(M.recipient,se),F(void 0,se)},CHANNEL_OPEN_FAILURE:(X,M,F,K)=>{const se=this._chanMgr.get(M);if(typeof se!="function")return;Fx(this,M,{reason:F,description:K},se)},CHANNEL_DATA:(X,M,F)=>{let K=this._chanMgr.get(M);if(!(typeof K!="object"||K===null)&&!(K.constructor===Tn&&(K=K._channel,!K))&&K.incoming.window!==0){if(K.incoming.window-=F.length,K.push(F)===!1){K._waitChanDrain=!0;return}K.incoming.window<=Ux&&Dx(K)}},CHANNEL_EXTENDED_DATA:(X,M,F,K)=>{},CHANNEL_WINDOW_ADJUST:(X,M,F)=>{let K=this._chanMgr.get(M);typeof K!="object"||K===null||K.constructor===Tn&&(K=K._channel,!K)||(K.outgoing.window+=F,K._waitWindow&&(K._waitWindow=!1,K._chunk?K._write(K._chunk,null,K._chunkcb):K._chunkcb?K._chunkcb():K._chunkErr?K.stderr._write(K._chunkErr,null,K._chunkcbErr):K._chunkcbErr&&K._chunkcbErr()))},CHANNEL_SUCCESS:(X,M)=>{let F=this._chanMgr.get(M);typeof F!="object"||F===null||F.constructor===Tn&&(F=F._channel,!F)||F._callbacks.length&&F._callbacks.shift()(!1)},CHANNEL_FAILURE:(X,M)=>{let F=this._chanMgr.get(M);typeof F!="object"||F===null||F.constructor===Tn&&(F=F._channel,!F)||F._callbacks.length&&F._callbacks.shift()(!0)},CHANNEL_REQUEST:(X,M,F,K,se)=>{const J=this._chanMgr.get(M);if(typeof J!="object"||J===null)return;let ue=!1,Y,Z;if(J.constructor!==Tn){K&&P.channelFailure(J.outgoing.id);return}if(K&&(F!=="shell"&&F!=="exec"&&F!=="subsystem"&&(Y=()=>{ue||J._ending||J._channel||(ue=!0,P.channelSuccess(J._chanInfo.outgoing.id))}),Z=()=>{ue||J._ending||J._channel||(ue=!0,P.channelFailure(J._chanInfo.outgoing.id))}),J._ending){Z&&Z();return}switch(F){case"env":if(pr(J,"env")){J.emit("env",Y,Z,{key:se.name,val:se.value});return}break;case"pty-req":if(pr(J,"pty")){J.emit("pty",Y,Z,se);return}break;case"window-change":pr(J,"window-change")?J.emit("window-change",Y,Z,se):Z&&Z();break;case"x11-req":if(pr(J,"x11")){J.emit("x11",Y,Z,se);return}break;case"signal":if(pr(J,"signal")){J.emit("signal",Y,Z,{name:se});return}break;case"auth-agent-req@openssh.com":if(pr(J,"auth-agent")){J.emit("auth-agent",Y,Z);return}break;case"shell":if(pr(J,"shell")){Y=()=>{if(ue||J._ending||J._channel)return;ue=!0,K&&P.channelSuccess(J._chanInfo.outgoing.id);const ie=new wi(this,J._chanInfo,{server:!0});return ie.subtype=J.subtype=F,J._channel=ie,ie},J.emit("shell",Y,Z);return}break;case"exec":if(pr(J,"exec")){Y=()=>{if(ue||J._ending||J._channel)return;ue=!0,K&&P.channelSuccess(J._chanInfo.outgoing.id);const ie=new wi(this,J._chanInfo,{server:!0});return ie.subtype=J.subtype=F,J._channel=ie,ie},J.emit("exec",Y,Z,{command:se});return}break;case"subsystem":{let ie=se==="sftp";if(Y=()=>{if(ue||J._ending||J._channel)return;ue=!0,K&&P.channelSuccess(J._chanInfo.outgoing.id);let oe;return ie?oe=new Ox(this,J._chanInfo,{server:!0,debug:s}):(oe=new wi(this,J._chanInfo,{server:!0}),oe.subtype=J.subtype=`${F}:${se}`),J._channel=oe,oe},se==="sftp"){if(pr(J,"sftp")){J.emit("sftp",Y,Z);return}ie=!1}if(pr(J,"subsystem")){J.emit("subsystem",Y,Z,{name:se});return}break}}s&&s(`Automatic rejection of incoming channel request: ${F}`),Z&&Z()},CHANNEL_EOF:(X,M)=>{let F=this._chanMgr.get(M);typeof F!="object"||F===null||F.constructor===Tn&&(F._ending||(F._ending=!0,F.emit("eof"),F.emit("end")),F=F._channel,!F)||F.incoming.state==="open"&&(F.incoming.state="eof",F.readable&&F.push(null))},CHANNEL_CLOSE:(X,M)=>{let F=this._chanMgr.get(M);typeof F!="object"||F===null||F.constructor===Tn&&(F._ending=!0,F.emit("close"),F=F._channel,!F)||Hx(this,M,F)},SERVICE_REQUEST:(X,M)=>{if(c===0||f||this.authenticated||M!=="ssh-userauth"){P.disconnect(bi.SERVICE_NOT_AVAILABLE),e.end();return}f=!0,P.serviceAccept(M)},USERAUTH_REQUEST:(X,M,F,K,se)=>{if(c===0||this.authenticated||l&&(l.username!==M||l.service!==F)||K!=="password"&&K!=="publickey"&&K!=="hostbased"&&K!=="keyboard-interactive"&&K!=="none"||u.length===jx){P.disconnect(bi.PROTOCOL_ERROR),e.end();return}else if(F!=="ssh-connection"){P.disconnect(bi.SERVICE_NOT_AVAILABLE),e.end();return}let J;switch(K){case"keyboard-interactive":J=new _h(P,M,F,K,se,Q);break;case"publickey":J=new Qx(P,M,F,K,se,Q);break;case"hostbased":J=new qx(P,M,F,K,se,Q);break;case"password":if(l&&l instanceof Eh&&l._changeCb){const ue=l._changeCb;l._changeCb=void 0,ue(se.newPassword);return}J=new Eh(P,M,F,K,se,Q);break;case"none":J=new Hi(P,M,F,K,Q);break}if(l)if(l._initialResponse)l._multistep&&!l._finalResponse&&(l._cleanup&&l._cleanup(),l.emit("abort"));else return u.push(J);l=J,pr(this,"authentication")?this.emit("authentication",l):l.reject()},USERAUTH_INFO_RESPONSE:(X,M)=>{l&&l instanceof _h&&l._onInfoResponse(M)},GLOBAL_REQUEST:(X,M,F,K)=>{const se={type:null,buf:null};function J(ue,Y){se.type=ue,se.buf=Y,z()}if(F&&m.push(se),(M==="tcpip-forward"||M==="cancel-tcpip-forward"||M==="no-more-sessions@openssh.com"||M==="streamlocal-forward@openssh.com"||M==="cancel-streamlocal-forward@openssh.com")&&pr(this,"request")&&this.authenticated){let ue,Y;if(F){let Z=!1;ue=ie=>{if(Z)return;Z=!0;let oe;M==="tcpip-forward"&&K.bindPort===0&&typeof ie=="number"&&(oe=Buffer.allocUnsafe(4),Lx(oe,ie,0)),J("SUCCESS",oe)},Y=()=>{Z||(Z=!0,J("FAILURE"))}}if(M==="no-more-sessions@openssh.com"){this.noMoreSessions=!0,ue&&ue();return}this.emit("request",ue,Y,M,K)}else F&&J("FAILURE")}}});e.pause(),Px.then(()=>{P.start(),e.on("data",X=>{try{P.parse(X,0,X.length)}catch(M){this.emit("error",M);try{mo(e)&&e.end()}catch{}}}),e.resume()}).catch(X=>{this.emit("error",X);try{mo(e)&&e.end()}catch{}}),e.on("error",X=>{X.level="socket",this.emit("error",X)}).once("end",()=>{s&&s("Socket ended"),P.cleanup(),this.emit("end")}).once("close",()=>{s&&s("Socket closed"),P.cleanup(),this.emit("close");const X=new Error("No response from server");this._chanMgr.cleanup(X)});const Q=(X,M,F,K)=>{l===X&&!this.authenticated&&(M?(l=void 0,this.authenticated=!0,P.authSuccess(),u=[],this.emit("ready")):(P.authFailure(F,K),u.length&&(l=u.pop(),pr(this,"authentication")?this.emit("authentication",l):l.reject())))};function z(){for(;m.length>0&&m[0].type;){const X=m.shift();X.type==="SUCCESS"&&P.requestSuccess(X.buf),X.type==="FAILURE"&&P.requestFailure()}}}end(){return this._sock&&mo(this._sock)&&(this._protocol.disconnect(bi.BY_APPLICATION),this._sock.end()),this}x11(e,r,n){return ac(this,"x11",{originAddr:e,originPort:r},n),this}forwardOut(e,r,n,i,s){return ac(this,"forwarded-tcpip",{boundAddr:e,boundPort:r,remoteAddr:n,remotePort:i},s),this}openssh_forwardOutStreamLocal(e,r){return ac(this,"forwarded-streamlocal@openssh.com",{socketPath:e},r),this}rekey(e){let r;try{this._protocol.rekey()}catch(n){r=n}typeof e=="function"&&(r?process.nextTick(e,r):this.once("rekey",e))}setNoDelay(e){return this._sock&&typeof this._sock.setNoDelay=="function"&&this._sock.setNoDelay(e),this}}function ac(t,e,r,n){const i=Bn,s=On;typeof r=="function"&&(n=r,r={});const o=(c,f)=>{n(c,f)};o.type=e;const a=t._chanMgr.add(o);if(a===-1){n(new Error("No free channels available"));return}switch(e){case"forwarded-tcpip":t._protocol.forwardedTcpip(a,i,s,r);break;case"x11":t._protocol.x11(a,i,s,r);break;case"forwarded-streamlocal@openssh.com":t._protocol.openssh_forwardedStreamLocal(a,i,s,r);break;default:throw new Error(`Unsupported channel type: ${e}`)}}function Kx(t,e){return t-e}rg.exports=Vr;rg.exports.IncomingClient=ng;const{createCipheriv:Wx,generateKeyPair:Gx,generateKeyPairSync:Vx,getCurves:Yx,randomBytes:yh}=Kn,{Ber:Ut}=Aa,zx=l0.pbkdf,{CIPHER_INFO:Xx}=hi(),Jx=16,Zx=16,e2=Yx(),t2=new Map(Object.entries(Xx));function Ah(t,e){if(typeof t!="string")throw new TypeError("Key type must be a string");const r={type:"spki",format:"der"},n={type:"pkcs8",format:"der"};switch(t.toLowerCase()){case"rsa":{if(typeof e!="object"||e===null)throw new TypeError("Missing options object for RSA key");const i=e.bits;if(!Number.isInteger(i))throw new TypeError("RSA bits must be an integer");if(i<=0||i>16384)throw new RangeError("RSA bits must be non-zero and <= 16384");return["rsa",{modulusLength:i,publicKeyEncoding:r,privateKeyEncoding:n}]}case"ecdsa":{if(typeof e!="object"||e===null)throw new TypeError("Missing options object for ECDSA key");if(!Number.isInteger(e.bits))throw new TypeError("ECDSA bits must be an integer");let i;switch(e.bits){case 256:i="prime256v1";break;case 384:i="secp384r1";break;case 521:i="secp521r1";break;default:throw new Error("ECDSA bits must be 256, 384, or 521")}if(!e2.includes(i))throw new Error("Unsupported ECDSA bits value");return["ec",{namedCurve:i,publicKeyEncoding:r,privateKeyEncoding:n}]}case"ed25519":return["ed25519",{publicKeyEncoding:r,privateKeyEncoding:n}];default:throw new Error(`Unsupported key type: ${t}`)}}function r2(t,e,r){switch(t){case"rsa":{let n=new Ut.Reader(r);if(n.readSequence(),n.readInt()!==0)throw new Error("Unsupported version in RSA private key");if(n.readSequence(),n.readOID()!=="1.2.840.113549.1.1.1")throw new Error("Bad RSA private OID");if(n.readByte()!==Ut.Null)throw new Error("Malformed RSA private key (expected null)");if(n.readByte()!==0)throw new Error("Malformed RSA private key (expected zero-length null)");if(n=new Ut.Reader(n.readString(Ut.OctetString,!0)),n.readSequence(),n.readInt()!==0)throw new Error("Unsupported version in RSA private key");const i=n.readString(Ut.Integer,!0),s=n.readString(Ut.Integer,!0),o=n.readString(Ut.Integer,!0),a=n.readString(Ut.Integer,!0),c=n.readString(Ut.Integer,!0);n.readString(Ut.Integer,!0),n.readString(Ut.Integer,!0);const f=n.readString(Ut.Integer,!0),u=Buffer.from("ssh-rsa"),l=Buffer.allocUnsafe(4+u.length+4+i.length+4+s.length+4+o.length+4+f.length+4+a.length+4+c.length);let h=0;l.writeUInt32BE(u.length,h+=0),l.set(u,h+=4),l.writeUInt32BE(i.length,h+=u.length),l.set(i,h+=4),l.writeUInt32BE(s.length,h+=i.length),l.set(s,h+=4),l.writeUInt32BE(o.length,h+=s.length),l.set(o,h+=4),l.writeUInt32BE(f.length,h+=o.length),l.set(f,h+=4),l.writeUInt32BE(a.length,h+=f.length),l.set(a,h+=4),l.writeUInt32BE(c.length,h+=a.length),l.set(c,h+=4);const d=Buffer.allocUnsafe(4+u.length+4+s.length+4+i.length);return h=0,d.writeUInt32BE(u.length,h+=0),d.set(u,h+=4),d.writeUInt32BE(s.length,h+=u.length),d.set(s,h+=4),d.writeUInt32BE(i.length,h+=s.length),d.set(i,h+=4),{sshName:u.toString(),priv:l,pub:d}}case"ec":{let n=new Ut.Reader(e);if(n.readSequence(),n.readSequence(),n.readOID()!=="1.2.840.10045.2.1")throw new Error("Bad ECDSA public OID");n.readOID();let i=n.readString(Ut.BitString,!0);{let h=0;for(;h<i.length&&i[h]===0;++h);h>0&&(i=i.slice(h))}if(n=new Ut.Reader(r),n.readSequence(),n.readInt()!==0)throw new Error("Unsupported version in ECDSA private key");if(n.readSequence(),n.readOID()!=="1.2.840.10045.2.1")throw new Error("Bad ECDSA private OID");const s=n.readOID();let o;switch(s){case"1.2.840.10045.3.1.7":o="nistp256";break;case"1.3.132.0.34":o="nistp384";break;case"1.3.132.0.35":o="nistp521";break;default:throw new Error("Unsupported curve in ECDSA private key")}if(n=new Ut.Reader(n.readString(Ut.OctetString,!0)),n.readSequence(),n.readInt()!==1)throw new Error("Unsupported version in ECDSA private key");const a=Buffer.concat([Buffer.from([0]),n.readString(Ut.OctetString,!0)]),c=Buffer.from(`ecdsa-sha2-${o}`);o=Buffer.from(o);const f=Buffer.allocUnsafe(4+c.length+4+o.length+4+i.length+4+a.length);let u=0;f.writeUInt32BE(c.length,u+=0),f.set(c,u+=4),f.writeUInt32BE(o.length,u+=c.length),f.set(o,u+=4),f.writeUInt32BE(i.length,u+=o.length),f.set(i,u+=4),f.writeUInt32BE(a.length,u+=i.length),f.set(a,u+=4);const l=Buffer.allocUnsafe(4+c.length+4+o.length+4+i.length);return u=0,l.writeUInt32BE(c.length,u+=0),l.set(c,u+=4),l.writeUInt32BE(o.length,u+=c.length),l.set(o,u+=4),l.writeUInt32BE(i.length,u+=o.length),l.set(i,u+=4),{sshName:c.toString(),priv:f,pub:l}}case"ed25519":{let n=new Ut.Reader(e);if(n.readSequence(),n.readSequence(),n.readOID()!=="1.3.101.112")throw new Error("Bad ED25519 public OID");let i=n.readString(Ut.BitString,!0);{let u=0;for(;u<i.length&&i[u]===0;++u);u>0&&(i=i.slice(u))}if(n=new Ut.Reader(r),n.readSequence(),n.readInt()!==0)throw new Error("Unsupported version in ED25519 private key");if(n.readSequence(),n.readOID()!=="1.3.101.112")throw new Error("Bad ED25519 private OID");n=new Ut.Reader(n.readString(Ut.OctetString,!0));const s=n.readString(Ut.OctetString,!0),o=Buffer.from("ssh-ed25519"),a=Buffer.allocUnsafe(4+o.length+4+i.length+4+(s.length+i.length));let c=0;a.writeUInt32BE(o.length,c+=0),a.set(o,c+=4),a.writeUInt32BE(i.length,c+=o.length),a.set(i,c+=4),a.writeUInt32BE(s.length+i.length,c+=i.length),a.set(s,c+=4),a.set(i,c+=s.length);const f=Buffer.allocUnsafe(4+o.length+4+i.length);return c=0,f.writeUInt32BE(o.length,c+=0),f.set(o,c+=4),f.writeUInt32BE(i.length,c+=o.length),f.set(i,c+=4),{sshName:o.toString(),priv:a,pub:f}}}}function bh(t,e,r,n){let i="new",s,o="";if(typeof n=="object"&&n!==null&&(typeof n.comment=="string"&&n.comment&&(o=n.comment),typeof n.format=="string"&&n.format&&(i=n.format),n.passphrase)){let a;if(typeof n.passphrase=="string")a=Buffer.from(n.passphrase);else if(Buffer.isBuffer(n.passphrase))a=n.passphrase;else throw new Error("Invalid passphrase");if(n.cipher===void 0)throw new Error("Missing cipher name");const c=t2.get(n.cipher);if(c===void 0)throw new Error("Invalid cipher name");if(i==="new"){let f=Zx;if(n.rounds!==void 0){if(!Number.isInteger(n.rounds))throw new TypeError("rounds must be an integer");n.rounds>0&&(f=n.rounds)}const u=Buffer.allocUnsafe(c.keyLen+c.ivLen),l=yh(Jx);if(zx(a,a.length,l,l.length,u,u.length,f)!==0)return new Error("Failed to generate information to encrypt key");const d=Buffer.allocUnsafe(4+l.length+4);{let m=0;d.writeUInt32BE(l.length,m+=0),d.set(l,m+=4),d.writeUInt32BE(f,m+=l.length)}s={cipher:c,cipherName:n.cipher,kdfName:"bcrypt",kdfOptions:d,key:u.slice(0,c.keyLen),iv:u.slice(c.keyLen)}}}switch(i){case"new":{let a=`-----BEGIN OPENSSH PRIVATE KEY-----
`,c;const f=Buffer.from(s?s.cipherName:"none"),u=Buffer.from(s?s.kdfName:"none"),l=s?s.kdfOptions:Buffer.alloc(0),h=s?s.cipher.blockLen:8,d=r2(t,e,r),m=yh(4),_=Buffer.from(o),y=8+d.priv.length+4+_.length;let E=[];for(let z=1;(y+E.length)%h;++z)E.push(z&255);E=Buffer.from(E);let I=Buffer.allocUnsafe(y+E.length),R;{let z=0;I.set(m,z+=0),I.set(m,z+=4),I.set(d.priv,z+=4),I.writeUInt32BE(_.length,z+=d.priv.length),I.set(_,z+=4),I.set(E,z+=_.length)}if(s){const z={authTagLength:s.cipher.authLen},X=Wx(s.cipher.sslName,s.key,s.iv,z);X.setAutoPadding(!1),I=Buffer.concat([X.update(I),X.final()]),s.cipher.authLen>0?R=X.getAuthTag():R=Buffer.alloc(0),s.key.fill(0),s.iv.fill(0)}else R=Buffer.alloc(0);const P=Buffer.from("openssh-key-v1\0"),Q=Buffer.allocUnsafe(P.length+4+f.length+4+u.length+4+l.length+4+4+d.pub.length+4+I.length+R.length);{let z=0;Q.set(P,z+=0),Q.writeUInt32BE(f.length,z+=P.length),Q.set(f,z+=4),Q.writeUInt32BE(u.length,z+=f.length),Q.set(u,z+=4),Q.writeUInt32BE(l.length,z+=u.length),Q.set(l,z+=4),Q.writeUInt32BE(1,z+=l.length),Q.writeUInt32BE(d.pub.length,z+=4),Q.set(d.pub,z+=4),Q.writeUInt32BE(I.length,z+=d.pub.length),Q.set(I,z+=4),Q.set(R,z+=I.length)}{const z=Q.base64Slice(0,Q.length);let X=z.replace(/.{64}/g,`$&
`);z.length&63&&(X+=`
`),a+=X}{const z=d.pub.base64Slice(0,d.pub.length);c=`${d.sshName} ${z}${o?` ${o}`:""}`}return a+=`-----END OPENSSH PRIVATE KEY-----
`,{private:a,public:c}}default:throw new Error("Invalid output key format")}}function n2(){}var i2={generateKeyPair:(t,e,r)=>{typeof e=="function"&&(r=e,e=void 0),typeof r!="function"&&(r=n2);const n=Ah(t,e);Gx(...n,(i,s,o)=>{if(i)return r(i);let a;try{a=bh(n[0],s,o,e)}catch(c){return r(c)}r(null,a)})},generateKeyPairSync:(t,e)=>{const r=Ah(t,e),{publicKey:n,privateKey:i}=Vx(...r);return bh(r[0],n,i,e)}};const{AgentProtocol:P2,BaseAgent:T2,createAgent:B2,CygwinAgent:O2,OpenSSHAgent:L2,PageantAgent:D2}=I0,{SSHTTPAgent:U2,SSHTTPSAgent:M2}=v0,{parseKey:F2}=pi,{flagsToString:H2,OPEN_MODE:j2,STATUS_CODE:Q2,stringToFlags:q2}=Sa;var s2={Client:tg,utils:{...i2}};class o2{constructor(){this.connected=!1,this.connecting=null,this.client=new s2.Client,this.client.on("error",e=>{console.error("SSH Client Global Error:",e),this.connected=!1,this.connecting=null})}async connect(e){if(!this.connected)return this.connecting?this.connecting:(this.connecting=new Promise((r,n)=>{const i={host:e.host,port:e.port,username:e.username,readyTimeout:1e4};if(e.privateKeyPath)try{i.privateKey=on.readFileSync(e.privateKeyPath)}catch(a){return this.connecting=null,n(new Error(`Falha ao ler chave privada: ${a.message}`))}else e.password&&(i.password=e.password);this.client.removeAllListeners("ready"),this.client.removeAllListeners("close"),this.client.removeAllListeners("end");const s=()=>{this.connected=!0,this.connecting=null,this.client.removeListener("error",o),r()},o=a=>{this.connected=!1,this.connecting=null,this.client.removeListener("ready",s),n(a)};this.client.once("ready",s),this.client.once("error",o),this.client.once("close",()=>{this.connected=!1,this.connecting=null});try{this.client.connect(i)}catch(a){this.connecting=null,n(a)}}),this.connecting)}async exec(e,r){if(!this.connected)throw new Error("Not connected");return new Promise((n,i)=>{this.client.exec(e,(s,o)=>{if(s)return i(s);o.on("close",(a,c)=>{a===0?n():i(new Error(`Command failed with code ${a}`))}).on("data",a=>{r&&r(a.toString())}).stderr.on("data",a=>{r&&r(a.toString())})})})}async uploadFile(e,r){if(!this.connected)throw new Error("Not connected");return new Promise((n,i)=>{this.client.sftp((s,o)=>{if(s)return i(s);o.fastPut(e,r,a=>{a?i(a):n()})})})}disconnect(){this.client.end(),this.connected=!1}}const gr=new o2;class a2{constructor(){this.swapFile="/temp_deploy_swap"}async deploy(e,r,n){const i=Pi.get("apps"),s=i[e],o=Pi.get("vps"),a=s.environments[r];if(!s)throw new Error(`App ${e} not found`);const{exec:c}=await import("node:child_process"),{exec:f}=await import("node:child_process"),{unlink:u}=await import("node:fs/promises"),l=await import("node:fs");try{n(` Iniciando deploy em ${r.toUpperCase()} para ${s.name}...\r
`),n(` Branch alvo: ${a.branch}\r
`),n(` Conectando  VPS...\r
`),await gr.connect(o);const h=a.remotePath;if(s.sourceType==="local"){n(` Comprimindo e enviando arquivos locais (Ambiente: ${r.toUpperCase()})...\r
`);let m=s.localPath;const _=`deploy_${e}.tar`,y=process.env.TEMP||process.env.TMP||"/tmp",E=Wt.join(y,_),I=`/tmp/${_}`,{exec:R}=await import("node:child_process"),P=`tar --force-local --exclude="node_modules" --exclude=".git" -cvf "${E}" -C "${m}" .`;await new Promise((X,M)=>{R(P,F=>{F?M(new Error(`Falha na compresso local: ${F.message}`)):X(!0)})}),n(` Transferindo arquivo para VPS...\r
`),await gr.uploadFile(E,I),n(` Extraindo arquivos no servidor...\r
`);const Q=`
          mkdir -p ${h}
          tar -xvf ${I} -C ${h}
          rm ${I}
        `;await gr.exec(Q,n);const{unlink:z}=await import("node:fs/promises");await z(E).catch(()=>{})}else{n(` Preparando repositrio Git na VPS (Branch: ${a.branch})...`);const m=s.repoUrl,_=a.branch,y=`
          if [ ! -d "${h}/.git" ]; then
            mkdir -p ${h}
            git clone -b ${_} ${m} ${h}
          else
            cd ${h} && git fetch origin ${_} && git checkout ${_} && git pull origin ${_}
          fi
        `;await gr.exec(y,n)}n(" Alocando swap temporrio (2GB) para estabilidade do build...");const d=`
        sudo fallocate -l 2G ${this.swapFile}
        sudo chmod 600 ${this.swapFile}
        sudo mkswap ${this.swapFile}
        sudo swapon ${this.swapFile}
      `;try{await gr.exec(d,n)}catch{n(" Falha ao configurar swap (isso pode ser normal se j existir ou sem permisso sudo). Continuando...")}if(s.buildLocation==="local"){n(` Estratgia de Build: LOCAL selecionada.\r
`),n(` Verificando se o Docker est rodando no seu PC...\r
`);const{exec:m}=await import("node:child_process");try{await new Promise((X,M)=>{m("docker info",F=>{F?M(new Error("Docker Desktop no encontrado ou no est rodando. Por favor, inicie o Docker para prosseguir com o build local.")):X(!0)})}),n(` Docker detectado localmente.\r
`)}catch(X){throw n(` ERRO: ${X.message}\r
`),X}n(" Iniciando build Docker LOCAL no seu PC...");const _=s.sourceType==="local"?s.localPath:Wt.join(process.env.TEMP||process.env.TMP||"/tmp",`repo_${e}_${r}`);if(s.sourceType==="github"){n(` Clonando branch ${a.branch} localmente para o build...`),l.existsSync(_)&&l.rmSync(_,{recursive:!0,force:!0});const{execSync:X}=await import("node:child_process");X(`git clone -b ${a.branch} ${s.repoUrl} ${_}`)}const y=[...Object.entries(a.envVars||{}),["APP_ENV",r],["NODE_ENV",r==="production"?"production":"development"]].map(([X,M])=>`--build-arg ${X}="${M}"`).join(" "),E=`deploy_${e.toLowerCase()}:${r}`,I=Wt.join(process.env.TEMP||process.env.TMP||"/tmp",`image_${e}.tar`),R=`/tmp/image_${e}.tar`;n(" Construindo imagem Docker..."),await new Promise((X,M)=>{m(`docker build ${y} -t ${E} "${_}"`,F=>{F?M(new Error(`Falha no build Docker local: ${F.message}`)):X(!0)})}),n(" Salvando imagem Docker para transferncia..."),await new Promise((X,M)=>{m(`docker save -o "${I}" ${E}`,F=>{F?M(new Error(`Falha ao salvar imagem Docker: ${F.message}`)):X(!0)})}),n(" Transferindo imagem para VPS (isso pode demorar dependendo do tamanho)..."),await gr.uploadFile(I,R),n(" Carregando imagem na VPS..."),await gr.exec(`docker load -i ${R} && rm ${R}`,n);const{unlink:P}=await import("node:fs/promises");await P(I).catch(()=>{});const Q=r==="production"?"app":"dev";n(` Subindo containers na VPS (${r} -> ${Q})...`);const z=`
          cd ${h}
          export IMAGE_TAG=${Q}
          export APP_ENV=${Q}
          export NODE_ENV=${r==="production"?"production":"development"}
          
          echo " Validando docker-compose.yml..."
          docker compose config > /dev/null || (echo " Erro: docker-compose.yml invlido no VPS" && exit 1)
          
          docker compose up -d --force-recreate
        `;await gr.exec(z,n)}else{const m=r==="production"?"app":"dev";n(` Estratgia de Build: REMOTA (VPS) selecionada (${r.toUpperCase()} -> ${m}).`),n(` Variveis de Ambiente: APP_ENV=${m}, NODE_ENV=${r==="production"?"production":"development"}`);const _=[...Object.entries(a.envVars||{}),["APP_ENV",m]].map(([I,R])=>`--build-arg ${I}="${R}"`).join(" "),y=Object.entries(a.envVars||{}).map(([I,R])=>`export ${I}="${R}"`).join(`
          `);n(" Iniciando build Docker no servidor...");const E=`
          cd ${h}
          export IMAGE_TAG=${m}
          export APP_ENV=${m}
          export NODE_ENV=${r==="production"?"production":"development"}
          ${y}
          
          echo " Validando docker-compose.yml..."
          docker compose config > /dev/null || (echo " Erro: docker-compose.yml invlido ou ausente no VPS" && exit 1)
          
          echo " Construindo imagem (${m})..."
          docker compose build ${_}
          
          echo " Subindo containers..."
          docker compose up -d --force-recreate
        `;await gr.exec(E,n)}n(` Deploy em ${r.toUpperCase()} concludo com sucesso!`),s.lastDeploy=new Date().toISOString(),s.lastEnv=r,s.status="running",Pi.set("apps",{...i,[e]:s})}catch(h){throw n(` ERRO NO DEPLOY: ${h.message}`),h}finally{n(` Limpando recursos temporrios...\r
`);const h=`
        sudo swapoff ${this.swapFile} 2>/dev/null || true
        sudo rm ${this.swapFile} 2>/dev/null || true
      `;try{await gr.exec(h,n)}catch{}gr.disconnect()}}}const c2=new a2;class cc{static async detect(e){const r=Wt.join(e,".env"),n=Wt.join(e,".env.example");let i="";if(on.existsSync(r))i=on.readFileSync(r,"utf8");else if(on.existsSync(n))i=on.readFileSync(n,"utf8");else return{};const s={},o=i.split(`
`);for(const a of o){const c=a.trim();if(!c||c.startsWith("#"))continue;const[f,...u]=c.split("=");f&&(s[f.trim()]=u.join("=").trim().replace(/^['"]|['"]$/g,""))}return s}static async getProjectInfo(e){const r=Wt.join(e,"package.json"),n=Wt.join(e,".git","config"),i=a=>a.split(/[_-]/).map(c=>c.charAt(0).toUpperCase()+c.slice(1)).join(" ");let s=i(Wt.basename(e));if(on.existsSync(r))try{const a=JSON.parse(on.readFileSync(r,"utf8")),c=Wt.basename(e).toLowerCase();a.name&&(c==="src"||c==="app"||c==="project")&&(s=i(a.name))}catch{}let o="";if(on.existsSync(n)){const c=on.readFileSync(n,"utf8").match(/\[remote "origin"\][\s\S]*?url = (.*)/);c&&(o=c[1].trim())}return{name:s,repoUrl:o}}}class f2{constructor(){this.queue=Promise.resolve()}async runSSHCommand(e){const r=this.queue.then(async()=>{const n=Pi.get("vps");if(!n||!n.host)throw new Error("VPS no configurada");try{return await gr.connect({host:n.host,port:Number(n.port)||22,username:n.username,password:n.password,privateKeyPath:n.privateKeyPath}),await e(gr)}finally{gr.disconnect()}});return this.queue=r.catch(()=>{}),r}async getVPSContainers(){return this.runSSHCommand(async e=>{let r="";return await e.exec(`docker ps -a --format '{"ID":"{{.ID}}", "Names":"{{.Names}}", "Image":"{{.Image}}", "Status":"{{.Status}}", "CreatedAt":"{{.CreatedAt}}", "Ports":"{{.Ports}}"}'`,i=>{r+=i}),r.trim().split(`
`).filter(i=>i.trim()).map(i=>{try{const s=JSON.parse(i);return{id:s.ID,names:s.Names,image:s.Image,status:s.Status,createdAt:s.CreatedAt,ports:s.Ports}}catch{return null}}).filter(i=>i!==null)})}async stopContainer(e){return this.runSSHCommand(async r=>{await r.exec(`docker stop ${e}`)})}async startContainer(e){return this.runSSHCommand(async r=>{await r.exec(`docker start ${e}`)})}async restartContainer(e){return this.runSSHCommand(async r=>{await r.exec(`docker restart ${e}`)})}async removeContainer(e){return this.runSSHCommand(async r=>{await r.exec(`docker rm -f ${e}`)})}async detectTraefik(){return this.runSSHCommand(async e=>{let r="",n="";await e.exec('docker ps --filter "name=traefik" --format "{{.Names}}"',s=>{r+=s}),await e.exec('docker network ls --format "{{.Name}}"',s=>{n+=s});const i=n.trim().split(`
`).filter(s=>s.includes("traefik")||s==="proxy"||s==="gateway"||s==="web");return{found:r.trim().length>0,containerName:r.trim().split(`
`)[0],networks:i}})}async getImages(){return this.runSSHCommand(async e=>{let r="";return await e.exec(`docker images --format '{"ID":"{{.ID}}", "Repo":"{{.Repository}}", "Tag":"{{.Tag}}", "Size":"{{.Size}}", "CreatedAt":"{{.CreatedAt}}"}'`,i=>r+=i),r.trim().split(`
`).filter(i=>i.trim()).map(i=>{try{const s=JSON.parse(i);return{id:s.ID,repo:s.Repo,tag:s.Tag,size:s.Size,createdAt:s.CreatedAt}}catch{return null}}).filter(i=>i!==null)})}async removeImage(e){return this.runSSHCommand(async r=>{await r.exec(`docker rmi -f ${e}`)})}async listFiles(e="."){return this.runSSHCommand(async r=>{let n="";const i=`ls -alhp --group-directories-first "${e}"`;return await r.exec(i,s=>n+=s),n.trim().split(`
`).slice(1).map(s=>{const o=s.split(/\s+/);if(o.length<9)return null;const a=o.slice(8).join(" ");return a==="./"||a==="../"?null:{name:a,size:o[4],isDir:a.endsWith("/"),modified:`${o[5]} ${o[6]} ${o[7]}`}}).filter(s=>s!==null)})}async deleteFile(e){return this.runSSHCommand(async r=>{await r.exec(`rm -rf "${e}"`)})}async uploadFile(e,r){return this.runSSHCommand(async n=>{await n.uploadFile(e,r)})}async downloadFile(e,r){return this.runSSHCommand(async n=>new Promise((i,s)=>{n.client.sftp((o,a)=>{if(o)return s(o);a.fastGet(e,r,c=>{c?s(c):i()})})}))}}const Tr=new f2,Yo=ft.app.isPackaged?ft.app.getAppPath():Wt.join(__dirname,".."),u2=Wt.join(Yo,"dist"),l2=Wt.join(Yo,"dist-electron");let as;function ig(){as=new ft.BrowserWindow({webPreferences:{preload:Wt.join(l2,"preload.js"),nodeIntegration:!1,contextIsolation:!0},titleBarStyle:"hidden",titleBarOverlay:{color:"#09090b",symbolColor:"#10b981",height:35},width:1200,height:800,backgroundColor:"#09090b"}),!ft.app.isPackaged&&process.env.VITE_DEV_SERVER_URL&&as.webContents.openDevTools(),!ft.app.isPackaged&&process.env.VITE_DEV_SERVER_URL?as.loadURL(process.env.VITE_DEV_SERVER_URL):as.loadFile(Wt.join(u2,"index.html")),as.webContents.on("did-fail-load",(t,e,r,n)=>{console.error(`Failed to load: ${n}`,r,e)})}function d2(){ft.ipcMain.handle("config:get",(t,e)=>Pi.get(e)),ft.ipcMain.handle("config:set",(t,e,r)=>Pi.set(e,r)),ft.ipcMain.handle("ssh:connect",async(t,e)=>gr.connect(e)),ft.ipcMain.handle("ssh:exec",async(t,e)=>gr.exec(e,r=>t.sender.send("terminal:data",r))),ft.ipcMain.handle("deploy:start",async(t,e,r)=>c2.deploy(e,r,n=>t.sender.send("terminal:data",n))),ft.ipcMain.handle("deploy:get-status",async()=>Tr.getVPSContainers()),ft.ipcMain.handle("deploy:stop-container",async(t,e)=>Tr.stopContainer(e)),ft.ipcMain.handle("deploy:start-container",async(t,e)=>Tr.startContainer(e)),ft.ipcMain.handle("deploy:restart-container",async(t,e)=>Tr.restartContainer(e)),ft.ipcMain.handle("deploy:remove-container",async(t,e)=>Tr.removeContainer(e)),ft.ipcMain.handle("deploy:detect-traefik",async()=>Tr.detectTraefik()),ft.ipcMain.handle("deploy:get-images",async()=>Tr.getImages()),ft.ipcMain.handle("deploy:remove-image",async(t,e)=>Tr.removeImage(e)),ft.ipcMain.handle("deploy:list-files",async(t,e)=>Tr.listFiles(e)),ft.ipcMain.handle("deploy:delete-file",async(t,e)=>Tr.deleteFile(e)),ft.ipcMain.handle("deploy:upload-file",async(t,e,r)=>Tr.uploadFile(e,r)),ft.ipcMain.handle("deploy:open-remote-file",async(t,e)=>{const r=Wt.join(ft.app.getPath("temp"),"fresta-remote-files");xn.existsSync(r)||xn.mkdirSync(r,{recursive:!0});const n=e.split("/").pop()||"file",i=Wt.join(r,`${Date.now()}-${n}`);return await Tr.downloadFile(e,i),await ft.shell.openPath(i),{success:!0,localPath:i}}),ft.ipcMain.handle("deploy:download-file-save-as",async(t,e)=>{const r=e.split("/").pop()||"file",{canceled:n,filePath:i}=await ft.dialog.showSaveDialog({defaultPath:r,title:"Salvar Arquivo"});return n||!i?{success:!1,canceled:!0}:(await Tr.downloadFile(e,i),{success:!0,filePath:i})}),ft.ipcMain.handle("dialog:selectFile",async()=>{const{canceled:t,filePaths:e}=await ft.dialog.showOpenDialog({properties:["openFile"]});return t?null:e[0]}),ft.ipcMain.handle("dialog:openDirectory",async()=>{const{canceled:t,filePaths:e}=await ft.dialog.showOpenDialog({properties:["openDirectory","createDirectory"]});return t?null:e[0]}),ft.ipcMain.handle("ssh:detectLocalKeys",async()=>{const t=Wt.join($a.homedir(),".ssh");return xn.existsSync(t)?xn.readdirSync(t).filter(n=>!n.endsWith(".pub")&&(n.startsWith("id_")||n.endsWith(".pem")||n.endsWith(".ppk"))).map(n=>({name:n,path:Wt.join(t,n)})):[]}),ft.ipcMain.handle("ssh:generateKey",async(t,{email:e})=>{const r=Wt.join($a.homedir(),".ssh","id_fresta_ed25519"),n=e||"fresta-deploy";try{if(xn.existsSync(r))throw new Error("Chave j existe.");const i=Wt.join($a.homedir(),".ssh");xn.existsSync(i)||xn.mkdirSync(i,{recursive:!0});const{exec:s}=require("node:child_process"),{promisify:o}=require("node:util");return await o(s)(`ssh-keygen -t ed25519 -C "${n}" -f "${r}" -N ""`),{success:!0,path:r,publicKey:xn.readFileSync(`${r}.pub`,"utf-8")}}catch(i){return{success:!1,error:i.message}}}),ft.ipcMain.handle("env:detect",async(t,e)=>{const r=e||Wt.join(Yo,"..","..");return cc.detect(r)}),ft.ipcMain.handle("project:detect",async(t,e)=>{const r=e||Wt.join(Yo,"..",".."),n=await cc.getProjectInfo(r),i=await cc.detect(r);return{...n,envVars:i,path:r}})}ft.app.whenReady().then(()=>{d2(),ig()});ft.app.on("window-all-closed",()=>{process.platform!=="darwin"&&ft.app.quit()});ft.app.on("activate",()=>{ft.BrowserWindow.getAllWindows().length===0&&ig()});
